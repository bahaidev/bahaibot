function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(){n=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,o){var a=new RegExp(e,n);return t.set(a,o||t.get(e)),c(a,r.prototype)}function o(e,r){var n=t.get(r);return Object.keys(n).reduce(function(t,r){var o=n[r];if("number"==typeof o)t[r]=e[o];else{for(var a=0;void 0===e[o[a]]&&a+1<o.length;)a++;t[r]=e[o[a]]}return t},Object.create(null))}return l(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=o(r,this);var n=r.indices;n&&(n.groups=o(n,this))}return r},r.prototype[Symbol.replace]=function(r,n){if("string"==typeof n){var a=t.get(this);return e[Symbol.replace].call(this,r,n.replace(/\$<([^>]+)>/g,function(e,t){var r=a[t];return"$"+(Array.isArray(r)?r.join("$"):r)}))}if("function"==typeof n){var i=this;return e[Symbol.replace].call(this,r,function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(o(e,i)),n.apply(this,e)})}return e[Symbol.replace].call(this,r,n)},n.apply(this,arguments)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function i(e,t,r){return t&&a(e.prototype,t),r&&a(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=u(e);if(t){var o=u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return p(this,r)}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,i,s=[],l=!0,u=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){u=!0,o=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(u)throw o}}return s}}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var b=globalThis.jsonExtra,v=function(e){return e.replace(/\\+/g,function(e){return e.slice(0,e.length/2)})},w=function(e){return b.parse("{"+(e||"").replace(/^\{/,"").replace(/\}$/,"")+"}")},k=function(e,t,r){var n,o=r.onMatch,a=r.extra,i=r.betweenMatches,s=r.afterMatch,l=r.escapeAtOne,u=0;if(a&&(i=a,s=a,l=a),!i||!s)throw new Error("You must have `extra` or `betweenMatches` and `afterMatch` arguments.");for(;null!==(n=e.exec(t));){var c=f(n,2),p=c[0],h=c[1],d=e.lastIndex,m=d-p.length;m>u&&i(t.slice(u,m)),l&&h.length%2?(u=d,l(p)):(o.apply(void 0,g(n)),u=d)}u!==t.length&&s(t.slice(u))},T="undefined"!=typeof fetch?fetch:null,O=function(){return T},A="undefined"!=typeof document?document:null,S=function(){return A};var E=function(e,t,r){return t.sort(new Intl.Collator(e,r).compare)},q=function(e,t,r){return new Intl.ListFormat(e,r).format(t)},D=function(e,t,r,n,o){if("function"!=typeof r)return function(e,t,r,n){return E(e,t,n),q(e,t,r)}(e,t,r,n);E(e,t,o);var a=function(){var e=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=Math.trunc((e+16*Math.random())%16);return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)})}(),i=g(t).map(function(e,t){return"<<".concat(a).concat(t,">>")}),s=[],l=function(e){s.push(e)};k(new RegExp("<<".concat(a,"(\\d)>>"),"gu"),q(e,i,n),{betweenMatches:l,afterMatch:l,onMatch:function(e,n){l(r(t[Number(n)],Number(n)))}});var u=S().createDocumentFragment();return u.append.apply(u,s),u},R=function(e){var t=e.object;if(Array.isArray(t)){if("function"==typeof t[1]){var r=f(t,4);return{value:r[0],callback:r[1],options:r[2],extraOpts:r[3]}}var n=f(t,3);return{value:n[0],options:n[1],extraOpts:n[2]}}return{value:t}},x=function(e){var n=e.value,o=e.arg;e.key;var a,i=e.locale;if("string"==typeof n||n&&"object"===r(n)&&"nodeType"in n)return n;var s=function(e){var r=e.type,n=e.options,i=void 0===n?a:n,s=e.checkArgOptions,l=void 0!==s&&s;if("string"==typeof o){var u=f(o.split("|"),3),c=u[0],p=u[1],h=u[2];"DATE"===c&&(c="DATETIME"),c===r&&(p?l&&!h||(i=t(t({},i),w(l&&h?h:p))):i={})}return i},l=!1;if(n&&"object"===r(n)&&!Array.isArray(n)){var u=Object.keys(n)[0];if(["number","date","datetime","dateRange","datetimeRange","relative","region","language","script","currency","list","plural"].includes(u)){var c,p,h=n[u],d=R({object:h});switch(n=d.value,a=d.options,c=d.extraOpts,p=d.callback,u){case"date":case"datetime":l=!0;break;case"dateRange":case"datetimeRange":var m=new Intl.DateTimeFormat(i,s({type:"DATERANGE",options:c}));return m.formatRange.apply(m,g([n,a].map(function(e){return"number"==typeof e?new Date(e):e})));case"region":case"language":case"script":case"currency":return new Intl.DisplayNames(i,t(t({},s({type:u.toUpperCase()})),{},{type:u})).of(n);case"relative":var y=[a,c];return c=y[0],a=y[1],new Intl.RelativeTimeFormat(i,s({type:"RELATIVE"})).format(n,c);case"list":return p?D(i,n,p,s({type:"LIST"}),s({type:"LIST",options:c,checkArgOptions:!0})):D(i,n,s({type:"LIST"}),s({type:"LIST",options:c,checkArgOptions:!0}))}}}if(n&&("number"==typeof n&&(l||/^DATE(?:TIME)(?:\||$)/.test(o))&&(n=new Date(n)),"object"===r(n)&&"getTime"in n&&"function"==typeof n.getTime))return new Intl.DateTimeFormat(i,s({type:"DATETIME"})).format(n);if(Array.isArray(n)){var b,v=n[2];return(b=new Intl.DateTimeFormat(i,s({type:"DATERANGE",options:v}))).formatRange.apply(b,g(n.slice(0,2).map(function(e){return"number"==typeof e?new Date(e):e})))}if("number"==typeof n)return new Intl.NumberFormat(i,s({type:"NUMBER"})).format(n);throw new TypeError("Unknown formatter")},I=i(function e(){o(this,e)}),N=function(e){var t=e.key,r=e.body,n=e.type,o=e.messageStyle,a=U({messageStyle:void 0===o?"richNested":o})({body:r},t);if(!a)throw new Error("Key value not found for ".concat(n," key: (").concat(t,")"));return a.value},$=function(){l(t,I);var e=h(t);function t(r){var n;return o(this,t),(n=e.call(this)).locals=r,n}return i(t,[{key:"getSubstitution",value:function(e){return N({key:e.slice(1),body:this.locals,type:"local"})}},{key:"isMatch",value:function(e){var t=e.slice(1).split("."),r=this.locals;return this.constructor.isMatchingKey(e)&&t.every(function(e){var t=e in r;return r=r[e],t})}}],[{key:"isMatchingKey",value:function(e){return e.startsWith("-")}}]),t}(),j=function(){l(t,I);var e=h(t);function t(r){var n;return o(this,t),(n=e.call(this)).substitutions=r,n}return i(t,[{key:"isMatch",value:function(e){return this.constructor.isMatchingKey(e)&&e in this.substitutions}}],[{key:"isMatchingKey",value:function(e){return/^[0-9A-Z_a-z]/.test(e)}}]),t}(),F=function(){l(n,I);var e=h(n);function n(t,r){var a,i=r.substitutions;return o(this,n),(a=e.call(this)).switches=t,a.substitutions=i,a}return i(n,[{key:"getSubstitution",value:function(e,n){var o,a,i=n.locale,s=n.usedKeys,l=n.arg,u=n.missingSuppliedFormatters,c=this.constructor.getKey(e).slice(1),p=f(this.getMatch(c),3),h=p[0],g=p[1],d=p[2];if(s.push(d),h&&h.includes("|")){var m=f(h.split("|"),3);o=m[1],a=m[2]}if(!g)return u({key:e,formatter:this}),"\\{"+e+"}";var y=function(e,r){var n=w(a);return new Intl.NumberFormat(i,t(t({},r),n)).format(e)},b=function(e,r){var n=w(a);return new Intl.PluralRules(i,t(t({},r),n)).select(e)},v=this.substitutions[d],k=v;if("number"==typeof v)switch(o){case"NUMBER":k=y(v);break;case"PLURAL":k=b(v);break;default:k=new Intl.PluralRules(i).select(v)}else if(v&&"object"===r(v)){var T=Object.keys(v)[0];if(["number","plural"].includes(T)){var O=R({object:v[T]}),A=O.value,S=O.options;if(o||(o=T.toUpperCase()),!(T.toUpperCase()===o))throw new TypeError('Expecting type "'.concat(o.toLowerCase(),'"; instead found "').concat(T,'".'));switch(o){case"NUMBER":k=y(A,S);break;case"PLURAL":k=b(A,S)}}}var E="richNested",q=function(e){return e.replace(/\\/g,"\\\\").replace(/\./g,"\\.")};try{return N({messageStyle:E,key:k?q(k):l,body:g,type:"switch"})}catch(e){try{return N({messageStyle:E,key:"*"+q(k),body:g,type:"switch"})}catch(e){var D=Object.keys(g).find(function(e){return e.startsWith("*")});if(!D)throw new Error("No defaults found for switch ".concat(c));return N({messageStyle:E,key:q(D),body:g,type:"switch"})}}}},{key:"isMatch",value:function(e){return Boolean(e&&this.constructor.isMatchingKey(e)&&this.getMatch(e.slice(1)).length)}},{key:"getMatch",value:function(e){var t=this,r=e.split(".");return r.reduce(function(n,o,a){if(a<r.length-1){if(!(o in n))throw new Error('Switch key "'.concat(o,'" not found (from "~').concat(e,'")'));return n[o]}var i=Object.entries(n).find(function(e){var r=f(e,1)[0];return o===t.constructor.getKey(r)});return i?[].concat(g(i),[o]):[]},this.switches)}}],[{key:"isMatchingKey",value:function(e){return e.startsWith("~")}},{key:"getKey",value:function(e){var t=e.match(/^(?:[\0-\{\}-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*/);return t&&t[0]}}]),n}();function L(e,t,r){if(!e.s){if(r instanceof B){if(!r.s)return void(r.o=L.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(L.bind(null,e,t),L.bind(null,e,2));e.s=t,e.v=r;var n=e.o;n&&n(e)}}var B=function(){function e(){}return e.prototype.then=function(t,r){var n=new e,o=this.s;if(o){var a=1&o?t:r;if(a){try{L(n,1,a(this.v))}catch(e){L(n,2,e)}return n}return this}return this.o=function(e){try{var o=e.v;1&e.s?L(n,1,t?t(o):o):r?L(n,1,r(o)):L(n,2,o)}catch(e){L(n,2,e)}},n},e}();function _(e){return e instanceof B&&1&e.s}var C=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Reached end of values array.";if(!Array.isArray(e))throw new TypeError("The `values` argument to `promiseChainForValues` must be an array.");if("function"!=typeof t)throw new TypeError("The `errBack` argument to `promiseChainForValues` must be a function.");return function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){var n,o,a,i,s=!1,l=Promise.reject(new Error("Intentionally reject so as to begin checking chain"));return a=function(e,t,r){for(var n;;){var o=e();if(_(o)&&(o=o.v),!o)return a;if(o.then){n=0;break}var a=r();if(a&&a.then){if(!_(a)){n=1;break}a=a.s}}var i=new B,s=L.bind(null,i,2);return(0===n?o.then(u):1===n?a.then(l):(void 0).then(function(){(o=e())?o.then?o.then(u).then(void 0,s):u(o):L(i,1,a)})).then(void 0,s),i;function l(t){a=t;do{if(!(o=e())||_(o)&&!o.v)return void L(i,1,a);if(o.then)return void o.then(u).then(void 0,s);_(a=r())&&(a=a.v)}while(!a||!a.then);a.then(l).then(void 0,s)}function u(e){e?(a=r())&&a.then?a.then(l).then(void 0,s):l(a):L(i,1,a)}}(function(){return!s},0,function(){var a=e.shift();return function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(function(){return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(l,function(e){n=e,s=!0})},function(){if(o)throw new Error(r);e.length||(o=!0),l=t(a)})}),i=function(e){return n},a&&a.then?a.then(i):i(a)})()},P=function(e,t){if("string"!=typeof e)throw new TypeError("`defaultLocaleResolver` expects a string `localesBasePath`.");if("string"!=typeof t)throw new TypeError("`defaultLocaleResolver` expects a string `locale`.");if(/[\.\/\\]/.test(t))throw new TypeError("Locales cannot use file-reserved characters, `.`, `/` or `\\`");return"".concat(e.replace(/\/$/,""),"/_locales/").concat(t,"/messages.json")},M=function(e){var n=e.string,o=e.dom,a=e.usedKeys,i=e.substitutions,s=e.allSubstitutions,l=e.locale,u=e.locals,c=e.switches,p=e.maximumLocalNestingDepth,h=void 0===p?3:p,d=e.missingSuppliedFormatters,m=e.checkExtraSuppliedFormatters;if("number"!=typeof h)throw new TypeError("`maximumLocalNestingDepth` must be a number.");var y=function(){Object.entries(i).forEach(function(e){var t=f(e,2),r=t[0];"function"==typeof t[1]&&a.push(r)})};y();var b=new $(u),T=new j(i),O=new F(c,{substitutions:i}),A=/(\\*)\{((?:(?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\\})*?)(?:(\|)((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g;s&&(s=Array.isArray(s)?s:[s]);var S=function(e){var t,r=e.key,n=e.arg,o=e.substs;return b.constructor.isMatchingKey(r)?t=b.getSubstitution(r):O.constructor.isMatchingKey(r)?t=O.getSubstitution(r,{locale:l,usedKeys:a,arg:n,missingSuppliedFormatters:d}):"function"==typeof(t=o[r])&&(t=t({arg:n,key:r})),s?t=s.reduce(function(e,t){return t({value:e,arg:n,key:r,locale:l})},t):n&&/^(?:NUMBER|DATE(?:TIME|RANGE|TIMERANGE)?|REGION|LANGUAGE|SCRIPT|CURRENCY|RELATIVE|LIST)(?:\||$)/.test(n)&&(t=x({value:t,arg:n,key:r,locale:l})),t},E=1,q=function(e){var r=e.substitution,n=e.ky,o=e.arg,a=e.processSubsts,s=r;if("string"==typeof r&&r.includes("{")){if(E++>h)throw new TypeError("Too much recursion in local variables.");if(b.constructor.isMatchingKey(n)){var l,u=i;o&&(l=w(o),u=t(t({},i),l)),s=a({str:r,substs:u,formatter:b}),l&&m({substitutions:l})}else O.constructor.isMatchingKey(n)&&(s=a({str:r}))}return s};if(!o){var D=!1,R=function e(t){var n=t.str,o=t.substs,s=void 0===o?i:o,l=t.formatter,u=void 0===l?T:l;return n.replace(A,function(t,n,o,i,l){if(n.length%2)return t;if(d({key:o,formatter:u}))return t;var c=S({key:o,arg:l,substs:s});return c=q({substitution:c,ky:o,arg:l,processSubsts:e}),D=D||null!==c&&"object"===r(c)&&"nodeType"in c,a.push(o),n+c})}({str:n});if(!D)return m({substitutions:i}),a.length=0,y(),v(R);a.length=0,y()}E=1;var I=function e(t){var n=t.str,o=t.substs,s=void 0===o?i:o,l=t.formatter,u=void 0===l?T:l,c=[],p=new RegExp(A,"gu"),h=function(){c.push.apply(c,arguments)};return k(p,n,{extra:h,onMatch:function(t,n,o,i,l){if(d({key:o,formatter:u}))h(t);else{n.length&&h(n);var c=S({key:o,arg:l,substs:s});c=q({substitution:c,ky:o,arg:l,processSubsts:e}),Array.isArray(c)?h.apply(void 0,g(c)):c&&"object"===r(c)&&"nodeType"in c?h(c.cloneNode(!0)):h(c)}a.push(o)}}),c}({str:n});return m({substitutions:i}),a.length=0,I.map(function(e){return"string"==typeof e?v(e):e})};function H(e,t){if(Array.isArray(e)&&e.every(function(e){return"string"==typeof e})&&"string"==typeof t&&t.endsWith("Nested"))return e.map(function(e){return e.replace(n(/(\\+)/g,{backslashes:1}),"\\$<backslashes>").replace(/\./g,"\\.")}).join(".");if("string"!=typeof e)throw new TypeError("`key` is expected to be a string (or array of strings for nested style)");return e}var U=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).messageStyle,t=void 0===e?"richNested":e;return"function"==typeof t?t:"richNested"===t?function(e,t){var n=e&&"object"===r(e)&&e.body,o=[],a=function(e){o.length||(o[0]=""),o[o.length-1]+=e};k(/(\\*)\./g,t,{extra:a,onMatch:function(e,t){a(t),o.push("")}});var i=o.map(function(e){return v(e)}),s=!1,l=n;return i.some(function(e,t,n){return!l||"object"!==r(l)||(t===n.length-1&&e in l&&l[e]&&"object"===r(l[e])&&"message"in l[e]&&"string"==typeof l[e].message&&(s={value:l[e].message,info:l[e]}),l=l[e],!1)}),s}:"rich"===t?function(e,t){var n=e&&"object"===r(e)&&e.body;return!!(n&&"object"===r(n)&&t in n&&n[t]&&"object"===r(n[t])&&"message"in n[t]&&"string"==typeof n[t].message)&&{value:n[t].message,info:n[t]}}:"plain"===t?function(e,t){var n=e&&"object"===r(e)&&e.body;return!!(n&&"object"===r(n)&&t in n&&n[t]&&"string"==typeof n[t])&&{value:n[t]}}:"plainNested"===t?function(e,t){var n=e&&"object"===r(e)&&e.body;if(n&&"object"===r(n)){var o=t.split(/(?<!\\)\./).reduce(function(e,t){return e&&"object"===r(e)&&e[t]?e[t]:null},n);if(o&&"string"==typeof o)return{value:o}}return!1}:function(){throw new TypeError("Unknown `messageStyle` ".concat(t))}()};function W(e,t,r){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}function V(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var G=function(e){if(!e.includes("-"))throw new Error("Locale not available");return e.replace(/\x2D(?:[\0-,\.-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locales,r=e.defaultLocales,n=e.localeResolver,o=e.localesBasePath,a=e.localeMatcher;return J({locales:t,defaultLocales:r,localeResolver:n,localesBasePath:o,localeMatcher:a})},J=V(function(e){var t=V(function(e){if("string"!=typeof e)throw new TypeError("Non-string locale type");var r=s(u,e);if("string"!=typeof r)throw new TypeError("`localeResolver` expected to resolve to (URL) string.");return function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(function(){var t=O();return W(f?t(r,{method:"HEAD"}):t(r),function(t){if(404===t.status)throw new Error("Trying again");return f?e:W(t.json(),function(t){return{locale:e,strings:t}})})},function(r){if("SyntaxError"===r.name)throw r;return W(p(e),t)})}),r=e.locales,n=void 0===r?"undefined"!=typeof intlDomLocale?[intlDomLocale]:"undefined"==typeof navigator?[]:navigator.languages:r,o=e.defaultLocales,a=void 0===o?["en-US"]:o,i=e.localeResolver,s=void 0===i?P:i,l=e.localesBasePath,u=void 0===l?".":l,c=e.localeMatcher,p=void 0===c?"lookup":c,h=e.headOnly,f=void 0!==h&&h;if("lookup"===p)p=G;else if("function"!=typeof p)throw new TypeError('`localeMatcher` must be "lookup" or a function!');return C([].concat(g(n),g(a)),t,"No matching locale found for "+[].concat(g(n),g(a)).join(", "))});function K(e,t,r){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}var Z,Y,Q=function(e){var n=e.strings,o=e.resolvedLocale,a=e.messageStyle,i=void 0===a?"richNested":a,s=e.allSubstitutions,l=e.insertNodes,u=e.keyCheckerConverter,c=void 0===u?H:u,p=e.defaults,h=e.substitutions,f=e.dom,d=void 0!==f&&f,m=e.forceNodeReturn,y=void 0!==m&&m,b=e.throwOnMissingSuppliedFormatters,v=void 0===b||b,w=e.throwOnExtraSuppliedFormatters,k=void 0===w||w;if(!n||"object"!==r(n))throw new TypeError("Locale strings must be an object!");var T=U({messageStyle:i}),O=function(e,a){var u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},f=u.allSubstitutions,m=void 0===f?s:f,b=u.defaults,w=void 0===b?p:b,O=u.dom,A=void 0===O?d:O,E=u.forceNodeReturn,q=void 0===E?y:E,D=u.throwOnMissingSuppliedFormatters,R=void 0===D?v:D,I=u.throwOnExtraSuppliedFormatters,N=void 0===I?k:I;e=c(e,i);var $=T(n,e),j=function(e){var t,n=e.message,o=e.defaults,a=e.messageStyle,i=e.messageForKey,s=void 0===i?U({messageStyle:a}):i,l=e.key;if("string"==typeof n)t=n;else if(!1===o||null==o)t=!1;else{if(!o||"object"!==r(o))throw new TypeError("Default locale strings must resolve to `false`, nullish, or an object!");var u=s(o,l);t=u?u.value:u}if(!1===t)throw new Error("Key value not found for key: (".concat(l,")"));return t}({message:!(!$||"string"!=typeof $.value)&&$.value,defaults:w,messageForKey:T,key:e});return function(e){var t=e.string,r=e.locale,n=e.locals,o=e.switches,a=e.allSubstitutions,i=void 0===a?[x]:a,s=e.insertNodes,l=void 0===s?M:s,u=e.substitutions,c=void 0!==u&&u,p=e.dom,h=void 0!==p&&p,f=e.forceNodeReturn,d=void 0!==f&&f,m=e.throwOnMissingSuppliedFormatters,y=void 0===m||m,b=e.throwOnExtraSuppliedFormatters,v=void 0===b||b;if("string"!=typeof t)throw new TypeError("An options object with a `string` property set to a string must be provided for `getDOMForLocaleString`.");var w=function(e){var t=S();return d?t.createTextNode(e):e},k=[];if(!c&&!i&&!y)return w(t);c||(c={});var T=l({string:t,dom:h,usedKeys:k,substitutions:c,allSubstitutions:i,locale:r,locals:n,switches:o,missingSuppliedFormatters:function(e){var t=e.key,r=e.formatter,n=r.isMatch(t);if(r.constructor.isMatchingKey(t)&&!n){if(y)throw new Error("Missing formatting key: ".concat(t));return!0}return!1},checkExtraSuppliedFormatters:function(e){var t=e.substitutions;v&&Object.keys(t).forEach(function(e){if(!k.includes(e))throw new Error("Extra formatting key: ".concat(e))})}});if("string"==typeof T)return w(T);var O=S().createDocumentFragment();return O.append.apply(O,g(T)),O}({string:j,locals:n.head&&n.head.locals,switches:n.head&&n.head.switches,locale:o,allSubstitutions:m,insertNodes:l,substitutions:t(t({},h),a),dom:A,forceNodeReturn:q,throwOnMissingSuppliedFormatters:R,throwOnExtraSuppliedFormatters:N})};return O.resolvedLocale=o,O.strings=n,O.sort=function(e,t){return E(o,e,t)},O.sortList=function(e,t,r,n){return D(o,e,t,r,n)},O.list=function(e,t){return q(o,e,t)},O},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locales,r=e.defaultLocales,n=e.localeStringFinder,o=void 0===n?z:n,a=e.localesBasePath,i=e.localeResolver,s=e.localeMatcher,l=e.messageStyle,u=e.allSubstitutions,c=e.insertNodes,p=e.keyCheckerConverter,h=e.defaults,f=e.substitutions,g=e.maximumLocalNestingDepth,d=e.dom,m=e.forceNodeReturn,y=e.throwOnMissingSuppliedFormatters,b=e.throwOnExtraSuppliedFormatters;try{return K(o({locales:t,defaultLocales:r,localeResolver:i,localesBasePath:a,localeMatcher:s}),function(e){var t,n,v=e.strings,w=e.locale;return t=function(){return Q({strings:v,resolvedLocale:w,messageStyle:l,allSubstitutions:u,insertNodes:c,keyCheckerConverter:p,defaults:h,substitutions:f,maximumLocalNestingDepth:g,dom:d,forceNodeReturn:m,throwOnMissingSuppliedFormatters:y,throwOnExtraSuppliedFormatters:b})},(n=function(){if(!h&&r)return K(o({locales:r,defaultLocales:[],localeResolver:i,localesBasePath:a,localeMatcher:s}),function(e){h=e.strings,e.locale===w&&(h=null)})}())&&n.then?n.then(t):t(n)})}catch(e){return Promise.reject(e)}};function ee(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function te(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){var r=!1;try{r=this instanceof e}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}var re=ee(function(){if(Y)return Z;function e(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}return Y=1,Z=function(t){if((t=t||{}).circles)return function(t){const r=[],n=[],o=new Map;if(o.set(Date,e=>new Date(e)),o.set(Map,(e,t)=>new Map(i(Array.from(e),t))),o.set(Set,(e,t)=>new Set(i(Array.from(e),t))),t.constructorHandlers)for(const e of t.constructorHandlers)o.set(e[0],e[1]);let a=null;return t.proto?l:s;function i(t,i){const s=Object.keys(t),l=new Array(s.length);for(let u=0;u<s.length;u++){const c=s[u],p=t[c];if("object"!=typeof p||null===p)l[c]=p;else if(p.constructor!==Object&&(a=o.get(p.constructor)))l[c]=a(p,i);else if(ArrayBuffer.isView(p))l[c]=e(p);else{const e=r.indexOf(p);l[c]=-1!==e?n[e]:i(p)}}return l}function s(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return i(t,s);if(t.constructor!==Object&&(a=o.get(t.constructor)))return a(t,s);const l={};r.push(t),n.push(l);for(const i in t){if(!1===Object.hasOwnProperty.call(t,i))continue;const u=t[i];if("object"!=typeof u||null===u)l[i]=u;else if(u.constructor!==Object&&(a=o.get(u.constructor)))l[i]=a(u,s);else if(ArrayBuffer.isView(u))l[i]=e(u);else{const e=r.indexOf(u);l[i]=-1!==e?n[e]:s(u)}}return r.pop(),n.pop(),l}function l(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return i(t,l);if(t.constructor!==Object&&(a=o.get(t.constructor)))return a(t,l);const s={};r.push(t),n.push(s);for(const i in t){const u=t[i];if("object"!=typeof u||null===u)s[i]=u;else if(u.constructor!==Object&&(a=o.get(u.constructor)))s[i]=a(u,l);else if(ArrayBuffer.isView(u))s[i]=e(u);else{const e=r.indexOf(u);s[i]=-1!==e?n[e]:l(u)}}return r.pop(),n.pop(),s}}(t);const r=new Map;if(r.set(Date,e=>new Date(e)),r.set(Map,(e,t)=>new Map(o(Array.from(e),t))),r.set(Set,(e,t)=>new Set(o(Array.from(e),t))),t.constructorHandlers)for(const e of t.constructorHandlers)r.set(e[0],e[1]);let n=null;return t.proto?function t(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return o(a,t);if(a.constructor!==Object&&(n=r.get(a.constructor)))return n(a,t);const i={};for(const o in a){const s=a[o];"object"!=typeof s||null===s?i[o]=s:s.constructor!==Object&&(n=r.get(s.constructor))?i[o]=n(s,t):ArrayBuffer.isView(s)?i[o]=e(s):i[o]=t(s)}return i}:function t(a){if("object"!=typeof a||null===a)return a;if(Array.isArray(a))return o(a,t);if(a.constructor!==Object&&(n=r.get(a.constructor)))return n(a,t);const i={};for(const o in a){if(!1===Object.hasOwnProperty.call(a,o))continue;const s=a[o];"object"!=typeof s||null===s?i[o]=s:s.constructor!==Object&&(n=r.get(s.constructor))?i[o]=n(s,t):ArrayBuffer.isView(s)?i[o]=e(s):i[o]=t(s)}return i};function o(t,o){const a=Object.keys(t),i=new Array(a.length);for(let s=0;s<a.length;s++){const l=a[s],u=t[l];"object"!=typeof u||null===u?i[l]=u:u.constructor!==Object&&(n=r.get(u.constructor))?i[l]=n(u,o):ArrayBuffer.isView(u)?i[l]=e(u):i[l]=o(u)}return i}}}());function ne(e){if(null==e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&!(Symbol.toStringTag in e))}function oe(e){return"string"==typeof e}function ae(e){return Number.isSafeInteger(e)&&e>=0}function ie(e){return null!=e}function se(e,t){return ne(e)&&oe(t)&&t in e}
/**
 * @name codsen-utils
 * @fileoverview Various utility functions
 * @version 1.7.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/codsen-utils/}
 */
re();var le="object"==typeof global&&global&&global.Object===Object&&global,ue="object"==typeof self&&self&&self.Object===Object&&self,ce=le||ue||Function("return this")(),pe=ce.Symbol,he=Object.prototype,fe=he.hasOwnProperty,ge=he.toString,de=pe?pe.toStringTag:void 0;var me=Object.prototype.toString;var ye=pe?pe.toStringTag:void 0;function be(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ye&&ye in Object(e)?function(e){var t=fe.call(e,de),r=e[de];try{e[de]=void 0;var n=!0}catch(e){}var o=ge.call(e);return n&&(t?e[de]=r:delete e[de]),o}(e):function(e){return me.call(e)}(e)}function ve(e){return null!=e&&"object"==typeof e}var we=Array.isArray,ke=pe?pe.prototype:void 0,Te=ke?ke.toString:void 0;function Oe(e){if("string"==typeof e)return e;if(we(e))return function(e,t){for(var r=-1,n=null==e?0:e.length,o=Array(n);++r<n;)o[r]=t(e[r],r,e);return o}(e,Oe)+"";if(function(e){return"symbol"==typeof e||ve(e)&&"[object Symbol]"==be(e)}(e))return Te?Te.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var Ae=/\s/;var Se=/^\s+/;function Ee(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Ae.test(e.charAt(t)););return t}(e)+1).replace(Se,""):e}function qe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function De(e){return e}function Re(e){if(!qe(e))return!1;var t=be(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var xe,Ie=ce["__core-js_shared__"],Ne=(xe=/[^.]+$/.exec(Ie&&Ie.keys&&Ie.keys.IE_PROTO||""))?"Symbol(src)_1."+xe:"";var $e=Function.prototype.toString;var je=/^\[object .+?Constructor\]$/,Fe=Function.prototype,Le=Object.prototype,Be=Fe.toString,_e=Le.hasOwnProperty,Ce=RegExp("^"+Be.call(_e).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Pe(e){return!(!qe(e)||(t=e,Ne&&Ne in t))&&(Re(e)?Ce:je).test(function(e){if(null!=e){try{return $e.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function Me(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Pe(r)?r:void 0}var He=Date.now;var Ue,We,Ve,Ge=function(){try{var e=Me(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ze=Ge?function(e,t){return Ge(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:De,Je=(Ue=ze,We=0,Ve=0,function(){var e=He(),t=16-(e-Ve);if(Ve=e,t>0){if(++We>=800)return arguments[0]}else We=0;return Ue.apply(void 0,arguments)});function Ke(e){return e!=e}function Ze(e,t,r){return t==t?function(e,t,r){for(var n=r-1,o=e.length;++n<o;)if(e[n]===t)return n;return-1}(e,t,r):function(e,t,r){for(var n=e.length,o=r+-1;++o<n;)if(t(e[o],o,e))return o;return-1}(e,Ke,r)}function Ye(e,t){return!!(null==e?0:e.length)&&Ze(e,t,0)>-1}function Qe(e,t){return e===t||e!=e&&t!=t}var Xe=Math.max;var et=Me(Object,"create");var tt=Object.prototype.hasOwnProperty;var rt=Object.prototype.hasOwnProperty;function nt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ot(e,t){for(var r=e.length;r--;)if(Qe(e[r][0],t))return r;return-1}nt.prototype.clear=function(){this.__data__=et?et(null):{},this.size=0},nt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},nt.prototype.get=function(e){var t=this.__data__;if(et){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return tt.call(t,e)?t[e]:void 0},nt.prototype.has=function(e){var t=this.__data__;return et?void 0!==t[e]:rt.call(t,e)},nt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=et&&void 0===t?"__lodash_hash_undefined__":t,this};var at=Array.prototype.splice;function it(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}it.prototype.clear=function(){this.__data__=[],this.size=0},it.prototype.delete=function(e){var t=this.__data__,r=ot(t,e);return!(r<0)&&(r==t.length-1?t.pop():at.call(t,r,1),--this.size,!0)},it.prototype.get=function(e){var t=this.__data__,r=ot(t,e);return r<0?void 0:t[r][1]},it.prototype.has=function(e){return ot(this.__data__,e)>-1},it.prototype.set=function(e,t){var r=this.__data__,n=ot(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var st=Me(ce,"Map");function lt(e,t){var r,n,o=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof t?"string":"hash"]:o.map}function ut(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ct(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,o=e.length;t<0&&(t=-t>o?0:o+t),(r=r>o?o:r)<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;for(var a=Array(o);++n<o;)a[n]=e[n+t];return a}(e,t,r)}ut.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(st||it),string:new nt}},ut.prototype.delete=function(e){var t=lt(this,e).delete(e);return this.size-=t?1:0,t},ut.prototype.get=function(e){return lt(this,e).get(e)},ut.prototype.has=function(e){return lt(this,e).has(e)},ut.prototype.set=function(e,t){var r=lt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var pt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ht="\\ud800-\\udfff",ft="["+ht+"]",gt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",dt="\\ud83c[\\udffb-\\udfff]",mt="[^"+ht+"]",yt="(?:\\ud83c[\\udde6-\\uddff]){2}",bt="[\\ud800-\\udbff][\\udc00-\\udfff]",vt="(?:"+gt+"|"+dt+")"+"?",wt="[\\ufe0e\\ufe0f]?",kt=wt+vt+("(?:\\u200d(?:"+[mt,yt,bt].join("|")+")"+wt+vt+")*"),Tt="(?:"+[mt+gt+"?",gt,yt,bt,ft].join("|")+")",Ot=RegExp(dt+"(?="+dt+")|"+Tt+kt,"g");function At(e){return function(e){return pt.test(e)}(e)?function(e){return e.match(Ot)||[]}(e):function(e){return e.split("")}(e)}function St(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ut;++t<r;)this.add(e[t])}function Et(e,t){return e.has(t)}function qt(e){return ve(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!Re(e)}(e)}St.prototype.add=St.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},St.prototype.has=function(e){return this.__data__.has(e)};function Dt(e,t,r){var n;if((e=null==(n=e)?"":Oe(n))&&void 0===t)return Ee(e);if(!e||!(t=Oe(t)))return e;var o=At(e),a=At(t),i=function(e,t){for(var r=-1,n=e.length;++r<n&&Ze(t,e[r],0)>-1;);return r}(o,a),s=function(e,t){for(var r=e.length;r--&&Ze(t,e[r],0)>-1;);return r}(o,a)+1;return ct(o,i,s).join("")}var Rt=function(e,t){return Je(function(e,t,r){return t=Xe(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,a=Xe(n.length-t,0),i=Array(a);++o<a;)i[o]=n[t+o];o=-1;for(var s=Array(t+1);++o<t;)s[o]=n[o];return s[t]=r(i),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,De),e+"")}(function(e,t){return qt(e)?function(e,t,r,n){var o=-1,a=Ye,i=!0,s=e.length,l=[],u=t.length;if(!s)return l;t.length>=200&&(a=Et,i=!1,t=new St(t));e:for(;++o<s;){var c=e[o],p=c;if(c=0!==c?c:0,i&&p==p){for(var h=u;h--;)if(t[h]===p)continue e;l.push(c)}else a(t,p,n)||l.push(c)}return l}(e,t):[]}),xt=function(){return xt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xt.apply(this,arguments)};function It(e,t){for(var r={},n={},o=e.split("~~"),a=!1,i=0;o.length>i;i++){for(var s=o[i].split("~"),l=0;l<s.length;l+=2){var u=s[l],c=s[l+1],p="&"+u+";";r[p]=c,a&&(r["&"+u]=c),n[c]=p}a=!0}return t?{entities:xt(xt({},r),t.entities),characters:xt(xt({},n),t.characters)}:{entities:r,characters:n}}var Nt={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},$t={};$t.xml=It("lt~<~gt~>~quot~\"~apos~'~amp~&"),$t.html4=It("apos~'~OElig~Œ~oelig~œ~Scaron~Š~scaron~š~Yuml~Ÿ~circ~ˆ~tilde~˜~ensp~ ~emsp~ ~thinsp~ ~zwnj~‌~zwj~‍~lrm~‎~rlm~‏~ndash~–~mdash~—~lsquo~‘~rsquo~’~sbquo~‚~ldquo~“~rdquo~”~bdquo~„~dagger~†~Dagger~‡~permil~‰~lsaquo~‹~rsaquo~›~euro~€~fnof~ƒ~Alpha~Α~Beta~Β~Gamma~Γ~Delta~Δ~Epsilon~Ε~Zeta~Ζ~Eta~Η~Theta~Θ~Iota~Ι~Kappa~Κ~Lambda~Λ~Mu~Μ~Nu~Ν~Xi~Ξ~Omicron~Ο~Pi~Π~Rho~Ρ~Sigma~Σ~Tau~Τ~Upsilon~Υ~Phi~Φ~Chi~Χ~Psi~Ψ~Omega~Ω~alpha~α~beta~β~gamma~γ~delta~δ~epsilon~ε~zeta~ζ~eta~η~theta~θ~iota~ι~kappa~κ~lambda~λ~mu~μ~nu~ν~xi~ξ~omicron~ο~pi~π~rho~ρ~sigmaf~ς~sigma~σ~tau~τ~upsilon~υ~phi~φ~chi~χ~psi~ψ~omega~ω~thetasym~ϑ~upsih~ϒ~piv~ϖ~bull~•~hellip~…~prime~′~Prime~″~oline~‾~frasl~⁄~weierp~℘~image~ℑ~real~ℜ~trade~™~alefsym~ℵ~larr~←~uarr~↑~rarr~→~darr~↓~harr~↔~crarr~↵~lArr~⇐~uArr~⇑~rArr~⇒~dArr~⇓~hArr~⇔~forall~∀~part~∂~exist~∃~empty~∅~nabla~∇~isin~∈~notin~∉~ni~∋~prod~∏~sum~∑~minus~−~lowast~∗~radic~√~prop~∝~infin~∞~ang~∠~and~∧~or~∨~cap~∩~cup~∪~int~∫~there4~∴~sim~∼~cong~≅~asymp~≈~ne~≠~equiv~≡~le~≤~ge~≥~sub~⊂~sup~⊃~nsub~⊄~sube~⊆~supe~⊇~oplus~⊕~otimes~⊗~perp~⊥~sdot~⋅~lceil~⌈~rceil~⌉~lfloor~⌊~rfloor~⌋~lang~〈~rang~〉~loz~◊~spades~♠~clubs~♣~hearts~♥~diams~♦~~nbsp~ ~iexcl~¡~cent~¢~pound~£~curren~¤~yen~¥~brvbar~¦~sect~§~uml~¨~copy~©~ordf~ª~laquo~«~not~¬~shy~­~reg~®~macr~¯~deg~°~plusmn~±~sup2~²~sup3~³~acute~´~micro~µ~para~¶~middot~·~cedil~¸~sup1~¹~ordm~º~raquo~»~frac14~¼~frac12~½~frac34~¾~iquest~¿~Agrave~À~Aacute~Á~Acirc~Â~Atilde~Ã~Auml~Ä~Aring~Å~AElig~Æ~Ccedil~Ç~Egrave~È~Eacute~É~Ecirc~Ê~Euml~Ë~Igrave~Ì~Iacute~Í~Icirc~Î~Iuml~Ï~ETH~Ð~Ntilde~Ñ~Ograve~Ò~Oacute~Ó~Ocirc~Ô~Otilde~Õ~Ouml~Ö~times~×~Oslash~Ø~Ugrave~Ù~Uacute~Ú~Ucirc~Û~Uuml~Ü~Yacute~Ý~THORN~Þ~szlig~ß~agrave~à~aacute~á~acirc~â~atilde~ã~auml~ä~aring~å~aelig~æ~ccedil~ç~egrave~è~eacute~é~ecirc~ê~euml~ë~igrave~ì~iacute~í~icirc~î~iuml~ï~eth~ð~ntilde~ñ~ograve~ò~oacute~ó~ocirc~ô~otilde~õ~ouml~ö~divide~÷~oslash~ø~ugrave~ù~uacute~ú~ucirc~û~uuml~ü~yacute~ý~thorn~þ~yuml~ÿ~quot~\"~amp~&~lt~<~gt~>"),$t.html5=It('Abreve~Ă~Acy~А~Afr~𝔄~Amacr~Ā~And~⩓~Aogon~Ą~Aopf~𝔸~ApplyFunction~⁡~Ascr~𝒜~Assign~≔~Backslash~∖~Barv~⫧~Barwed~⌆~Bcy~Б~Because~∵~Bernoullis~ℬ~Bfr~𝔅~Bopf~𝔹~Breve~˘~Bscr~ℬ~Bumpeq~≎~CHcy~Ч~Cacute~Ć~Cap~⋒~CapitalDifferentialD~ⅅ~Cayleys~ℭ~Ccaron~Č~Ccirc~Ĉ~Cconint~∰~Cdot~Ċ~Cedilla~¸~CenterDot~·~Cfr~ℭ~CircleDot~⊙~CircleMinus~⊖~CirclePlus~⊕~CircleTimes~⊗~ClockwiseContourIntegral~∲~CloseCurlyDoubleQuote~”~CloseCurlyQuote~’~Colon~∷~Colone~⩴~Congruent~≡~Conint~∯~ContourIntegral~∮~Copf~ℂ~Coproduct~∐~CounterClockwiseContourIntegral~∳~Cross~⨯~Cscr~𝒞~Cup~⋓~CupCap~≍~DD~ⅅ~DDotrahd~⤑~DJcy~Ђ~DScy~Ѕ~DZcy~Џ~Darr~↡~Dashv~⫤~Dcaron~Ď~Dcy~Д~Del~∇~Dfr~𝔇~DiacriticalAcute~´~DiacriticalDot~˙~DiacriticalDoubleAcute~˝~DiacriticalGrave~`~DiacriticalTilde~˜~Diamond~⋄~DifferentialD~ⅆ~Dopf~𝔻~Dot~¨~DotDot~⃜~DotEqual~≐~DoubleContourIntegral~∯~DoubleDot~¨~DoubleDownArrow~⇓~DoubleLeftArrow~⇐~DoubleLeftRightArrow~⇔~DoubleLeftTee~⫤~DoubleLongLeftArrow~⟸~DoubleLongLeftRightArrow~⟺~DoubleLongRightArrow~⟹~DoubleRightArrow~⇒~DoubleRightTee~⊨~DoubleUpArrow~⇑~DoubleUpDownArrow~⇕~DoubleVerticalBar~∥~DownArrow~↓~DownArrowBar~⤓~DownArrowUpArrow~⇵~DownBreve~̑~DownLeftRightVector~⥐~DownLeftTeeVector~⥞~DownLeftVector~↽~DownLeftVectorBar~⥖~DownRightTeeVector~⥟~DownRightVector~⇁~DownRightVectorBar~⥗~DownTee~⊤~DownTeeArrow~↧~Downarrow~⇓~Dscr~𝒟~Dstrok~Đ~ENG~Ŋ~Ecaron~Ě~Ecy~Э~Edot~Ė~Efr~𝔈~Element~∈~Emacr~Ē~EmptySmallSquare~◻~EmptyVerySmallSquare~▫~Eogon~Ę~Eopf~𝔼~Equal~⩵~EqualTilde~≂~Equilibrium~⇌~Escr~ℰ~Esim~⩳~Exists~∃~ExponentialE~ⅇ~Fcy~Ф~Ffr~𝔉~FilledSmallSquare~◼~FilledVerySmallSquare~▪~Fopf~𝔽~ForAll~∀~Fouriertrf~ℱ~Fscr~ℱ~GJcy~Ѓ~Gammad~Ϝ~Gbreve~Ğ~Gcedil~Ģ~Gcirc~Ĝ~Gcy~Г~Gdot~Ġ~Gfr~𝔊~Gg~⋙~Gopf~𝔾~GreaterEqual~≥~GreaterEqualLess~⋛~GreaterFullEqual~≧~GreaterGreater~⪢~GreaterLess~≷~GreaterSlantEqual~⩾~GreaterTilde~≳~Gscr~𝒢~Gt~≫~HARDcy~Ъ~Hacek~ˇ~Hat~^~Hcirc~Ĥ~Hfr~ℌ~HilbertSpace~ℋ~Hopf~ℍ~HorizontalLine~─~Hscr~ℋ~Hstrok~Ħ~HumpDownHump~≎~HumpEqual~≏~IEcy~Е~IJlig~Ĳ~IOcy~Ё~Icy~И~Idot~İ~Ifr~ℑ~Im~ℑ~Imacr~Ī~ImaginaryI~ⅈ~Implies~⇒~Int~∬~Integral~∫~Intersection~⋂~InvisibleComma~⁣~InvisibleTimes~⁢~Iogon~Į~Iopf~𝕀~Iscr~ℐ~Itilde~Ĩ~Iukcy~І~Jcirc~Ĵ~Jcy~Й~Jfr~𝔍~Jopf~𝕁~Jscr~𝒥~Jsercy~Ј~Jukcy~Є~KHcy~Х~KJcy~Ќ~Kcedil~Ķ~Kcy~К~Kfr~𝔎~Kopf~𝕂~Kscr~𝒦~LJcy~Љ~Lacute~Ĺ~Lang~⟪~Laplacetrf~ℒ~Larr~↞~Lcaron~Ľ~Lcedil~Ļ~Lcy~Л~LeftAngleBracket~⟨~LeftArrow~←~LeftArrowBar~⇤~LeftArrowRightArrow~⇆~LeftCeiling~⌈~LeftDoubleBracket~⟦~LeftDownTeeVector~⥡~LeftDownVector~⇃~LeftDownVectorBar~⥙~LeftFloor~⌊~LeftRightArrow~↔~LeftRightVector~⥎~LeftTee~⊣~LeftTeeArrow~↤~LeftTeeVector~⥚~LeftTriangle~⊲~LeftTriangleBar~⧏~LeftTriangleEqual~⊴~LeftUpDownVector~⥑~LeftUpTeeVector~⥠~LeftUpVector~↿~LeftUpVectorBar~⥘~LeftVector~↼~LeftVectorBar~⥒~Leftarrow~⇐~Leftrightarrow~⇔~LessEqualGreater~⋚~LessFullEqual~≦~LessGreater~≶~LessLess~⪡~LessSlantEqual~⩽~LessTilde~≲~Lfr~𝔏~Ll~⋘~Lleftarrow~⇚~Lmidot~Ŀ~LongLeftArrow~⟵~LongLeftRightArrow~⟷~LongRightArrow~⟶~Longleftarrow~⟸~Longleftrightarrow~⟺~Longrightarrow~⟹~Lopf~𝕃~LowerLeftArrow~↙~LowerRightArrow~↘~Lscr~ℒ~Lsh~↰~Lstrok~Ł~Lt~≪~Map~⤅~Mcy~М~MediumSpace~ ~Mellintrf~ℳ~Mfr~𝔐~MinusPlus~∓~Mopf~𝕄~Mscr~ℳ~NJcy~Њ~Nacute~Ń~Ncaron~Ň~Ncedil~Ņ~Ncy~Н~NegativeMediumSpace~​~NegativeThickSpace~​~NegativeThinSpace~​~NegativeVeryThinSpace~​~NestedGreaterGreater~≫~NestedLessLess~≪~NewLine~\n~Nfr~𝔑~NoBreak~⁠~NonBreakingSpace~ ~Nopf~ℕ~Not~⫬~NotCongruent~≢~NotCupCap~≭~NotDoubleVerticalBar~∦~NotElement~∉~NotEqual~≠~NotEqualTilde~≂̸~NotExists~∄~NotGreater~≯~NotGreaterEqual~≱~NotGreaterFullEqual~≧̸~NotGreaterGreater~≫̸~NotGreaterLess~≹~NotGreaterSlantEqual~⩾̸~NotGreaterTilde~≵~NotHumpDownHump~≎̸~NotHumpEqual~≏̸~NotLeftTriangle~⋪~NotLeftTriangleBar~⧏̸~NotLeftTriangleEqual~⋬~NotLess~≮~NotLessEqual~≰~NotLessGreater~≸~NotLessLess~≪̸~NotLessSlantEqual~⩽̸~NotLessTilde~≴~NotNestedGreaterGreater~⪢̸~NotNestedLessLess~⪡̸~NotPrecedes~⊀~NotPrecedesEqual~⪯̸~NotPrecedesSlantEqual~⋠~NotReverseElement~∌~NotRightTriangle~⋫~NotRightTriangleBar~⧐̸~NotRightTriangleEqual~⋭~NotSquareSubset~⊏̸~NotSquareSubsetEqual~⋢~NotSquareSuperset~⊐̸~NotSquareSupersetEqual~⋣~NotSubset~⊂⃒~NotSubsetEqual~⊈~NotSucceeds~⊁~NotSucceedsEqual~⪰̸~NotSucceedsSlantEqual~⋡~NotSucceedsTilde~≿̸~NotSuperset~⊃⃒~NotSupersetEqual~⊉~NotTilde~≁~NotTildeEqual~≄~NotTildeFullEqual~≇~NotTildeTilde~≉~NotVerticalBar~∤~Nscr~𝒩~Ocy~О~Odblac~Ő~Ofr~𝔒~Omacr~Ō~Oopf~𝕆~OpenCurlyDoubleQuote~“~OpenCurlyQuote~‘~Or~⩔~Oscr~𝒪~Otimes~⨷~OverBar~‾~OverBrace~⏞~OverBracket~⎴~OverParenthesis~⏜~PartialD~∂~Pcy~П~Pfr~𝔓~PlusMinus~±~Poincareplane~ℌ~Popf~ℙ~Pr~⪻~Precedes~≺~PrecedesEqual~⪯~PrecedesSlantEqual~≼~PrecedesTilde~≾~Product~∏~Proportion~∷~Proportional~∝~Pscr~𝒫~Qfr~𝔔~Qopf~ℚ~Qscr~𝒬~RBarr~⤐~Racute~Ŕ~Rang~⟫~Rarr~↠~Rarrtl~⤖~Rcaron~Ř~Rcedil~Ŗ~Rcy~Р~Re~ℜ~ReverseElement~∋~ReverseEquilibrium~⇋~ReverseUpEquilibrium~⥯~Rfr~ℜ~RightAngleBracket~⟩~RightArrow~→~RightArrowBar~⇥~RightArrowLeftArrow~⇄~RightCeiling~⌉~RightDoubleBracket~⟧~RightDownTeeVector~⥝~RightDownVector~⇂~RightDownVectorBar~⥕~RightFloor~⌋~RightTee~⊢~RightTeeArrow~↦~RightTeeVector~⥛~RightTriangle~⊳~RightTriangleBar~⧐~RightTriangleEqual~⊵~RightUpDownVector~⥏~RightUpTeeVector~⥜~RightUpVector~↾~RightUpVectorBar~⥔~RightVector~⇀~RightVectorBar~⥓~Rightarrow~⇒~Ropf~ℝ~RoundImplies~⥰~Rrightarrow~⇛~Rscr~ℛ~Rsh~↱~RuleDelayed~⧴~SHCHcy~Щ~SHcy~Ш~SOFTcy~Ь~Sacute~Ś~Sc~⪼~Scedil~Ş~Scirc~Ŝ~Scy~С~Sfr~𝔖~ShortDownArrow~↓~ShortLeftArrow~←~ShortRightArrow~→~ShortUpArrow~↑~SmallCircle~∘~Sopf~𝕊~Sqrt~√~Square~□~SquareIntersection~⊓~SquareSubset~⊏~SquareSubsetEqual~⊑~SquareSuperset~⊐~SquareSupersetEqual~⊒~SquareUnion~⊔~Sscr~𝒮~Star~⋆~Sub~⋐~Subset~⋐~SubsetEqual~⊆~Succeeds~≻~SucceedsEqual~⪰~SucceedsSlantEqual~≽~SucceedsTilde~≿~SuchThat~∋~Sum~∑~Sup~⋑~Superset~⊃~SupersetEqual~⊇~Supset~⋑~TRADE~™~TSHcy~Ћ~TScy~Ц~Tab~\t~Tcaron~Ť~Tcedil~Ţ~Tcy~Т~Tfr~𝔗~Therefore~∴~ThickSpace~  ~ThinSpace~ ~Tilde~∼~TildeEqual~≃~TildeFullEqual~≅~TildeTilde~≈~Topf~𝕋~TripleDot~⃛~Tscr~𝒯~Tstrok~Ŧ~Uarr~↟~Uarrocir~⥉~Ubrcy~Ў~Ubreve~Ŭ~Ucy~У~Udblac~Ű~Ufr~𝔘~Umacr~Ū~UnderBar~_~UnderBrace~⏟~UnderBracket~⎵~UnderParenthesis~⏝~Union~⋃~UnionPlus~⊎~Uogon~Ų~Uopf~𝕌~UpArrow~↑~UpArrowBar~⤒~UpArrowDownArrow~⇅~UpDownArrow~↕~UpEquilibrium~⥮~UpTee~⊥~UpTeeArrow~↥~Uparrow~⇑~Updownarrow~⇕~UpperLeftArrow~↖~UpperRightArrow~↗~Upsi~ϒ~Uring~Ů~Uscr~𝒰~Utilde~Ũ~VDash~⊫~Vbar~⫫~Vcy~В~Vdash~⊩~Vdashl~⫦~Vee~⋁~Verbar~‖~Vert~‖~VerticalBar~∣~VerticalLine~|~VerticalSeparator~❘~VerticalTilde~≀~VeryThinSpace~ ~Vfr~𝔙~Vopf~𝕍~Vscr~𝒱~Vvdash~⊪~Wcirc~Ŵ~Wedge~⋀~Wfr~𝔚~Wopf~𝕎~Wscr~𝒲~Xfr~𝔛~Xopf~𝕏~Xscr~𝒳~YAcy~Я~YIcy~Ї~YUcy~Ю~Ycirc~Ŷ~Ycy~Ы~Yfr~𝔜~Yopf~𝕐~Yscr~𝒴~ZHcy~Ж~Zacute~Ź~Zcaron~Ž~Zcy~З~Zdot~Ż~ZeroWidthSpace~​~Zfr~ℨ~Zopf~ℤ~Zscr~𝒵~abreve~ă~ac~∾~acE~∾̳~acd~∿~acy~а~af~⁡~afr~𝔞~aleph~ℵ~amacr~ā~amalg~⨿~andand~⩕~andd~⩜~andslope~⩘~andv~⩚~ange~⦤~angle~∠~angmsd~∡~angmsdaa~⦨~angmsdab~⦩~angmsdac~⦪~angmsdad~⦫~angmsdae~⦬~angmsdaf~⦭~angmsdag~⦮~angmsdah~⦯~angrt~∟~angrtvb~⊾~angrtvbd~⦝~angsph~∢~angst~Å~angzarr~⍼~aogon~ą~aopf~𝕒~ap~≈~apE~⩰~apacir~⩯~ape~≊~apid~≋~approx~≈~approxeq~≊~ascr~𝒶~ast~*~asympeq~≍~awconint~∳~awint~⨑~bNot~⫭~backcong~≌~backepsilon~϶~backprime~‵~backsim~∽~backsimeq~⋍~barvee~⊽~barwed~⌅~barwedge~⌅~bbrk~⎵~bbrktbrk~⎶~bcong~≌~bcy~б~becaus~∵~because~∵~bemptyv~⦰~bepsi~϶~bernou~ℬ~beth~ℶ~between~≬~bfr~𝔟~bigcap~⋂~bigcirc~◯~bigcup~⋃~bigodot~⨀~bigoplus~⨁~bigotimes~⨂~bigsqcup~⨆~bigstar~★~bigtriangledown~▽~bigtriangleup~△~biguplus~⨄~bigvee~⋁~bigwedge~⋀~bkarow~⤍~blacklozenge~⧫~blacksquare~▪~blacktriangle~▴~blacktriangledown~▾~blacktriangleleft~◂~blacktriangleright~▸~blank~␣~blk12~▒~blk14~░~blk34~▓~block~█~bne~=⃥~bnequiv~≡⃥~bnot~⌐~bopf~𝕓~bot~⊥~bottom~⊥~bowtie~⋈~boxDL~╗~boxDR~╔~boxDl~╖~boxDr~╓~boxH~═~boxHD~╦~boxHU~╩~boxHd~╤~boxHu~╧~boxUL~╝~boxUR~╚~boxUl~╜~boxUr~╙~boxV~║~boxVH~╬~boxVL~╣~boxVR~╠~boxVh~╫~boxVl~╢~boxVr~╟~boxbox~⧉~boxdL~╕~boxdR~╒~boxdl~┐~boxdr~┌~boxh~─~boxhD~╥~boxhU~╨~boxhd~┬~boxhu~┴~boxminus~⊟~boxplus~⊞~boxtimes~⊠~boxuL~╛~boxuR~╘~boxul~┘~boxur~└~boxv~│~boxvH~╪~boxvL~╡~boxvR~╞~boxvh~┼~boxvl~┤~boxvr~├~bprime~‵~breve~˘~bscr~𝒷~bsemi~⁏~bsim~∽~bsime~⋍~bsol~\\~bsolb~⧅~bsolhsub~⟈~bullet~•~bump~≎~bumpE~⪮~bumpe~≏~bumpeq~≏~cacute~ć~capand~⩄~capbrcup~⩉~capcap~⩋~capcup~⩇~capdot~⩀~caps~∩︀~caret~⁁~caron~ˇ~ccaps~⩍~ccaron~č~ccirc~ĉ~ccups~⩌~ccupssm~⩐~cdot~ċ~cemptyv~⦲~centerdot~·~cfr~𝔠~chcy~ч~check~✓~checkmark~✓~cir~○~cirE~⧃~circeq~≗~circlearrowleft~↺~circlearrowright~↻~circledR~®~circledS~Ⓢ~circledast~⊛~circledcirc~⊚~circleddash~⊝~cire~≗~cirfnint~⨐~cirmid~⫯~cirscir~⧂~clubsuit~♣~colon~:~colone~≔~coloneq~≔~comma~,~commat~@~comp~∁~compfn~∘~complement~∁~complexes~ℂ~congdot~⩭~conint~∮~copf~𝕔~coprod~∐~copysr~℗~cross~✗~cscr~𝒸~csub~⫏~csube~⫑~csup~⫐~csupe~⫒~ctdot~⋯~cudarrl~⤸~cudarrr~⤵~cuepr~⋞~cuesc~⋟~cularr~↶~cularrp~⤽~cupbrcap~⩈~cupcap~⩆~cupcup~⩊~cupdot~⊍~cupor~⩅~cups~∪︀~curarr~↷~curarrm~⤼~curlyeqprec~⋞~curlyeqsucc~⋟~curlyvee~⋎~curlywedge~⋏~curvearrowleft~↶~curvearrowright~↷~cuvee~⋎~cuwed~⋏~cwconint~∲~cwint~∱~cylcty~⌭~dHar~⥥~daleth~ℸ~dash~‐~dashv~⊣~dbkarow~⤏~dblac~˝~dcaron~ď~dcy~д~dd~ⅆ~ddagger~‡~ddarr~⇊~ddotseq~⩷~demptyv~⦱~dfisht~⥿~dfr~𝔡~dharl~⇃~dharr~⇂~diam~⋄~diamond~⋄~diamondsuit~♦~die~¨~digamma~ϝ~disin~⋲~div~÷~divideontimes~⋇~divonx~⋇~djcy~ђ~dlcorn~⌞~dlcrop~⌍~dollar~$~dopf~𝕕~dot~˙~doteq~≐~doteqdot~≑~dotminus~∸~dotplus~∔~dotsquare~⊡~doublebarwedge~⌆~downarrow~↓~downdownarrows~⇊~downharpoonleft~⇃~downharpoonright~⇂~drbkarow~⤐~drcorn~⌟~drcrop~⌌~dscr~𝒹~dscy~ѕ~dsol~⧶~dstrok~đ~dtdot~⋱~dtri~▿~dtrif~▾~duarr~⇵~duhar~⥯~dwangle~⦦~dzcy~џ~dzigrarr~⟿~eDDot~⩷~eDot~≑~easter~⩮~ecaron~ě~ecir~≖~ecolon~≕~ecy~э~edot~ė~ee~ⅇ~efDot~≒~efr~𝔢~eg~⪚~egs~⪖~egsdot~⪘~el~⪙~elinters~⏧~ell~ℓ~els~⪕~elsdot~⪗~emacr~ē~emptyset~∅~emptyv~∅~emsp13~ ~emsp14~ ~eng~ŋ~eogon~ę~eopf~𝕖~epar~⋕~eparsl~⧣~eplus~⩱~epsi~ε~epsiv~ϵ~eqcirc~≖~eqcolon~≕~eqsim~≂~eqslantgtr~⪖~eqslantless~⪕~equals~=~equest~≟~equivDD~⩸~eqvparsl~⧥~erDot~≓~erarr~⥱~escr~ℯ~esdot~≐~esim~≂~excl~!~expectation~ℰ~exponentiale~ⅇ~fallingdotseq~≒~fcy~ф~female~♀~ffilig~ﬃ~fflig~ﬀ~ffllig~ﬄ~ffr~𝔣~filig~ﬁ~fjlig~fj~flat~♭~fllig~ﬂ~fltns~▱~fopf~𝕗~fork~⋔~forkv~⫙~fpartint~⨍~frac13~⅓~frac15~⅕~frac16~⅙~frac18~⅛~frac23~⅔~frac25~⅖~frac35~⅗~frac38~⅜~frac45~⅘~frac56~⅚~frac58~⅝~frac78~⅞~frown~⌢~fscr~𝒻~gE~≧~gEl~⪌~gacute~ǵ~gammad~ϝ~gap~⪆~gbreve~ğ~gcirc~ĝ~gcy~г~gdot~ġ~gel~⋛~geq~≥~geqq~≧~geqslant~⩾~ges~⩾~gescc~⪩~gesdot~⪀~gesdoto~⪂~gesdotol~⪄~gesl~⋛︀~gesles~⪔~gfr~𝔤~gg~≫~ggg~⋙~gimel~ℷ~gjcy~ѓ~gl~≷~glE~⪒~gla~⪥~glj~⪤~gnE~≩~gnap~⪊~gnapprox~⪊~gne~⪈~gneq~⪈~gneqq~≩~gnsim~⋧~gopf~𝕘~grave~`~gscr~ℊ~gsim~≳~gsime~⪎~gsiml~⪐~gtcc~⪧~gtcir~⩺~gtdot~⋗~gtlPar~⦕~gtquest~⩼~gtrapprox~⪆~gtrarr~⥸~gtrdot~⋗~gtreqless~⋛~gtreqqless~⪌~gtrless~≷~gtrsim~≳~gvertneqq~≩︀~gvnE~≩︀~hairsp~ ~half~½~hamilt~ℋ~hardcy~ъ~harrcir~⥈~harrw~↭~hbar~ℏ~hcirc~ĥ~heartsuit~♥~hercon~⊹~hfr~𝔥~hksearow~⤥~hkswarow~⤦~hoarr~⇿~homtht~∻~hookleftarrow~↩~hookrightarrow~↪~hopf~𝕙~horbar~―~hscr~𝒽~hslash~ℏ~hstrok~ħ~hybull~⁃~hyphen~‐~ic~⁣~icy~и~iecy~е~iff~⇔~ifr~𝔦~ii~ⅈ~iiiint~⨌~iiint~∭~iinfin~⧜~iiota~℩~ijlig~ĳ~imacr~ī~imagline~ℐ~imagpart~ℑ~imath~ı~imof~⊷~imped~Ƶ~in~∈~incare~℅~infintie~⧝~inodot~ı~intcal~⊺~integers~ℤ~intercal~⊺~intlarhk~⨗~intprod~⨼~iocy~ё~iogon~į~iopf~𝕚~iprod~⨼~iscr~𝒾~isinE~⋹~isindot~⋵~isins~⋴~isinsv~⋳~isinv~∈~it~⁢~itilde~ĩ~iukcy~і~jcirc~ĵ~jcy~й~jfr~𝔧~jmath~ȷ~jopf~𝕛~jscr~𝒿~jsercy~ј~jukcy~є~kappav~ϰ~kcedil~ķ~kcy~к~kfr~𝔨~kgreen~ĸ~khcy~х~kjcy~ќ~kopf~𝕜~kscr~𝓀~lAarr~⇚~lAtail~⤛~lBarr~⤎~lE~≦~lEg~⪋~lHar~⥢~lacute~ĺ~laemptyv~⦴~lagran~ℒ~langd~⦑~langle~⟨~lap~⪅~larrb~⇤~larrbfs~⤟~larrfs~⤝~larrhk~↩~larrlp~↫~larrpl~⤹~larrsim~⥳~larrtl~↢~lat~⪫~latail~⤙~late~⪭~lates~⪭︀~lbarr~⤌~lbbrk~❲~lbrace~{~lbrack~[~lbrke~⦋~lbrksld~⦏~lbrkslu~⦍~lcaron~ľ~lcedil~ļ~lcub~{~lcy~л~ldca~⤶~ldquor~„~ldrdhar~⥧~ldrushar~⥋~ldsh~↲~leftarrow~←~leftarrowtail~↢~leftharpoondown~↽~leftharpoonup~↼~leftleftarrows~⇇~leftrightarrow~↔~leftrightarrows~⇆~leftrightharpoons~⇋~leftrightsquigarrow~↭~leftthreetimes~⋋~leg~⋚~leq~≤~leqq~≦~leqslant~⩽~les~⩽~lescc~⪨~lesdot~⩿~lesdoto~⪁~lesdotor~⪃~lesg~⋚︀~lesges~⪓~lessapprox~⪅~lessdot~⋖~lesseqgtr~⋚~lesseqqgtr~⪋~lessgtr~≶~lesssim~≲~lfisht~⥼~lfr~𝔩~lg~≶~lgE~⪑~lhard~↽~lharu~↼~lharul~⥪~lhblk~▄~ljcy~љ~ll~≪~llarr~⇇~llcorner~⌞~llhard~⥫~lltri~◺~lmidot~ŀ~lmoust~⎰~lmoustache~⎰~lnE~≨~lnap~⪉~lnapprox~⪉~lne~⪇~lneq~⪇~lneqq~≨~lnsim~⋦~loang~⟬~loarr~⇽~lobrk~⟦~longleftarrow~⟵~longleftrightarrow~⟷~longmapsto~⟼~longrightarrow~⟶~looparrowleft~↫~looparrowright~↬~lopar~⦅~lopf~𝕝~loplus~⨭~lotimes~⨴~lowbar~_~lozenge~◊~lozf~⧫~lpar~(~lparlt~⦓~lrarr~⇆~lrcorner~⌟~lrhar~⇋~lrhard~⥭~lrtri~⊿~lscr~𝓁~lsh~↰~lsim~≲~lsime~⪍~lsimg~⪏~lsqb~[~lsquor~‚~lstrok~ł~ltcc~⪦~ltcir~⩹~ltdot~⋖~lthree~⋋~ltimes~⋉~ltlarr~⥶~ltquest~⩻~ltrPar~⦖~ltri~◃~ltrie~⊴~ltrif~◂~lurdshar~⥊~luruhar~⥦~lvertneqq~≨︀~lvnE~≨︀~mDDot~∺~male~♂~malt~✠~maltese~✠~map~↦~mapsto~↦~mapstodown~↧~mapstoleft~↤~mapstoup~↥~marker~▮~mcomma~⨩~mcy~м~measuredangle~∡~mfr~𝔪~mho~℧~mid~∣~midast~*~midcir~⫰~minusb~⊟~minusd~∸~minusdu~⨪~mlcp~⫛~mldr~…~mnplus~∓~models~⊧~mopf~𝕞~mp~∓~mscr~𝓂~mstpos~∾~multimap~⊸~mumap~⊸~nGg~⋙̸~nGt~≫⃒~nGtv~≫̸~nLeftarrow~⇍~nLeftrightarrow~⇎~nLl~⋘̸~nLt~≪⃒~nLtv~≪̸~nRightarrow~⇏~nVDash~⊯~nVdash~⊮~nacute~ń~nang~∠⃒~nap~≉~napE~⩰̸~napid~≋̸~napos~ŉ~napprox~≉~natur~♮~natural~♮~naturals~ℕ~nbump~≎̸~nbumpe~≏̸~ncap~⩃~ncaron~ň~ncedil~ņ~ncong~≇~ncongdot~⩭̸~ncup~⩂~ncy~н~neArr~⇗~nearhk~⤤~nearr~↗~nearrow~↗~nedot~≐̸~nequiv~≢~nesear~⤨~nesim~≂̸~nexist~∄~nexists~∄~nfr~𝔫~ngE~≧̸~nge~≱~ngeq~≱~ngeqq~≧̸~ngeqslant~⩾̸~nges~⩾̸~ngsim~≵~ngt~≯~ngtr~≯~nhArr~⇎~nharr~↮~nhpar~⫲~nis~⋼~nisd~⋺~niv~∋~njcy~њ~nlArr~⇍~nlE~≦̸~nlarr~↚~nldr~‥~nle~≰~nleftarrow~↚~nleftrightarrow~↮~nleq~≰~nleqq~≦̸~nleqslant~⩽̸~nles~⩽̸~nless~≮~nlsim~≴~nlt~≮~nltri~⋪~nltrie~⋬~nmid~∤~nopf~𝕟~notinE~⋹̸~notindot~⋵̸~notinva~∉~notinvb~⋷~notinvc~⋶~notni~∌~notniva~∌~notnivb~⋾~notnivc~⋽~npar~∦~nparallel~∦~nparsl~⫽⃥~npart~∂̸~npolint~⨔~npr~⊀~nprcue~⋠~npre~⪯̸~nprec~⊀~npreceq~⪯̸~nrArr~⇏~nrarr~↛~nrarrc~⤳̸~nrarrw~↝̸~nrightarrow~↛~nrtri~⋫~nrtrie~⋭~nsc~⊁~nsccue~⋡~nsce~⪰̸~nscr~𝓃~nshortmid~∤~nshortparallel~∦~nsim~≁~nsime~≄~nsimeq~≄~nsmid~∤~nspar~∦~nsqsube~⋢~nsqsupe~⋣~nsubE~⫅̸~nsube~⊈~nsubset~⊂⃒~nsubseteq~⊈~nsubseteqq~⫅̸~nsucc~⊁~nsucceq~⪰̸~nsup~⊅~nsupE~⫆̸~nsupe~⊉~nsupset~⊃⃒~nsupseteq~⊉~nsupseteqq~⫆̸~ntgl~≹~ntlg~≸~ntriangleleft~⋪~ntrianglelefteq~⋬~ntriangleright~⋫~ntrianglerighteq~⋭~num~#~numero~№~numsp~ ~nvDash~⊭~nvHarr~⤄~nvap~≍⃒~nvdash~⊬~nvge~≥⃒~nvgt~>⃒~nvinfin~⧞~nvlArr~⤂~nvle~≤⃒~nvlt~<⃒~nvltrie~⊴⃒~nvrArr~⤃~nvrtrie~⊵⃒~nvsim~∼⃒~nwArr~⇖~nwarhk~⤣~nwarr~↖~nwarrow~↖~nwnear~⤧~oS~Ⓢ~oast~⊛~ocir~⊚~ocy~о~odash~⊝~odblac~ő~odiv~⨸~odot~⊙~odsold~⦼~ofcir~⦿~ofr~𝔬~ogon~˛~ogt~⧁~ohbar~⦵~ohm~Ω~oint~∮~olarr~↺~olcir~⦾~olcross~⦻~olt~⧀~omacr~ō~omid~⦶~ominus~⊖~oopf~𝕠~opar~⦷~operp~⦹~orarr~↻~ord~⩝~order~ℴ~orderof~ℴ~origof~⊶~oror~⩖~orslope~⩗~orv~⩛~oscr~ℴ~osol~⊘~otimesas~⨶~ovbar~⌽~par~∥~parallel~∥~parsim~⫳~parsl~⫽~pcy~п~percnt~%~period~.~pertenk~‱~pfr~𝔭~phiv~ϕ~phmmat~ℳ~phone~☎~pitchfork~⋔~planck~ℏ~planckh~ℎ~plankv~ℏ~plus~+~plusacir~⨣~plusb~⊞~pluscir~⨢~plusdo~∔~plusdu~⨥~pluse~⩲~plussim~⨦~plustwo~⨧~pm~±~pointint~⨕~popf~𝕡~pr~≺~prE~⪳~prap~⪷~prcue~≼~pre~⪯~prec~≺~precapprox~⪷~preccurlyeq~≼~preceq~⪯~precnapprox~⪹~precneqq~⪵~precnsim~⋨~precsim~≾~primes~ℙ~prnE~⪵~prnap~⪹~prnsim~⋨~profalar~⌮~profline~⌒~profsurf~⌓~propto~∝~prsim~≾~prurel~⊰~pscr~𝓅~puncsp~ ~qfr~𝔮~qint~⨌~qopf~𝕢~qprime~⁗~qscr~𝓆~quaternions~ℍ~quatint~⨖~quest~?~questeq~≟~rAarr~⇛~rAtail~⤜~rBarr~⤏~rHar~⥤~race~∽̱~racute~ŕ~raemptyv~⦳~rangd~⦒~range~⦥~rangle~⟩~rarrap~⥵~rarrb~⇥~rarrbfs~⤠~rarrc~⤳~rarrfs~⤞~rarrhk~↪~rarrlp~↬~rarrpl~⥅~rarrsim~⥴~rarrtl~↣~rarrw~↝~ratail~⤚~ratio~∶~rationals~ℚ~rbarr~⤍~rbbrk~❳~rbrace~}~rbrack~]~rbrke~⦌~rbrksld~⦎~rbrkslu~⦐~rcaron~ř~rcedil~ŗ~rcub~}~rcy~р~rdca~⤷~rdldhar~⥩~rdquor~”~rdsh~↳~realine~ℛ~realpart~ℜ~reals~ℝ~rect~▭~rfisht~⥽~rfr~𝔯~rhard~⇁~rharu~⇀~rharul~⥬~rhov~ϱ~rightarrow~→~rightarrowtail~↣~rightharpoondown~⇁~rightharpoonup~⇀~rightleftarrows~⇄~rightleftharpoons~⇌~rightrightarrows~⇉~rightsquigarrow~↝~rightthreetimes~⋌~ring~˚~risingdotseq~≓~rlarr~⇄~rlhar~⇌~rmoust~⎱~rmoustache~⎱~rnmid~⫮~roang~⟭~roarr~⇾~robrk~⟧~ropar~⦆~ropf~𝕣~roplus~⨮~rotimes~⨵~rpar~)~rpargt~⦔~rppolint~⨒~rrarr~⇉~rscr~𝓇~rsh~↱~rsqb~]~rsquor~’~rthree~⋌~rtimes~⋊~rtri~▹~rtrie~⊵~rtrif~▸~rtriltri~⧎~ruluhar~⥨~rx~℞~sacute~ś~sc~≻~scE~⪴~scap~⪸~sccue~≽~sce~⪰~scedil~ş~scirc~ŝ~scnE~⪶~scnap~⪺~scnsim~⋩~scpolint~⨓~scsim~≿~scy~с~sdotb~⊡~sdote~⩦~seArr~⇘~searhk~⤥~searr~↘~searrow~↘~semi~;~seswar~⤩~setminus~∖~setmn~∖~sext~✶~sfr~𝔰~sfrown~⌢~sharp~♯~shchcy~щ~shcy~ш~shortmid~∣~shortparallel~∥~sigmav~ς~simdot~⩪~sime~≃~simeq~≃~simg~⪞~simgE~⪠~siml~⪝~simlE~⪟~simne~≆~simplus~⨤~simrarr~⥲~slarr~←~smallsetminus~∖~smashp~⨳~smeparsl~⧤~smid~∣~smile~⌣~smt~⪪~smte~⪬~smtes~⪬︀~softcy~ь~sol~/~solb~⧄~solbar~⌿~sopf~𝕤~spadesuit~♠~spar~∥~sqcap~⊓~sqcaps~⊓︀~sqcup~⊔~sqcups~⊔︀~sqsub~⊏~sqsube~⊑~sqsubset~⊏~sqsubseteq~⊑~sqsup~⊐~sqsupe~⊒~sqsupset~⊐~sqsupseteq~⊒~squ~□~square~□~squarf~▪~squf~▪~srarr~→~sscr~𝓈~ssetmn~∖~ssmile~⌣~sstarf~⋆~star~☆~starf~★~straightepsilon~ϵ~straightphi~ϕ~strns~¯~subE~⫅~subdot~⪽~subedot~⫃~submult~⫁~subnE~⫋~subne~⊊~subplus~⪿~subrarr~⥹~subset~⊂~subseteq~⊆~subseteqq~⫅~subsetneq~⊊~subsetneqq~⫋~subsim~⫇~subsub~⫕~subsup~⫓~succ~≻~succapprox~⪸~succcurlyeq~≽~succeq~⪰~succnapprox~⪺~succneqq~⪶~succnsim~⋩~succsim~≿~sung~♪~supE~⫆~supdot~⪾~supdsub~⫘~supedot~⫄~suphsol~⟉~suphsub~⫗~suplarr~⥻~supmult~⫂~supnE~⫌~supne~⊋~supplus~⫀~supset~⊃~supseteq~⊇~supseteqq~⫆~supsetneq~⊋~supsetneqq~⫌~supsim~⫈~supsub~⫔~supsup~⫖~swArr~⇙~swarhk~⤦~swarr~↙~swarrow~↙~swnwar~⤪~target~⌖~tbrk~⎴~tcaron~ť~tcedil~ţ~tcy~т~tdot~⃛~telrec~⌕~tfr~𝔱~therefore~∴~thetav~ϑ~thickapprox~≈~thicksim~∼~thkap~≈~thksim~∼~timesb~⊠~timesbar~⨱~timesd~⨰~tint~∭~toea~⤨~top~⊤~topbot~⌶~topcir~⫱~topf~𝕥~topfork~⫚~tosa~⤩~tprime~‴~triangle~▵~triangledown~▿~triangleleft~◃~trianglelefteq~⊴~triangleq~≜~triangleright~▹~trianglerighteq~⊵~tridot~◬~trie~≜~triminus~⨺~triplus~⨹~trisb~⧍~tritime~⨻~trpezium~⏢~tscr~𝓉~tscy~ц~tshcy~ћ~tstrok~ŧ~twixt~≬~twoheadleftarrow~↞~twoheadrightarrow~↠~uHar~⥣~ubrcy~ў~ubreve~ŭ~ucy~у~udarr~⇅~udblac~ű~udhar~⥮~ufisht~⥾~ufr~𝔲~uharl~↿~uharr~↾~uhblk~▀~ulcorn~⌜~ulcorner~⌜~ulcrop~⌏~ultri~◸~umacr~ū~uogon~ų~uopf~𝕦~uparrow~↑~updownarrow~↕~upharpoonleft~↿~upharpoonright~↾~uplus~⊎~upsi~υ~upuparrows~⇈~urcorn~⌝~urcorner~⌝~urcrop~⌎~uring~ů~urtri~◹~uscr~𝓊~utdot~⋰~utilde~ũ~utri~▵~utrif~▴~uuarr~⇈~uwangle~⦧~vArr~⇕~vBar~⫨~vBarv~⫩~vDash~⊨~vangrt~⦜~varepsilon~ϵ~varkappa~ϰ~varnothing~∅~varphi~ϕ~varpi~ϖ~varpropto~∝~varr~↕~varrho~ϱ~varsigma~ς~varsubsetneq~⊊︀~varsubsetneqq~⫋︀~varsupsetneq~⊋︀~varsupsetneqq~⫌︀~vartheta~ϑ~vartriangleleft~⊲~vartriangleright~⊳~vcy~в~vdash~⊢~vee~∨~veebar~⊻~veeeq~≚~vellip~⋮~verbar~|~vert~|~vfr~𝔳~vltri~⊲~vnsub~⊂⃒~vnsup~⊃⃒~vopf~𝕧~vprop~∝~vrtri~⊳~vscr~𝓋~vsubnE~⫋︀~vsubne~⊊︀~vsupnE~⫌︀~vsupne~⊋︀~vzigzag~⦚~wcirc~ŵ~wedbar~⩟~wedge~∧~wedgeq~≙~wfr~𝔴~wopf~𝕨~wp~℘~wr~≀~wreath~≀~wscr~𝓌~xcap~⋂~xcirc~◯~xcup~⋃~xdtri~▽~xfr~𝔵~xhArr~⟺~xharr~⟷~xlArr~⟸~xlarr~⟵~xmap~⟼~xnis~⋻~xodot~⨀~xopf~𝕩~xoplus~⨁~xotime~⨂~xrArr~⟹~xrarr~⟶~xscr~𝓍~xsqcup~⨆~xuplus~⨄~xutri~△~xvee~⋁~xwedge~⋀~yacy~я~ycirc~ŷ~ycy~ы~yfr~𝔶~yicy~ї~yopf~𝕪~yscr~𝓎~yucy~ю~zacute~ź~zcaron~ž~zcy~з~zdot~ż~zeetrf~ℨ~zfr~𝔷~zhcy~ж~zigrarr~⇝~zopf~𝕫~zscr~𝓏~~AMP~&~COPY~©~GT~>~LT~<~QUOT~"~REG~®',$t.html4);var jt={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},Ft=String.fromCodePoint||function(e){return String.fromCharCode(Math.floor((e-65536)/1024)+55296,(e-65536)%1024+56320)},Lt=function(){return Lt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Lt.apply(this,arguments)},Bt=Lt(Lt({},$t),{all:$t.html5}),_t={scope:"body",level:"all"},Ct=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,Pt=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,Mt={xml:{strict:Ct,attribute:Pt,body:Nt.xml},html4:{strict:Ct,attribute:Pt,body:Nt.html4},html5:{strict:Ct,attribute:Pt,body:Nt.html5}},Ht=Lt(Lt({},Mt),{all:Mt.html5}),Ut=String.fromCharCode,Wt=Ut(65533);function Vt(e,t){var r=void 0===t?_t:t,n=r.level,o=void 0===n?"all":n,a=r.scope,i=void 0===a?"xml"===o?"strict":"body":a;if(!e)return"";var s=Ht[o][i],l=Bt[o].entities,u="attribute"===i,c="strict"===i;return e.replace(s,function(e){return function(e,t,r,n){var o=e,a=e[e.length-1];if(r&&"="===a)o=e;else if(n&&";"!==a)o=e;else{var i=t[e];if(i)o=i;else if("&"===e[0]&&"#"===e[1]){var s=e[2],l="x"==s||"X"==s?parseInt(e.substr(3),16):parseInt(e.substr(2));o=l>=1114111?Wt:l>65535?Ft(l):Ut(jt[l]||l)}}return o}(e,l,u,c)})}
/**
 * @name ranges-sort
 * @fileoverview Sort string index ranges
 * @version 6.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-sort/}
 */var Gt={strictlyTwoElementsInRangeArrays:!1,progressFn:null};function zt(e,t){if(!Array.isArray(e)||!e.length)return e;let r,n,o={...Gt,...t};if(o.strictlyTwoElementsInRangeArrays&&!e.every((e,t)=>!(!Array.isArray(e)||2!==e.length)||(r=t,n=e.length,!1)))throw new TypeError(`ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ${r}th range (${JSON.stringify(e[r],null,4)}) has not two but ${n} elements!`);if(!e.every((e,t)=>!(!Array.isArray(e)||!Number.isInteger(e[0])||e[0]<0||!Number.isInteger(e[1])||e[1]<0)||(r=t,!1)))throw new TypeError(`ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ${r}th range (${JSON.stringify(e[r],null,4)}) does not consist of only natural numbers!`);let a=e.length**2,i=0;return Array.from(e).sort((e,t)=>(o.progressFn&&(i+=1,o.progressFn(Math.floor(100*i/a))),e[0]===t[0]?e[1]<t[1]?-1:e[1]>t[1]?1:0:e[0]<t[0]?-1:1
/**
 * @name ranges-merge
 * @fileoverview Merge and sort string index ranges
 * @version 9.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-merge/}
 */))}var Jt={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};var Kt="production"===process.env.NODE_ENV,Zt="Invariant failed";
/**
 * @name ranges-apply
 * @fileoverview Take an array of string index ranges, delete/replace the string according to them
 * @version 7.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-apply/}
 */
function Yt(e,t,r){if(0===arguments.length)throw new Error("ranges-apply: [THROW_ID_01] inputs missing!");if("string"!=typeof e)throw new TypeError(`ranges-apply: [THROW_ID_02] first input argument must be a string! Currently it's: ${typeof e}, equal to: ${JSON.stringify(e,null,4)}`);if(t&&!Array.isArray(t))throw new TypeError(`ranges-apply: [THROW_ID_03] second input argument must be an array (or null)! Currently it's: ${typeof t}, equal to: ${JSON.stringify(t,null,4)}`);if(!t?.filter(e=>e).length)return e;let n;n=Array.isArray(t)&&Number.isInteger(t[0])&&Number.isInteger(t[1])?[Array.from(t)]:Array.from(t),n.length,n.filter(e=>e).forEach((e,t)=>{if(!Array.isArray(e))throw new TypeError(`ranges-apply: [THROW_ID_05] ranges array, second input arg., has ${t}th element not an array: ${JSON.stringify(e,null,4)}, which is ${typeof e}`);if(!Number.isInteger(e[0])){if(!Number.isInteger(+e[0])||+e[0]<0)throw new TypeError(`ranges-apply: [THROW_ID_06] ranges array, second input arg. has ${t}th element, array ${JSON.stringify(e,null,0)}. Its first element is not an integer, string index, but ${typeof e[0]}, equal to: ${JSON.stringify(e[0],null,4)}.`);n[t][0]=+n[t][0]}if(!Number.isInteger(e[1])){if(!Number.isInteger(+e[1])||+e[1]<0)throw new TypeError(`ranges-apply: [THROW_ID_07] ranges array, second input arg. has ${t}th element, array ${JSON.stringify(e,null,0)}. Its second element is not an integer, string index, but ${typeof e[1]}, equal to: ${JSON.stringify(e[1],null,4)}.`);n[t][1]=+n[t][1]}});let o=function(e,t){function r(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}if(!Array.isArray(e)||!e.length)return null;let n;if(t){if(!r(t))throw new Error(`emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n${JSON.stringify(t,null,4)} (type ${typeof t})`);if(n={...Jt,...t},n.progressFn&&r(n.progressFn)&&!Object.keys(n.progressFn).length)n.progressFn=null;else if(n.progressFn&&"function"!=typeof n.progressFn)throw new Error(`ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "${typeof n.progressFn}", equal to ${JSON.stringify(n.progressFn,null,4)}`);if(![1,2,"1","2"].includes(n.mergeType))throw new Error(`ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "${typeof n.mergeType}", equal to ${JSON.stringify(n.mergeType,null,4)}`);if("boolean"!=typeof n.joinRangesThatTouchEdges)throw new Error(`ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "${typeof n.joinRangesThatTouchEdges}", equal to ${JSON.stringify(n.joinRangesThatTouchEdges,null,4)}`)}else n={...Jt};let o,a,i,s=e.filter(e=>Array.isArray(e)).map(e=>[...e]).filter(e=>void 0!==e[2]||e[0]!==e[1]);o=n.progressFn?zt(s,{progressFn:e=>{i=Math.floor(e/5),i!==a&&(a=i,n.progressFn(i))}}):zt(s);let l=o.length-1;for(let e=l;e>0;e--)n.progressFn&&(i=Math.floor(78*(1-e/l))+21,i!==a&&i>a&&(a=i,n.progressFn(i))),(o[e][0]<=o[e-1][0]||!n.joinRangesThatTouchEdges&&o[e][0]<o[e-1][1]||n.joinRangesThatTouchEdges&&o[e][0]<=o[e-1][1])&&(o[e-1][0]=Math.min(o[e][0],o[e-1][0]),o[e-1][1]=Math.max(o[e][1],o[e-1][1]),void 0!==o[e][2]&&(o[e-1][0]>=o[e][0]||o[e-1][1]<=o[e][1])&&null!==o[e-1][2]&&(null===o[e][2]&&null!==o[e-1][2]?o[e-1][2]=null:null!=o[e-1][2]?2==+n.mergeType&&o[e-1][0]===o[e][0]?o[e-1][2]=o[e][2]:o[e-1][2]+=o[e][2]:o[e-1][2]=o[e][2]),o.splice(e,1),e=o.length);return o.length?o:null}(n,{progressFn:e=>{}});!function(e){if(!e){if(Kt)throw new Error(Zt);throw new Error(Zt)}}(o);let a=o.length;if(a>0){let t=e.slice(o[a-1][1]);e=o.reduce((t,r,n,o)=>{let a=0===n?0:o[n-1][1],i=o[n][0];return`${t}${e.slice(a,i)}${o[n][2]||""}`},""),e+=t}return e}
/**
 * @name string-collapse-leading-whitespace
 * @fileoverview Collapse the leading and trailing whitespace of a string
 * @version 7.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/string-collapse-leading-whitespace/}
 */function Qt(e,t=1){function r(e){return Array.from(e).reverse().join("")}function n(e,t,r){let n=r?"\n":"\r",o=r?"\r":"\n";if(!e)return e;let a=0,i="";for(let r=0,s=e.length;r<s;r++)(e[r]===n||e[r]===o&&e[r-1]!==n)&&a++,"\r\n".includes(e[r])||" "===e[r]?" "===e[r]?i+=e[r]:e[r]===n?a<=t&&(i+=e[r],e[r+1]===o&&(i+=e[r+1],r++)):e[r]===o&&e?.[r-1]!==n&&a<=t&&(i+=e[r]):!e[r+1]&&!a&&(i+=" ");return i}if("string"==typeof e&&e.length){let o=1;"number"==typeof+t&&Number.isInteger(+t)&&+t>=0&&(o=+t);let a="",i="";if(e.trim()){if(!e[0].trim())for(let t=0,r=e.length;t<r;t++)if(e[t].trim()){a=e.slice(0,t);break}}else a=e;if(e.trim()&&(""===e.slice(-1).trim()||" "===e.slice(-1)))for(let t=e.length;t--;)if(e[t].trim()){i=e.slice(t+1);break}return`${n(a,o,!1)}${e.trim()}${r(n(r(i),o,!0))}`}return e}
/**
 * @name ranges-push
 * @fileoverview Gather string index ranges
 * @version 7.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-push/}
 */var Xt={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};var er={limitToBeAddedWhitespace:!1,limitLinebreaksCount:1,mergeType:1},tr=class{constructor(e){let t={...er,...e};if(t.mergeType&&1!==t.mergeType&&2!==t.mergeType)if(oe(t.mergeType)&&"1"===t.mergeType.trim())t.mergeType=1;else{if(!oe(t.mergeType)||"2"!==t.mergeType.trim())throw new Error(`ranges-push: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "${typeof t.mergeType}", equal to ${JSON.stringify(t.mergeType,null,4)}`);t.mergeType=2}this.opts=t,this.ranges=[]}ranges;opts;add(e,t,r){if(null==e&&null==t)return;if(ie(e)&&!ie(t)){if(Array.isArray(e)){if(e.length){if(e.some(e=>Array.isArray(e)))return void e.forEach(e=>{Array.isArray(e)&&this.add(...e)});e.length&&ae(+e[0])&&ae(+e[1])&&this.add(...e)}return}throw new TypeError(`ranges-push/Ranges/add(): [THROW_ID_12] the first input argument, "from" is set (${JSON.stringify(e,null,0)}) but second-one, "to" is not (${JSON.stringify(t,null,0)})`)}if(!ie(e)&&ie(t))throw new TypeError(`ranges-push/Ranges/add(): [THROW_ID_13] the second input argument, "to" is set (${JSON.stringify(t,null,0)}) but first-one, "from" is not (${JSON.stringify(e,null,0)})`);let n=+e,o=+t;if(!ae(n)||!ae(o))throw ae(n)&&n>=0?new TypeError(`ranges-push/Ranges/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it's of a type "${typeof o}" equal to: ${JSON.stringify(o,null,4)}`):new TypeError(`ranges-push/Ranges/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it's of a type "${typeof n}" equal to: ${JSON.stringify(n,null,4)}`);if(ie(r)&&!oe(r)&&!function(e){return Number.isFinite(e)}(r))throw new TypeError(`ranges-push/Ranges/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but ${typeof r}, equal to:\n${JSON.stringify(r,null,4)}`);if(ie(this.ranges)&&Array.isArray(this.last())&&n===this.last()[1]){if(this.last()[1]=o,this.last()[2],null!==this.last()[2]&&ie(r)){let e=!this.last()[2]||!this.last()[2].length||this.opts?.mergeType&&1!==this.opts.mergeType?r:`${this.last()[2]}${r}`;this.opts.limitToBeAddedWhitespace&&(e=Qt(e,this.opts.limitLinebreaksCount)),oe(e)&&!e.length||(this.last()[2]=e)}}else{this.ranges||(this.ranges=[]);let e=void 0===r||oe(r)&&!r.length?[n,o]:[n,o,r&&this.opts.limitToBeAddedWhitespace?Qt(r,this.opts.limitLinebreaksCount):r];this.ranges.push(e)}}push(e,t,r){this.add(e,t,r)}current(){return Array.isArray(this.ranges)&&this.ranges.length?(this.ranges=function(e,t){function r(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}if(!Array.isArray(e)||!e.length)return null;let n;if(t){if(!r(t))throw new Error(`ranges-merge: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n${JSON.stringify(t,null,4)} (type ${typeof t})`);if(n={...Xt,...t},n.progressFn&&r(n.progressFn)&&!Object.keys(n.progressFn).length)n.progressFn=null;else if(n.progressFn&&"function"!=typeof n.progressFn)throw new Error(`ranges-merge: [THROW_ID_01] resolvedOpts.progressFn must be a function! It was given of a type: "${typeof n.progressFn}", equal to ${JSON.stringify(n.progressFn,null,4)}`);if(![1,2,"1","2"].includes(n.mergeType))throw new Error(`ranges-merge: [THROW_ID_02] resolvedOpts.mergeType was customised to a wrong thing! It was given of a type: "${typeof n.mergeType}", equal to ${JSON.stringify(n.mergeType,null,4)}`);if("boolean"!=typeof n.joinRangesThatTouchEdges)throw new Error(`ranges-merge: [THROW_ID_04] resolvedOpts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "${typeof n.joinRangesThatTouchEdges}", equal to ${JSON.stringify(n.joinRangesThatTouchEdges,null,4)}`)}else n={...Xt};let o,a,i,s=e.filter(e=>Array.isArray(e)).map(e=>[...e]).filter(e=>void 0!==e[2]||e[0]!==e[1]);o=n.progressFn?zt(s,{progressFn:e=>{i=Math.floor(e/5),i!==a&&(a=i,null!=n.progressFn&&n.progressFn(i))}}):zt(s);let l=o.length-1;for(let e=l;e>0;e--)n.progressFn&&(i=Math.floor(78*(1-e/l))+21,i!==a&&i>a&&(a=i,n.progressFn(i))),(o[e][0]<=o[e-1][0]||!n.joinRangesThatTouchEdges&&o[e][0]<o[e-1][1]||n.joinRangesThatTouchEdges&&o[e][0]<=o[e-1][1])&&(o[e-1][0]=Math.min(o[e][0],o[e-1][0]),o[e-1][1]=Math.max(o[e][1],o[e-1][1]),void 0!==o[e][2]&&(o[e-1][0]>=o[e][0]||o[e-1][1]<=o[e][1])&&null!==o[e-1][2]&&(null===o[e][2]&&null!==o[e-1][2]?o[e-1][2]=null:null!=o[e-1][2]?2==+(n||{})?.mergeType&&o[e-1][0]===o[e][0]?o[e-1][2]=o[e][2]:o[e-1][2]+=o[e][2]:o[e-1][2]=o[e][2]),o.splice(e,1),e=o.length);return o.length?o:null}(this.ranges,{mergeType:this.opts.mergeType}),this.ranges&&this.opts.limitToBeAddedWhitespace?this.ranges.map(e=>ie(e[2])?[e[0],e[1],Qt(e[2],this.opts.limitLinebreaksCount)]:e):this.ranges):null}wipe(){this.ranges=[]}replace(e){if(Array.isArray(e)&&e.length){if(!Array.isArray(e[0])||!ae(e[0][0]))throw new Error(`ranges-push/Ranges/replace(): [THROW_ID_11] Single range was given but we expected array of arrays! The first element, ${JSON.stringify(e[0],null,4)} should be an array and its first element should be an integer, a string index.`);this.ranges=Array.from(e)}else this.ranges=[]}last(){return Array.isArray(this.ranges)&&this.ranges.length?this.ranges[this.ranges.length-1]:null}};
/**
 * @name string-left-right
 * @fileoverview Looks up the first non-whitespace character to the left/right of a given index
 * @version 6.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/string-left-right/}
 */re();function rr(e,t=0){return function({str:e,idx:t=0,stopAtNewlines:r=!1,stopAtRawNbsp:n=!1}){if("string"!=typeof e||!e.length||((!t||"number"!=typeof t)&&(t=0),!e[t+1]))return null;if(e[t+1]&&(e[t+1].trim()||r&&"\n\r".includes(e[t+1])||n&&" "===e[t+1]))return t+1;if(e[t+2]&&(e[t+2].trim()||r&&"\n\r".includes(e[t+2])||n&&" "===e[t+2]))return t+2;for(let o=t+1,a=e.length;o<a;o++)if(e[o].trim()||r&&"\n\r".includes(e[o])||n&&" "===e[o])return o;return null}({str:e,idx:t,stopAtNewlines:!1,stopAtRawNbsp:!1})}
/**
 * @name string-strip-html
 * @fileoverview Strip HTML tags from strings. No parser, accepts mixed sources.
 * @version 13.5.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/string-strip-html/}
 */function nr(e){return/[-_A-Za-z0-9]/.test(e)}function or(e,t){if(!e)return[];if(Array.isArray(e))return e.filter(e=>"string"==typeof e&&e.trim());if("string"==typeof e)return e.trim()?[e]:[];throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_05] ${t} must be array containing zero or more strings or something falsey. Currently it's equal to: ${e}, that a type of ${typeof e}.`)}function ar(e,t,r,n){for(let o=t,a=e.length;o<a;o++){if(e.startsWith(r,o))return!0;if(e.startsWith(n,o))return!1}return!1}function ir(e,t,r){return e?.quotes?.value&&ar(t,r+1,e.quotes.value,">"),ar(t,e?.quotes?.next-1,e?.quotes?.value,">"),!e?.quotes||!ar(t,r+1,e.quotes.value,">")&&-1!==e?.quotes?.next&&ar(t,e?.quotes?.next-1,e?.quotes?.value,">")}function sr(e,t){return(t.match(new RegExp(e,"g"))||[]).length}var lr=new Set(["!doctype","abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","doctype","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","param","picture","pre","progress","rb","rp","rt","rtc","ruby","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr","xml"]),ur=new Set(["a","b","i","p","q","s","u"]),cr=new Set([".",",",";","!","?"]),pr=new Set([".",",","?",";",")","…",'"',"»"]),hr=new Set(["a","abbr","acronym","audio","b","bdi","bdo","big","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"]),fr={ignoreTags:[],ignoreTagsWithTheirContents:[],onlyStripTags:[],stripTogetherWithTheirContents:["script","style","xml"],skipHtmlDecoding:!1,trimOnlySpaces:!1,stripRecognisedHTMLOnly:!1,dumpLinkHrefsNearby:{enabled:!1,putOnNewLine:!1,wrapHeads:"",wrapTails:""},ignoreIndentations:!1,cb:null,reportProgressFunc:null,reportProgressFuncFrom:0,reportProgressFuncTo:100};function gr(e,t){let r=Date.now(),n=[],o=[],a=[],i=[],s={};s={attributes:[]};let l=null,u=null,c=null,p=!1,h={},f={tagName:"",hrefValue:"",openingTagEnds:void 0},g="",d=!1,m=null,y=!0;function b(t,r,o){if(Array.isArray(r.stripTogetherWithTheirContents)&&(r.stripTogetherWithTheirContents.includes(s.name)||r.stripTogetherWithTheirContents.includes("*")))if(s.slashPresent&&Array.isArray(n)&&n.some(e=>e.name===s.name)){for(let a=n.length;a--;)if(n[a].name===s.name){i=i.filter(([e,r])=>(e<n[a].lastOpeningBracketAt||e>=t+1)&&(r<=n[a].lastOpeningBracketAt||r>t+1));let l=t+1;s.lastClosingBracketAt&&(l=s.lastClosingBracketAt+1),i.push([n[a].lastOpeningBracketAt,l]),pr.has(e[t])&&r.cb?r.cb({tag:s,deleteFrom:n[a].lastOpeningBracketAt,deleteTo:t+1,insert:null,rangesArr:o,proposedReturn:[n[a].lastOpeningBracketAt,t,null]}):r.cb&&r.cb({tag:s,deleteFrom:n[a].lastOpeningBracketAt,deleteTo:t,insert:"",rangesArr:o,proposedReturn:[n[a].lastOpeningBracketAt,t,""]}),n.splice(a,1);break}}else s.slashPresent||n.push(s);else Array.isArray(r.ignoreTagsWithTheirContents)&&O(t,r,s)&&(y=!1)}function v(t,r,n,o,a,i){if(Array.isArray(D.current())&&"number"==typeof n&&0===D.current()[0][0]&&D.current()[0][1]>=n)return"";if(e.length===o&&i&&!S?.dumpLinkHrefsNearby?.enabled)return null;let l="";if(Number.isInteger(n)&&n<a&&(l+=t.slice(n,a)),Number.isInteger(o)&&o>i+1){let r=t.slice(i+1,o);o&&!rr(e,o-1)&&(r=r.trimEnd()),r.includes("\n")&&k(o,t)?l+=" ":l+=r}let u=!pr.has(t[r]),c=">"!==t[o-1]||!t[n].trim(),p=!['"',"("].includes(t[a-1]),h=![";",".",":","!"].includes(t[r]);if((u||c&&p&&h)&&(c||p)&&"!"!==t[r]&&(!hr.has(s.name)||"number"==typeof n&&n<a||"number"==typeof o&&o>i+1)){let e=l.match(/\n/g);return Array.isArray(e)&&e.length?1===e.length?"\n":2===e.length?"\n\n":"\n\n\n":" "}return""}function w(t,r){if(t.dumpLinkHrefsNearby?.enabled&&f.tagName&&f.tagName===s.name&&s.lastOpeningBracketAt&&(f.openingTagEnds&&s.lastOpeningBracketAt>f.openingTagEnds||!f.openingTagEnds)&&(d=!0),d){let n=t.dumpLinkHrefsNearby?.putOnNewLine?"\n\n":"";g=`${n}${f.hrefValue}`,("number"!=typeof r||rr(e,r-1))&&(g+=n)}}function k(t,r){return r?"<"===r[t]&&"%"!==r[t+1]:"<"===e[t]&&"%"!==e[t+1]}function T(t){return">"===e[t]&&"%"!==e[t-1]}function O(t,r,n){if(r.ignoreTagsWithTheirContents.includes("*"))return!0;let a=e.indexOf(`<${n.name}`,t),i=e.indexOf(`</${n.name}`,t);return!(!n.slashPresent&&-1===i||n.slashPresent&&!o.some(e=>e.name===n.name)||i>-1&&a>-1&&a<i)&&r.ignoreTagsWithTheirContents.includes(n.name)}if("string"!=typeof e)throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_01] Input must be string! Currently it's: ${(typeof e).toLowerCase()}, equal to:\n${JSON.stringify(e,null,4)}`);if(t){if(!ne(t))throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_02] Optional Options Object must be a plain object! Currently it's: ${(typeof t).toLowerCase()}, equal to:\n${JSON.stringify(t,null,4)}`);if(t.reportProgressFunc&&"function"!=typeof t.reportProgressFunc)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_03] The Optional Options Object's key reportProgressFunc, callback function, should be a function but it was given as type ${typeof t.reportProgressFunc}, equal to ${JSON.stringify(t.reportProgressFunc,null,4)}`);if("boolean"==typeof t.dumpLinkHrefsNearby&&null!=t.dumpLinkHrefsNearby)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_04] The Optional Options Object's key should be a plain object but it was given as type ${typeof t.dumpLinkHrefsNearby}, equal to ${JSON.stringify(t.dumpLinkHrefsNearby,null,4)}`)}function A(){d&&(f={tagName:"",hrefValue:"",openingTagEnds:void 0},d=!1)}let S={...fr,...t,dumpLinkHrefsNearby:Object.assign({},fr.dumpLinkHrefsNearby,t?.dumpLinkHrefsNearby)};if(se(S,"returnRangesOnly"))throw new TypeError("string-strip-html/stripHtml(): [THROW_ID_05] The Optional Options Object's key returnRangesOnly has been removed from the API since v.5 release.");if(S.reportProgressFunc){if("number"!=typeof S.reportProgressFuncFrom)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_06] The Optional Options Object's key reportProgressFuncFrom, callback function's "from" range, should be a number but it was given as type ${typeof S.reportProgressFuncFrom}, equal to ${JSON.stringify(S.reportProgressFuncFrom,null,4)}`);if("number"!=typeof S.reportProgressFuncTo)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_07] The Optional Options Object's key reportProgressFuncTo, callback function's "to" range, should be a number but it was given as type ${typeof S.reportProgressFuncTo}, equal to ${JSON.stringify(S.reportProgressFuncTo,null,4)}`)}S.ignoreTags=or(S.ignoreTags,"resolvedOpts.ignoreTags"),S.onlyStripTags=or(S.onlyStripTags,"resolvedOpts.onlyStripTags");let E=!!S.onlyStripTags.length;S.onlyStripTags.length&&S.ignoreTags.length&&(S.onlyStripTags=Rt(S.onlyStripTags,...S.ignoreTags)),S.stripTogetherWithTheirContents?"string"==typeof S.stripTogetherWithTheirContents&&S.stripTogetherWithTheirContents.length&&(S.stripTogetherWithTheirContents=[S.stripTogetherWithTheirContents]):S.stripTogetherWithTheirContents=[];let q={};if(S.stripTogetherWithTheirContents&&Array.isArray(S.stripTogetherWithTheirContents)&&S.stripTogetherWithTheirContents.length&&!S.stripTogetherWithTheirContents.every((e,t)=>"string"==typeof e||(q.el=e,q.i=t,!1)))throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_08] Optional Options Object's key stripTogetherWithTheirContents was set to contain not just string elements! For example, element at index ${q.i} has a value ${q.el} which is not string but ${(typeof q.el).toLowerCase()}.`);S.cb||(S.cb=({rangesArr:e,proposedReturn:t})=>{t&&e.push(...t)});let D=new tr({limitToBeAddedWhitespace:!0,limitLinebreaksCount:2});if(!S.skipHtmlDecoding)for(;e!==Vt(e,{scope:"strict"});)e=Vt(e,{scope:"strict"});let R=!1,x=!1,I=0,N=0,$=e.length,j=Math.floor($/2);for(let t=0;t<$;t++){if(S.reportProgressFunc&&($>1e3&&$<2e3?t===j&&S.reportProgressFunc(Math.floor((S.reportProgressFuncTo-S.reportProgressFuncFrom)/2)):$>=2e3&&(I=S.reportProgressFuncFrom+Math.floor(t/$*(S.reportProgressFuncTo-S.reportProgressFuncFrom)),I!==N&&(N=I,S.reportProgressFunc(I)))),Object.keys(s).length>1&&s.lastClosingBracketAt&&s.lastClosingBracketAt<t&&" "!==e[t]&&null===m&&(m=t),!R&&"%"===e[t]&&"{"===e[t-1]&&e.includes("%}",t+1)){c=null;let r=e.indexOf("%}",t)-1;if(r>t){t=r;continue}}if(!R&&T(t)&&(!s||Object.keys(s).length<2)&&t>1)for(let r=t;r--;)if(void 0===e[r-1]||T(r)){let n=void 0===e[r-1]?r:r+1,o=e.slice(n,t+1)||"";if((o.includes("/>")||o.includes("/ >")||o.includes('="')||o.includes("='"))&&e!==`<${Dt(o.trim(),"/>")}>`&&[...lr].some(e=>Dt(o.trim().split(/\s+/).filter(e=>e.trim()).filter((e,t)=>0===t),"/>").toLowerCase()===e)&&""===gr(`<${o.trim()}>`,S).result){(!a.length||a[a.length-1][0]!==s.lastOpeningBracketAt)&&a.push([n,t+1]),(!i.length||i[i.length-1][0]!==s.lastOpeningBracketAt)&&i.push([n,t+1]);let r=v(e,t,n,t+1,n,t+1),o=t+1;if(e[o]&&!e[o].trim())for(let t=o;t<$;t++)if(e[t].trim()){o=t;break}S.cb({tag:s,deleteFrom:n,deleteTo:o,insert:r,rangesArr:D,proposedReturn:[n,o,r]})}break}if(!x&&"/"===e[t]&&!s.quotes?.value&&Number.isInteger(s.lastOpeningBracketAt)&&!Number.isInteger(s.lastClosingBracketAt)&&(s.slashPresent=t),'"'===e[t]||"'"===e[t])if(!x&&s.nameStarts&&s?.quotes?.value===e[t])if(void 0===h.valueStarts)h={},delete s.quotes;else{let r;h.valueEnds=t,h.value=e.slice(h.valueStarts,t),s.attributes.push(h),h={},delete s.quotes,S.dumpLinkHrefsNearby?.enabled&&!n.length&&s.attributes.some(e=>{if("string"==typeof e.name&&"href"===e.name.toLowerCase())return r=`${S.dumpLinkHrefsNearby?.wrapHeads||""}${e.value}${S.dumpLinkHrefsNearby?.wrapTails||""}`,!0})&&(f={tagName:s.name,hrefValue:r,openingTagEnds:void 0})}else!x&&!s.quotes&&s.nameStarts&&(s.quotes={},s.quotes.value=e[t],s.quotes.start=t,s.quotes.next=e.indexOf(e[t],t+1),h.nameStarts&&h.nameEnds&&h.nameEnds<t&&h.nameStarts<t&&!h.valueStarts&&(h.name=e.slice(h.nameStarts,h.nameEnds)));if(!(void 0===s.nameStarts||void 0!==s.nameEnds||e[t].trim()&&nr(e[t]))){if(s.nameEnds=t,s.name=e.slice(s.nameStarts,s.nameEnds+(T(t)||"/"===e[t]||void 0!==e[t+1]?0:1)),"!"!==e[s.nameStarts-1]&&!s.name.replace(/-/g,"").length||/^\d+$/.test(s.name[0])){s={};continue}if("string"==typeof s.name&&"doctype"===s.name.toLowerCase()&&(x=!0),k(t)){w(S);let r=v(e,t,s.leftOuterWhitespace,t,s.lastOpeningBracketAt,t);(S.stripTogetherWithTheirContents.includes(s.name)||S.stripTogetherWithTheirContents.includes("*"))&&(i=i.filter(([e,r])=>!(e===s.leftOuterWhitespace&&r===t))),S.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:t,insert:`${r}${g}${r}`,rangesArr:D,proposedReturn:[s.leftOuterWhitespace,t,`${r}${g}${r}`]}),A(),b(t,S,D)}}if(s.quotes?.start&&s.quotes.start<t&&!s.quotes.end&&h.nameEnds&&h.equalsAt&&!h.valueStarts&&(h.valueStarts=t),!s.quotes&&h.nameEnds&&"="===e[t]&&!h.valueStarts&&!h.equalsAt&&(h.equalsAt=t),!s.quotes&&h.nameStarts&&h.nameEnds&&!h.valueStarts&&e[t].trim()&&"="!==e[t]&&(s.attributes.push(h),h={}),!s.quotes&&h.nameStarts&&!h.nameEnds&&(x&&"'\"".includes(e[h.nameStarts])?h.nameStarts<t&&e[t]===e[h.nameStarts]&&(h.nameEnds=t+1,h.name=e.slice(h.nameStarts,h.nameEnds)):e[t].trim()?"="===e[t]?h.equalsAt||(h.nameEnds=t,h.equalsAt=t,h.name=e.slice(h.nameStarts,h.nameEnds)):("/"===e[t]||T(t)||k(t))&&(h.nameEnds=t,h.name=e.slice(h.nameStarts,h.nameEnds),s.attributes.push(h),h={}):(h.nameEnds=t,h.name=e.slice(h.nameStarts,h.nameEnds))),!s.quotes&&s.nameEnds<t&&!e[t-1].trim()&&e[t].trim()&&!"<>/!".includes(e[t])&&!h.nameStarts&&!s.lastClosingBracketAt&&(h.nameStarts=t),null!==s.lastOpeningBracketAt&&s.lastOpeningBracketAt<t&&"/"===e[t]&&s.onlyPlausible&&(s.onlyPlausible=!1),null!==s.lastOpeningBracketAt&&s.lastOpeningBracketAt<t&&"/"!==e[t]&&(void 0===s.onlyPlausible&&(e[t].trim()&&!k(t)||s.slashPresent?s.onlyPlausible=!1:s.onlyPlausible=!0),e[t].trim()&&void 0===s.nameStarts&&!k(t)&&"/"!==e[t]&&!T(t)&&"!"!==e[t]&&(s.nameStarts=t,s.nameContainsLetters=!1)),s.nameStarts&&!s.quotes&&"string"==typeof e[t]&&e[t].toLowerCase()!==e[t].toUpperCase()&&(s.nameContainsLetters=!0),T(t)&&(ir(s,e,t)||s.quotes.value&&"number"==typeof s.lastOpeningBracketAt&&sr(s.quotes.value,e.slice(s.lastOpeningBracketAt,t))%2==1&&!e.slice(s.lastOpeningBracketAt+1,t).includes("<")&&!e.slice(s.lastOpeningBracketAt+1,t).includes(">"))&&void 0!==s.lastOpeningBracketAt&&(s.lastClosingBracketAt=t,m=null,Object.keys(h).length&&(s.attributes.push(h),h={}),S.dumpLinkHrefsNearby?.enabled&&f.tagName&&!f.openingTagEnds&&(f.openingTagEnds=t)),(!x||">"===e[t])&&void 0!==s.lastOpeningBracketAt){if(void 0===s.lastClosingBracketAt){if(s.lastOpeningBracketAt<t&&!k(t)&&(void 0===e[t+1]||k(t+1)&&!s?.quotes?.value)&&s.nameContainsLetters&&"number"==typeof s.nameStarts){if(s.name=e.slice(s.nameStarts,s.nameEnds||t+1).toLowerCase(),(!a.length||a[a.length-1][0]!==s.lastOpeningBracketAt)&&a.push([s.lastOpeningBracketAt,t+1]),S.ignoreTags.includes(s.name)||O(t,S,s)||!lr.has(s.name)&&(s.onlyPlausible||S.stripRecognisedHTMLOnly)){s={},h={};continue}if((lr.has(s.name)||ur.has(s.name))&&(!1===s.onlyPlausible||!0===s.onlyPlausible&&s.attributes.length)||void 0===e[t+1]){w(S);let r,n=v(e,t,s.leftOuterWhitespace,t+1,s.lastOpeningBracketAt,s.lastClosingBracketAt);R&&"script"===s.name&&s.slashPresent&&(R=!1),r=null===n||null===g?null:`${n}${g}${n}`,S.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:t+1,insert:r,rangesArr:D,proposedReturn:[s.leftOuterWhitespace,t+1,r]}),A(),b(t,S,D)}if(!i.length||i[i.length-1][0]!==s.lastOpeningBracketAt&&i[i.length-1][1]!==t+1)if(S.stripTogetherWithTheirContents.includes(s.name)||S.stripTogetherWithTheirContents.includes("*")){let e;for(let t=n.length;t--;)n[t].name===s.name&&(e=n[t]);e?(i=i.filter(([t])=>t!==e.lastOpeningBracketAt),i.push([e.lastOpeningBracketAt,t+1])):i.push([s.lastOpeningBracketAt,t+1])}else i.push([s.lastOpeningBracketAt,t+1])}}else if(t>s.lastClosingBracketAt&&e[t].trim()||void 0===e[t+1]||S.ignoreIndentations&&"\r\n".includes(e[t])){let r=s.lastClosingBracketAt===t?t+1:t;S.trimOnlySpaces&&r===$-1&&null!==m&&m<t&&(r=m),(!a.length||a[a.length-1][0]!==s.lastOpeningBracketAt)&&a.push([s.lastOpeningBracketAt,s.lastClosingBracketAt+1]);let n=S.ignoreTags.includes(s.name),l=O(t,S,s);if(!y||S.stripRecognisedHTMLOnly&&"string"==typeof s.name&&!lr.has(s.name.toLowerCase())&&!ur.has(s.name.toLowerCase())||!E&&(n||l)||E&&!S.onlyStripTags.includes(s.name)||S.ignoreTagsWithTheirContents.includes(s.name)){if(l)if(s.slashPresent){for(let e=o.length;e--;)if(o[e].name===s.name){o.splice(e,1);break}o.length||(y=!0)}else y&&(y=!1),o.push(s);S.cb({tag:s,deleteFrom:null,deleteTo:null,insert:null,rangesArr:D,proposedReturn:null}),s={},h={}}else if(!s.onlyPlausible||0===s.attributes.length&&s.name&&(lr.has(s.name.toLowerCase())||ur.has(s.name.toLowerCase()))||s.attributes?.some(e=>e.equalsAt)){(!i.length||i[i.length-1][0]!==s.lastOpeningBracketAt)&&i.push([s.lastOpeningBracketAt,s.lastClosingBracketAt+1]);let n,o=v(e,t,s.leftOuterWhitespace,r,s.lastOpeningBracketAt,s.lastClosingBracketAt);g="",d=!1,w(S,r),"string"==typeof g&&g.length?(n=`${o}${g}${"\n\n"===o?"\n":o}`,r===s.lastClosingBracketAt+1&&(!e[r]||!cr.has(e[r]))&&(n+=" "),s.leftOuterWhitespace===s.lastOpeningBracketAt&&D.last()&&D.last()[1]<s.lastOpeningBracketAt&&(!S?.dumpLinkHrefsNearby?.putOnNewLine||!cr.has(e[r]))&&(n=" "+n)):n=o,null!==n&&(0===s.leftOuterWhitespace||!rr(e,r-1))&&(!S.dumpLinkHrefsNearby?.enabled||"a"!==s.name)&&(n=void 0);let a=0;if(d&&cr.has(e[r])){S.dumpLinkHrefsNearby?.putOnNewLine&&(n=`${e[r]}${n||""}`);let o=rr(e,r);o&&n?.endsWith("\n")?a+=o-t:(!o||o>t)&&a++}S.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:r+a,insert:n,rangesArr:D,proposedReturn:[s.leftOuterWhitespace,r+a,n]}),A(),b(t,S,D)}else s={};T(t)||(s={})}x&&(x=!1)}if((!R||"<"===e[t]&&rr(e,rr(e,t))&&"/"===e[rr(e,t)]&&e.startsWith("script",rr(e,rr(e,t))))&&k(t)&&!k(t-1)&&!"'\"".includes(e[t+1])&&(!"'\"".includes(e[t+2])||/\w/.test(e[t+1]))&&("c"!==e[t+1]||":"!==e[t+2])&&("f"!==e[t+1]||"m"!==e[t+2]||"t"!==e[t+3]||":"!==e[t+4])&&("s"!==e[t+1]||"q"!==e[t+2]||"l"!==e[t+3]||":"!==e[t+4])&&("x"!==e[t+1]||":"!==e[t+2])&&("f"!==e[t+1]||"n"!==e[t+2]||":"!==e[t+3])&&ir(s,e,t)){if(T(rr(e,t)))continue;if(s.nameEnds&&s.nameEnds<t&&!s.lastClosingBracketAt&&(!0===s.onlyPlausible&&s.attributes?.length||!1===s.onlyPlausible)){let r=v(e,t,s.leftOuterWhitespace,t,s.lastOpeningBracketAt,t);S.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:t,insert:r,rangesArr:D,proposedReturn:[s.leftOuterWhitespace,t,r]}),b(t,S,D),s={},h={}}if(void 0!==s.lastOpeningBracketAt&&s.onlyPlausible&&s.name&&!s.quotes&&(s.lastOpeningBracketAt=void 0,s.name=void 0,s.onlyPlausible=!1),!(void 0!==s.lastOpeningBracketAt&&s.onlyPlausible||s.quotes||(s.lastOpeningBracketAt=t,s.slashPresent=!1,s.attributes=[],null===l?s.leftOuterWhitespace=t:S.trimOnlySpaces&&0===l?s.leftOuterWhitespace=u||t:s.leftOuterWhitespace=l,"!--"!=`${e[t+1]}${e[t+2]}${e[t+3]}`&&"![CDATA["!=`${e[t+1]}${e[t+2]}${e[t+3]}${e[t+4]}${e[t+5]}${e[t+6]}${e[t+7]}${e[t+8]}`))){let r,n=!0;"-"===e[t+2]&&(n=!1);for(let o=t;o<$;o++)if((!r&&n&&"]]>"==`${e[o-2]}${e[o-1]}${e[o]}`||!n&&"--\x3e"==`${e[o-2]}${e[o-1]}${e[o]}`)&&(r=o),r&&(r<o&&e[o].trim()||void 0===e[o+1])){let n=o;(void 0===e[o+1]&&!e[o].trim()||">"===e[o])&&(n+=1),(!a.length||a[a.length-1][0]!==s.lastOpeningBracketAt)&&a.push([s.lastOpeningBracketAt,r+1]),(!i.length||i[i.length-1][0]!==s.lastOpeningBracketAt)&&i.push([s.lastOpeningBracketAt,r+1]);let l=v(e,o,s.leftOuterWhitespace,n,s.lastOpeningBracketAt,r);S.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:n,insert:l,rangesArr:D,proposedReturn:[s.leftOuterWhitespace,n,l]}),t=o-1,">"===e[o]&&(t=o),s={},h={};break}}}e[t].trim()&&847!==e[t].charCodeAt(0)?(null!==l&&(!s.quotes&&h.equalsAt>l-1&&h.nameEnds&&h.equalsAt>h.nameEnds&&'"'!==e[t]&&"'"!==e[t]&&(ne(h)&&s.attributes.push(h),h={},s.equalsSpottedAt=void 0),l=null),p||(p=!0,y&&!R&&"number"==typeof c&&t&&c<t-1&&(e.slice(c+1,t).trim()?c=null:S.ignoreIndentations||D.push([c+1,t])))):(null===l&&(l=t,void 0!==s.lastOpeningBracketAt&&s.lastOpeningBracketAt<t&&s.nameStarts&&s.nameStarts<s.lastOpeningBracketAt&&t===s.lastOpeningBracketAt+1&&!n.some(e=>e.name===s.name)&&(s.onlyPlausible=!0,s.name=void 0,s.nameStarts=void 0)),("\n"===e[t]||"\r"===e[t])&&(c=t,p&&(p=!1)))," "===e[t]?null===u&&(u=t):null!==u&&(u=null),"script"===s.name&&(R=!s.slashPresent)}if(e&&!S.ignoreIndentations&&(S.trimOnlySpaces&&" "===e[0]||!S.trimOnlySpaces&&!e[0].trim()))for(let t=0;t<$;t++){if(S.trimOnlySpaces&&" "!==e[t]||!S.trimOnlySpaces&&e[t].trim()){D.push([0,t]);break}e[t+1]||D.push([0,t+1])}if(e&&(S.trimOnlySpaces&&" "===e[~-e.length]||!S.trimOnlySpaces&&!e[~-e.length].trim()))for(let t=e.length;t--;)if(S.trimOnlySpaces&&" "!==e[t]||!S.trimOnlySpaces&&e[t].trim()){D.push([t+1,$]);break}let F=D.current();if(!t?.cb&&F&&(F[0]&&!F[0][0]&&(F[0][1],D.ranges[0]=[D.ranges[0][0],D.ranges[0][1]]),F[F.length-1]&&F[F.length-1][1]===e.length&&(F[F.length-1][0],D.ranges))){let t=D.ranges[D.ranges.length-1][0];e[t-1]&&(S.trimOnlySpaces&&" "===e[t-1]||!S.trimOnlySpaces&&!e[t-1].trim())&&(t-=1);let r=D.ranges[D.ranges.length-1][2];D.ranges[D.ranges.length-1]=[t,D.ranges[D.ranges.length-1][1]],r?.trim()&&D.ranges[D.ranges.length-1].push(r.trimEnd())}return{log:{timeTakenInMilliseconds:Date.now()-r},result:Yt(e,D.current()),ranges:D.current(),allTagLocations:a,filteredTagLocations:i}}var dr={},mr={},yr={},br={},vr={},wr={};const kr=("undefined"!=typeof globalThis?globalThis:global).performance;var Tr,Or,Ar,Sr,Er,qr,Dr=te(Object.freeze({__proto__:null,performance:kr}));function Rr(){if(Tr)return wr;Tr=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.wait=wr.getMilliseconds=void 0;const e=Dr;return wr.getMilliseconds=function(){const[t,r]=function(){const t=.001*e.performance.now();return[Math.floor(t),Math.floor(t%1*1e9)]}();return 1e3*t+Math.floor(r/1e6)},wr.wait=function(e){return new Promise(t=>setTimeout(t,e))},wr}function xr(){if(Or)return vr;Or=1,Object.defineProperty(vr,"__esModule",{value:!0}),vr.TokenBucket=void 0;const e=Rr();return vr.TokenBucket=class{constructor({bucketSize:t,tokensPerInterval:r,interval:n,parentBucket:o}){if(this.bucketSize=t,this.tokensPerInterval=r,"string"==typeof n)switch(n){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invalid interval "+n)}else this.interval=n;this.parentBucket=o,this.content=0,this.lastDrip=e.getMilliseconds()}async removeTokens(t){if(0===this.bucketSize)return Number.POSITIVE_INFINITY;if(t>this.bucketSize)throw new Error(`Requested tokens ${t} exceeds bucket size ${this.bucketSize}`);this.drip();const r=async()=>{const r=Math.ceil((t-this.content)*(this.interval/this.tokensPerInterval));return await e.wait(r),this.removeTokens(t)};if(t>this.content)return r();if(null!=this.parentBucket){const e=await this.parentBucket.removeTokens(t);return t>this.content?r():(this.content-=t,Math.min(e,this.content))}return this.content-=t,this.content}tryRemoveTokens(e){return!this.bucketSize||!(e>this.bucketSize)&&(this.drip(),!(e>this.content)&&(!(this.parentBucket&&!this.parentBucket.tryRemoveTokens(e))&&(this.content-=e,!0)))}drip(){if(0===this.tokensPerInterval){const e=this.content;return this.content=this.bucketSize,this.content>e}const t=e.getMilliseconds(),r=Math.max(t-this.lastDrip,0);this.lastDrip=t;const n=r*(this.tokensPerInterval/this.interval),o=this.content;return this.content=Math.min(this.content+n,this.bucketSize),Math.floor(this.content)>Math.floor(o)}},vr}function Ir(){return Sr||(Sr=1,e=yr,t=yr&&yr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=yr&&yr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(function(){if(Ar)return br;Ar=1,Object.defineProperty(br,"__esModule",{value:!0}),br.RateLimiter=void 0;const e=xr(),t=Rr();return br.RateLimiter=class{constructor({tokensPerInterval:r,interval:n,fireImmediately:o}){this.tokenBucket=new e.TokenBucket({bucketSize:r,tokensPerInterval:r,interval:n}),this.tokenBucket.content=r,this.curIntervalStart=t.getMilliseconds(),this.tokensThisInterval=0,this.fireImmediately=null!=o&&o}async removeTokens(e){if(e>this.tokenBucket.bucketSize)throw new Error(`Requested tokens ${e} exceeds maximum tokens per interval ${this.tokenBucket.bucketSize}`);const r=t.getMilliseconds();if((r<this.curIntervalStart||r-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=r,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)return-1;{const n=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-r);await t.wait(n);const o=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,o}}const n=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,n}tryRemoveTokens(e){if(e>this.tokenBucket.bucketSize)return!1;const r=t.getMilliseconds();if((r<this.curIntervalStart||r-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=r,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;const n=this.tokenBucket.tryRemoveTokens(e);return n&&(this.tokensThisInterval+=e),n}getTokensRemaining(){return this.tokenBucket.drip(),this.tokenBucket.content}},br}(),e),r(xr(),e)),yr;var e,t,r}var Nr=(qr||(qr=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RateLimiter=void 0;var t=function(){if(Er)return mr;Er=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.RateLimiter=void 0;var e=Ir(),t=function(){function t(e,t){this.amount=e,this.interval=t,this.limiters={}}return t.prototype.take=function(t){var r=this.limiters[t];return r||(r=new e.RateLimiter({tokensPerInterval:this.amount,interval:this.interval}),this.limiters[t]=r),r.getTokensRemaining()<1||(r.removeTokens(1),!1)},t}();return mr.RateLimiter=t,mr}();Object.defineProperty(e,"RateLimiter",{enumerable:!0,get:function(){return t.RateLimiter}})}(dr)),dr);function $r(e){let t=e;const r=Math.floor(t/86400);t%=86400;const n=Math.floor(t/3600);t%=3600;const o=Math.floor(t/60),a=Math.floor(t%60);let i="";if(0===Math.floor(e))i="0s";else{const e=0===r,t=0===n,s=0===o,l=0===a;i+=e?"":`${r}d`,i+=e||t&&s&&l?"":", ",i+=t?"":`${n}h`,i+=t||s&&l?"":", ",i+=s?"":`${o}m`,i+=s||l?"":", ",i+=l?"":`${a}s`}return i}async function jr({fs:e,settings:t}){const r=JSON.parse(await e.readFile(new URL("../../library/library_listing.json",import.meta.url),"utf8")),n=t.embedColor,o=t.embedTextLimit??2e3,a=Object.keys(r.index),i=/\bread (?<refName>\S.+) (?<index>[\-.\d]+)\b/iv;function s(e,t){const r=e.chapters.length;return(t=Number.parseInt(String(t))-1)>-1&&t<r?e.chapters[t]:`I know which work you're talking about, but I can't find that section in it. Valid section numbers are from **1** to **${r}**.`}function l(e,t,a,i,s,l){let u="";u="hwa"===s.toLowerCase()||"hwp"===s.toLowerCase()?`**${i}. ${l.title}**\n`:`**Chapter ${i}, Para 1. ${l.title}**\n`;const c=function(e,t){const r=[];for(;e.length>t;){let n=e.slice(0,Math.max(0,t)).lastIndexOf(" ");n=n<=0?t:n,r.push(e.slice(0,Math.max(0,n)));let o=e.indexOf(" ",n)+1;(o<n||o>n+t)&&(o=n),e=e.slice(Math.max(0,o))}return r.push(e),r}(l.paras[0].text,o);c.forEach((o,i)=>{const p=new e.EmbedBuilder;if(p.setColor(n??null),p.setAuthor({name:`${r.list[r.index[s]].title} by ${r.list[r.index[s]].author}`,iconURL:t??void 0}),u+=o,p.setDescription(u),i===c.length-1&&void 0!==l.notes&&l.notes.length>0){let e="";for(const t of l.notes)e+=`${t.fn}. ${t.note}\n`;""!==e&&p.addFields({name:"Notes",value:e,inline:!1})}a.channel.send({embeds:[p]}),u=""})}async function u(t){return JSON.parse(await e.readFile(new URL(`../../library/${r.list[r.index[t]].filename}`,import.meta.url),"utf8"))}return{showList:function(e){const t=function(){let e="";for(const t of r.list)e+=`\n**${t.code.toUpperCase()}**: ${t.title} (${t.author})`;return e+="\n",e}();e.channel.send({content:`The following texts are available in my library, ${e.author.username}.`,embeds:[{color:8359053,description:"\nTo read from one of these texts, mention the book name and the section you're interested in. For example, to read the 12th Arabic Hidden Word, say: `!read HWA 12`.",fields:[{name:"Available Texts",value:t}]}]})},readBook:async function(e,t,n){const o=e.content,{groups:a}=o.match(i)??{};let{refName:c}=a;const{index:p}=a;if(!Object.hasOwn(r.index,c.toLowerCase()))return;c=c.toLowerCase();const h=s(await u(c),Number(p));"object"==typeof h?l(n,t,e,Number(p),c,h):e.channel.send(h)},readRandom:async function(e,t,r){const n=a[Math.floor(Math.random()*a.length)],o=await u(n),i=Math.floor(Math.random()*o.chapters.length);l(r,t,e,i,n,s(o,i))},reader:function(e){e.channel.send("I couldn't understand your request. Make sure you format your request like this: ``read <work> <section number>``. To see the list of works in my library, type ``read list``.")}}}const Fr=function({wikiTools:e,client:t,_:r}){async function n(n,{forceToday:l}={}){const u=/!(?:bp|pedia|b9|bahai9|bm|media|img)/giv,c=n.content.split(" "),p=c.findIndex(e=>e.match(u));c.splice(0,p+1);const h=/-(?:r|rnd|rand)/giv,f=/-(?:t|tih|today)/giv,g=/-(?<nr>[1-5])/iv,d=c.join(" ");let m=!1,y=1,b=!1,v="",w="",k=!1;if(o.re.test(n.content))m=!0;else{s.re.test(n.content)?(v="bahaipedia.org",w="Bahaipedia"):a.re.test(n.content)?(v="bahai9.com",w="Bahai9",k=!0):i.re.test(n.content)&&(v="bahai.media",w="Bahaimedia");const e=c.findIndex(e=>e.match(h));if(-1!==e)b=!0,c.splice(e,1);else{const e=c.findIndex(e=>e.match(f));-1!==e&&(m=!0,c.splice(e,1))}const t=c.findIndex(e=>e.match(g));-1!==t&&(y=Number(c[t]),c.splice(t,1))}const T=t.emojis.cache.find(e=>"bstar"===e.name),O=T?.toString()?`${T.toString()} `:"";if(T&&n.react(T),b)try{await async function(t,r,n,o,a,i){let s;try{s=await e.wikiGetRandom(r,n,i)}catch(e){return void console.error("Error getting wiki random",e)}const l=s&&s.title&&s;if(l)return console.log("Query completed."),void t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${o}${a} has returned the following random page, ${t.author.username}:\n\n **[${l.title}](${l.url})**`,image:{url:""!==l.img?l.img:""}}]});t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${o}${a} did not return any results for your query, ${t.author.username}. There may have been a network problem. If you think you're getting this message in error, you may want to try again later.`}]})}(n,y,v,O,w,k)}catch(e){return void console.error("Error with random wiki",e)}else if(m&&(l||"bahaipedia.org"===v))try{await async function(t,n){let o;try{o=await e.bpGetToday()}catch(e){return void console.error("Error getting Bahaipedia Today",e)}if(o){console.log("Query completed.");const e={month:"long",day:"numeric"},a=Date.now(),i=new Intl.DateTimeFormat(r.resolvedLocale,e).format(a);return void t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${n}Here's Bahaipedia's Today in History entry for ${i}, ${t.author.username}:\n\n ${o}`}]})}t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${n}Bahaipedia did not return any results for your query, ${t.author.username}. There may have been a network problem. If you think you're getting this message in error, you may want to try again later.`}]})}(n,O)}catch(e){return void console.error("Error with today in history",e)}else if(/[\w\s'‘’\(\)\-,.]+/giv.test(d))try{await async function(t,r,n,o,a,i,s){let l;try{l=await e.wikiGetURL(r,n,o,s)}catch(e){console.error("Error getting",e)}console.log("Result:",l);const u="object"==typeof l&&l?.title&&l;if(u){console.log(`Search completed: ${r} => ${u.title}`);const e=/<span class="searchmatch">|<\/span>/giv,n=u.snippet?.replaceAll(e,"**");return void t.channel.send({content:"Here is the result of your search.",embeds:[{color:3447003,description:`${a}${i} has returned the following page as the top result for your search, ${t.author.username}:\n\n **[${u.title}](${u.url})**\n\n${n}`,image:{url:""!==u.img?u.img:""}}]})}t.channel.send({content:"Here is the result of your search.",embeds:[{color:3447003,description:`${a}${i} did not return any results for your search, ${t.author.username}. Did you spell your search terms correctly?\n\nThere may also have been a network problem. If you think you're getting this message in error, you may want to try again later.`}]})}(n,d,y,v,O,w,k)}catch(e){return void console.error("Error searching wiki",e)}console.log(`BP command issued by ${n.author.username}.`)}const o={re:/!today\b/iv,helpInfo:{name:"!today",value:"Displays a list of events from today's date in history, via Bahaipedia."},action:async e=>await n(e,{forceToday:!0})},a={re:/!(?:b9|bahai9)\b/iv,action:async e=>await n(e)},i={re:/!(?:bm|media|img)\b/iv,action:async e=>await n(e)},s={re:/!(?:bp|pedia)\b/iv,action:n,helpInfo:{name:"!bp | !b9 | !bm [-rand | *‹keyword›*]",value:"Return a link to the top result for *keyword* on Bahaipedia (`!bp`), Bahai9.com (`!b9`), or Bahai.media (`!bm`); `-rand` displays a random article (or file)."}};return{bp:s,today:o,b9:a,bm:i}};const Lr="346962599771897859",Br="351854934368583681",_r="346962600212561920",Cr="671628531717111808",Pr="346963530836344832",Mr="644722296929648641",Hr="325981722082672661",Ur="391408369891672064",Wr="309427494778306560",Vr=[Wr,"324993843005227008"],Gr=["Admins","Trusted Servant","Mods","Help"],zr="ADMINISTRATOR",Jr=async function({app:e,router:t,Discord:r,wikiTools:n,client:o,guildCheckin:a,_:i,getLocalizedSetting:s,fs:l,settings:u,discordTTS:c,DiscordVoice:p}){const{PUPPET_AUTHOR:h=Wr,ADMIN_PERMISSION:f=zr,ADMIN_IDS:g=Vr,ADMIN_ROLES:d=Gr,enabledCommandGroups:m=["*"],disabledCommandGroups:y=[]}=u,b=m.includes("*"),v=await Promise.all([["socialInfo",()=>(({ADMIN_ROLES:e,client:t})=>({users:{re:/!users\b/iv,action(t){const{guild:r}=t,n=r?.members.cache.filter(e=>"offline"!==e.presence?.status).size,o=r?.members.cache.filter(t=>!!t.roles.cache.some(t=>e.includes(t.name))&&"offline"!==t.presence?.status);t.channel.send(`There ${1===n?"is":"are"} currently ${n} user${1===n?"":"s"} online, including ${o?.size} admin/mod/helper(s).`),console.log(`Users command issued by ${t.author.username}.`)}},seen:{re:/!seen\b/iv,async action(e){const r=e.content.split(" ").filter(e=>!(e.includes("391405681795923968")||e.includes("847456996738334730")||"!seen"===e)).join(" "),n=[],o=t.users.cache.find(e=>e.username===r);if(!o)return void n.push(`I haven't seen ${r} lately.`);const a=await e.guild.members.fetch({user:o,withPresences:!0}),{channel:i}=e,s=(await i.messages.fetch({limit:100})).filter(e=>e.author.id===o.id).first();if(s){const e="dnd"===a.presence?.status?"busy":a.presence?.status,t=new Date(s.createdAt),o=new Date,l=o>t?Number(o)-Number(t):0;n.push(`${r} is now ${e}, and was last seen in ${i} ${$r(l/1e3)} ago.`)}else{const e="dnd"===a.presence?.status?"busy":a.presence?.status;n.push(`${r} is now ${e}; I haven't seen them lately.`)}e.channel.send(n.join("\n")),console.log(`Seen command issued by ${e.author.username}.`)}}}))({ADMIN_ROLES:d,client:o})],["bahaiWritings",()=>(async({fs:e,settings:t,client:r,Discord:n})=>{const o=await jr({fs:e,settings:t});return{readBook:{re:/\bread (?<refName>\S.+) (?<index>[\-.\d]+)\b/iv,action:async e=>await o.readBook(e,r.user.avatarURL(),n)},showList:{re:/\bread list$/iv,action:async e=>await o.showList(e)},readRandom:{re:/\bread random$/iv,action:async e=>await o.readRandom(e,r.user.avatarURL(),n)},read:{re:/!read\b/iv,helpInfo:{name:"!read [list | random | *‹text›* *‹chapter›*]",value:"Reads from the Bahá'í Writings. Displays an excerpt from given *chapter* of *text*. Available texts are displayed using `!read list`; `!read random` displays a random passage from available texts."},action:e=>o.reader(e)}}})({fs:l,settings:u,client:o,Discord:r})],["bahaiWikis",()=>Fr({wikiTools:n,client:o,_:i})],["admin",()=>(({ADMIN_IDS:e,ADMIN_PERMISSION:t,PUPPET_AUTHOR:r,DiscordVoice:n,discordTTS:o,guildCheckin:a,_:i})=>({speak:{re:/!speak/iv,async action(t){if(!e.includes(t.author.id))return;const r=t.content.split(" ").slice(2).join(" "),a=t.member?.voice.channel;if(!a)return void console.log("Message member not in a voice channel with `channel`");const s=n.joinVoiceChannel({channelId:a.id,guildId:a.guild.id,adapterCreator:a.guild.voiceAdapterCreator}),l=n.createAudioPlayer();l.play(n.createAudioResource(o.getVoiceStream(r))),s.subscribe(l),console.log(i("speakingBegun"))}},puppet:{re:/!puppet (?:\S.+) \| (?:\S.+)/iv,action(t){e.includes(t.author.id)&&(function({content:e,guild:t,author:r,channel:n},o){if(r.id===o.authorID){const r=/!puppet (?<userChannel>\S.+) \| (?<msg>\S.+)/iv,o=e.match(r);if(o){const{userChannel:e,msg:r}=o.groups,a=t?.channels.cache.find(t=>t.name===e);a&&a.isTextBased()?a.send(r):n.send(`Channel ${e} does not exist!`)}}}(t,{authorID:r}),console.log(`Puppet command issued by ${t.author.username}.`))}},echo:{re:/!echo\b/iv,action(t){e.includes(t.author.id)&&(t.channel.send(`Here's what you said, ${t.author.username}: \`\`${t.content}\`\``),console.log(`Echo command issued by ${t.author.username}.`))}},checkin:{re:/!checkin\b/iv,async action(t){if(e.includes(t.author.id)){console.log(`Checkin command issued by ${t.author.username}.`);try{return await a()}catch(e){console.error("Error checking in",e)}}}}}))({ADMIN_IDS:g,ADMIN_PERMISSION:f,PUPPET_AUTHOR:h,guildCheckin:a,_:i,discordTTS:c,DiscordVoice:p})],["bahaiInfo",()=>(({client:e,Discord:t})=>({info:{re:/!info/iv,action(r){const n=new t.EmbedBuilder;n.setAuthor({name:"BahaiBot",iconURL:e.user?.avatarURL()??void 0}),n.setDescription("Bahá'í Bot for Discord\n"),n.addFields([{name:"Support Server",value:"[Invite link](https://discord.gg/NE6dJaw)",inline:!1}]),r.channel.send({embeds:[n]})}},badi:{re:/\bbad[íi]\b/iv,action(t){const r=e.emojis.cache.find(e=>"9star"===e.name);t.channel.send(`OK ${t.author.username}, here you go. https://bahaipedia.org/Badí‘${r?` ${r.toString()}`:""}`)}}}))({client:o,Discord:r})],["bahaiSalutations",()=>(({client:e})=>{const t=t=>{const r=e.emojis.cache.find(e=>"9star"===e.name);return r&&t.react(r),r};return{abha:{re:/\b(?:all[aá]h['’´\-]?[uo]?['’´\-]?abh[aá]|abh[aá])/iv,action(e){const r=t(e);e.channel.send(`Alláh-u-Abhá, ${e.author.username}! ${r?r.toString():""}`)},notMentioned:{check:e=>Boolean(e.mentions.users?.first()),action(e){t(e)}}},nawruz:{re:/\b(?:(?:happy|joyous)\s?n[ao]w[\- ]?ro?[uú]z|n[ao]w[\- ]?ro?[uú]z\s?(?:m[uo]b[aá]r[aá]k))\b/iv,action(r){const n=t(r),o=e.emojis.cache.find(e=>"sabzi"===e.name);r.channel.send(`Happy Naw-Rúz! ${n?n.toString():""}${o?o.toString():""}`)}},ridvan:{re:/\b(?:(?:happy|joyous)\s?r[ie][ḍdz][vw][aá]n|r[ie][ḍdz][vw][aá]n\s?(?:m[uo]b[aá]r[aá]k))\b/iv,action(e){const r=t(e);e.channel.send(`Happy Ridván! ${r?r.toString():""}`)}}}})({client:o})],["salutations",()=>({sup:{re:/\b(?:su+p|wh[au]+[sz]+[au]+p|(?:(?:what|wut)['’´]?s (?:up|new|good|gud|cookin[g'’´])))\b/iv,action(e){const t=["Not much","Not too much","Not a lot","Not very much"],r=t[Math.floor(Math.random()*t.length)],n=["Just glad to be here.","Just happy to be here.","Same as usual.","Same old, same old.","Just like usual.","Just waiting to be of service.","Just waiting to be of service to somebody.","Just waiting to be of service to someone.","Just waiting for questions to answer.","Just waiting for questions I can help answer."],o=n[Math.floor(Math.random()*n.length)];e.channel.send(`${r}, ${e.author.username}. ${o}`)}},morning:{re:/\bgood morning\b/iv,action(e){e.channel.send(`Good morning ${e.author.username}! :coffee:`)}},afternoon:{re:/\bgood afternoon\b/iv,action(e){e.channel.send(`Good afternoon ${e.author.username}!`)}},evening:{re:/\bgood evening\b/iv,action(e){e.channel.send(`Good evening ${e.author.username}!`)}},hello:{re:/\b(?:h[uea]llo|hi|hi there|howdy|yo|heya|sal[aá]{1,2}m)\b/iv,action(e){e.channel.send(`Hello ${e.author.username}!`)}},welcome:{re:/^(?:everyone|everybody)?\W*(?:please|pleez|pls|plz)?\W*(?:\W*welcome|.*>+\W*welcome\b|.*\bwb\b)/iv,action(e){e.channel.send(`Thanks, ${e.author.username}! :wave:`)},notMentioned:{check:e=>Boolean(e.mentions.users.first()),action(e){e.react("👋")}}}})],["lightHearted",()=>({coffee:{re:/\u{2615}/u,action(e){e.channel.send(":coffee:")},notMentioned:{action(e){e.react("☕")}}},tea:{re:/\u{1F375}/u,action(e){e.channel.send(":tea:")},notMentioned:{action(e){e.react("🍵")}}},popcorn:{re:/\u{1F37F}/u,action(e){e.channel.send(":popcorn:")},notMentioned:{action(e){e.react("🍿")}}},unladen:{re:/\bunladen\sswallow\b/iv,action(e){e.channel.send("What do you mean, an African, or European swallow?")}},bruh:{re:/\bbruh\b/iv,action(e){e.channel.send("Bruh.")}},goodbot:{re:/\bgood\s?bot\b/iv,action(e){e.react("😊"),e.channel.send("Thanks!")}},badbot:{re:/\bbad\s?bot\b/iv,action(e){e.react("☹️"),e.channel.send("Sorry.")}},repeating:{re:/\brepeating yourself\b/iv,action(e){const t=["Oops, sorry...","Oops, sorry!","Sorry!","Oops!","Sorry...","Sorry... :sweat_smile:","Oops, sorry... :sweat_smile:"],r=t[Math.floor(Math.random()*t.length)],n=["I tend to do that, don't I?","I guess I tend to do that, don't I?","I suppose I tend to do that, don't I?","I'm just a chatbot, after all.","I am a chatbot, after all.","I *am* a chatbot, after all.","That does happen a lot, doesn't it."],o=n[Math.floor(Math.random()*n.length)];e.channel.send(`${r} ${o}`)}},santacat:{re:/\b(?:my|santa['’´]?s)\scat\b/iv,action(e){const t=["Not telling.","That's a secret to everybody.","Didn't somebody make a meme out of it?","Which one? This one? :cat2:","Wouldn't you like to know.","Who do you think I am? Schrödinger?"],r=t[Math.floor(Math.random()*t.length)];e.channel.send(r)}},ping:{re:/\bping\b/iv,action(e){e.channel.send("Pong :ping_pong:")}}})]].map(async([e,t])=>!b&&!m.includes(e)||y.includes(e)?null:await t())),w=v.reduce((e,t)=>e={...e,...t},{});return(({commands:e})=>{const t={re:/!help\b/iv,helpInfo:{name:"!help",value:"Displays help text."},action(e){e.channel.send({content:`Here are the instructions you need, ${e.author.username}.`,embeds:[{color:8359053,description:"I can respond to well-formed questions about basic Baha'i topics. As well, the following commands can help me process your requests. Make sure to mention me when trying to use them, like this: `@BahaiBot !help`",fields:r}]})}};e.help=t;const r=Object.values(e).map(({helpInfo:e})=>e).filter(Boolean)})({commands:w}),w.default=(({app:e,router:t,client:r,Discord:n,_:o,settings:a})=>({re:/[\s\S]*/u,async action(i){const s=i.content.trimStart().replaceAll(/<@!?(?<snowflake>\d+)>/gv,(e,t,n,o,{snowflake:a})=>{if(a===r.user?.id)return"";const{username:i}=r.users.resolve(a);return i}),l=i.author.id,u={session:e.projectAgentSessionPath(a.PROJECT_ID,l),queryInput:{text:{text:s,languageCode:o.resolvedLocale}}};await async function(){try{const[a]=await e.detectIntent(u);return await t(a,i,r,n,o),a}catch(e){throw i.channel.send(`<@${i.author.id}>, I couldn't process your question at the moment.`),e}}()}}))({app:e,router:t,client:o,Discord:r,_:i,settings:u}),w},Kr=(e,t,r,n,o)=>{console.log(o("routerResponse"),e);const a=e.queryResult?.fulfillmentMessages?.[0]?.text?.text?.[0];t.channel.send(a)},Zr={debugCheckin:["Hi","Hi","Hi there","Hello","Hello","Hello there","Hey","What's up","What's new"],fyiCheckin:{general:["Hi, everyone.","Hi, everybody.","Hi, everyone.","Hi there, everyone!","Hello, everyone.","Hello there, everyone.","Alláh-u-Abhá!","Alláh’u’abhá, everyone.","Alláh-u-Abhá, everyone.","What's cooking, everybody?","Hey all, what's cooking?","What's up, everyone?","What's good, everyone?","Hey everyone, what's new?","Hey everybody, what's up?","Hey, what's up everyone?","Hi everybody, what's up?"],ircBridge:["Hello IRC.","Hi, everybody.","Hi, everyone.","Hi there, everyone!","Hello, everyone.","Hello there, everyone.","Alláh-u-Abhá!","Alláh-u-Abhá, IRC.","Alláh-u-Abhá, everyone.","What's cooking, everybody?","Hey all, what's cooking?","What's up, everyone?","What's good, everyone?","Hey everyone, what's new?","Hey everybody, what's up?","Hey, what's up everyone?","Hi everybody, what's up?"]},guildMemberAdd:["Hi","Hi","Hi there","Hello","Hello","Hello there","Hey","What's up","What's new"]},Yr={guildMemberAdd:e=>["Happy to have you with us!","Pleased to have you with us!","Great to have you with us!","It's great to have you with us!","It's a pleasure to have you with us!","Pleased to have you with us! :smile:","It's a pleasure to have you with us! :smile:","Happy to have you with us! :smile:","Great to have you with us! :smile:",`Happy to have you with us! ${e}`,"Glad you could join us! :smile:",`Glad you could join us! ${e}`,"Happy to have you with us today!","Pleased to have you with us today!","Great to have you with us today!","It's great to have you with us today!","It's a pleasure to have you with us today!","Pleased to have you with us today! :smile:","It's a pleasure to have you with us today! :smile:","Happy to have you with us today! :smile:","Great to have you with us today! :smile:",`Happy to have you with us today! ${e}`,"Glad you could join us today! :smile:",`Glad you could join us today! ${e}`]},Qr=Date.now();const Xr="en-US",en=[Xr],tn=async({checkins:e=!1,locales:t=("undefined"==typeof navigator?[Xr]:[...navigator.languages.filter(e=>en.includes(e)),Xr]),fetch:r=globalThis.fetch,i18n:n=globalThis.intlDom?.i18n,striptags:o=globalThis.striptags,client:a,Discord:i,discordTTS:s,DiscordVoice:l,dialogflow:u,fs:c,getSettings:p,getPath:h=e=>e,commandInterval:f=2e3,rateLimiter:g=new Nr.RateLimiter(1,f),exitNoThrow:d=!1})=>{const m=a||new i.Client({intents:[i.GatewayIntentBits.Guilds,i.GatewayIntentBits.GuildMessages,i.GatewayIntentBits.MessageContent]}),y=JSON.parse(await c.readFile(h("settings.json"),"utf8")),b="function"==typeof p?p:e=>e.development,v=b(y),w=new u.SessionsClient({keyFilename:h(v.PROJECT_JSON)}),{token:k,disableNotMentioned:T=!1,welcomeChannel:O="welcome",awesomeEmoji:A="awesome",helpTeam:S=Mr,rulesChannel:E=Br}=v,q=await n({localesBasePath:"src",locales:t}),D=(e,{defaultValue:t}={})=>v?.locales?.[q.resolvedLocale][e]||t||q(e),R=function({fetch:e,striptags:t,_:r}){return{async bpGetToday(){const n=Date.now(),o={action:"parse",page:`Bahaipedia:Today_in_History/${new Intl.DateTimeFormat(r.resolvedLocale,{month:"long",day:"numeric"}).format(n).toString()}`,prop:"text",format:"json"},a=`https://bahaipedia.org/api.php?${new URLSearchParams({...o,origin:"*"})}`;try{const r=(await(await e(a)).json()).parse.text["*"].split("</center>\n");return t(r.length>1?r[1]:r[0])}catch(e){return console.error("Error retrieving JSON for today URL",a,e),""}},async wikiGetRandom(t,r,n){const o=`https://${r}/api.php`,a={action:"query",indexpageids:"1",prop:"bahai.media"===r?"imageinfo":"",iiprop:"bahai.media"===r?"url":"",generator:"random",grnnamespace:"bahai.media"===r?"6":"0",grnlimit:String(t),format:"json"},i=`${o}?${new URLSearchParams({...a,origin:"*"})}`;try{const t=await(await e(i)).json(),o=t.query.pages[t.query.pageids[0]].title;return{title:o,url:`https://${r}/${n?"wiki/":""}${encodeURIComponent(o)}`,img:"bahai.media"===r?t.query.pages[t.query.pageids[0]].imageinfo[0].url:""}}catch(e){return console.error("Error retrieving random wiki URL",i,e),""}},async wikiGetURL(t,r,n,o=!1){const a=`https://${n}/api.php`,i={action:"query",list:"search",generator:"search",prop:"bahai.media"===n?"imageinfo":"",iiprop:"bahai.media"===n?"url":"",srsearch:t,srnamespace:"bahai.media"===n?"6":"0",srlimit:String(r),srprop:"snippet",gsrsearch:t,gsrnamespace:"bahai.media"===n?"6":"0",gsrlimit:String(r),format:"json"},s=`${a}?${new URLSearchParams({...i,origin:"*"})}`;try{const t=await(await e(s)).json();if(0!==t.query.searchinfo.totalhits){const e=t.query.search[0].title;return{title:e,url:`https://${n}/${o?"wiki/":""}${encodeURIComponent(e)}`,snippet:t.query.search[0].snippet,img:"bahai.media"===n?t.query.pages[t.query.search[0].pageid].imageinfo[0].url:""}}return!1}catch(e){return void console.error("Error retrieving wiki search URL",s,e)}}}}({fetch:r,striptags:o,_:q}),x=function({client:e,fs:t,wikiTools:r,settings:n,getLocalizedSetting:o,_:a}){const{bstarEmoji:i="bstar",checkinGuilds:s=[{guildID:Hr,guildName:o("labServerName"),guildChannels:[{id:Ur,greetings:o("debugCheckin",{defaultValue:Zr.debugCheckin}),reportUptime:!0}]},{guildID:Lr,guildName:o("serverName"),guildChannels:[{id:_r,greetings:o("fyiCheckin-general",{defaultValue:Zr.fyiCheckin.general})},{id:Cr,greetings:o("fyiCheckin-ircBridge",{defaultValue:Zr.fyiCheckin.ircBridge})},{id:Pr,bpToday:!0}]}]}=n;return async function(n=Date.now()){let o;for(const{guildID:t,guildName:r,guildChannels:n}of s){const i=e.guilds.cache.get(t);if(i&&(console.log(a("checkingIn",{guildName:r})),o=n.map(e=>{const{id:t,greetings:n}=e,o="bpToday"in e&&e.bpToday,a="reportUptime"in e&&e.reportUptime;return{guildName:r,bpToday:o,greetings:n,reportUptime:a,channel:i.channels.cache.get(t)}}).filter(({channel:e})=>e),!o.length))return}if(!o)return;const l={list:[o.map(({channel:e})=>{const t=e?.name;return`#${t}`})]},u="greet.guild.txt";try{const e=await t.stat(u),r=(n-new Date(e.mtime).getTime())/1e3;console.log(a("lastGreeting",{relativeTime:$r(Math.floor(r)),channels:l}))}catch(e){console.log(a("firstGreet",{channels:l}))}let c;o.some(({bpToday:e})=>e)&&(c=await r.bpGetToday());for(const{channel:t,bpToday:r,greetings:s,guildName:l,reportUptime:u}of o){if(console.log(a("channelFound",{guildName:l,channelName:t?.name})),s){const e=s[Math.floor(Math.random()*s.length)];if(u){const r=new Date,o=n-Qr;t?.send(a("uptimeGreet",{greet:e,now:r.toString(),uptime:$r(Math.floor(o/1e3))}))}else t?.send(e)}if(!r||!c)continue;const o=e.emojis.cache.find(e=>e.name===i);console.log(a("postingTodayInHistory")),t?.send({content:a("hereIsQueryResult"),embeds:[{color:3447003,description:a("todayInHistoryResult",{today:{date:[Date.now(),{month:"long",day:"numeric"}]},bstar:o?.toString()??"",todayInHistoryResult:c})}]})}try{await t.writeFile(u,n.toString()),console.log(a("greetingSent",{channels:l}))}catch(e){console.error(a("errorWritingGuild",{guildFileName:u}),e)}}}({client:m,fs:c,wikiTools:R,settings:v,getLocalizedSetting:D,_:q}),I=await Jr({app:w,router:Kr,Discord:i,wikiTools:R,client:m,guildCheckin:x,_:q,getLocalizedSetting:D,fs:c,settings:v,discordTTS:s,DiscordVoice:l});return m.on("clientReady",()=>{console.log(q("BahaiBotOnline")),e&&(m.user?.setPresence({activities:[{name:"@BahaiBot !help",type:0}]}),function(e,t=1e3,{exitNoThrow:r=!1}={}){let n,o=Date.now()+t;n=setTimeout(function a(){const i=Date.now()-o;if(i>t){if(r)return;throw new Error(`Unexpected condition: ${i} time drift exceeding interval ${t}`)}const s=e(t)||0;o+=t+s,n=setTimeout(a,Math.max(0,t-i)+s)},t)}(e=>{const t=new Date;if(12===t.getUTCHours()){if(t.getUTCMinutes()<15)return 24e5-e;x()}return 0},3e6,{exitNoThrow:d}))}),m.on("messageCreate",async e=>{const t=e;if(m.user&&t.mentions.has(m.user)){if((e=>g.take(e.author.id))(t))return;for(const e of Object.values(I))if(e.re.test(t.content)){try{await e.action(t)}catch(e){console.error(q("errorExecuting")),console.error(t.content,e)}m.emit("bahaibot:command-finished");break}m.emit("bahaibot:command-finished")}else if(!T){const e=Object.values(I).filter(e=>e.notMentioned);for(const{re:r,notMentioned:n}of e)if(r.test(t.content)&&(!n?.check||n.check(t))){await(n?.action(t)),m.emit("bahaibot:command-finished");break}m.emit("bahaibot:command-finished")}}),m.on("guildMemberAdd",e=>{const t=e.guild.channels.cache.find(e=>e.name===O);if(!t||!t.isTextBased())return;const r=m.emojis.cache.find(e=>e.name===A),n=D("greet-guildMemberAdd",{defaultValue:Zr.guildMemberAdd}),o=n[Math.floor(Math.random()*n.length)],a=D("happies",{defaultValue:Yr}),i=r?a.guildMemberAdd(r.toString()):a.guildMemberAdd(":smile:"),s=i[Math.floor(Math.random()*i.length)];t.send(q("guildMemberAddWelcome",{userID:`<@!${e.user.id}>`,greet:o,happy:s,serverName:D("serverName"),helpTeam:`<@&${S}>`,rulesChannel:e.guild.channels.cache.get(E)?.toString()??""}))}),m.login(k),{client:m,botCommands:I,guildCheckin:x,system:y,getSettings:b}},{hash:rn,search:nn}=location,on=rn.slice(1),an=[new URLSearchParams(on).get("locales")||new URLSearchParams(nn).get("locales")||"en_US"],sn=Boolean(new URLSearchParams(on).get("checkins")||new URLSearchParams(nn).get("checkins")),ln=e=>`${location.href.replace(/\/$/v,"")}/${e}`,un={readFile:async e=>await(await fetch("object"==typeof e&&"href"in e&&e.href?e.href:e)).text(),writeFile(e,t){localStorage.setItem(`bahaibot-${e}`,String(t||Date.now()))},stat:e=>Promise.resolve({mtime:new Date(Number(localStorage.getItem(`bahaibot-${e}`)))}),unlink(e){localStorage.removeItem(e)}};function cn(e){return tn({checkins:sn,locales:an,getPath:ln,fs:un,fetch:fetch,i18n:X,striptags:e=>gr(e).result,...e})}export{cn as default};
//# sourceMappingURL=integratedClientServerBot.esm.min.js.map
