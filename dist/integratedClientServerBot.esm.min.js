function e(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function t(t){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?e(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):e(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(){n=function(e,t){return new r(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function r(e,n,a){var o=new RegExp(e,n);return t.set(o,a||t.get(e)),u(o,r.prototype)}function a(e,r){var n=t.get(r);return Object.keys(n).reduce(function(t,r){var a=n[r];if("number"==typeof a)t[r]=e[a];else{for(var o=0;void 0===e[a[o]]&&o+1<a.length;)o++;t[r]=e[a[o]]}return t},Object.create(null))}return l(r,RegExp),r.prototype.exec=function(t){var r=e.exec.call(this,t);if(r){r.groups=a(r,this);var n=r.indices;n&&(n.groups=a(n,this))}return r},r.prototype[Symbol.replace]=function(r,n){if("string"==typeof n){var o=t.get(this);return e[Symbol.replace].call(this,r,n.replace(/\$<([^>]+)>/g,function(e,t){var r=o[t];return"$"+(Array.isArray(r)?r.join("$"):r)}))}if("function"==typeof n){var i=this;return e[Symbol.replace].call(this,r,function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(a(e,i)),n.apply(this,e)})}return e[Symbol.replace].call(this,r,n)},n.apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function i(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function s(e,t,r){return(t=y(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function p(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=c(e);if(t){var a=c(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return p(this,r)}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],l=!0,c=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;l=!1}else for(;!(l=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return m(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function y(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var b=globalThis.jsonExtra,v=function(e){return e.replace(/\\+/g,function(e){return e.slice(0,e.length/2)})},w=function(e){return b.parse("{"+(e||"").replace(/^\{/,"").replace(/\}$/,"")+"}")},k=function(e,t,r){var n,a=r.onMatch,o=r.extra,i=r.betweenMatches,s=r.afterMatch,l=r.escapeAtOne,c=0;if(o&&(i=o,s=o,l=o),!i||!s)throw new Error("You must have `extra` or `betweenMatches` and `afterMatch` arguments.");for(;null!==(n=e.exec(t));){var u=d(n,2),p=u[0],h=u[1],f=e.lastIndex,m=f-p.length;m>c&&i(t.slice(c,m)),l&&h.length%2?(c=f,l(p)):(a.apply(void 0,g(n)),c=f)}c!==t.length&&s(t.slice(c))},T="undefined"!=typeof fetch?fetch:null,A=function(){return T},S="undefined"!=typeof document?document:null,O=function(){return S};var E=function(e,t,r){return t.sort(new Intl.Collator(e,r).compare)},q=function(e,t,r){return new Intl.ListFormat(e,r).format(t)},x=function(e,t,r,n,a){if("function"!=typeof r)return function(e,t,r,n){return E(e,t,n),q(e,t,r)}(e,t,r,n);E(e,t,a);var o=function(){var e=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var r=Math.trunc((e+16*Math.random())%16);return e=Math.floor(e/16),("x"===t?r:3&r|8).toString(16)})}(),i=g(t).map(function(e,t){return"<<".concat(o).concat(t,">>")}),s=[],l=function(e){s.push(e)};k(new RegExp("<<".concat(o,"(\\d)>>"),"gu"),q(e,i,n),{betweenMatches:l,afterMatch:l,onMatch:function(e,n){l(r(t[Number(n)],Number(n)))}});var c=O().createDocumentFragment();return c.append.apply(c,s),c},D=function(e){var t=e.object;if(Array.isArray(t)){if("function"==typeof t[1]){var r=d(t,4);return{value:r[0],callback:r[1],options:r[2],extraOpts:r[3]}}var n=d(t,3);return{value:n[0],options:n[1],extraOpts:n[2]}}return{value:t}},I=function(e){var n=e.value,a=e.arg;e.key;var o,i=e.locale;if("string"==typeof n||n&&"object"===r(n)&&"nodeType"in n)return n;var s=function(e){var r=e.type,n=e.options,i=void 0===n?o:n,s=e.checkArgOptions,l=void 0!==s&&s;if("string"==typeof a){var c=d(a.split("|"),3),u=c[0],p=c[1],h=c[2];"DATE"===u&&(u="DATETIME"),u===r&&(p?l&&!h||(i=t(t({},i),w(l&&h?h:p))):i={})}return i},l=!1;if(n&&"object"===r(n)&&!Array.isArray(n)){var c=Object.keys(n)[0];if(["number","date","datetime","dateRange","datetimeRange","relative","region","language","script","currency","list","plural"].includes(c)){var u,p,h=n[c],f=D({object:h});switch(n=f.value,o=f.options,u=f.extraOpts,p=f.callback,c){case"date":case"datetime":l=!0;break;case"dateRange":case"datetimeRange":var m=new Intl.DateTimeFormat(i,s({type:"DATERANGE",options:u}));return m.formatRange.apply(m,g([n,o].map(function(e){return"number"==typeof e?new Date(e):e})));case"region":case"language":case"script":case"currency":return new Intl.DisplayNames(i,t(t({},s({type:c.toUpperCase()})),{},{type:c})).of(n);case"relative":var y=[o,u];return u=y[0],o=y[1],new Intl.RelativeTimeFormat(i,s({type:"RELATIVE"})).format(n,u);case"list":return p?x(i,n,p,s({type:"LIST"}),s({type:"LIST",options:u,checkArgOptions:!0})):x(i,n,s({type:"LIST"}),s({type:"LIST",options:u,checkArgOptions:!0}))}}}if(n&&("number"==typeof n&&(l||/^DATE(?:TIME)(?:\||$)/.test(a))&&(n=new Date(n)),"object"===r(n)&&"getTime"in n&&"function"==typeof n.getTime))return new Intl.DateTimeFormat(i,s({type:"DATETIME"})).format(n);if(Array.isArray(n)){var b,v=n[2];return(b=new Intl.DateTimeFormat(i,s({type:"DATERANGE",options:v}))).formatRange.apply(b,g(n.slice(0,2).map(function(e){return"number"==typeof e?new Date(e):e})))}if("number"==typeof n)return new Intl.NumberFormat(i,s({type:"NUMBER"})).format(n);throw new TypeError("Unknown formatter")},R=i(function e(){a(this,e)}),$=function(e){var t=e.key,r=e.body,n=e.type,a=e.messageStyle,o=W({messageStyle:void 0===a?"richNested":a})({body:r},t);if(!o)throw new Error("Key value not found for ".concat(n," key: (").concat(t,")"));return o.value},C=function(){l(t,R);var e=h(t);function t(r){var n;return a(this,t),(n=e.call(this)).locals=r,n}return i(t,[{key:"getSubstitution",value:function(e){return $({key:e.slice(1),body:this.locals,type:"local"})}},{key:"isMatch",value:function(e){var t=e.slice(1).split("."),r=this.locals;return this.constructor.isMatchingKey(e)&&t.every(function(e){var t=e in r;return r=r[e],t})}}],[{key:"isMatchingKey",value:function(e){return e.startsWith("-")}}]),t}(),B=function(){l(t,R);var e=h(t);function t(r){var n;return a(this,t),(n=e.call(this)).substitutions=r,n}return i(t,[{key:"isMatch",value:function(e){return this.constructor.isMatchingKey(e)&&e in this.substitutions}}],[{key:"isMatchingKey",value:function(e){return/^[0-9A-Z_a-z]/.test(e)}}]),t}(),N=function(){l(n,R);var e=h(n);function n(t,r){var o,i=r.substitutions;return a(this,n),(o=e.call(this)).switches=t,o.substitutions=i,o}return i(n,[{key:"getSubstitution",value:function(e,n){var a,o,i=n.locale,s=n.usedKeys,l=n.arg,c=n.missingSuppliedFormatters,u=this.constructor.getKey(e).slice(1),p=d(this.getMatch(u),3),h=p[0],g=p[1],f=p[2];if(s.push(f),h&&h.includes("|")){var m=d(h.split("|"),3);a=m[1],o=m[2]}if(!g)return c({key:e,formatter:this}),"\\{"+e+"}";var y=function(e,r){var n=w(o);return new Intl.NumberFormat(i,t(t({},r),n)).format(e)},b=function(e,r){var n=w(o);return new Intl.PluralRules(i,t(t({},r),n)).select(e)},v=this.substitutions[f],k=v;if("number"==typeof v)switch(a){case"NUMBER":k=y(v);break;case"PLURAL":k=b(v);break;default:k=new Intl.PluralRules(i).select(v)}else if(v&&"object"===r(v)){var T=Object.keys(v)[0];if(["number","plural"].includes(T)){var A=D({object:v[T]}),S=A.value,O=A.options;if(a||(a=T.toUpperCase()),!(T.toUpperCase()===a))throw new TypeError('Expecting type "'.concat(a.toLowerCase(),'"; instead found "').concat(T,'".'));switch(a){case"NUMBER":k=y(S,O);break;case"PLURAL":k=b(S,O)}}}var E="richNested",q=function(e){return e.replace(/\\/g,"\\\\").replace(/\./g,"\\.")};try{return $({messageStyle:E,key:k?q(k):l,body:g,type:"switch"})}catch(e){try{return $({messageStyle:E,key:"*"+q(k),body:g,type:"switch"})}catch(e){var x=Object.keys(g).find(function(e){return e.startsWith("*")});if(!x)throw new Error("No defaults found for switch ".concat(u));return $({messageStyle:E,key:q(x),body:g,type:"switch"})}}}},{key:"isMatch",value:function(e){return Boolean(e&&this.constructor.isMatchingKey(e)&&this.getMatch(e.slice(1)).length)}},{key:"getMatch",value:function(e){var t=this,r=e.split(".");return r.reduce(function(n,a,o){if(o<r.length-1){if(!(a in n))throw new Error('Switch key "'.concat(a,'" not found (from "~').concat(e,'")'));return n[a]}var i=Object.entries(n).find(function(e){var r=d(e,1)[0];return a===t.constructor.getKey(r)});return i?[].concat(g(i),[a]):[]},this.switches)}}],[{key:"isMatchingKey",value:function(e){return e.startsWith("~")}},{key:"getKey",value:function(e){var t=e.match(/^(?:[\0-\{\}-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*/);return t&&t[0]}}]),n}();function j(e,t,r){if(!e.s){if(r instanceof _){if(!r.s)return void(r.o=j.bind(null,e,t));1&t&&(t=r.s),r=r.v}if(r&&r.then)return void r.then(j.bind(null,e,t),j.bind(null,e,2));e.s=t,e.v=r;var n=e.o;n&&n(e)}}var _=function(){function e(){}return e.prototype.then=function(t,r){var n=new e,a=this.s;if(a){var o=1&a?t:r;if(o){try{j(n,1,o(this.v))}catch(e){j(n,2,e)}return n}return this}return this.o=function(e){try{var a=e.v;1&e.s?j(n,1,t?t(a):a):r?j(n,1,r(a)):j(n,2,a)}catch(e){j(n,2,e)}},n},e}();function L(e){return e instanceof _&&1&e.s}var F=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Reached end of values array.";if(!Array.isArray(e))throw new TypeError("The `values` argument to `promiseChainForValues` must be an array.");if("function"!=typeof t)throw new TypeError("The `errBack` argument to `promiseChainForValues` must be a function.");return function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){var n,a,o,i,s=!1,l=Promise.reject(new Error("Intentionally reject so as to begin checking chain"));return o=function(e,t,r){for(var n;;){var a=e();if(L(a)&&(a=a.v),!a)return o;if(a.then){n=0;break}var o=r();if(o&&o.then){if(!L(o)){n=1;break}o=o.s}}var i=new _,s=j.bind(null,i,2);return(0===n?a.then(c):1===n?o.then(l):(void 0).then(function(){(a=e())?a.then?a.then(c).then(void 0,s):c(a):j(i,1,o)})).then(void 0,s),i;function l(t){o=t;do{if(!(a=e())||L(a)&&!a.v)return void j(i,1,o);if(a.then)return void a.then(c).then(void 0,s);L(o=r())&&(o=o.v)}while(!o||!o.then);o.then(l).then(void 0,s)}function c(e){e?(o=r())&&o.then?o.then(l).then(void 0,s):l(o):j(i,1,o)}}(function(){return!s},0,function(){var o=e.shift();return function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(function(){return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(l,function(e){n=e,s=!0})},function(){if(a)throw new Error(r);e.length||(a=!0),l=t(o)})}),i=function(e){return n},o&&o.then?o.then(i):i(o)})()},M=function(e,t){if("string"!=typeof e)throw new TypeError("`defaultLocaleResolver` expects a string `localesBasePath`.");if("string"!=typeof t)throw new TypeError("`defaultLocaleResolver` expects a string `locale`.");if(/[\.\/\\]/.test(t))throw new TypeError("Locales cannot use file-reserved characters, `.`, `/` or `\\`");return"".concat(e.replace(/\/$/,""),"/_locales/").concat(t,"/messages.json")},P=function(e){var n=e.string,a=e.dom,o=e.usedKeys,i=e.substitutions,s=e.allSubstitutions,l=e.locale,c=e.locals,u=e.switches,p=e.maximumLocalNestingDepth,h=void 0===p?3:p,f=e.missingSuppliedFormatters,m=e.checkExtraSuppliedFormatters;if("number"!=typeof h)throw new TypeError("`maximumLocalNestingDepth` must be a number.");var y=function(){Object.entries(i).forEach(function(e){var t=d(e,2),r=t[0];"function"==typeof t[1]&&o.push(r)})};y();var b=new C(c),T=new B(i),A=new N(u,{substitutions:i}),S=/(\\*)\{((?:(?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\\})*?)(?:(\|)((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g;s&&(s=Array.isArray(s)?s:[s]);var O=function(e){var t,r=e.key,n=e.arg,a=e.substs;return b.constructor.isMatchingKey(r)?t=b.getSubstitution(r):A.constructor.isMatchingKey(r)?t=A.getSubstitution(r,{locale:l,usedKeys:o,arg:n,missingSuppliedFormatters:f}):"function"==typeof(t=a[r])&&(t=t({arg:n,key:r})),s?t=s.reduce(function(e,t){return t({value:e,arg:n,key:r,locale:l})},t):n&&/^(?:NUMBER|DATE(?:TIME|RANGE|TIMERANGE)?|REGION|LANGUAGE|SCRIPT|CURRENCY|RELATIVE|LIST)(?:\||$)/.test(n)&&(t=I({value:t,arg:n,key:r,locale:l})),t},E=1,q=function(e){var r=e.substitution,n=e.ky,a=e.arg,o=e.processSubsts,s=r;if("string"==typeof r&&r.includes("{")){if(E++>h)throw new TypeError("Too much recursion in local variables.");if(b.constructor.isMatchingKey(n)){var l,c=i;a&&(l=w(a),c=t(t({},i),l)),s=o({str:r,substs:c,formatter:b}),l&&m({substitutions:l})}else A.constructor.isMatchingKey(n)&&(s=o({str:r}))}return s};if(!a){var x=!1,D=function e(t){var n=t.str,a=t.substs,s=void 0===a?i:a,l=t.formatter,c=void 0===l?T:l;return n.replace(S,function(t,n,a,i,l){if(n.length%2)return t;if(f({key:a,formatter:c}))return t;var u=O({key:a,arg:l,substs:s});return u=q({substitution:u,ky:a,arg:l,processSubsts:e}),x=x||null!==u&&"object"===r(u)&&"nodeType"in u,o.push(a),n+u})}({str:n});if(!x)return m({substitutions:i}),o.length=0,y(),v(D);o.length=0,y()}E=1;var R=function e(t){var n=t.str,a=t.substs,s=void 0===a?i:a,l=t.formatter,c=void 0===l?T:l,u=[],p=new RegExp(S,"gu"),h=function(){u.push.apply(u,arguments)};return k(p,n,{extra:h,onMatch:function(t,n,a,i,l){if(f({key:a,formatter:c}))h(t);else{n.length&&h(n);var u=O({key:a,arg:l,substs:s});u=q({substitution:u,ky:a,arg:l,processSubsts:e}),Array.isArray(u)?h.apply(void 0,g(u)):u&&"object"===r(u)&&"nodeType"in u?h(u.cloneNode(!0)):h(u)}o.push(a)}}),u}({str:n});return m({substitutions:i}),o.length=0,R.map(function(e){return"string"==typeof e?v(e):e})};function H(e,t){if(Array.isArray(e)&&e.every(function(e){return"string"==typeof e})&&"string"==typeof t&&t.endsWith("Nested"))return e.map(function(e){return e.replace(n(/(\\+)/g,{backslashes:1}),"\\$<backslashes>").replace(/\./g,"\\.")}).join(".");if("string"!=typeof e)throw new TypeError("`key` is expected to be a string (or array of strings for nested style)");return e}var W=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).messageStyle,t=void 0===e?"richNested":e;return"function"==typeof t?t:"richNested"===t?function(e,t){var n=e&&"object"===r(e)&&e.body,a=[],o=function(e){a.length||(a[0]=""),a[a.length-1]+=e};k(/(\\*)\./g,t,{extra:o,onMatch:function(e,t){o(t),a.push("")}});var i=a.map(function(e){return v(e)}),s=!1,l=n;return i.some(function(e,t,n){return!l||"object"!==r(l)||(t===n.length-1&&e in l&&l[e]&&"object"===r(l[e])&&"message"in l[e]&&"string"==typeof l[e].message&&(s={value:l[e].message,info:l[e]}),l=l[e],!1)}),s}:"rich"===t?function(e,t){var n=e&&"object"===r(e)&&e.body;return!!(n&&"object"===r(n)&&t in n&&n[t]&&"object"===r(n[t])&&"message"in n[t]&&"string"==typeof n[t].message)&&{value:n[t].message,info:n[t]}}:"plain"===t?function(e,t){var n=e&&"object"===r(e)&&e.body;return!!(n&&"object"===r(n)&&t in n&&n[t]&&"string"==typeof n[t])&&{value:n[t]}}:"plainNested"===t?function(e,t){var n=e&&"object"===r(e)&&e.body;if(n&&"object"===r(n)){var a=t.split(/(?<!\\)\./).reduce(function(e,t){return e&&"object"===r(e)&&e[t]?e[t]:null},n);if(a&&"string"==typeof a)return{value:a}}return!1}:function(){throw new TypeError("Unknown `messageStyle` ".concat(t))}()};function U(e,t,r){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}function G(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var V=function(e){if(!e.includes("-"))throw new Error("Locale not available");return e.replace(/\x2D(?:[\0-,\.-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")},z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locales,r=e.defaultLocales,n=e.localeResolver,a=e.localesBasePath,o=e.localeMatcher;return J({locales:t,defaultLocales:r,localeResolver:n,localesBasePath:a,localeMatcher:o})},J=G(function(e){var t=G(function(e){if("string"!=typeof e)throw new TypeError("Non-string locale type");var r=s(c,e);if("string"!=typeof r)throw new TypeError("`localeResolver` expected to resolve to (URL) string.");return function(e,t){try{var r=e()}catch(e){return t(e)}return r&&r.then?r.then(void 0,t):r}(function(){var t=A();return U(d?t(r,{method:"HEAD"}):t(r),function(t){if(404===t.status)throw new Error("Trying again");return d?e:U(t.json(),function(t){return{locale:e,strings:t}})})},function(r){if("SyntaxError"===r.name)throw r;return U(p(e),t)})}),r=e.locales,n=void 0===r?"undefined"!=typeof intlDomLocale?[intlDomLocale]:"undefined"==typeof navigator?[]:navigator.languages:r,a=e.defaultLocales,o=void 0===a?["en-US"]:a,i=e.localeResolver,s=void 0===i?M:i,l=e.localesBasePath,c=void 0===l?".":l,u=e.localeMatcher,p=void 0===u?"lookup":u,h=e.headOnly,d=void 0!==h&&h;if("lookup"===p)p=V;else if("function"!=typeof p)throw new TypeError('`localeMatcher` must be "lookup" or a function!');return F([].concat(g(n),g(o)),t,"No matching locale found for "+[].concat(g(n),g(o)).join(", "))});function K(e,t,r){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}var Z,Y,Q=function(e){var n=e.strings,a=e.resolvedLocale,o=e.messageStyle,i=void 0===o?"richNested":o,s=e.allSubstitutions,l=e.insertNodes,c=e.keyCheckerConverter,u=void 0===c?H:c,p=e.defaults,h=e.substitutions,d=e.dom,f=void 0!==d&&d,m=e.forceNodeReturn,y=void 0!==m&&m,b=e.throwOnMissingSuppliedFormatters,v=void 0===b||b,w=e.throwOnExtraSuppliedFormatters,k=void 0===w||w;if(!n||"object"!==r(n))throw new TypeError("Locale strings must be an object!");var T=W({messageStyle:i}),A=function(e,o){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=c.allSubstitutions,m=void 0===d?s:d,b=c.defaults,w=void 0===b?p:b,A=c.dom,S=void 0===A?f:A,E=c.forceNodeReturn,q=void 0===E?y:E,x=c.throwOnMissingSuppliedFormatters,D=void 0===x?v:x,R=c.throwOnExtraSuppliedFormatters,$=void 0===R?k:R;e=u(e,i);var C=T(n,e),B=function(e){var t,n=e.message,a=e.defaults,o=e.messageStyle,i=e.messageForKey,s=void 0===i?W({messageStyle:o}):i,l=e.key;if("string"==typeof n)t=n;else if(!1===a||null==a)t=!1;else{if(!a||"object"!==r(a))throw new TypeError("Default locale strings must resolve to `false`, nullish, or an object!");var c=s(a,l);t=c?c.value:c}if(!1===t)throw new Error("Key value not found for key: (".concat(l,")"));return t}({message:!(!C||"string"!=typeof C.value)&&C.value,defaults:w,messageForKey:T,key:e});return function(e){var t=e.string,r=e.locale,n=e.locals,a=e.switches,o=e.allSubstitutions,i=void 0===o?[I]:o,s=e.insertNodes,l=void 0===s?P:s,c=e.substitutions,u=void 0!==c&&c,p=e.dom,h=void 0!==p&&p,d=e.forceNodeReturn,f=void 0!==d&&d,m=e.throwOnMissingSuppliedFormatters,y=void 0===m||m,b=e.throwOnExtraSuppliedFormatters,v=void 0===b||b;if("string"!=typeof t)throw new TypeError("An options object with a `string` property set to a string must be provided for `getDOMForLocaleString`.");var w=function(e){var t=O();return f?t.createTextNode(e):e},k=[];if(!u&&!i&&!y)return w(t);u||(u={});var T=l({string:t,dom:h,usedKeys:k,substitutions:u,allSubstitutions:i,locale:r,locals:n,switches:a,missingSuppliedFormatters:function(e){var t=e.key,r=e.formatter,n=r.isMatch(t);if(r.constructor.isMatchingKey(t)&&!n){if(y)throw new Error("Missing formatting key: ".concat(t));return!0}return!1},checkExtraSuppliedFormatters:function(e){var t=e.substitutions;v&&Object.keys(t).forEach(function(e){if(!k.includes(e))throw new Error("Extra formatting key: ".concat(e))})}});if("string"==typeof T)return w(T);var A=O().createDocumentFragment();return A.append.apply(A,g(T)),A}({string:B,locals:n.head&&n.head.locals,switches:n.head&&n.head.switches,locale:a,allSubstitutions:m,insertNodes:l,substitutions:t(t({},h),o),dom:S,forceNodeReturn:q,throwOnMissingSuppliedFormatters:D,throwOnExtraSuppliedFormatters:$})};return A.resolvedLocale=a,A.strings=n,A.sort=function(e,t){return E(a,e,t)},A.sortList=function(e,t,r,n){return x(a,e,t,r,n)},A.list=function(e,t){return q(a,e,t)},A},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locales,r=e.defaultLocales,n=e.localeStringFinder,a=void 0===n?z:n,o=e.localesBasePath,i=e.localeResolver,s=e.localeMatcher,l=e.messageStyle,c=e.allSubstitutions,u=e.insertNodes,p=e.keyCheckerConverter,h=e.defaults,d=e.substitutions,g=e.maximumLocalNestingDepth,f=e.dom,m=e.forceNodeReturn,y=e.throwOnMissingSuppliedFormatters,b=e.throwOnExtraSuppliedFormatters;try{return K(a({locales:t,defaultLocales:r,localeResolver:i,localesBasePath:o,localeMatcher:s}),function(e){var t,n,v=e.strings,w=e.locale;return t=function(){return Q({strings:v,resolvedLocale:w,messageStyle:l,allSubstitutions:c,insertNodes:u,keyCheckerConverter:p,defaults:h,substitutions:d,maximumLocalNestingDepth:g,dom:f,forceNodeReturn:m,throwOnMissingSuppliedFormatters:y,throwOnExtraSuppliedFormatters:b})},(n=function(){if(!h&&r)return K(a({locales:r,defaultLocales:[],localeResolver:i,localesBasePath:o,localeMatcher:s}),function(e){h=e.strings,e.locale===w&&(h=null)})}())&&n.then?n.then(t):t(n)})}catch(e){return Promise.reject(e)}};function ee(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function te(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var r=function e(){var r=!1;try{r=this instanceof e}catch{}return r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}),r}var re=ee(function(){if(Y)return Z;function e(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}return Y=1,Z=function(t){if((t=t||{}).circles)return function(t){const r=[],n=[],a=new Map;if(a.set(Date,e=>new Date(e)),a.set(Map,(e,t)=>new Map(i(Array.from(e),t))),a.set(Set,(e,t)=>new Set(i(Array.from(e),t))),t.constructorHandlers)for(const e of t.constructorHandlers)a.set(e[0],e[1]);let o=null;return t.proto?l:s;function i(t,i){const s=Object.keys(t),l=new Array(s.length);for(let c=0;c<s.length;c++){const u=s[c],p=t[u];if("object"!=typeof p||null===p)l[u]=p;else if(p.constructor!==Object&&(o=a.get(p.constructor)))l[u]=o(p,i);else if(ArrayBuffer.isView(p))l[u]=e(p);else{const e=r.indexOf(p);l[u]=-1!==e?n[e]:i(p)}}return l}function s(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return i(t,s);if(t.constructor!==Object&&(o=a.get(t.constructor)))return o(t,s);const l={};r.push(t),n.push(l);for(const i in t){if(!1===Object.hasOwnProperty.call(t,i))continue;const c=t[i];if("object"!=typeof c||null===c)l[i]=c;else if(c.constructor!==Object&&(o=a.get(c.constructor)))l[i]=o(c,s);else if(ArrayBuffer.isView(c))l[i]=e(c);else{const e=r.indexOf(c);l[i]=-1!==e?n[e]:s(c)}}return r.pop(),n.pop(),l}function l(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return i(t,l);if(t.constructor!==Object&&(o=a.get(t.constructor)))return o(t,l);const s={};r.push(t),n.push(s);for(const i in t){const c=t[i];if("object"!=typeof c||null===c)s[i]=c;else if(c.constructor!==Object&&(o=a.get(c.constructor)))s[i]=o(c,l);else if(ArrayBuffer.isView(c))s[i]=e(c);else{const e=r.indexOf(c);s[i]=-1!==e?n[e]:l(c)}}return r.pop(),n.pop(),s}}(t);const r=new Map;if(r.set(Date,e=>new Date(e)),r.set(Map,(e,t)=>new Map(a(Array.from(e),t))),r.set(Set,(e,t)=>new Set(a(Array.from(e),t))),t.constructorHandlers)for(const e of t.constructorHandlers)r.set(e[0],e[1]);let n=null;return t.proto?function t(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return a(o,t);if(o.constructor!==Object&&(n=r.get(o.constructor)))return n(o,t);const i={};for(const a in o){const s=o[a];"object"!=typeof s||null===s?i[a]=s:s.constructor!==Object&&(n=r.get(s.constructor))?i[a]=n(s,t):ArrayBuffer.isView(s)?i[a]=e(s):i[a]=t(s)}return i}:function t(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return a(o,t);if(o.constructor!==Object&&(n=r.get(o.constructor)))return n(o,t);const i={};for(const a in o){if(!1===Object.hasOwnProperty.call(o,a))continue;const s=o[a];"object"!=typeof s||null===s?i[a]=s:s.constructor!==Object&&(n=r.get(s.constructor))?i[a]=n(s,t):ArrayBuffer.isView(s)?i[a]=e(s):i[a]=t(s)}return i};function a(t,a){const o=Object.keys(t),i=new Array(o.length);for(let s=0;s<o.length;s++){const l=o[s],c=t[l];"object"!=typeof c||null===c?i[l]=c:c.constructor!==Object&&(n=r.get(c.constructor))?i[l]=n(c,a):ArrayBuffer.isView(c)?i[l]=e(c):i[l]=a(c)}return i}}}());function ne(e){if(null==e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&!(Symbol.toStringTag in e))}function ae(e){return"string"==typeof e}function oe(e){return Number.isSafeInteger(e)&&e>=0}function ie(e){return null!=e}function se(e,t){return ne(e)&&ae(t)&&t in e}
/**
 * @name codsen-utils
 * @fileoverview Various utility functions
 * @version 1.7.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/codsen-utils/}
 */
re();var le="object"==typeof global&&global&&global.Object===Object&&global,ce="object"==typeof self&&self&&self.Object===Object&&self,ue=le||ce||Function("return this")(),pe=ue.Symbol,he=Object.prototype,de=he.hasOwnProperty,ge=he.toString,fe=pe?pe.toStringTag:void 0;var me=Object.prototype.toString;var ye=pe?pe.toStringTag:void 0;function be(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":ye&&ye in Object(e)?function(e){var t=de.call(e,fe),r=e[fe];try{e[fe]=void 0;var n=!0}catch(e){}var a=ge.call(e);return n&&(t?e[fe]=r:delete e[fe]),a}(e):function(e){return me.call(e)}(e)}function ve(e){return null!=e&&"object"==typeof e}var we=Array.isArray,ke=pe?pe.prototype:void 0,Te=ke?ke.toString:void 0;function Ae(e){if("string"==typeof e)return e;if(we(e))return function(e,t){for(var r=-1,n=null==e?0:e.length,a=Array(n);++r<n;)a[r]=t(e[r],r,e);return a}(e,Ae)+"";if(function(e){return"symbol"==typeof e||ve(e)&&"[object Symbol]"==be(e)}(e))return Te?Te.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var Se=/\s/;var Oe=/^\s+/;function Ee(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Se.test(e.charAt(t)););return t}(e)+1).replace(Oe,""):e}function qe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function xe(e){return e}function De(e){if(!qe(e))return!1;var t=be(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var Ie,Re=ue["__core-js_shared__"],$e=(Ie=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||""))?"Symbol(src)_1."+Ie:"";var Ce=Function.prototype.toString;var Be=/^\[object .+?Constructor\]$/,Ne=Function.prototype,je=Object.prototype,_e=Ne.toString,Le=je.hasOwnProperty,Fe=RegExp("^"+_e.call(Le).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Me(e){return!(!qe(e)||(t=e,$e&&$e in t))&&(De(e)?Fe:Be).test(function(e){if(null!=e){try{return Ce.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function Pe(e,t){var r=function(e,t){return null==e?void 0:e[t]}(e,t);return Me(r)?r:void 0}var He=Date.now;var We,Ue,Ge,Ve=function(){try{var e=Pe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),ze=Ve?function(e,t){return Ve(e,"toString",{configurable:!0,enumerable:!1,value:(r=t,function(){return r}),writable:!0});var r}:xe,Je=(We=ze,Ue=0,Ge=0,function(){var e=He(),t=16-(e-Ge);if(Ge=e,t>0){if(++Ue>=800)return arguments[0]}else Ue=0;return We.apply(void 0,arguments)});function Ke(e){return e!=e}function Ze(e,t,r){return t==t?function(e,t,r){for(var n=r-1,a=e.length;++n<a;)if(e[n]===t)return n;return-1}(e,t,r):function(e,t,r){for(var n=e.length,a=r+-1;++a<n;)if(t(e[a],a,e))return a;return-1}(e,Ke,r)}function Ye(e,t){return!!(null==e?0:e.length)&&Ze(e,t,0)>-1}function Qe(e,t){return e===t||e!=e&&t!=t}var Xe=Math.max;var et=Pe(Object,"create");var tt=Object.prototype.hasOwnProperty;var rt=Object.prototype.hasOwnProperty;function nt(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function at(e,t){for(var r=e.length;r--;)if(Qe(e[r][0],t))return r;return-1}nt.prototype.clear=function(){this.__data__=et?et(null):{},this.size=0},nt.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},nt.prototype.get=function(e){var t=this.__data__;if(et){var r=t[e];return"__lodash_hash_undefined__"===r?void 0:r}return tt.call(t,e)?t[e]:void 0},nt.prototype.has=function(e){var t=this.__data__;return et?void 0!==t[e]:rt.call(t,e)},nt.prototype.set=function(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=et&&void 0===t?"__lodash_hash_undefined__":t,this};var ot=Array.prototype.splice;function it(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}it.prototype.clear=function(){this.__data__=[],this.size=0},it.prototype.delete=function(e){var t=this.__data__,r=at(t,e);return!(r<0)&&(r==t.length-1?t.pop():ot.call(t,r,1),--this.size,!0)},it.prototype.get=function(e){var t=this.__data__,r=at(t,e);return r<0?void 0:t[r][1]},it.prototype.has=function(e){return at(this.__data__,e)>-1},it.prototype.set=function(e,t){var r=this.__data__,n=at(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this};var st=Pe(ue,"Map");function lt(e,t){var r,n,a=e.__data__;return("string"==(n=typeof(r=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?a["string"==typeof t?"string":"hash"]:a.map}function ct(e){var t=-1,r=null==e?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}function ut(e,t,r){var n=e.length;return r=void 0===r?n:r,!t&&r>=n?e:function(e,t,r){var n=-1,a=e.length;t<0&&(t=-t>a?0:a+t),(r=r>a?a:r)<0&&(r+=a),a=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(a);++n<a;)o[n]=e[n+t];return o}(e,t,r)}ct.prototype.clear=function(){this.size=0,this.__data__={hash:new nt,map:new(st||it),string:new nt}},ct.prototype.delete=function(e){var t=lt(this,e).delete(e);return this.size-=t?1:0,t},ct.prototype.get=function(e){return lt(this,e).get(e)},ct.prototype.has=function(e){return lt(this,e).has(e)},ct.prototype.set=function(e,t){var r=lt(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this};var pt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var ht="\\ud800-\\udfff",dt="["+ht+"]",gt="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",ft="\\ud83c[\\udffb-\\udfff]",mt="[^"+ht+"]",yt="(?:\\ud83c[\\udde6-\\uddff]){2}",bt="[\\ud800-\\udbff][\\udc00-\\udfff]",vt="(?:"+gt+"|"+ft+")"+"?",wt="[\\ufe0e\\ufe0f]?",kt=wt+vt+("(?:\\u200d(?:"+[mt,yt,bt].join("|")+")"+wt+vt+")*"),Tt="(?:"+[mt+gt+"?",gt,yt,bt,dt].join("|")+")",At=RegExp(ft+"(?="+ft+")|"+Tt+kt,"g");function St(e){return function(e){return pt.test(e)}(e)?function(e){return e.match(At)||[]}(e):function(e){return e.split("")}(e)}function Ot(e){var t=-1,r=null==e?0:e.length;for(this.__data__=new ct;++t<r;)this.add(e[t])}function Et(e,t){return e.has(t)}function qt(e){return ve(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!De(e)}(e)}Ot.prototype.add=Ot.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Ot.prototype.has=function(e){return this.__data__.has(e)};function xt(e,t,r){var n;if((e=null==(n=e)?"":Ae(n))&&void 0===t)return Ee(e);if(!e||!(t=Ae(t)))return e;var a=St(e),o=St(t),i=function(e,t){for(var r=-1,n=e.length;++r<n&&Ze(t,e[r],0)>-1;);return r}(a,o),s=function(e,t){for(var r=e.length;r--&&Ze(t,e[r],0)>-1;);return r}(a,o)+1;return ut(a,i,s).join("")}var Dt=function(e,t){return Je(function(e,t,r){return t=Xe(void 0===t?e.length-1:t,0),function(){for(var n=arguments,a=-1,o=Xe(n.length-t,0),i=Array(o);++a<o;)i[a]=n[t+a];a=-1;for(var s=Array(t+1);++a<t;)s[a]=n[a];return s[t]=r(i),function(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}(e,this,s)}}(e,t,xe),e+"")}(function(e,t){return qt(e)?function(e,t,r,n){var a=-1,o=Ye,i=!0,s=e.length,l=[],c=t.length;if(!s)return l;t.length>=200&&(o=Et,i=!1,t=new Ot(t));e:for(;++a<s;){var u=e[a],p=u;if(u=0!==u?u:0,i&&p==p){for(var h=c;h--;)if(t[h]===p)continue e;l.push(u)}else o(t,p,n)||l.push(u)}return l}(e,t):[]}),It=function(){return It=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},It.apply(this,arguments)};function Rt(e,t){for(var r={},n={},a=e.split("~~"),o=!1,i=0;a.length>i;i++){for(var s=a[i].split("~"),l=0;l<s.length;l+=2){var c=s[l],u=s[l+1],p="&"+c+";";r[p]=u,o&&(r["&"+c]=u),n[u]=p}o=!0}return t?{entities:It(It({},r),t.entities),characters:It(It({},n),t.characters)}:{entities:r,characters:n}}var $t={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},Ct={};Ct.xml=Rt("lt~<~gt~>~quot~\"~apos~'~amp~&"),Ct.html4=Rt("apos~'~OElig~Œ~oelig~œ~Scaron~Š~scaron~š~Yuml~Ÿ~circ~ˆ~tilde~˜~ensp~ ~emsp~ ~thinsp~ ~zwnj~‌~zwj~‍~lrm~‎~rlm~‏~ndash~–~mdash~—~lsquo~‘~rsquo~’~sbquo~‚~ldquo~“~rdquo~”~bdquo~„~dagger~†~Dagger~‡~permil~‰~lsaquo~‹~rsaquo~›~euro~€~fnof~ƒ~Alpha~Α~Beta~Β~Gamma~Γ~Delta~Δ~Epsilon~Ε~Zeta~Ζ~Eta~Η~Theta~Θ~Iota~Ι~Kappa~Κ~Lambda~Λ~Mu~Μ~Nu~Ν~Xi~Ξ~Omicron~Ο~Pi~Π~Rho~Ρ~Sigma~Σ~Tau~Τ~Upsilon~Υ~Phi~Φ~Chi~Χ~Psi~Ψ~Omega~Ω~alpha~α~beta~β~gamma~γ~delta~δ~epsilon~ε~zeta~ζ~eta~η~theta~θ~iota~ι~kappa~κ~lambda~λ~mu~μ~nu~ν~xi~ξ~omicron~ο~pi~π~rho~ρ~sigmaf~ς~sigma~σ~tau~τ~upsilon~υ~phi~φ~chi~χ~psi~ψ~omega~ω~thetasym~ϑ~upsih~ϒ~piv~ϖ~bull~•~hellip~…~prime~′~Prime~″~oline~‾~frasl~⁄~weierp~℘~image~ℑ~real~ℜ~trade~™~alefsym~ℵ~larr~←~uarr~↑~rarr~→~darr~↓~harr~↔~crarr~↵~lArr~⇐~uArr~⇑~rArr~⇒~dArr~⇓~hArr~⇔~forall~∀~part~∂~exist~∃~empty~∅~nabla~∇~isin~∈~notin~∉~ni~∋~prod~∏~sum~∑~minus~−~lowast~∗~radic~√~prop~∝~infin~∞~ang~∠~and~∧~or~∨~cap~∩~cup~∪~int~∫~there4~∴~sim~∼~cong~≅~asymp~≈~ne~≠~equiv~≡~le~≤~ge~≥~sub~⊂~sup~⊃~nsub~⊄~sube~⊆~supe~⊇~oplus~⊕~otimes~⊗~perp~⊥~sdot~⋅~lceil~⌈~rceil~⌉~lfloor~⌊~rfloor~⌋~lang~〈~rang~〉~loz~◊~spades~♠~clubs~♣~hearts~♥~diams~♦~~nbsp~ ~iexcl~¡~cent~¢~pound~£~curren~¤~yen~¥~brvbar~¦~sect~§~uml~¨~copy~©~ordf~ª~laquo~«~not~¬~shy~­~reg~®~macr~¯~deg~°~plusmn~±~sup2~²~sup3~³~acute~´~micro~µ~para~¶~middot~·~cedil~¸~sup1~¹~ordm~º~raquo~»~frac14~¼~frac12~½~frac34~¾~iquest~¿~Agrave~À~Aacute~Á~Acirc~Â~Atilde~Ã~Auml~Ä~Aring~Å~AElig~Æ~Ccedil~Ç~Egrave~È~Eacute~É~Ecirc~Ê~Euml~Ë~Igrave~Ì~Iacute~Í~Icirc~Î~Iuml~Ï~ETH~Ð~Ntilde~Ñ~Ograve~Ò~Oacute~Ó~Ocirc~Ô~Otilde~Õ~Ouml~Ö~times~×~Oslash~Ø~Ugrave~Ù~Uacute~Ú~Ucirc~Û~Uuml~Ü~Yacute~Ý~THORN~Þ~szlig~ß~agrave~à~aacute~á~acirc~â~atilde~ã~auml~ä~aring~å~aelig~æ~ccedil~ç~egrave~è~eacute~é~ecirc~ê~euml~ë~igrave~ì~iacute~í~icirc~î~iuml~ï~eth~ð~ntilde~ñ~ograve~ò~oacute~ó~ocirc~ô~otilde~õ~ouml~ö~divide~÷~oslash~ø~ugrave~ù~uacute~ú~ucirc~û~uuml~ü~yacute~ý~thorn~þ~yuml~ÿ~quot~\"~amp~&~lt~<~gt~>"),Ct.html5=Rt('Abreve~Ă~Acy~А~Afr~𝔄~Amacr~Ā~And~⩓~Aogon~Ą~Aopf~𝔸~ApplyFunction~⁡~Ascr~𝒜~Assign~≔~Backslash~∖~Barv~⫧~Barwed~⌆~Bcy~Б~Because~∵~Bernoullis~ℬ~Bfr~𝔅~Bopf~𝔹~Breve~˘~Bscr~ℬ~Bumpeq~≎~CHcy~Ч~Cacute~Ć~Cap~⋒~CapitalDifferentialD~ⅅ~Cayleys~ℭ~Ccaron~Č~Ccirc~Ĉ~Cconint~∰~Cdot~Ċ~Cedilla~¸~CenterDot~·~Cfr~ℭ~CircleDot~⊙~CircleMinus~⊖~CirclePlus~⊕~CircleTimes~⊗~ClockwiseContourIntegral~∲~CloseCurlyDoubleQuote~”~CloseCurlyQuote~’~Colon~∷~Colone~⩴~Congruent~≡~Conint~∯~ContourIntegral~∮~Copf~ℂ~Coproduct~∐~CounterClockwiseContourIntegral~∳~Cross~⨯~Cscr~𝒞~Cup~⋓~CupCap~≍~DD~ⅅ~DDotrahd~⤑~DJcy~Ђ~DScy~Ѕ~DZcy~Џ~Darr~↡~Dashv~⫤~Dcaron~Ď~Dcy~Д~Del~∇~Dfr~𝔇~DiacriticalAcute~´~DiacriticalDot~˙~DiacriticalDoubleAcute~˝~DiacriticalGrave~`~DiacriticalTilde~˜~Diamond~⋄~DifferentialD~ⅆ~Dopf~𝔻~Dot~¨~DotDot~⃜~DotEqual~≐~DoubleContourIntegral~∯~DoubleDot~¨~DoubleDownArrow~⇓~DoubleLeftArrow~⇐~DoubleLeftRightArrow~⇔~DoubleLeftTee~⫤~DoubleLongLeftArrow~⟸~DoubleLongLeftRightArrow~⟺~DoubleLongRightArrow~⟹~DoubleRightArrow~⇒~DoubleRightTee~⊨~DoubleUpArrow~⇑~DoubleUpDownArrow~⇕~DoubleVerticalBar~∥~DownArrow~↓~DownArrowBar~⤓~DownArrowUpArrow~⇵~DownBreve~̑~DownLeftRightVector~⥐~DownLeftTeeVector~⥞~DownLeftVector~↽~DownLeftVectorBar~⥖~DownRightTeeVector~⥟~DownRightVector~⇁~DownRightVectorBar~⥗~DownTee~⊤~DownTeeArrow~↧~Downarrow~⇓~Dscr~𝒟~Dstrok~Đ~ENG~Ŋ~Ecaron~Ě~Ecy~Э~Edot~Ė~Efr~𝔈~Element~∈~Emacr~Ē~EmptySmallSquare~◻~EmptyVerySmallSquare~▫~Eogon~Ę~Eopf~𝔼~Equal~⩵~EqualTilde~≂~Equilibrium~⇌~Escr~ℰ~Esim~⩳~Exists~∃~ExponentialE~ⅇ~Fcy~Ф~Ffr~𝔉~FilledSmallSquare~◼~FilledVerySmallSquare~▪~Fopf~𝔽~ForAll~∀~Fouriertrf~ℱ~Fscr~ℱ~GJcy~Ѓ~Gammad~Ϝ~Gbreve~Ğ~Gcedil~Ģ~Gcirc~Ĝ~Gcy~Г~Gdot~Ġ~Gfr~𝔊~Gg~⋙~Gopf~𝔾~GreaterEqual~≥~GreaterEqualLess~⋛~GreaterFullEqual~≧~GreaterGreater~⪢~GreaterLess~≷~GreaterSlantEqual~⩾~GreaterTilde~≳~Gscr~𝒢~Gt~≫~HARDcy~Ъ~Hacek~ˇ~Hat~^~Hcirc~Ĥ~Hfr~ℌ~HilbertSpace~ℋ~Hopf~ℍ~HorizontalLine~─~Hscr~ℋ~Hstrok~Ħ~HumpDownHump~≎~HumpEqual~≏~IEcy~Е~IJlig~Ĳ~IOcy~Ё~Icy~И~Idot~İ~Ifr~ℑ~Im~ℑ~Imacr~Ī~ImaginaryI~ⅈ~Implies~⇒~Int~∬~Integral~∫~Intersection~⋂~InvisibleComma~⁣~InvisibleTimes~⁢~Iogon~Į~Iopf~𝕀~Iscr~ℐ~Itilde~Ĩ~Iukcy~І~Jcirc~Ĵ~Jcy~Й~Jfr~𝔍~Jopf~𝕁~Jscr~𝒥~Jsercy~Ј~Jukcy~Є~KHcy~Х~KJcy~Ќ~Kcedil~Ķ~Kcy~К~Kfr~𝔎~Kopf~𝕂~Kscr~𝒦~LJcy~Љ~Lacute~Ĺ~Lang~⟪~Laplacetrf~ℒ~Larr~↞~Lcaron~Ľ~Lcedil~Ļ~Lcy~Л~LeftAngleBracket~⟨~LeftArrow~←~LeftArrowBar~⇤~LeftArrowRightArrow~⇆~LeftCeiling~⌈~LeftDoubleBracket~⟦~LeftDownTeeVector~⥡~LeftDownVector~⇃~LeftDownVectorBar~⥙~LeftFloor~⌊~LeftRightArrow~↔~LeftRightVector~⥎~LeftTee~⊣~LeftTeeArrow~↤~LeftTeeVector~⥚~LeftTriangle~⊲~LeftTriangleBar~⧏~LeftTriangleEqual~⊴~LeftUpDownVector~⥑~LeftUpTeeVector~⥠~LeftUpVector~↿~LeftUpVectorBar~⥘~LeftVector~↼~LeftVectorBar~⥒~Leftarrow~⇐~Leftrightarrow~⇔~LessEqualGreater~⋚~LessFullEqual~≦~LessGreater~≶~LessLess~⪡~LessSlantEqual~⩽~LessTilde~≲~Lfr~𝔏~Ll~⋘~Lleftarrow~⇚~Lmidot~Ŀ~LongLeftArrow~⟵~LongLeftRightArrow~⟷~LongRightArrow~⟶~Longleftarrow~⟸~Longleftrightarrow~⟺~Longrightarrow~⟹~Lopf~𝕃~LowerLeftArrow~↙~LowerRightArrow~↘~Lscr~ℒ~Lsh~↰~Lstrok~Ł~Lt~≪~Map~⤅~Mcy~М~MediumSpace~ ~Mellintrf~ℳ~Mfr~𝔐~MinusPlus~∓~Mopf~𝕄~Mscr~ℳ~NJcy~Њ~Nacute~Ń~Ncaron~Ň~Ncedil~Ņ~Ncy~Н~NegativeMediumSpace~​~NegativeThickSpace~​~NegativeThinSpace~​~NegativeVeryThinSpace~​~NestedGreaterGreater~≫~NestedLessLess~≪~NewLine~\n~Nfr~𝔑~NoBreak~⁠~NonBreakingSpace~ ~Nopf~ℕ~Not~⫬~NotCongruent~≢~NotCupCap~≭~NotDoubleVerticalBar~∦~NotElement~∉~NotEqual~≠~NotEqualTilde~≂̸~NotExists~∄~NotGreater~≯~NotGreaterEqual~≱~NotGreaterFullEqual~≧̸~NotGreaterGreater~≫̸~NotGreaterLess~≹~NotGreaterSlantEqual~⩾̸~NotGreaterTilde~≵~NotHumpDownHump~≎̸~NotHumpEqual~≏̸~NotLeftTriangle~⋪~NotLeftTriangleBar~⧏̸~NotLeftTriangleEqual~⋬~NotLess~≮~NotLessEqual~≰~NotLessGreater~≸~NotLessLess~≪̸~NotLessSlantEqual~⩽̸~NotLessTilde~≴~NotNestedGreaterGreater~⪢̸~NotNestedLessLess~⪡̸~NotPrecedes~⊀~NotPrecedesEqual~⪯̸~NotPrecedesSlantEqual~⋠~NotReverseElement~∌~NotRightTriangle~⋫~NotRightTriangleBar~⧐̸~NotRightTriangleEqual~⋭~NotSquareSubset~⊏̸~NotSquareSubsetEqual~⋢~NotSquareSuperset~⊐̸~NotSquareSupersetEqual~⋣~NotSubset~⊂⃒~NotSubsetEqual~⊈~NotSucceeds~⊁~NotSucceedsEqual~⪰̸~NotSucceedsSlantEqual~⋡~NotSucceedsTilde~≿̸~NotSuperset~⊃⃒~NotSupersetEqual~⊉~NotTilde~≁~NotTildeEqual~≄~NotTildeFullEqual~≇~NotTildeTilde~≉~NotVerticalBar~∤~Nscr~𝒩~Ocy~О~Odblac~Ő~Ofr~𝔒~Omacr~Ō~Oopf~𝕆~OpenCurlyDoubleQuote~“~OpenCurlyQuote~‘~Or~⩔~Oscr~𝒪~Otimes~⨷~OverBar~‾~OverBrace~⏞~OverBracket~⎴~OverParenthesis~⏜~PartialD~∂~Pcy~П~Pfr~𝔓~PlusMinus~±~Poincareplane~ℌ~Popf~ℙ~Pr~⪻~Precedes~≺~PrecedesEqual~⪯~PrecedesSlantEqual~≼~PrecedesTilde~≾~Product~∏~Proportion~∷~Proportional~∝~Pscr~𝒫~Qfr~𝔔~Qopf~ℚ~Qscr~𝒬~RBarr~⤐~Racute~Ŕ~Rang~⟫~Rarr~↠~Rarrtl~⤖~Rcaron~Ř~Rcedil~Ŗ~Rcy~Р~Re~ℜ~ReverseElement~∋~ReverseEquilibrium~⇋~ReverseUpEquilibrium~⥯~Rfr~ℜ~RightAngleBracket~⟩~RightArrow~→~RightArrowBar~⇥~RightArrowLeftArrow~⇄~RightCeiling~⌉~RightDoubleBracket~⟧~RightDownTeeVector~⥝~RightDownVector~⇂~RightDownVectorBar~⥕~RightFloor~⌋~RightTee~⊢~RightTeeArrow~↦~RightTeeVector~⥛~RightTriangle~⊳~RightTriangleBar~⧐~RightTriangleEqual~⊵~RightUpDownVector~⥏~RightUpTeeVector~⥜~RightUpVector~↾~RightUpVectorBar~⥔~RightVector~⇀~RightVectorBar~⥓~Rightarrow~⇒~Ropf~ℝ~RoundImplies~⥰~Rrightarrow~⇛~Rscr~ℛ~Rsh~↱~RuleDelayed~⧴~SHCHcy~Щ~SHcy~Ш~SOFTcy~Ь~Sacute~Ś~Sc~⪼~Scedil~Ş~Scirc~Ŝ~Scy~С~Sfr~𝔖~ShortDownArrow~↓~ShortLeftArrow~←~ShortRightArrow~→~ShortUpArrow~↑~SmallCircle~∘~Sopf~𝕊~Sqrt~√~Square~□~SquareIntersection~⊓~SquareSubset~⊏~SquareSubsetEqual~⊑~SquareSuperset~⊐~SquareSupersetEqual~⊒~SquareUnion~⊔~Sscr~𝒮~Star~⋆~Sub~⋐~Subset~⋐~SubsetEqual~⊆~Succeeds~≻~SucceedsEqual~⪰~SucceedsSlantEqual~≽~SucceedsTilde~≿~SuchThat~∋~Sum~∑~Sup~⋑~Superset~⊃~SupersetEqual~⊇~Supset~⋑~TRADE~™~TSHcy~Ћ~TScy~Ц~Tab~\t~Tcaron~Ť~Tcedil~Ţ~Tcy~Т~Tfr~𝔗~Therefore~∴~ThickSpace~  ~ThinSpace~ ~Tilde~∼~TildeEqual~≃~TildeFullEqual~≅~TildeTilde~≈~Topf~𝕋~TripleDot~⃛~Tscr~𝒯~Tstrok~Ŧ~Uarr~↟~Uarrocir~⥉~Ubrcy~Ў~Ubreve~Ŭ~Ucy~У~Udblac~Ű~Ufr~𝔘~Umacr~Ū~UnderBar~_~UnderBrace~⏟~UnderBracket~⎵~UnderParenthesis~⏝~Union~⋃~UnionPlus~⊎~Uogon~Ų~Uopf~𝕌~UpArrow~↑~UpArrowBar~⤒~UpArrowDownArrow~⇅~UpDownArrow~↕~UpEquilibrium~⥮~UpTee~⊥~UpTeeArrow~↥~Uparrow~⇑~Updownarrow~⇕~UpperLeftArrow~↖~UpperRightArrow~↗~Upsi~ϒ~Uring~Ů~Uscr~𝒰~Utilde~Ũ~VDash~⊫~Vbar~⫫~Vcy~В~Vdash~⊩~Vdashl~⫦~Vee~⋁~Verbar~‖~Vert~‖~VerticalBar~∣~VerticalLine~|~VerticalSeparator~❘~VerticalTilde~≀~VeryThinSpace~ ~Vfr~𝔙~Vopf~𝕍~Vscr~𝒱~Vvdash~⊪~Wcirc~Ŵ~Wedge~⋀~Wfr~𝔚~Wopf~𝕎~Wscr~𝒲~Xfr~𝔛~Xopf~𝕏~Xscr~𝒳~YAcy~Я~YIcy~Ї~YUcy~Ю~Ycirc~Ŷ~Ycy~Ы~Yfr~𝔜~Yopf~𝕐~Yscr~𝒴~ZHcy~Ж~Zacute~Ź~Zcaron~Ž~Zcy~З~Zdot~Ż~ZeroWidthSpace~​~Zfr~ℨ~Zopf~ℤ~Zscr~𝒵~abreve~ă~ac~∾~acE~∾̳~acd~∿~acy~а~af~⁡~afr~𝔞~aleph~ℵ~amacr~ā~amalg~⨿~andand~⩕~andd~⩜~andslope~⩘~andv~⩚~ange~⦤~angle~∠~angmsd~∡~angmsdaa~⦨~angmsdab~⦩~angmsdac~⦪~angmsdad~⦫~angmsdae~⦬~angmsdaf~⦭~angmsdag~⦮~angmsdah~⦯~angrt~∟~angrtvb~⊾~angrtvbd~⦝~angsph~∢~angst~Å~angzarr~⍼~aogon~ą~aopf~𝕒~ap~≈~apE~⩰~apacir~⩯~ape~≊~apid~≋~approx~≈~approxeq~≊~ascr~𝒶~ast~*~asympeq~≍~awconint~∳~awint~⨑~bNot~⫭~backcong~≌~backepsilon~϶~backprime~‵~backsim~∽~backsimeq~⋍~barvee~⊽~barwed~⌅~barwedge~⌅~bbrk~⎵~bbrktbrk~⎶~bcong~≌~bcy~б~becaus~∵~because~∵~bemptyv~⦰~bepsi~϶~bernou~ℬ~beth~ℶ~between~≬~bfr~𝔟~bigcap~⋂~bigcirc~◯~bigcup~⋃~bigodot~⨀~bigoplus~⨁~bigotimes~⨂~bigsqcup~⨆~bigstar~★~bigtriangledown~▽~bigtriangleup~△~biguplus~⨄~bigvee~⋁~bigwedge~⋀~bkarow~⤍~blacklozenge~⧫~blacksquare~▪~blacktriangle~▴~blacktriangledown~▾~blacktriangleleft~◂~blacktriangleright~▸~blank~␣~blk12~▒~blk14~░~blk34~▓~block~█~bne~=⃥~bnequiv~≡⃥~bnot~⌐~bopf~𝕓~bot~⊥~bottom~⊥~bowtie~⋈~boxDL~╗~boxDR~╔~boxDl~╖~boxDr~╓~boxH~═~boxHD~╦~boxHU~╩~boxHd~╤~boxHu~╧~boxUL~╝~boxUR~╚~boxUl~╜~boxUr~╙~boxV~║~boxVH~╬~boxVL~╣~boxVR~╠~boxVh~╫~boxVl~╢~boxVr~╟~boxbox~⧉~boxdL~╕~boxdR~╒~boxdl~┐~boxdr~┌~boxh~─~boxhD~╥~boxhU~╨~boxhd~┬~boxhu~┴~boxminus~⊟~boxplus~⊞~boxtimes~⊠~boxuL~╛~boxuR~╘~boxul~┘~boxur~└~boxv~│~boxvH~╪~boxvL~╡~boxvR~╞~boxvh~┼~boxvl~┤~boxvr~├~bprime~‵~breve~˘~bscr~𝒷~bsemi~⁏~bsim~∽~bsime~⋍~bsol~\\~bsolb~⧅~bsolhsub~⟈~bullet~•~bump~≎~bumpE~⪮~bumpe~≏~bumpeq~≏~cacute~ć~capand~⩄~capbrcup~⩉~capcap~⩋~capcup~⩇~capdot~⩀~caps~∩︀~caret~⁁~caron~ˇ~ccaps~⩍~ccaron~č~ccirc~ĉ~ccups~⩌~ccupssm~⩐~cdot~ċ~cemptyv~⦲~centerdot~·~cfr~𝔠~chcy~ч~check~✓~checkmark~✓~cir~○~cirE~⧃~circeq~≗~circlearrowleft~↺~circlearrowright~↻~circledR~®~circledS~Ⓢ~circledast~⊛~circledcirc~⊚~circleddash~⊝~cire~≗~cirfnint~⨐~cirmid~⫯~cirscir~⧂~clubsuit~♣~colon~:~colone~≔~coloneq~≔~comma~,~commat~@~comp~∁~compfn~∘~complement~∁~complexes~ℂ~congdot~⩭~conint~∮~copf~𝕔~coprod~∐~copysr~℗~cross~✗~cscr~𝒸~csub~⫏~csube~⫑~csup~⫐~csupe~⫒~ctdot~⋯~cudarrl~⤸~cudarrr~⤵~cuepr~⋞~cuesc~⋟~cularr~↶~cularrp~⤽~cupbrcap~⩈~cupcap~⩆~cupcup~⩊~cupdot~⊍~cupor~⩅~cups~∪︀~curarr~↷~curarrm~⤼~curlyeqprec~⋞~curlyeqsucc~⋟~curlyvee~⋎~curlywedge~⋏~curvearrowleft~↶~curvearrowright~↷~cuvee~⋎~cuwed~⋏~cwconint~∲~cwint~∱~cylcty~⌭~dHar~⥥~daleth~ℸ~dash~‐~dashv~⊣~dbkarow~⤏~dblac~˝~dcaron~ď~dcy~д~dd~ⅆ~ddagger~‡~ddarr~⇊~ddotseq~⩷~demptyv~⦱~dfisht~⥿~dfr~𝔡~dharl~⇃~dharr~⇂~diam~⋄~diamond~⋄~diamondsuit~♦~die~¨~digamma~ϝ~disin~⋲~div~÷~divideontimes~⋇~divonx~⋇~djcy~ђ~dlcorn~⌞~dlcrop~⌍~dollar~$~dopf~𝕕~dot~˙~doteq~≐~doteqdot~≑~dotminus~∸~dotplus~∔~dotsquare~⊡~doublebarwedge~⌆~downarrow~↓~downdownarrows~⇊~downharpoonleft~⇃~downharpoonright~⇂~drbkarow~⤐~drcorn~⌟~drcrop~⌌~dscr~𝒹~dscy~ѕ~dsol~⧶~dstrok~đ~dtdot~⋱~dtri~▿~dtrif~▾~duarr~⇵~duhar~⥯~dwangle~⦦~dzcy~џ~dzigrarr~⟿~eDDot~⩷~eDot~≑~easter~⩮~ecaron~ě~ecir~≖~ecolon~≕~ecy~э~edot~ė~ee~ⅇ~efDot~≒~efr~𝔢~eg~⪚~egs~⪖~egsdot~⪘~el~⪙~elinters~⏧~ell~ℓ~els~⪕~elsdot~⪗~emacr~ē~emptyset~∅~emptyv~∅~emsp13~ ~emsp14~ ~eng~ŋ~eogon~ę~eopf~𝕖~epar~⋕~eparsl~⧣~eplus~⩱~epsi~ε~epsiv~ϵ~eqcirc~≖~eqcolon~≕~eqsim~≂~eqslantgtr~⪖~eqslantless~⪕~equals~=~equest~≟~equivDD~⩸~eqvparsl~⧥~erDot~≓~erarr~⥱~escr~ℯ~esdot~≐~esim~≂~excl~!~expectation~ℰ~exponentiale~ⅇ~fallingdotseq~≒~fcy~ф~female~♀~ffilig~ﬃ~fflig~ﬀ~ffllig~ﬄ~ffr~𝔣~filig~ﬁ~fjlig~fj~flat~♭~fllig~ﬂ~fltns~▱~fopf~𝕗~fork~⋔~forkv~⫙~fpartint~⨍~frac13~⅓~frac15~⅕~frac16~⅙~frac18~⅛~frac23~⅔~frac25~⅖~frac35~⅗~frac38~⅜~frac45~⅘~frac56~⅚~frac58~⅝~frac78~⅞~frown~⌢~fscr~𝒻~gE~≧~gEl~⪌~gacute~ǵ~gammad~ϝ~gap~⪆~gbreve~ğ~gcirc~ĝ~gcy~г~gdot~ġ~gel~⋛~geq~≥~geqq~≧~geqslant~⩾~ges~⩾~gescc~⪩~gesdot~⪀~gesdoto~⪂~gesdotol~⪄~gesl~⋛︀~gesles~⪔~gfr~𝔤~gg~≫~ggg~⋙~gimel~ℷ~gjcy~ѓ~gl~≷~glE~⪒~gla~⪥~glj~⪤~gnE~≩~gnap~⪊~gnapprox~⪊~gne~⪈~gneq~⪈~gneqq~≩~gnsim~⋧~gopf~𝕘~grave~`~gscr~ℊ~gsim~≳~gsime~⪎~gsiml~⪐~gtcc~⪧~gtcir~⩺~gtdot~⋗~gtlPar~⦕~gtquest~⩼~gtrapprox~⪆~gtrarr~⥸~gtrdot~⋗~gtreqless~⋛~gtreqqless~⪌~gtrless~≷~gtrsim~≳~gvertneqq~≩︀~gvnE~≩︀~hairsp~ ~half~½~hamilt~ℋ~hardcy~ъ~harrcir~⥈~harrw~↭~hbar~ℏ~hcirc~ĥ~heartsuit~♥~hercon~⊹~hfr~𝔥~hksearow~⤥~hkswarow~⤦~hoarr~⇿~homtht~∻~hookleftarrow~↩~hookrightarrow~↪~hopf~𝕙~horbar~―~hscr~𝒽~hslash~ℏ~hstrok~ħ~hybull~⁃~hyphen~‐~ic~⁣~icy~и~iecy~е~iff~⇔~ifr~𝔦~ii~ⅈ~iiiint~⨌~iiint~∭~iinfin~⧜~iiota~℩~ijlig~ĳ~imacr~ī~imagline~ℐ~imagpart~ℑ~imath~ı~imof~⊷~imped~Ƶ~in~∈~incare~℅~infintie~⧝~inodot~ı~intcal~⊺~integers~ℤ~intercal~⊺~intlarhk~⨗~intprod~⨼~iocy~ё~iogon~į~iopf~𝕚~iprod~⨼~iscr~𝒾~isinE~⋹~isindot~⋵~isins~⋴~isinsv~⋳~isinv~∈~it~⁢~itilde~ĩ~iukcy~і~jcirc~ĵ~jcy~й~jfr~𝔧~jmath~ȷ~jopf~𝕛~jscr~𝒿~jsercy~ј~jukcy~є~kappav~ϰ~kcedil~ķ~kcy~к~kfr~𝔨~kgreen~ĸ~khcy~х~kjcy~ќ~kopf~𝕜~kscr~𝓀~lAarr~⇚~lAtail~⤛~lBarr~⤎~lE~≦~lEg~⪋~lHar~⥢~lacute~ĺ~laemptyv~⦴~lagran~ℒ~langd~⦑~langle~⟨~lap~⪅~larrb~⇤~larrbfs~⤟~larrfs~⤝~larrhk~↩~larrlp~↫~larrpl~⤹~larrsim~⥳~larrtl~↢~lat~⪫~latail~⤙~late~⪭~lates~⪭︀~lbarr~⤌~lbbrk~❲~lbrace~{~lbrack~[~lbrke~⦋~lbrksld~⦏~lbrkslu~⦍~lcaron~ľ~lcedil~ļ~lcub~{~lcy~л~ldca~⤶~ldquor~„~ldrdhar~⥧~ldrushar~⥋~ldsh~↲~leftarrow~←~leftarrowtail~↢~leftharpoondown~↽~leftharpoonup~↼~leftleftarrows~⇇~leftrightarrow~↔~leftrightarrows~⇆~leftrightharpoons~⇋~leftrightsquigarrow~↭~leftthreetimes~⋋~leg~⋚~leq~≤~leqq~≦~leqslant~⩽~les~⩽~lescc~⪨~lesdot~⩿~lesdoto~⪁~lesdotor~⪃~lesg~⋚︀~lesges~⪓~lessapprox~⪅~lessdot~⋖~lesseqgtr~⋚~lesseqqgtr~⪋~lessgtr~≶~lesssim~≲~lfisht~⥼~lfr~𝔩~lg~≶~lgE~⪑~lhard~↽~lharu~↼~lharul~⥪~lhblk~▄~ljcy~љ~ll~≪~llarr~⇇~llcorner~⌞~llhard~⥫~lltri~◺~lmidot~ŀ~lmoust~⎰~lmoustache~⎰~lnE~≨~lnap~⪉~lnapprox~⪉~lne~⪇~lneq~⪇~lneqq~≨~lnsim~⋦~loang~⟬~loarr~⇽~lobrk~⟦~longleftarrow~⟵~longleftrightarrow~⟷~longmapsto~⟼~longrightarrow~⟶~looparrowleft~↫~looparrowright~↬~lopar~⦅~lopf~𝕝~loplus~⨭~lotimes~⨴~lowbar~_~lozenge~◊~lozf~⧫~lpar~(~lparlt~⦓~lrarr~⇆~lrcorner~⌟~lrhar~⇋~lrhard~⥭~lrtri~⊿~lscr~𝓁~lsh~↰~lsim~≲~lsime~⪍~lsimg~⪏~lsqb~[~lsquor~‚~lstrok~ł~ltcc~⪦~ltcir~⩹~ltdot~⋖~lthree~⋋~ltimes~⋉~ltlarr~⥶~ltquest~⩻~ltrPar~⦖~ltri~◃~ltrie~⊴~ltrif~◂~lurdshar~⥊~luruhar~⥦~lvertneqq~≨︀~lvnE~≨︀~mDDot~∺~male~♂~malt~✠~maltese~✠~map~↦~mapsto~↦~mapstodown~↧~mapstoleft~↤~mapstoup~↥~marker~▮~mcomma~⨩~mcy~м~measuredangle~∡~mfr~𝔪~mho~℧~mid~∣~midast~*~midcir~⫰~minusb~⊟~minusd~∸~minusdu~⨪~mlcp~⫛~mldr~…~mnplus~∓~models~⊧~mopf~𝕞~mp~∓~mscr~𝓂~mstpos~∾~multimap~⊸~mumap~⊸~nGg~⋙̸~nGt~≫⃒~nGtv~≫̸~nLeftarrow~⇍~nLeftrightarrow~⇎~nLl~⋘̸~nLt~≪⃒~nLtv~≪̸~nRightarrow~⇏~nVDash~⊯~nVdash~⊮~nacute~ń~nang~∠⃒~nap~≉~napE~⩰̸~napid~≋̸~napos~ŉ~napprox~≉~natur~♮~natural~♮~naturals~ℕ~nbump~≎̸~nbumpe~≏̸~ncap~⩃~ncaron~ň~ncedil~ņ~ncong~≇~ncongdot~⩭̸~ncup~⩂~ncy~н~neArr~⇗~nearhk~⤤~nearr~↗~nearrow~↗~nedot~≐̸~nequiv~≢~nesear~⤨~nesim~≂̸~nexist~∄~nexists~∄~nfr~𝔫~ngE~≧̸~nge~≱~ngeq~≱~ngeqq~≧̸~ngeqslant~⩾̸~nges~⩾̸~ngsim~≵~ngt~≯~ngtr~≯~nhArr~⇎~nharr~↮~nhpar~⫲~nis~⋼~nisd~⋺~niv~∋~njcy~њ~nlArr~⇍~nlE~≦̸~nlarr~↚~nldr~‥~nle~≰~nleftarrow~↚~nleftrightarrow~↮~nleq~≰~nleqq~≦̸~nleqslant~⩽̸~nles~⩽̸~nless~≮~nlsim~≴~nlt~≮~nltri~⋪~nltrie~⋬~nmid~∤~nopf~𝕟~notinE~⋹̸~notindot~⋵̸~notinva~∉~notinvb~⋷~notinvc~⋶~notni~∌~notniva~∌~notnivb~⋾~notnivc~⋽~npar~∦~nparallel~∦~nparsl~⫽⃥~npart~∂̸~npolint~⨔~npr~⊀~nprcue~⋠~npre~⪯̸~nprec~⊀~npreceq~⪯̸~nrArr~⇏~nrarr~↛~nrarrc~⤳̸~nrarrw~↝̸~nrightarrow~↛~nrtri~⋫~nrtrie~⋭~nsc~⊁~nsccue~⋡~nsce~⪰̸~nscr~𝓃~nshortmid~∤~nshortparallel~∦~nsim~≁~nsime~≄~nsimeq~≄~nsmid~∤~nspar~∦~nsqsube~⋢~nsqsupe~⋣~nsubE~⫅̸~nsube~⊈~nsubset~⊂⃒~nsubseteq~⊈~nsubseteqq~⫅̸~nsucc~⊁~nsucceq~⪰̸~nsup~⊅~nsupE~⫆̸~nsupe~⊉~nsupset~⊃⃒~nsupseteq~⊉~nsupseteqq~⫆̸~ntgl~≹~ntlg~≸~ntriangleleft~⋪~ntrianglelefteq~⋬~ntriangleright~⋫~ntrianglerighteq~⋭~num~#~numero~№~numsp~ ~nvDash~⊭~nvHarr~⤄~nvap~≍⃒~nvdash~⊬~nvge~≥⃒~nvgt~>⃒~nvinfin~⧞~nvlArr~⤂~nvle~≤⃒~nvlt~<⃒~nvltrie~⊴⃒~nvrArr~⤃~nvrtrie~⊵⃒~nvsim~∼⃒~nwArr~⇖~nwarhk~⤣~nwarr~↖~nwarrow~↖~nwnear~⤧~oS~Ⓢ~oast~⊛~ocir~⊚~ocy~о~odash~⊝~odblac~ő~odiv~⨸~odot~⊙~odsold~⦼~ofcir~⦿~ofr~𝔬~ogon~˛~ogt~⧁~ohbar~⦵~ohm~Ω~oint~∮~olarr~↺~olcir~⦾~olcross~⦻~olt~⧀~omacr~ō~omid~⦶~ominus~⊖~oopf~𝕠~opar~⦷~operp~⦹~orarr~↻~ord~⩝~order~ℴ~orderof~ℴ~origof~⊶~oror~⩖~orslope~⩗~orv~⩛~oscr~ℴ~osol~⊘~otimesas~⨶~ovbar~⌽~par~∥~parallel~∥~parsim~⫳~parsl~⫽~pcy~п~percnt~%~period~.~pertenk~‱~pfr~𝔭~phiv~ϕ~phmmat~ℳ~phone~☎~pitchfork~⋔~planck~ℏ~planckh~ℎ~plankv~ℏ~plus~+~plusacir~⨣~plusb~⊞~pluscir~⨢~plusdo~∔~plusdu~⨥~pluse~⩲~plussim~⨦~plustwo~⨧~pm~±~pointint~⨕~popf~𝕡~pr~≺~prE~⪳~prap~⪷~prcue~≼~pre~⪯~prec~≺~precapprox~⪷~preccurlyeq~≼~preceq~⪯~precnapprox~⪹~precneqq~⪵~precnsim~⋨~precsim~≾~primes~ℙ~prnE~⪵~prnap~⪹~prnsim~⋨~profalar~⌮~profline~⌒~profsurf~⌓~propto~∝~prsim~≾~prurel~⊰~pscr~𝓅~puncsp~ ~qfr~𝔮~qint~⨌~qopf~𝕢~qprime~⁗~qscr~𝓆~quaternions~ℍ~quatint~⨖~quest~?~questeq~≟~rAarr~⇛~rAtail~⤜~rBarr~⤏~rHar~⥤~race~∽̱~racute~ŕ~raemptyv~⦳~rangd~⦒~range~⦥~rangle~⟩~rarrap~⥵~rarrb~⇥~rarrbfs~⤠~rarrc~⤳~rarrfs~⤞~rarrhk~↪~rarrlp~↬~rarrpl~⥅~rarrsim~⥴~rarrtl~↣~rarrw~↝~ratail~⤚~ratio~∶~rationals~ℚ~rbarr~⤍~rbbrk~❳~rbrace~}~rbrack~]~rbrke~⦌~rbrksld~⦎~rbrkslu~⦐~rcaron~ř~rcedil~ŗ~rcub~}~rcy~р~rdca~⤷~rdldhar~⥩~rdquor~”~rdsh~↳~realine~ℛ~realpart~ℜ~reals~ℝ~rect~▭~rfisht~⥽~rfr~𝔯~rhard~⇁~rharu~⇀~rharul~⥬~rhov~ϱ~rightarrow~→~rightarrowtail~↣~rightharpoondown~⇁~rightharpoonup~⇀~rightleftarrows~⇄~rightleftharpoons~⇌~rightrightarrows~⇉~rightsquigarrow~↝~rightthreetimes~⋌~ring~˚~risingdotseq~≓~rlarr~⇄~rlhar~⇌~rmoust~⎱~rmoustache~⎱~rnmid~⫮~roang~⟭~roarr~⇾~robrk~⟧~ropar~⦆~ropf~𝕣~roplus~⨮~rotimes~⨵~rpar~)~rpargt~⦔~rppolint~⨒~rrarr~⇉~rscr~𝓇~rsh~↱~rsqb~]~rsquor~’~rthree~⋌~rtimes~⋊~rtri~▹~rtrie~⊵~rtrif~▸~rtriltri~⧎~ruluhar~⥨~rx~℞~sacute~ś~sc~≻~scE~⪴~scap~⪸~sccue~≽~sce~⪰~scedil~ş~scirc~ŝ~scnE~⪶~scnap~⪺~scnsim~⋩~scpolint~⨓~scsim~≿~scy~с~sdotb~⊡~sdote~⩦~seArr~⇘~searhk~⤥~searr~↘~searrow~↘~semi~;~seswar~⤩~setminus~∖~setmn~∖~sext~✶~sfr~𝔰~sfrown~⌢~sharp~♯~shchcy~щ~shcy~ш~shortmid~∣~shortparallel~∥~sigmav~ς~simdot~⩪~sime~≃~simeq~≃~simg~⪞~simgE~⪠~siml~⪝~simlE~⪟~simne~≆~simplus~⨤~simrarr~⥲~slarr~←~smallsetminus~∖~smashp~⨳~smeparsl~⧤~smid~∣~smile~⌣~smt~⪪~smte~⪬~smtes~⪬︀~softcy~ь~sol~/~solb~⧄~solbar~⌿~sopf~𝕤~spadesuit~♠~spar~∥~sqcap~⊓~sqcaps~⊓︀~sqcup~⊔~sqcups~⊔︀~sqsub~⊏~sqsube~⊑~sqsubset~⊏~sqsubseteq~⊑~sqsup~⊐~sqsupe~⊒~sqsupset~⊐~sqsupseteq~⊒~squ~□~square~□~squarf~▪~squf~▪~srarr~→~sscr~𝓈~ssetmn~∖~ssmile~⌣~sstarf~⋆~star~☆~starf~★~straightepsilon~ϵ~straightphi~ϕ~strns~¯~subE~⫅~subdot~⪽~subedot~⫃~submult~⫁~subnE~⫋~subne~⊊~subplus~⪿~subrarr~⥹~subset~⊂~subseteq~⊆~subseteqq~⫅~subsetneq~⊊~subsetneqq~⫋~subsim~⫇~subsub~⫕~subsup~⫓~succ~≻~succapprox~⪸~succcurlyeq~≽~succeq~⪰~succnapprox~⪺~succneqq~⪶~succnsim~⋩~succsim~≿~sung~♪~supE~⫆~supdot~⪾~supdsub~⫘~supedot~⫄~suphsol~⟉~suphsub~⫗~suplarr~⥻~supmult~⫂~supnE~⫌~supne~⊋~supplus~⫀~supset~⊃~supseteq~⊇~supseteqq~⫆~supsetneq~⊋~supsetneqq~⫌~supsim~⫈~supsub~⫔~supsup~⫖~swArr~⇙~swarhk~⤦~swarr~↙~swarrow~↙~swnwar~⤪~target~⌖~tbrk~⎴~tcaron~ť~tcedil~ţ~tcy~т~tdot~⃛~telrec~⌕~tfr~𝔱~therefore~∴~thetav~ϑ~thickapprox~≈~thicksim~∼~thkap~≈~thksim~∼~timesb~⊠~timesbar~⨱~timesd~⨰~tint~∭~toea~⤨~top~⊤~topbot~⌶~topcir~⫱~topf~𝕥~topfork~⫚~tosa~⤩~tprime~‴~triangle~▵~triangledown~▿~triangleleft~◃~trianglelefteq~⊴~triangleq~≜~triangleright~▹~trianglerighteq~⊵~tridot~◬~trie~≜~triminus~⨺~triplus~⨹~trisb~⧍~tritime~⨻~trpezium~⏢~tscr~𝓉~tscy~ц~tshcy~ћ~tstrok~ŧ~twixt~≬~twoheadleftarrow~↞~twoheadrightarrow~↠~uHar~⥣~ubrcy~ў~ubreve~ŭ~ucy~у~udarr~⇅~udblac~ű~udhar~⥮~ufisht~⥾~ufr~𝔲~uharl~↿~uharr~↾~uhblk~▀~ulcorn~⌜~ulcorner~⌜~ulcrop~⌏~ultri~◸~umacr~ū~uogon~ų~uopf~𝕦~uparrow~↑~updownarrow~↕~upharpoonleft~↿~upharpoonright~↾~uplus~⊎~upsi~υ~upuparrows~⇈~urcorn~⌝~urcorner~⌝~urcrop~⌎~uring~ů~urtri~◹~uscr~𝓊~utdot~⋰~utilde~ũ~utri~▵~utrif~▴~uuarr~⇈~uwangle~⦧~vArr~⇕~vBar~⫨~vBarv~⫩~vDash~⊨~vangrt~⦜~varepsilon~ϵ~varkappa~ϰ~varnothing~∅~varphi~ϕ~varpi~ϖ~varpropto~∝~varr~↕~varrho~ϱ~varsigma~ς~varsubsetneq~⊊︀~varsubsetneqq~⫋︀~varsupsetneq~⊋︀~varsupsetneqq~⫌︀~vartheta~ϑ~vartriangleleft~⊲~vartriangleright~⊳~vcy~в~vdash~⊢~vee~∨~veebar~⊻~veeeq~≚~vellip~⋮~verbar~|~vert~|~vfr~𝔳~vltri~⊲~vnsub~⊂⃒~vnsup~⊃⃒~vopf~𝕧~vprop~∝~vrtri~⊳~vscr~𝓋~vsubnE~⫋︀~vsubne~⊊︀~vsupnE~⫌︀~vsupne~⊋︀~vzigzag~⦚~wcirc~ŵ~wedbar~⩟~wedge~∧~wedgeq~≙~wfr~𝔴~wopf~𝕨~wp~℘~wr~≀~wreath~≀~wscr~𝓌~xcap~⋂~xcirc~◯~xcup~⋃~xdtri~▽~xfr~𝔵~xhArr~⟺~xharr~⟷~xlArr~⟸~xlarr~⟵~xmap~⟼~xnis~⋻~xodot~⨀~xopf~𝕩~xoplus~⨁~xotime~⨂~xrArr~⟹~xrarr~⟶~xscr~𝓍~xsqcup~⨆~xuplus~⨄~xutri~△~xvee~⋁~xwedge~⋀~yacy~я~ycirc~ŷ~ycy~ы~yfr~𝔶~yicy~ї~yopf~𝕪~yscr~𝓎~yucy~ю~zacute~ź~zcaron~ž~zcy~з~zdot~ż~zeetrf~ℨ~zfr~𝔷~zhcy~ж~zigrarr~⇝~zopf~𝕫~zscr~𝓏~~AMP~&~COPY~©~GT~>~LT~<~QUOT~"~REG~®',Ct.html4);var Bt={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},Nt=String.fromCodePoint||function(e){return String.fromCharCode(Math.floor((e-65536)/1024)+55296,(e-65536)%1024+56320)},jt=function(){return jt=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},jt.apply(this,arguments)},_t=jt(jt({},Ct),{all:Ct.html5}),Lt={scope:"body",level:"all"},Ft=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,Mt=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,Pt={xml:{strict:Ft,attribute:Mt,body:$t.xml},html4:{strict:Ft,attribute:Mt,body:$t.html4},html5:{strict:Ft,attribute:Mt,body:$t.html5}},Ht=jt(jt({},Pt),{all:Pt.html5}),Wt=String.fromCharCode,Ut=Wt(65533);function Gt(e,t){var r=void 0===t?Lt:t,n=r.level,a=void 0===n?"all":n,o=r.scope,i=void 0===o?"xml"===a?"strict":"body":o;if(!e)return"";var s=Ht[a][i],l=_t[a].entities,c="attribute"===i,u="strict"===i;return e.replace(s,function(e){return function(e,t,r,n){var a=e,o=e[e.length-1];if(r&&"="===o)a=e;else if(n&&";"!==o)a=e;else{var i=t[e];if(i)a=i;else if("&"===e[0]&&"#"===e[1]){var s=e[2],l="x"==s||"X"==s?parseInt(e.substr(3),16):parseInt(e.substr(2));a=l>=1114111?Ut:l>65535?Nt(l):Wt(Bt[l]||l)}}return a}(e,l,c,u)})}
/**
 * @name ranges-sort
 * @fileoverview Sort string index ranges
 * @version 6.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-sort/}
 */var Vt={strictlyTwoElementsInRangeArrays:!1,progressFn:null};function zt(e,t){if(!Array.isArray(e)||!e.length)return e;let r,n,a={...Vt,...t};if(a.strictlyTwoElementsInRangeArrays&&!e.every((e,t)=>!(!Array.isArray(e)||2!==e.length)||(r=t,n=e.length,!1)))throw new TypeError(`ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ${r}th range (${JSON.stringify(e[r],null,4)}) has not two but ${n} elements!`);if(!e.every((e,t)=>!(!Array.isArray(e)||!Number.isInteger(e[0])||e[0]<0||!Number.isInteger(e[1])||e[1]<0)||(r=t,!1)))throw new TypeError(`ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ${r}th range (${JSON.stringify(e[r],null,4)}) does not consist of only natural numbers!`);let o=e.length**2,i=0;return Array.from(e).sort((e,t)=>(a.progressFn&&(i+=1,a.progressFn(Math.floor(100*i/o))),e[0]===t[0]?e[1]<t[1]?-1:e[1]>t[1]?1:0:e[0]<t[0]?-1:1
/**
 * @name ranges-merge
 * @fileoverview Merge and sort string index ranges
 * @version 9.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-merge/}
 */))}var Jt={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};
/**
 * @name ranges-apply
 * @fileoverview Take an array of string index ranges, delete/replace the string according to them
 * @version 7.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-apply/}
 */
function Kt(e,t,r){if(0===arguments.length)throw new Error("ranges-apply: [THROW_ID_01] inputs missing!");if("string"!=typeof e)throw new TypeError(`ranges-apply: [THROW_ID_02] first input argument must be a string! Currently it's: ${typeof e}, equal to: ${JSON.stringify(e,null,4)}`);if(t&&!Array.isArray(t))throw new TypeError(`ranges-apply: [THROW_ID_03] second input argument must be an array (or null)! Currently it's: ${typeof t}, equal to: ${JSON.stringify(t,null,4)}`);if(!t?.filter(e=>e).length)return e;let n;n=Array.isArray(t)&&Number.isInteger(t[0])&&Number.isInteger(t[1])?[Array.from(t)]:Array.from(t),n.length,n.filter(e=>e).forEach((e,t)=>{if(!Array.isArray(e))throw new TypeError(`ranges-apply: [THROW_ID_05] ranges array, second input arg., has ${t}th element not an array: ${JSON.stringify(e,null,4)}, which is ${typeof e}`);if(!Number.isInteger(e[0])){if(!Number.isInteger(+e[0])||+e[0]<0)throw new TypeError(`ranges-apply: [THROW_ID_06] ranges array, second input arg. has ${t}th element, array ${JSON.stringify(e,null,0)}. Its first element is not an integer, string index, but ${typeof e[0]}, equal to: ${JSON.stringify(e[0],null,4)}.`);n[t][0]=+n[t][0]}if(!Number.isInteger(e[1])){if(!Number.isInteger(+e[1])||+e[1]<0)throw new TypeError(`ranges-apply: [THROW_ID_07] ranges array, second input arg. has ${t}th element, array ${JSON.stringify(e,null,0)}. Its second element is not an integer, string index, but ${typeof e[1]}, equal to: ${JSON.stringify(e[1],null,4)}.`);n[t][1]=+n[t][1]}});let a=function(e,t){function r(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}if(!Array.isArray(e)||!e.length)return null;let n;if(t){if(!r(t))throw new Error(`emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n${JSON.stringify(t,null,4)} (type ${typeof t})`);if(n={...Jt,...t},n.progressFn&&r(n.progressFn)&&!Object.keys(n.progressFn).length)n.progressFn=null;else if(n.progressFn&&"function"!=typeof n.progressFn)throw new Error(`ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "${typeof n.progressFn}", equal to ${JSON.stringify(n.progressFn,null,4)}`);if(![1,2,"1","2"].includes(n.mergeType))throw new Error(`ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "${typeof n.mergeType}", equal to ${JSON.stringify(n.mergeType,null,4)}`);if("boolean"!=typeof n.joinRangesThatTouchEdges)throw new Error(`ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "${typeof n.joinRangesThatTouchEdges}", equal to ${JSON.stringify(n.joinRangesThatTouchEdges,null,4)}`)}else n={...Jt};let a,o,i,s=e.filter(e=>Array.isArray(e)).map(e=>[...e]).filter(e=>void 0!==e[2]||e[0]!==e[1]);a=n.progressFn?zt(s,{progressFn:e=>{i=Math.floor(e/5),i!==o&&(o=i,n.progressFn(i))}}):zt(s);let l=a.length-1;for(let e=l;e>0;e--)n.progressFn&&(i=Math.floor(78*(1-e/l))+21,i!==o&&i>o&&(o=i,n.progressFn(i))),(a[e][0]<=a[e-1][0]||!n.joinRangesThatTouchEdges&&a[e][0]<a[e-1][1]||n.joinRangesThatTouchEdges&&a[e][0]<=a[e-1][1])&&(a[e-1][0]=Math.min(a[e][0],a[e-1][0]),a[e-1][1]=Math.max(a[e][1],a[e-1][1]),void 0!==a[e][2]&&(a[e-1][0]>=a[e][0]||a[e-1][1]<=a[e][1])&&null!==a[e-1][2]&&(null===a[e][2]&&null!==a[e-1][2]?a[e-1][2]=null:null!=a[e-1][2]?2==+n.mergeType&&a[e-1][0]===a[e][0]?a[e-1][2]=a[e][2]:a[e-1][2]+=a[e][2]:a[e-1][2]=a[e][2]),a.splice(e,1),e=a.length);return a.length?a:null}(n,{progressFn:e=>{}});!function(e){if(!e)throw new Error("Invariant failed")}(a);let o=a.length;if(o>0){let t=e.slice(a[o-1][1]);e=a.reduce((t,r,n,a)=>{let o=0===n?0:a[n-1][1],i=a[n][0];return`${t}${e.slice(o,i)}${a[n][2]||""}`},""),e+=t}return e}
/**
 * @name string-collapse-leading-whitespace
 * @fileoverview Collapse the leading and trailing whitespace of a string
 * @version 7.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/string-collapse-leading-whitespace/}
 */function Zt(e,t=1){function r(e){return Array.from(e).reverse().join("")}function n(e,t,r){let n=r?"\n":"\r",a=r?"\r":"\n";if(!e)return e;let o=0,i="";for(let r=0,s=e.length;r<s;r++)(e[r]===n||e[r]===a&&e[r-1]!==n)&&o++,"\r\n".includes(e[r])||" "===e[r]?" "===e[r]?i+=e[r]:e[r]===n?o<=t&&(i+=e[r],e[r+1]===a&&(i+=e[r+1],r++)):e[r]===a&&e?.[r-1]!==n&&o<=t&&(i+=e[r]):!e[r+1]&&!o&&(i+=" ");return i}if("string"==typeof e&&e.length){let a=1;"number"==typeof+t&&Number.isInteger(+t)&&+t>=0&&(a=+t);let o="",i="";if(e.trim()){if(!e[0].trim())for(let t=0,r=e.length;t<r;t++)if(e[t].trim()){o=e.slice(0,t);break}}else o=e;if(e.trim()&&(""===e.slice(-1).trim()||" "===e.slice(-1)))for(let t=e.length;t--;)if(e[t].trim()){i=e.slice(t+1);break}return`${n(o,a,!1)}${e.trim()}${r(n(r(i),a,!0))}`}return e}
/**
 * @name ranges-push
 * @fileoverview Gather string index ranges
 * @version 7.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-push/}
 */var Yt={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};var Qt={limitToBeAddedWhitespace:!1,limitLinebreaksCount:1,mergeType:1},Xt=class{constructor(e){let t={...Qt,...e};if(t.mergeType&&1!==t.mergeType&&2!==t.mergeType)if(ae(t.mergeType)&&"1"===t.mergeType.trim())t.mergeType=1;else{if(!ae(t.mergeType)||"2"!==t.mergeType.trim())throw new Error(`ranges-push: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "${typeof t.mergeType}", equal to ${JSON.stringify(t.mergeType,null,4)}`);t.mergeType=2}this.opts=t,this.ranges=[]}ranges;opts;add(e,t,r){if(null==e&&null==t)return;if(ie(e)&&!ie(t)){if(Array.isArray(e)){if(e.length){if(e.some(e=>Array.isArray(e)))return void e.forEach(e=>{Array.isArray(e)&&this.add(...e)});e.length&&oe(+e[0])&&oe(+e[1])&&this.add(...e)}return}throw new TypeError(`ranges-push/Ranges/add(): [THROW_ID_12] the first input argument, "from" is set (${JSON.stringify(e,null,0)}) but second-one, "to" is not (${JSON.stringify(t,null,0)})`)}if(!ie(e)&&ie(t))throw new TypeError(`ranges-push/Ranges/add(): [THROW_ID_13] the second input argument, "to" is set (${JSON.stringify(t,null,0)}) but first-one, "from" is not (${JSON.stringify(e,null,0)})`);let n=+e,a=+t;if(!oe(n)||!oe(a))throw oe(n)&&n>=0?new TypeError(`ranges-push/Ranges/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it's of a type "${typeof a}" equal to: ${JSON.stringify(a,null,4)}`):new TypeError(`ranges-push/Ranges/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it's of a type "${typeof n}" equal to: ${JSON.stringify(n,null,4)}`);if(ie(r)&&!ae(r)&&!function(e){return Number.isFinite(e)}(r))throw new TypeError(`ranges-push/Ranges/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but ${typeof r}, equal to:\n${JSON.stringify(r,null,4)}`);if(ie(this.ranges)&&Array.isArray(this.last())&&n===this.last()[1]){if(this.last()[1]=a,this.last()[2],null!==this.last()[2]&&ie(r)){let e=!this.last()[2]||!this.last()[2].length||this.opts?.mergeType&&1!==this.opts.mergeType?r:`${this.last()[2]}${r}`;this.opts.limitToBeAddedWhitespace&&(e=Zt(e,this.opts.limitLinebreaksCount)),ae(e)&&!e.length||(this.last()[2]=e)}}else{this.ranges||(this.ranges=[]);let e=void 0===r||ae(r)&&!r.length?[n,a]:[n,a,r&&this.opts.limitToBeAddedWhitespace?Zt(r,this.opts.limitLinebreaksCount):r];this.ranges.push(e)}}push(e,t,r){this.add(e,t,r)}current(){return Array.isArray(this.ranges)&&this.ranges.length?(this.ranges=function(e,t){function r(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}if(!Array.isArray(e)||!e.length)return null;let n;if(t){if(!r(t))throw new Error(`ranges-merge: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n${JSON.stringify(t,null,4)} (type ${typeof t})`);if(n={...Yt,...t},n.progressFn&&r(n.progressFn)&&!Object.keys(n.progressFn).length)n.progressFn=null;else if(n.progressFn&&"function"!=typeof n.progressFn)throw new Error(`ranges-merge: [THROW_ID_01] resolvedOpts.progressFn must be a function! It was given of a type: "${typeof n.progressFn}", equal to ${JSON.stringify(n.progressFn,null,4)}`);if(![1,2,"1","2"].includes(n.mergeType))throw new Error(`ranges-merge: [THROW_ID_02] resolvedOpts.mergeType was customised to a wrong thing! It was given of a type: "${typeof n.mergeType}", equal to ${JSON.stringify(n.mergeType,null,4)}`);if("boolean"!=typeof n.joinRangesThatTouchEdges)throw new Error(`ranges-merge: [THROW_ID_04] resolvedOpts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "${typeof n.joinRangesThatTouchEdges}", equal to ${JSON.stringify(n.joinRangesThatTouchEdges,null,4)}`)}else n={...Yt};let a,o,i,s=e.filter(e=>Array.isArray(e)).map(e=>[...e]).filter(e=>void 0!==e[2]||e[0]!==e[1]);a=n.progressFn?zt(s,{progressFn:e=>{i=Math.floor(e/5),i!==o&&(o=i,null!=n.progressFn&&n.progressFn(i))}}):zt(s);let l=a.length-1;for(let e=l;e>0;e--)n.progressFn&&(i=Math.floor(78*(1-e/l))+21,i!==o&&i>o&&(o=i,n.progressFn(i))),(a[e][0]<=a[e-1][0]||!n.joinRangesThatTouchEdges&&a[e][0]<a[e-1][1]||n.joinRangesThatTouchEdges&&a[e][0]<=a[e-1][1])&&(a[e-1][0]=Math.min(a[e][0],a[e-1][0]),a[e-1][1]=Math.max(a[e][1],a[e-1][1]),void 0!==a[e][2]&&(a[e-1][0]>=a[e][0]||a[e-1][1]<=a[e][1])&&null!==a[e-1][2]&&(null===a[e][2]&&null!==a[e-1][2]?a[e-1][2]=null:null!=a[e-1][2]?2==+(n||{})?.mergeType&&a[e-1][0]===a[e][0]?a[e-1][2]=a[e][2]:a[e-1][2]+=a[e][2]:a[e-1][2]=a[e][2]),a.splice(e,1),e=a.length);return a.length?a:null}(this.ranges,{mergeType:this.opts.mergeType}),this.ranges&&this.opts.limitToBeAddedWhitespace?this.ranges.map(e=>ie(e[2])?[e[0],e[1],Zt(e[2],this.opts.limitLinebreaksCount)]:e):this.ranges):null}wipe(){this.ranges=[]}replace(e){if(Array.isArray(e)&&e.length){if(!Array.isArray(e[0])||!oe(e[0][0]))throw new Error(`ranges-push/Ranges/replace(): [THROW_ID_11] Single range was given but we expected array of arrays! The first element, ${JSON.stringify(e[0],null,4)} should be an array and its first element should be an integer, a string index.`);this.ranges=Array.from(e)}else this.ranges=[]}last(){return Array.isArray(this.ranges)&&this.ranges.length?this.ranges[this.ranges.length-1]:null}};
/**
 * @name string-left-right
 * @fileoverview Looks up the first non-whitespace character to the left/right of a given index
 * @version 6.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/string-left-right/}
 */re();function er(e,t=0){return function({str:e,idx:t=0,stopAtNewlines:r=!1,stopAtRawNbsp:n=!1}){if("string"!=typeof e||!e.length||((!t||"number"!=typeof t)&&(t=0),!e[t+1]))return null;if(e[t+1]&&(e[t+1].trim()||r&&"\n\r".includes(e[t+1])||n&&" "===e[t+1]))return t+1;if(e[t+2]&&(e[t+2].trim()||r&&"\n\r".includes(e[t+2])||n&&" "===e[t+2]))return t+2;for(let a=t+1,o=e.length;a<o;a++)if(e[a].trim()||r&&"\n\r".includes(e[a])||n&&" "===e[a])return a;return null}({str:e,idx:t,stopAtNewlines:!1,stopAtRawNbsp:!1})}
/**
 * @name string-strip-html
 * @fileoverview Strip HTML tags from strings. No parser, accepts mixed sources.
 * @version 13.5.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/string-strip-html/}
 */function tr(e){return/[-_A-Za-z0-9]/.test(e)}function rr(e,t){if(!e)return[];if(Array.isArray(e))return e.filter(e=>"string"==typeof e&&e.trim());if("string"==typeof e)return e.trim()?[e]:[];throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_05] ${t} must be array containing zero or more strings or something falsey. Currently it's equal to: ${e}, that a type of ${typeof e}.`)}function nr(e,t,r,n){for(let a=t,o=e.length;a<o;a++){if(e.startsWith(r,a))return!0;if(e.startsWith(n,a))return!1}return!1}function ar(e,t,r){return e?.quotes?.value&&nr(t,r+1,e.quotes.value,">"),nr(t,e?.quotes?.next-1,e?.quotes?.value,">"),!e?.quotes||!nr(t,r+1,e.quotes.value,">")&&-1!==e?.quotes?.next&&nr(t,e?.quotes?.next-1,e?.quotes?.value,">")}function or(e,t){return(t.match(new RegExp(e,"g"))||[]).length}var ir=new Set(["!doctype","abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","doctype","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","param","picture","pre","progress","rb","rp","rt","rtc","ruby","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr","xml"]),sr=new Set(["a","b","i","p","q","s","u"]),lr=new Set([".",",",";","!","?"]),cr=new Set([".",",","?",";",")","…",'"',"»"]),ur=new Set(["a","abbr","acronym","audio","b","bdi","bdo","big","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"]),pr={ignoreTags:[],ignoreTagsWithTheirContents:[],onlyStripTags:[],stripTogetherWithTheirContents:["script","style","xml"],skipHtmlDecoding:!1,trimOnlySpaces:!1,stripRecognisedHTMLOnly:!1,dumpLinkHrefsNearby:{enabled:!1,putOnNewLine:!1,wrapHeads:"",wrapTails:""},ignoreIndentations:!1,cb:null,reportProgressFunc:null,reportProgressFuncFrom:0,reportProgressFuncTo:100};function hr(e,t){let r=Date.now(),n=[],a=[],o=[],i=[],s={};s={attributes:[]};let l=null,c=null,u=null,p=!1,h={},d={tagName:"",hrefValue:"",openingTagEnds:void 0},g="",f=!1,m=null,y=!0;function b(t,r,a){if(Array.isArray(r.stripTogetherWithTheirContents)&&(r.stripTogetherWithTheirContents.includes(s.name)||r.stripTogetherWithTheirContents.includes("*")))if(s.slashPresent&&Array.isArray(n)&&n.some(e=>e.name===s.name)){for(let o=n.length;o--;)if(n[o].name===s.name){i=i.filter(([e,r])=>(e<n[o].lastOpeningBracketAt||e>=t+1)&&(r<=n[o].lastOpeningBracketAt||r>t+1));let l=t+1;s.lastClosingBracketAt&&(l=s.lastClosingBracketAt+1),i.push([n[o].lastOpeningBracketAt,l]),cr.has(e[t])&&r.cb?r.cb({tag:s,deleteFrom:n[o].lastOpeningBracketAt,deleteTo:t+1,insert:null,rangesArr:a,proposedReturn:[n[o].lastOpeningBracketAt,t,null]}):r.cb&&r.cb({tag:s,deleteFrom:n[o].lastOpeningBracketAt,deleteTo:t,insert:"",rangesArr:a,proposedReturn:[n[o].lastOpeningBracketAt,t,""]}),n.splice(o,1);break}}else s.slashPresent||n.push(s);else Array.isArray(r.ignoreTagsWithTheirContents)&&A(t,r,s)&&(y=!1)}function v(t,r,n,a,o,i){if(Array.isArray(x.current())&&"number"==typeof n&&0===x.current()[0][0]&&x.current()[0][1]>=n)return"";if(e.length===a&&i&&!O?.dumpLinkHrefsNearby?.enabled)return null;let l="";if(Number.isInteger(n)&&n<o&&(l+=t.slice(n,o)),Number.isInteger(a)&&a>i+1){let r=t.slice(i+1,a);a&&!er(e,a-1)&&(r=r.trimEnd()),r.includes("\n")&&k(a,t)?l+=" ":l+=r}let c=!cr.has(t[r]),u=">"!==t[a-1]||!t[n].trim(),p=!['"',"("].includes(t[o-1]),h=![";",".",":","!"].includes(t[r]);if((c||u&&p&&h)&&(u||p)&&"!"!==t[r]&&(!ur.has(s.name)||"number"==typeof n&&n<o||"number"==typeof a&&a>i+1)){let e=l.match(/\n/g);return Array.isArray(e)&&e.length?1===e.length?"\n":2===e.length?"\n\n":"\n\n\n":" "}return""}function w(t,r){if(t.dumpLinkHrefsNearby?.enabled&&d.tagName&&d.tagName===s.name&&s.lastOpeningBracketAt&&(d.openingTagEnds&&s.lastOpeningBracketAt>d.openingTagEnds||!d.openingTagEnds)&&(f=!0),f){let n=t.dumpLinkHrefsNearby?.putOnNewLine?"\n\n":"";g=`${n}${d.hrefValue}`,("number"!=typeof r||er(e,r-1))&&(g+=n)}}function k(t,r){return r?"<"===r[t]&&"%"!==r[t+1]:"<"===e[t]&&"%"!==e[t+1]}function T(t){return">"===e[t]&&"%"!==e[t-1]}function A(t,r,n){if(r.ignoreTagsWithTheirContents.includes("*"))return!0;let o=e.indexOf(`<${n.name}`,t),i=e.indexOf(`</${n.name}`,t);return!(!n.slashPresent&&-1===i||n.slashPresent&&!a.some(e=>e.name===n.name)||i>-1&&o>-1&&o<i)&&r.ignoreTagsWithTheirContents.includes(n.name)}if("string"!=typeof e)throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_01] Input must be string! Currently it's: ${(typeof e).toLowerCase()}, equal to:\n${JSON.stringify(e,null,4)}`);if(t){if(!ne(t))throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_02] Optional Options Object must be a plain object! Currently it's: ${(typeof t).toLowerCase()}, equal to:\n${JSON.stringify(t,null,4)}`);if(t.reportProgressFunc&&"function"!=typeof t.reportProgressFunc)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_03] The Optional Options Object's key reportProgressFunc, callback function, should be a function but it was given as type ${typeof t.reportProgressFunc}, equal to ${JSON.stringify(t.reportProgressFunc,null,4)}`);if("boolean"==typeof t.dumpLinkHrefsNearby&&null!=t.dumpLinkHrefsNearby)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_04] The Optional Options Object's key should be a plain object but it was given as type ${typeof t.dumpLinkHrefsNearby}, equal to ${JSON.stringify(t.dumpLinkHrefsNearby,null,4)}`)}function S(){f&&(d={tagName:"",hrefValue:"",openingTagEnds:void 0},f=!1)}let O={...pr,...t,dumpLinkHrefsNearby:Object.assign({},pr.dumpLinkHrefsNearby,t?.dumpLinkHrefsNearby)};if(se(O,"returnRangesOnly"))throw new TypeError("string-strip-html/stripHtml(): [THROW_ID_05] The Optional Options Object's key returnRangesOnly has been removed from the API since v.5 release.");if(O.reportProgressFunc){if("number"!=typeof O.reportProgressFuncFrom)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_06] The Optional Options Object's key reportProgressFuncFrom, callback function's "from" range, should be a number but it was given as type ${typeof O.reportProgressFuncFrom}, equal to ${JSON.stringify(O.reportProgressFuncFrom,null,4)}`);if("number"!=typeof O.reportProgressFuncTo)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_07] The Optional Options Object's key reportProgressFuncTo, callback function's "to" range, should be a number but it was given as type ${typeof O.reportProgressFuncTo}, equal to ${JSON.stringify(O.reportProgressFuncTo,null,4)}`)}O.ignoreTags=rr(O.ignoreTags,"resolvedOpts.ignoreTags"),O.onlyStripTags=rr(O.onlyStripTags,"resolvedOpts.onlyStripTags");let E=!!O.onlyStripTags.length;O.onlyStripTags.length&&O.ignoreTags.length&&(O.onlyStripTags=Dt(O.onlyStripTags,...O.ignoreTags)),O.stripTogetherWithTheirContents?"string"==typeof O.stripTogetherWithTheirContents&&O.stripTogetherWithTheirContents.length&&(O.stripTogetherWithTheirContents=[O.stripTogetherWithTheirContents]):O.stripTogetherWithTheirContents=[];let q={};if(O.stripTogetherWithTheirContents&&Array.isArray(O.stripTogetherWithTheirContents)&&O.stripTogetherWithTheirContents.length&&!O.stripTogetherWithTheirContents.every((e,t)=>"string"==typeof e||(q.el=e,q.i=t,!1)))throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_08] Optional Options Object's key stripTogetherWithTheirContents was set to contain not just string elements! For example, element at index ${q.i} has a value ${q.el} which is not string but ${(typeof q.el).toLowerCase()}.`);O.cb||(O.cb=({rangesArr:e,proposedReturn:t})=>{t&&e.push(...t)});let x=new Xt({limitToBeAddedWhitespace:!0,limitLinebreaksCount:2});if(!O.skipHtmlDecoding)for(;e!==Gt(e,{scope:"strict"});)e=Gt(e,{scope:"strict"});let D=!1,I=!1,R=0,$=0,C=e.length,B=Math.floor(C/2);for(let t=0;t<C;t++){if(O.reportProgressFunc&&(C>1e3&&C<2e3?t===B&&O.reportProgressFunc(Math.floor((O.reportProgressFuncTo-O.reportProgressFuncFrom)/2)):C>=2e3&&(R=O.reportProgressFuncFrom+Math.floor(t/C*(O.reportProgressFuncTo-O.reportProgressFuncFrom)),R!==$&&($=R,O.reportProgressFunc(R)))),Object.keys(s).length>1&&s.lastClosingBracketAt&&s.lastClosingBracketAt<t&&" "!==e[t]&&null===m&&(m=t),!D&&"%"===e[t]&&"{"===e[t-1]&&e.includes("%}",t+1)){u=null;let r=e.indexOf("%}",t)-1;if(r>t){t=r;continue}}if(!D&&T(t)&&(!s||Object.keys(s).length<2)&&t>1)for(let r=t;r--;)if(void 0===e[r-1]||T(r)){let n=void 0===e[r-1]?r:r+1,a=e.slice(n,t+1)||"";if((a.includes("/>")||a.includes("/ >")||a.includes('="')||a.includes("='"))&&e!==`<${xt(a.trim(),"/>")}>`&&[...ir].some(e=>xt(a.trim().split(/\s+/).filter(e=>e.trim()).filter((e,t)=>0===t),"/>").toLowerCase()===e)&&""===hr(`<${a.trim()}>`,O).result){(!o.length||o[o.length-1][0]!==s.lastOpeningBracketAt)&&o.push([n,t+1]),(!i.length||i[i.length-1][0]!==s.lastOpeningBracketAt)&&i.push([n,t+1]);let r=v(e,t,n,t+1,n,t+1),a=t+1;if(e[a]&&!e[a].trim())for(let t=a;t<C;t++)if(e[t].trim()){a=t;break}O.cb({tag:s,deleteFrom:n,deleteTo:a,insert:r,rangesArr:x,proposedReturn:[n,a,r]})}break}if(!I&&"/"===e[t]&&!s.quotes?.value&&Number.isInteger(s.lastOpeningBracketAt)&&!Number.isInteger(s.lastClosingBracketAt)&&(s.slashPresent=t),'"'===e[t]||"'"===e[t])if(!I&&s.nameStarts&&s?.quotes?.value===e[t])if(void 0===h.valueStarts)h={},delete s.quotes;else{let r;h.valueEnds=t,h.value=e.slice(h.valueStarts,t),s.attributes.push(h),h={},delete s.quotes,O.dumpLinkHrefsNearby?.enabled&&!n.length&&s.attributes.some(e=>{if("string"==typeof e.name&&"href"===e.name.toLowerCase())return r=`${O.dumpLinkHrefsNearby?.wrapHeads||""}${e.value}${O.dumpLinkHrefsNearby?.wrapTails||""}`,!0})&&(d={tagName:s.name,hrefValue:r,openingTagEnds:void 0})}else!I&&!s.quotes&&s.nameStarts&&(s.quotes={},s.quotes.value=e[t],s.quotes.start=t,s.quotes.next=e.indexOf(e[t],t+1),h.nameStarts&&h.nameEnds&&h.nameEnds<t&&h.nameStarts<t&&!h.valueStarts&&(h.name=e.slice(h.nameStarts,h.nameEnds)));if(!(void 0===s.nameStarts||void 0!==s.nameEnds||e[t].trim()&&tr(e[t]))){if(s.nameEnds=t,s.name=e.slice(s.nameStarts,s.nameEnds+(T(t)||"/"===e[t]||void 0!==e[t+1]?0:1)),"!"!==e[s.nameStarts-1]&&!s.name.replace(/-/g,"").length||/^\d+$/.test(s.name[0])){s={};continue}if("string"==typeof s.name&&"doctype"===s.name.toLowerCase()&&(I=!0),k(t)){w(O);let r=v(e,t,s.leftOuterWhitespace,t,s.lastOpeningBracketAt,t);(O.stripTogetherWithTheirContents.includes(s.name)||O.stripTogetherWithTheirContents.includes("*"))&&(i=i.filter(([e,r])=>!(e===s.leftOuterWhitespace&&r===t))),O.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:t,insert:`${r}${g}${r}`,rangesArr:x,proposedReturn:[s.leftOuterWhitespace,t,`${r}${g}${r}`]}),S(),b(t,O,x)}}if(s.quotes?.start&&s.quotes.start<t&&!s.quotes.end&&h.nameEnds&&h.equalsAt&&!h.valueStarts&&(h.valueStarts=t),!s.quotes&&h.nameEnds&&"="===e[t]&&!h.valueStarts&&!h.equalsAt&&(h.equalsAt=t),!s.quotes&&h.nameStarts&&h.nameEnds&&!h.valueStarts&&e[t].trim()&&"="!==e[t]&&(s.attributes.push(h),h={}),!s.quotes&&h.nameStarts&&!h.nameEnds&&(I&&"'\"".includes(e[h.nameStarts])?h.nameStarts<t&&e[t]===e[h.nameStarts]&&(h.nameEnds=t+1,h.name=e.slice(h.nameStarts,h.nameEnds)):e[t].trim()?"="===e[t]?h.equalsAt||(h.nameEnds=t,h.equalsAt=t,h.name=e.slice(h.nameStarts,h.nameEnds)):("/"===e[t]||T(t)||k(t))&&(h.nameEnds=t,h.name=e.slice(h.nameStarts,h.nameEnds),s.attributes.push(h),h={}):(h.nameEnds=t,h.name=e.slice(h.nameStarts,h.nameEnds))),!s.quotes&&s.nameEnds<t&&!e[t-1].trim()&&e[t].trim()&&!"<>/!".includes(e[t])&&!h.nameStarts&&!s.lastClosingBracketAt&&(h.nameStarts=t),null!==s.lastOpeningBracketAt&&s.lastOpeningBracketAt<t&&"/"===e[t]&&s.onlyPlausible&&(s.onlyPlausible=!1),null!==s.lastOpeningBracketAt&&s.lastOpeningBracketAt<t&&"/"!==e[t]&&(void 0===s.onlyPlausible&&(e[t].trim()&&!k(t)||s.slashPresent?s.onlyPlausible=!1:s.onlyPlausible=!0),e[t].trim()&&void 0===s.nameStarts&&!k(t)&&"/"!==e[t]&&!T(t)&&"!"!==e[t]&&(s.nameStarts=t,s.nameContainsLetters=!1)),s.nameStarts&&!s.quotes&&"string"==typeof e[t]&&e[t].toLowerCase()!==e[t].toUpperCase()&&(s.nameContainsLetters=!0),T(t)&&(ar(s,e,t)||s.quotes.value&&"number"==typeof s.lastOpeningBracketAt&&or(s.quotes.value,e.slice(s.lastOpeningBracketAt,t))%2==1&&!e.slice(s.lastOpeningBracketAt+1,t).includes("<")&&!e.slice(s.lastOpeningBracketAt+1,t).includes(">"))&&void 0!==s.lastOpeningBracketAt&&(s.lastClosingBracketAt=t,m=null,Object.keys(h).length&&(s.attributes.push(h),h={}),O.dumpLinkHrefsNearby?.enabled&&d.tagName&&!d.openingTagEnds&&(d.openingTagEnds=t)),(!I||">"===e[t])&&void 0!==s.lastOpeningBracketAt){if(void 0===s.lastClosingBracketAt){if(s.lastOpeningBracketAt<t&&!k(t)&&(void 0===e[t+1]||k(t+1)&&!s?.quotes?.value)&&s.nameContainsLetters&&"number"==typeof s.nameStarts){if(s.name=e.slice(s.nameStarts,s.nameEnds||t+1).toLowerCase(),(!o.length||o[o.length-1][0]!==s.lastOpeningBracketAt)&&o.push([s.lastOpeningBracketAt,t+1]),O.ignoreTags.includes(s.name)||A(t,O,s)||!ir.has(s.name)&&(s.onlyPlausible||O.stripRecognisedHTMLOnly)){s={},h={};continue}if((ir.has(s.name)||sr.has(s.name))&&(!1===s.onlyPlausible||!0===s.onlyPlausible&&s.attributes.length)||void 0===e[t+1]){w(O);let r,n=v(e,t,s.leftOuterWhitespace,t+1,s.lastOpeningBracketAt,s.lastClosingBracketAt);D&&"script"===s.name&&s.slashPresent&&(D=!1),r=null===n||null===g?null:`${n}${g}${n}`,O.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:t+1,insert:r,rangesArr:x,proposedReturn:[s.leftOuterWhitespace,t+1,r]}),S(),b(t,O,x)}if(!i.length||i[i.length-1][0]!==s.lastOpeningBracketAt&&i[i.length-1][1]!==t+1)if(O.stripTogetherWithTheirContents.includes(s.name)||O.stripTogetherWithTheirContents.includes("*")){let e;for(let t=n.length;t--;)n[t].name===s.name&&(e=n[t]);e?(i=i.filter(([t])=>t!==e.lastOpeningBracketAt),i.push([e.lastOpeningBracketAt,t+1])):i.push([s.lastOpeningBracketAt,t+1])}else i.push([s.lastOpeningBracketAt,t+1])}}else if(t>s.lastClosingBracketAt&&e[t].trim()||void 0===e[t+1]||O.ignoreIndentations&&"\r\n".includes(e[t])){let r=s.lastClosingBracketAt===t?t+1:t;O.trimOnlySpaces&&r===C-1&&null!==m&&m<t&&(r=m),(!o.length||o[o.length-1][0]!==s.lastOpeningBracketAt)&&o.push([s.lastOpeningBracketAt,s.lastClosingBracketAt+1]);let n=O.ignoreTags.includes(s.name),l=A(t,O,s);if(!y||O.stripRecognisedHTMLOnly&&"string"==typeof s.name&&!ir.has(s.name.toLowerCase())&&!sr.has(s.name.toLowerCase())||!E&&(n||l)||E&&!O.onlyStripTags.includes(s.name)||O.ignoreTagsWithTheirContents.includes(s.name)){if(l)if(s.slashPresent){for(let e=a.length;e--;)if(a[e].name===s.name){a.splice(e,1);break}a.length||(y=!0)}else y&&(y=!1),a.push(s);O.cb({tag:s,deleteFrom:null,deleteTo:null,insert:null,rangesArr:x,proposedReturn:null}),s={},h={}}else if(!s.onlyPlausible||0===s.attributes.length&&s.name&&(ir.has(s.name.toLowerCase())||sr.has(s.name.toLowerCase()))||s.attributes?.some(e=>e.equalsAt)){(!i.length||i[i.length-1][0]!==s.lastOpeningBracketAt)&&i.push([s.lastOpeningBracketAt,s.lastClosingBracketAt+1]);let n,a=v(e,t,s.leftOuterWhitespace,r,s.lastOpeningBracketAt,s.lastClosingBracketAt);g="",f=!1,w(O,r),"string"==typeof g&&g.length?(n=`${a}${g}${"\n\n"===a?"\n":a}`,r===s.lastClosingBracketAt+1&&(!e[r]||!lr.has(e[r]))&&(n+=" "),s.leftOuterWhitespace===s.lastOpeningBracketAt&&x.last()&&x.last()[1]<s.lastOpeningBracketAt&&(!O?.dumpLinkHrefsNearby?.putOnNewLine||!lr.has(e[r]))&&(n=" "+n)):n=a,null!==n&&(0===s.leftOuterWhitespace||!er(e,r-1))&&(!O.dumpLinkHrefsNearby?.enabled||"a"!==s.name)&&(n=void 0);let o=0;if(f&&lr.has(e[r])){O.dumpLinkHrefsNearby?.putOnNewLine&&(n=`${e[r]}${n||""}`);let a=er(e,r);a&&n?.endsWith("\n")?o+=a-t:(!a||a>t)&&o++}O.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:r+o,insert:n,rangesArr:x,proposedReturn:[s.leftOuterWhitespace,r+o,n]}),S(),b(t,O,x)}else s={};T(t)||(s={})}I&&(I=!1)}if((!D||"<"===e[t]&&er(e,er(e,t))&&"/"===e[er(e,t)]&&e.startsWith("script",er(e,er(e,t))))&&k(t)&&!k(t-1)&&!"'\"".includes(e[t+1])&&(!"'\"".includes(e[t+2])||/\w/.test(e[t+1]))&&("c"!==e[t+1]||":"!==e[t+2])&&("f"!==e[t+1]||"m"!==e[t+2]||"t"!==e[t+3]||":"!==e[t+4])&&("s"!==e[t+1]||"q"!==e[t+2]||"l"!==e[t+3]||":"!==e[t+4])&&("x"!==e[t+1]||":"!==e[t+2])&&("f"!==e[t+1]||"n"!==e[t+2]||":"!==e[t+3])&&ar(s,e,t)){if(T(er(e,t)))continue;if(s.nameEnds&&s.nameEnds<t&&!s.lastClosingBracketAt&&(!0===s.onlyPlausible&&s.attributes?.length||!1===s.onlyPlausible)){let r=v(e,t,s.leftOuterWhitespace,t,s.lastOpeningBracketAt,t);O.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:t,insert:r,rangesArr:x,proposedReturn:[s.leftOuterWhitespace,t,r]}),b(t,O,x),s={},h={}}if(void 0!==s.lastOpeningBracketAt&&s.onlyPlausible&&s.name&&!s.quotes&&(s.lastOpeningBracketAt=void 0,s.name=void 0,s.onlyPlausible=!1),!(void 0!==s.lastOpeningBracketAt&&s.onlyPlausible||s.quotes||(s.lastOpeningBracketAt=t,s.slashPresent=!1,s.attributes=[],null===l?s.leftOuterWhitespace=t:O.trimOnlySpaces&&0===l?s.leftOuterWhitespace=c||t:s.leftOuterWhitespace=l,"!--"!=`${e[t+1]}${e[t+2]}${e[t+3]}`&&"![CDATA["!=`${e[t+1]}${e[t+2]}${e[t+3]}${e[t+4]}${e[t+5]}${e[t+6]}${e[t+7]}${e[t+8]}`))){let r,n=!0;"-"===e[t+2]&&(n=!1);for(let a=t;a<C;a++)if((!r&&n&&"]]>"==`${e[a-2]}${e[a-1]}${e[a]}`||!n&&"--\x3e"==`${e[a-2]}${e[a-1]}${e[a]}`)&&(r=a),r&&(r<a&&e[a].trim()||void 0===e[a+1])){let n=a;(void 0===e[a+1]&&!e[a].trim()||">"===e[a])&&(n+=1),(!o.length||o[o.length-1][0]!==s.lastOpeningBracketAt)&&o.push([s.lastOpeningBracketAt,r+1]),(!i.length||i[i.length-1][0]!==s.lastOpeningBracketAt)&&i.push([s.lastOpeningBracketAt,r+1]);let l=v(e,a,s.leftOuterWhitespace,n,s.lastOpeningBracketAt,r);O.cb({tag:s,deleteFrom:s.leftOuterWhitespace,deleteTo:n,insert:l,rangesArr:x,proposedReturn:[s.leftOuterWhitespace,n,l]}),t=a-1,">"===e[a]&&(t=a),s={},h={};break}}}e[t].trim()&&847!==e[t].charCodeAt(0)?(null!==l&&(!s.quotes&&h.equalsAt>l-1&&h.nameEnds&&h.equalsAt>h.nameEnds&&'"'!==e[t]&&"'"!==e[t]&&(ne(h)&&s.attributes.push(h),h={},s.equalsSpottedAt=void 0),l=null),p||(p=!0,y&&!D&&"number"==typeof u&&t&&u<t-1&&(e.slice(u+1,t).trim()?u=null:O.ignoreIndentations||x.push([u+1,t])))):(null===l&&(l=t,void 0!==s.lastOpeningBracketAt&&s.lastOpeningBracketAt<t&&s.nameStarts&&s.nameStarts<s.lastOpeningBracketAt&&t===s.lastOpeningBracketAt+1&&!n.some(e=>e.name===s.name)&&(s.onlyPlausible=!0,s.name=void 0,s.nameStarts=void 0)),("\n"===e[t]||"\r"===e[t])&&(u=t,p&&(p=!1)))," "===e[t]?null===c&&(c=t):null!==c&&(c=null),"script"===s.name&&(D=!s.slashPresent)}if(e&&!O.ignoreIndentations&&(O.trimOnlySpaces&&" "===e[0]||!O.trimOnlySpaces&&!e[0].trim()))for(let t=0;t<C;t++){if(O.trimOnlySpaces&&" "!==e[t]||!O.trimOnlySpaces&&e[t].trim()){x.push([0,t]);break}e[t+1]||x.push([0,t+1])}if(e&&(O.trimOnlySpaces&&" "===e[~-e.length]||!O.trimOnlySpaces&&!e[~-e.length].trim()))for(let t=e.length;t--;)if(O.trimOnlySpaces&&" "!==e[t]||!O.trimOnlySpaces&&e[t].trim()){x.push([t+1,C]);break}let N=x.current();if(!t?.cb&&N&&(N[0]&&!N[0][0]&&(N[0][1],x.ranges[0]=[x.ranges[0][0],x.ranges[0][1]]),N[N.length-1]&&N[N.length-1][1]===e.length&&(N[N.length-1][0],x.ranges))){let t=x.ranges[x.ranges.length-1][0];e[t-1]&&(O.trimOnlySpaces&&" "===e[t-1]||!O.trimOnlySpaces&&!e[t-1].trim())&&(t-=1);let r=x.ranges[x.ranges.length-1][2];x.ranges[x.ranges.length-1]=[t,x.ranges[x.ranges.length-1][1]],r?.trim()&&x.ranges[x.ranges.length-1].push(r.trimEnd())}return{log:{timeTakenInMilliseconds:Date.now()-r},result:Kt(e,x.current()),ranges:x.current(),allTagLocations:o,filteredTagLocations:i}}var dr={},gr={},fr={},mr={},yr={},br={};const vr=("undefined"!=typeof globalThis?globalThis:global).performance;var wr,kr,Tr,Ar,Sr,Or,Er=te(Object.freeze({__proto__:null,performance:vr}));function qr(){if(wr)return br;wr=1,Object.defineProperty(br,"__esModule",{value:!0}),br.wait=br.getMilliseconds=void 0;const e=Er;return br.getMilliseconds=function(){const[t,r]=function(){const t=.001*e.performance.now();return[Math.floor(t),Math.floor(t%1*1e9)]}();return 1e3*t+Math.floor(r/1e6)},br.wait=function(e){return new Promise(t=>setTimeout(t,e))},br}function xr(){if(kr)return yr;kr=1,Object.defineProperty(yr,"__esModule",{value:!0}),yr.TokenBucket=void 0;const e=qr();return yr.TokenBucket=class{constructor({bucketSize:t,tokensPerInterval:r,interval:n,parentBucket:a}){if(this.bucketSize=t,this.tokensPerInterval=r,"string"==typeof n)switch(n){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invalid interval "+n)}else this.interval=n;this.parentBucket=a,this.content=0,this.lastDrip=e.getMilliseconds()}async removeTokens(t){if(0===this.bucketSize)return Number.POSITIVE_INFINITY;if(t>this.bucketSize)throw new Error(`Requested tokens ${t} exceeds bucket size ${this.bucketSize}`);this.drip();const r=async()=>{const r=Math.ceil((t-this.content)*(this.interval/this.tokensPerInterval));return await e.wait(r),this.removeTokens(t)};if(t>this.content)return r();if(null!=this.parentBucket){const e=await this.parentBucket.removeTokens(t);return t>this.content?r():(this.content-=t,Math.min(e,this.content))}return this.content-=t,this.content}tryRemoveTokens(e){return!this.bucketSize||!(e>this.bucketSize)&&(this.drip(),!(e>this.content)&&(!(this.parentBucket&&!this.parentBucket.tryRemoveTokens(e))&&(this.content-=e,!0)))}drip(){if(0===this.tokensPerInterval){const e=this.content;return this.content=this.bucketSize,this.content>e}const t=e.getMilliseconds(),r=Math.max(t-this.lastDrip,0);this.lastDrip=t;const n=r*(this.tokensPerInterval/this.interval),a=this.content;return this.content=Math.min(this.content+n,this.bucketSize),Math.floor(this.content)>Math.floor(a)}},yr}function Dr(){return Ar||(Ar=1,e=fr,t=fr&&fr.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),r=fr&&fr.__exportStar||function(e,r){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||t(r,e,n)},Object.defineProperty(e,"__esModule",{value:!0}),r(function(){if(Tr)return mr;Tr=1,Object.defineProperty(mr,"__esModule",{value:!0}),mr.RateLimiter=void 0;const e=xr(),t=qr();return mr.RateLimiter=class{constructor({tokensPerInterval:r,interval:n,fireImmediately:a}){this.tokenBucket=new e.TokenBucket({bucketSize:r,tokensPerInterval:r,interval:n}),this.tokenBucket.content=r,this.curIntervalStart=t.getMilliseconds(),this.tokensThisInterval=0,this.fireImmediately=null!=a&&a}async removeTokens(e){if(e>this.tokenBucket.bucketSize)throw new Error(`Requested tokens ${e} exceeds maximum tokens per interval ${this.tokenBucket.bucketSize}`);const r=t.getMilliseconds();if((r<this.curIntervalStart||r-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=r,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)return-1;{const n=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-r);await t.wait(n);const a=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,a}}const n=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,n}tryRemoveTokens(e){if(e>this.tokenBucket.bucketSize)return!1;const r=t.getMilliseconds();if((r<this.curIntervalStart||r-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=r,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;const n=this.tokenBucket.tryRemoveTokens(e);return n&&(this.tokensThisInterval+=e),n}getTokensRemaining(){return this.tokenBucket.drip(),this.tokenBucket.content}},mr}(),e),r(xr(),e)),fr;var e,t,r}var Ir=(Or||(Or=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RateLimiter=void 0;var t=function(){if(Sr)return gr;Sr=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.RateLimiter=void 0;var e=Dr(),t=function(){function t(e,t){this.amount=e,this.interval=t,this.limiters={}}return t.prototype.take=function(t){var r=this.limiters[t];return r||(r=new e.RateLimiter({tokensPerInterval:this.amount,interval:this.interval}),this.limiters[t]=r),r.getTokensRemaining()<1||(r.removeTokens(1),!1)},t}();return gr.RateLimiter=t,gr}();Object.defineProperty(e,"RateLimiter",{enumerable:!0,get:function(){return t.RateLimiter}})}(dr)),dr);function Rr(e){let t=e;const r=Math.floor(t/86400);t%=86400;const n=Math.floor(t/3600);t%=3600;const a=Math.floor(t/60),o=Math.floor(t%60);let i="";if(0===Math.floor(e))i="0s";else{const e=0===r,t=0===n,s=0===a,l=0===o;i+=e?"":`${r}d`,i+=e||t&&s&&l?"":", ",i+=t?"":`${n}h`,i+=t||s&&l?"":", ",i+=s?"":`${a}m`,i+=s||l?"":", ",i+=l?"":`${o}s`}return i}const $r=({ADMIN_ROLES:e,client:t,Discord:r,_:n})=>({users:{name:"users",description:"Displays a count of online users",re:/!users\b/iv,helpExtra:{name:"!users",value:"Displays a count of online users."},async slashCommand(e){e.inCachedGuild()&&await(this.action?.({author:e.user,guild:e.guild,channel:{send(t){e.reply(t)}}}))},async action(t){const{guild:r}=t,a=r?.members.cache.filter(e=>"offline"!==e.presence?.status).size,o=r?.members.cache.filter(t=>t.roles.cache.some(t=>e.includes(t.name)));let i=0;for(const e of o){const t=await r.members.fetch({user:e[1].user,withPresences:!0});t&&"presence"in t&&t.presence&&"object"==typeof t.presence&&"status"in t.presence&&"offline"!==t.presence.status&&i++}t.channel.send(`There ${1===a?"is":"are"} currently ${a} user${1===a?"":"s"} online, including ${i} admin/mod/helper(s).`),console.log(n("user_command_issued_by",{username:t.author.username}))}},seen:{name:"seen",description:"Displays the last time a user was seen online.",options:[{name:"user",description:"The user to check",type:r.ApplicationCommandOptionType.User,required:!0}],re:/!seen\b/iv,helpExtra:{name:"!seen",value:"Displays the last time a user was seen online."},async slashCommand(e){e.inCachedGuild()&&!e.isStringSelectMenu()&&await(this.action?.({author:e.user,content:String(e.options.get("user")?.value),guild:e.guild,channel:{send(t){e.reply(t)}}}))},async action(e){const a=e.content.split(" ").filter(e=>!(e.includes("391405681795923968")||e.includes("847456996738334730")||"!seen"===e)).join(" "),o=[],i=t.users.cache.find(e=>e.id===a),s=()=>{o.push(`I haven't seen ${a?r.userMention(a):""} lately.`)};if(i){const t=await e.guild.members.fetch({user:i,withPresences:!0}),{lastMessage:n,lastChannel:l}=await async function(e,t,r=100){let n=null,a=null;const o=e.channels.cache.filter(e=>e.isTextBased()),i=[...o.values()],s=await e.channels.fetchActiveThreads();return i.push(...s.threads.values()),await Promise.all(i.map(async e=>{let o;try{o=await e.messages.fetch({limit:r})}catch(e){return}const i=o.filter(e=>e.author.id===t.id).first();i&&(!n||i.createdTimestamp>n.createdTimestamp)&&(n=i,a=e)})),{lastMessage:n,lastChannel:a}}(e.guild,i);if(n){const e="dnd"===t.presence?.status?"busy":t.presence?.status??"offline",i=new Date(n.createdAt),s=new Date,c=s>i?Number(s)-Number(i):0;o.push(`${r.userMention(a)} is now ${e}, and was last seen in ${l} ${Rr(c/1e3)} ago.`)}else{const e="dnd"===t.presence?.status?"busy":t.presence?.status??"offline";"offline"===e?s():o.push(`${r.userMention(a)} is now ${e}; I haven't seen them lately.`)}}else s();e.channel.send(o.join("\n")),console.log(n("seen_command_issued_by",{username:e.author.username}))}}});async function Cr({fs:e,settings:t}){const r=JSON.parse(await e.readFile(new URL("../../library/library_listing.json",import.meta.url),"utf8")),n=t.embedColor,a=t.embedTextLimit??2e3,o=Object.keys(r.index),i=/\bread (?<refName>\S.+) (?<index>[\-.\d]+)\b/iv;function s(e,t){const r=e.chapters.length;return(t=Number.parseInt(String(t))-1)>-1&&t<r?e.chapters[t]:`I know which work you're talking about, but I can't find that section in it. Valid section numbers are from **1** to **${r}**.`}function l(e,t,o,i,s,l){let c="";c="hwa"===s.toLowerCase()||"hwp"===s.toLowerCase()?`**${i}. ${l.title}**\n`:`**Chapter ${i}, Para 1. ${l.title}**\n`;const u=function(e,t){const r=[];for(;e.length>t;){let n=e.slice(0,Math.max(0,t)).lastIndexOf(" ");n=n<=0?t:n,r.push(e.slice(0,Math.max(0,n)));let a=e.indexOf(" ",n)+1;(a<n||a>n+t)&&(a=n),e=e.slice(Math.max(0,a))}return r.push(e),r}(l.paras[0].text,a);u.forEach((a,i)=>{const p=new e.EmbedBuilder;if(p.setColor(n??null),p.setAuthor({name:`${r.list[r.index[s]].title} by ${r.list[r.index[s]].author}`,iconURL:t??void 0}),c+=a,p.setDescription(c),i===u.length-1&&void 0!==l.notes&&l.notes.length>0){let e="";for(const t of l.notes)e+=`${t.fn}. ${t.note}\n`;""!==e&&p.addFields({name:"Notes",value:e,inline:!1})}o.channel.send({embeds:[p]}),c=""})}async function c(t){return JSON.parse(await e.readFile(new URL(`../../library/${r.list[r.index[t]].filename}`,import.meta.url),"utf8"))}return{showList:function(e){const t=function(){let e="";for(const t of r.list)e+=`\n**${t.code.toUpperCase()}**: ${t.title} (${t.author})`;return e+="\n",e}();e.channel.send({content:`The following texts are available in my library, ${e.author.username}.`,embeds:[{color:8359053,description:"\nTo read from one of these texts, mention the book name and the section you're interested in. For example, to read the 12th Arabic Hidden Word, say: `!read HWA 12`.",fields:[{name:"Available Texts",value:t}]}]})},readBook:async function(e,t,n){const a=e.content,{groups:o}=a.match(i)??{};let{refName:u}=o;const{index:p}=o;if(!Object.hasOwn(r.index,u.toLowerCase()))return;u=u.toLowerCase();const h=s(await c(u),Number(p));"object"==typeof h?l(n,t,e,Number(p),u,h):e.channel.send(h)},readRandom:async function(e,t,r){const n=o[Math.floor(Math.random()*o.length)],a=await c(n),i=Math.floor(Math.random()*a.chapters.length);l(r,t,e,i,n,s(a,i))},reader:function(e){e.channel.send("I couldn't understand your request. Make sure you format your request like this: ``read <work> <section number>``. To see the list of works in my library, type ``read list``.")},getAvailableRandomOptions:()=>o}}const Br=async({fs:e,settings:t,client:r,Discord:n})=>{const a=await Cr({fs:e,settings:t});return{kitabIAqdas:{name:"kitabiaqdas",description:"The Kitáb-i-Aqdas (Most Holy Book) by paragraph number",options:[{name:"paragraph-number",description:"The paragraph number",type:n.ApplicationCommandOptionType.Integer}],async slashCommand(e){if(e.isStringSelectMenu())return;const t=e.options.get("paragraph-number")?.value;await e.reply(`[Kitáb-i-Aqdas${t?`, paragraph ${t}`:""}](https://bahai-library.com/writings/bahaullah/aqdas/kaall.html${t?`#par${t}`:""})`)}},kitabIAqdasPage:{name:"kitabiaqdas-page",description:"The Kitáb-i-Aqdas (Most Holy Book) by page number",options:[{name:"page-number",description:"The page number",type:n.ApplicationCommandOptionType.Integer}],async slashCommand(e){if(e.isStringSelectMenu())return;const t=e.options.get("page-number")?.value;await e.reply(`[Kitáb-i-Aqdas${t?`, page ${t}`:""}](https://bahai-library.com/writings/bahaullah/aqdas/kaall.html${t?`#${t}`:""})`)}},kitabIAqdasQAndA:{name:"kitabiaqdas-qna",description:"The Kitáb-i-Aqdas (Most Holy Book) by Questions & Answers number",options:[{name:"qna-number",description:"The Questions & Answers number",type:n.ApplicationCommandOptionType.Integer}],async slashCommand(e){if(e.isStringSelectMenu())return;const t=e.options.get("qna-number")?.value;await e.reply(`[Kitáb-i-Aqdas Questions & Answers${t?`, no. ${t}`:""}](https://bahai-library.com/writings/bahaullah/aqdas/kaall.html${t?`#q${t}`:"#105"})`)}},kitabIAqdasNote:{name:"kitabiaqdas-notes",description:"The Kitáb-i-Aqdas (Most Holy Book) by note number",options:[{name:"note-number",description:"The note number",type:n.ApplicationCommandOptionType.Integer}],async slashCommand(e){if(e.isStringSelectMenu())return;const t=e.options.get("note-number")?.value;await e.reply(`[Kitáb-i-Aqdas Notes${t?`, no. ${t}`:""}](https://bahai-library.com/writings/bahaullah/aqdas/kaall.html${t?`#note${t}`:"#165"})`)}},randomWritings:{name:"rand-writings",description:"A link to a random selection from the Bahá'í Writings",async slashCommand(e){await e.reply("<[Random Bahá'í Writings](https://bahai-library.com/random)>")}},readBook:{name:"read",description:"Provide a selection of the Bahá'í Writings by book and chapter",async autocomplete(e){const t=e.options.getFocused(),r=a.getAvailableRandomOptions().filter(e=>e.startsWith(t));await e.respond(r.map(e=>({name:e,value:e})))},options:[{name:"book",description:"The book to select",type:n.ApplicationCommandOptionType.String,autocomplete:!0,required:!0},{name:"chapter",description:"The chapter",type:n.ApplicationCommandOptionType.Integer,required:!0}],async slashCommand(e){if(!e.isChatInputCommand())return;const t=e.options.getString("book")??"",r=e.options.getInteger("chapter")??"";await(this.action?.({content:`!read ${t} ${r}`,channel:{send(t){e.reply(t)}}}))},re:/\bread (?<refName>\S.+) (?<index>[\-.\d]+)\b/iv,action:async e=>await a.readBook(e,r.user.avatarURL(),n)},showList:{re:/\bread list$/iv,action:async e=>await a.showList(e)},readRandom:{name:"read-random",description:"Provide a random selection of the Bahá'í Writings",re:/\bread random$/iv,async slashCommand(e){e.inCachedGuild()&&await(this.action?.({channel:{send(t){e.reply(t)}}}))},action:async e=>await a.readRandom(e,r.user.avatarURL(),n)},read:{re:/!read\b/iv,helpInfo:{name:"!read [list | random | *‹text›* *‹chapter›*]",value:"Reads from the Bahá'í Writings. Displays an excerpt from given *chapter* of *text*. Available texts are displayed using `!read list`; `!read random` displays a random passage from available texts."},action:e=>a.reader(e)}}},Nr=function({wikiTools:e,client:t,_:r,Discord:n}){async function a(n,{forceToday:a}={}){const i=/!(?:bp|pedia|b9|bahai9|bm|media|img|bw|bworks)/giv,s=n.content.split(" "),h=s.findIndex(e=>e.match(i));s.splice(0,h+1);const d=/-(?:r|rnd|rand)/giv,g=/-(?:t|tih|today)/giv,f=/-(?<nr>[1-5])/iv,m=s.join(" ");let y=!1,b=1,v=!1,w="",k="",T=!1;if(o.re.test(n.content))y=!0;else{u.re.test(n.content)?(w="bahaipedia.org",k="Bahaipedia"):l.re.test(n.content)?(w="bahai9.com",k="Bahai9",T=!0):c.re.test(n.content)?(w="bahai.media",k="Bahaimedia"):p.re.test(n.content)&&(w="bahai.works",k="Bahaiworks");const e=s.findIndex(e=>e.match(d));if(-1!==e)v=!0,s.splice(e,1);else{const e=s.findIndex(e=>e.match(g));-1!==e&&(y=!0,s.splice(e,1))}const t=s.findIndex(e=>e.match(f));-1!==t&&(b=Math.abs(Number(s[t])),s.splice(t,1))}const A=t.emojis.cache.find(e=>"bstar"===e.name),S=A?.toString()?`${A.toString()} `:"";if(A&&n.react(A),v)try{await async function(t,r,n,a,o,i){let s;try{s=await e.wikiGetRandom(r,n,i)}catch(e){return void console.error("Error getting wiki random",e)}const l=s&&s.title&&s;if(l)return console.log("Query completed."),void t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${a}${o} has returned the following random page, ${t.author.username}:\n\n **[${l.title}](${l.url})**`,image:{url:""!==l.img?l.img:""}}]});t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${a}${o} did not return any results for your query, ${t.author.username}. There may have been a network problem. If you think you're getting this message in error, you may want to try again later.`}]})}(n,b,w,S,k,T)}catch(e){return void console.error("Error with random wiki",e)}else if(y&&(a||"bahaipedia.org"===w))try{await async function(t,n){let a;try{a=await e.bpGetToday()}catch(e){return void console.error("Error getting Bahaipedia Today",e)}if(a){console.log("Query completed.");const e={month:"long",day:"numeric"},o=Date.now(),i=new Intl.DateTimeFormat(r.resolvedLocale,e).format(o);return void t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${n}Here's Bahaipedia's Today in History entry for ${i}, ${t.author.username}:\n\n${a}`}]})}t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${n}Bahaipedia did not return any results for your query, ${t.author.username}. There may have been a network problem. If you think you're getting this message in error, you may want to try again later.`}]})}(n,S)}catch(e){return void console.error("Error with today in history",e)}else if(/[\w\s'‘’\(\)\-,.]+/giv.test(m))try{await async function(t,r,n,a,o,i,s){let l;try{l=await e.wikiGetURL(r,n,a,s)}catch(e){console.error("Error getting",e)}console.log("Result:",l);const c="object"==typeof l&&l?.title&&l;if(c){console.log(`Search completed: ${r} => ${c.title}`);const e=/<span class="searchmatch">|<\/span>/giv,n=c.snippet?.replaceAll(e,"**");return void t.channel.send({content:"Here is the result of your search.",embeds:[{color:3447003,description:`${o}${i} has returned the following page as the top result for your search, ${t.author.username}:\n\n **[${c.title}](${c.url})**\n\n${n}`,image:{url:""!==c.img?c.img:""}}]})}t.channel.send({content:"Here is the result of your search.",embeds:[{color:3447003,description:`${o}${i} did not return any results for your search, ${t.author.username}. Did you spell your search terms correctly?\n\nThere may also have been a network problem. If you think you're getting this message in error, you may want to try again later.`}]})}(n,m,b,w,S,k,T)}catch(e){return void console.error("Error searching wiki",e)}console.log(`BP command issued by ${n.author.username}.`)}const o={re:/!today\b/iv,name:"today",description:"Displays a list of events from today's date in history, via Bahaipedia.",helpInfo:{name:"!today",value:"Displays a list of events from today's date in history, via Bahaipedia."},async slashCommand(e){e.inCachedGuild()&&await(this.action?.({author:e.user,content:"!today",react(){},channel:{send(t){e.reply(t)}}}))},action:async e=>await a(e,{forceToday:!0})},i=[{name:"keywords",description:"The search keywords",type:n.ApplicationCommandOptionType.String,required:!0}],s=e=>async function(t){t.inCachedGuild()&&!t.isStringSelectMenu()&&await(this.action?.({author:t.user,content:`${e} ${t.options.get("keywords")?.value}`,react(){},channel:{send(e){t.reply(e)}}}))},l={name:"b9",description:"bahai9.com search",options:i,slashCommand:s("!b9"),re:/!(?:b9|bahai9)\b/iv,action:async e=>await a(e)},c={name:"bm",description:"bahai.media search",options:i,slashCommand:s("!bm"),re:/!(?:bm|media|img)\b/iv,action:async e=>await a(e)},u={name:"bp",description:"bahaipedia.org search",options:i,slashCommand:s("!bp"),re:/!(?:bp|pedia)\b/iv,action:a,helpInfo:{name:"!bp | !b9 | !bm | !bw [-rand | *‹keyword›*]",value:"Return a link to the top result for *keyword* on Bahaipedia (`!bp`), Bahai9.com (`!b9`), Bahai.media (`!bm`), or Bahai.works; `-rand` displays a random article (or file)."}},p={name:"bw",description:"bahai.works search",options:i,slashCommand:s("!bw"),re:/!(?:bw|bworks)\b/iv,action:async e=>await a(e)},h={name:"rand-wiki",description:"A random wiki selection",action:async e=>await a(e),async slashCommand(e){if(e.isStringSelectMenu())await(this.action?.({author:e.user,content:`!${e.values[0]} -rand`,react(){},channel:{send(t){e.reply(t)}}}));else if(e.isChatInputCommand()){const t=(new n.StringSelectMenuBuilder).setCustomId("rand-wiki_site").setPlaceholder("Choose a site!").addOptions((new n.StringSelectMenuOptionBuilder).setLabel("bahaipedia.org").setValue("bp"),(new n.StringSelectMenuOptionBuilder).setLabel("bahai9.com").setValue("b9"),(new n.StringSelectMenuOptionBuilder).setLabel("bahai.media").setValue("bm"),(new n.StringSelectMenuOptionBuilder).setLabel("bahai.works").setValue("bw")),r=(new n.ActionRowBuilder).addComponents(t);await e.reply({content:"Random wiki:",components:[r],flags:n.MessageFlags.Ephemeral})}}},d={re:/\[\[(?<bpText>.*?)\]\]/v,notMentioned:{check:e=>d.re.test(e.content),async action(e){const t=/^(?<prefix>b9|bm|bw|bp):/v,{bpText:r=""}=e.content.match(d.re)?.groups??{},{prefix:n=""}=r.match(t)?.groups??{},a=r.replace(t,""),o=`[${a}](https://${"b9"===n?"bahai9.com/wiki/":"bm"===n?"bahai.media/Category:":"bw"===n?"bahai.works/":"bahaipedia.org/"}${encodeURIComponent(a)})`;await e.channel.send({content:o})}}};return{bp:u,today:o,b9:l,bm:c,bw:p,randomWiki:h,bpLink:d}};const jr=({ADMIN_IDS:e,ADMIN_PERMISSION:t,PUPPET_AUTHOR:r,Discord:n,DiscordVoice:a,discordTTS:o,guildCheckin:i,_:s})=>({speak:{name:"speak",description:"Reads some words as speech",options:[{name:"words",description:"The words",type:n.ApplicationCommandOptionType.String,required:!0}],re:/!speak/iv,helpAdmin:{name:"!speak some words",value:"Reads some words as speech"},async slashCommand(e){if(e.isStringSelectMenu()||!e.inCachedGuild())return;const t=e.options.getString("words"),r=await(this.action?.({member:{voice:{channel:e.member?.voice?.channel}},author:e.user,content:`placeholder1 placeholder2 ${t}`}));await e.reply(r?t??"":s("was_not_able_to_speak"))},async action(t){if(!e.includes(t.author.id))return!1;const r=t.content.split(" ").slice(2).join(" "),n=t.member?.voice.channel;if(!n)return console.log(s("not_in_a_voice_channel")),!1;const i=a.joinVoiceChannel({channelId:n.id,guildId:n.guild.id,adapterCreator:n.guild.voiceAdapterCreator}),l=a.createAudioPlayer();return console.log(s("speakingBegun")),new Promise(e=>{l.on("error",t=>{console.error(`Error: ${t.message} with resource ${t.resource?.metadata?.title}`),e(!1)}),l.on("idle",()=>{e(!0)});const t=o.getVoiceStream(r,{lang:s.resolvedLocale.replace(/-US?/v,"")});l.play(a.createAudioResource(t)),i.subscribe(l)})}},puppet:{name:"puppet",description:"Allows administrators to puppeteer a bot, channeling a message to another channel",re:/!puppet (?:\S.+) \| (?:\S.+)/iv,helpAdmin:{name:"!puppet userChannel | message",value:"Allows administrators to puppeteer a bot, channeling a message to another channel"},options:[{name:"channel",description:"The channel into which to send a message",type:n.ApplicationCommandOptionType.Channel,required:!0},{name:"message",description:"The message to send",type:n.ApplicationCommandOptionType.String,required:!0}],async slashCommand(e){e.inCachedGuild()&&!e.isStringSelectMenu()&&await(this.action?.({author:e.user,content:`!puppet ${e.options.get("channel")?.value} | ${e.options.get("message")?.value}`,guild:e.guild,channel:{send(t){e.reply(t)}}}))},action(t){e.includes(t.author.id)&&(!function({content:e,guild:t,channel:r}){const n=e.match(/!puppet (?<userChannel>\S.+) \| (?<msg>\S.+)/iv);if(n){const{userChannel:e,msg:a}=n.groups,o=t?.channels.cache.find(t=>t.name===e);o&&o.isTextBased()?o.send(a):r.send(`Channel ${e} does not exist or is not text-based!`)}}(t),console.log(`Puppet command issued by ${t.author.username}.`))}},echo:{name:"echo",description:"Just echoes back the words supplied.",options:[{name:"echo-text",description:"The text to echo back",type:n.ApplicationCommandOptionType.String,required:!0}],async slashCommand(e){e.isStringSelectMenu()||await(this.action?.({author:e.user,content:e.options.get("echo-text")?.value,channel:{send(t){e.reply(t)}}}))},re:/!echo\b/iv,helpAdmin:{name:"!echo words",value:"Just echoes back the words supplied."},action(t){e.includes(t.author.id)&&(t.channel.send(`Here's what you said, ${t.author.username}: \`\`${t.content}\`\``),console.log(`Echo command issued by ${t.author.username}.`))}},checkin:{name:"checkin",description:"Checks in to send a greeting to a bot-testing channel",re:/!checkin\b/iv,helpAdmin:{name:"!checkin",value:"Checks in to send a greeting to a bot-testing channel"},async slashCommand(e){await(this.action?.({author:e.user}))},async action(t){if(e.includes(t.author.id)){console.log(`Checkin command issued by ${t.author.username}.`);try{return await i()}catch(e){console.error("Error checking in",e)}}}}}),_r=({client:e,Discord:t})=>({info:{name:"info",description:"Provides a link to the support server",re:/!info/iv,helpExtra:{name:"!info",value:"Provides a link to the support server"},async slashCommand(e){await(this.action?.({channel:{send(t){e.reply(t)}}}))},action(r){const n=new t.EmbedBuilder;n.setAuthor({name:"BahaiBot",iconURL:e.user?.avatarURL()??void 0}),n.setDescription("Bahá'í Bot for Discord\n"),n.addFields([{name:"Support Server",value:"[Invite link](https://discord.gg/NE6dJaw)",inline:!1}]),r.channel.send({embeds:[n]})}},badi:{re:/\bbad[íi]\b/iv,helpExtra:{name:"badi",value:"Provides a link to the illustrious Bahá'í youth"},action(t){const r=e.emojis.cache.find(e=>"9star"===e.name);t.channel.send(`OK ${t.author.username}, here you go. https://bahaipedia.org/Badí‘${r?` ${r.toString()}`:""}`)}}}),Lr=({commands:e})=>{const t={name:"help",description:"List available help commands",re:/!help\b/iv,helpInfo:{name:"!help",value:"Displays help text. For more commands, use `!helpextras` and `!helpadmin`"},async slashCommand(e){e.inCachedGuild()&&await(this.action?.({author:e.user,channel:{send(t){e.reply(t)}}}))},action(e){e.channel.send({content:`Here are the instructions you need, ${e.author.username}.`,embeds:[{color:8359053,description:"I can respond to well-formed questions about basic Bahá'í topics. As well, the following commands can help me process your requests. Make sure to mention me when trying to use them, like this: `@BahaiBot !help`",fields:a}]})}},r={name:"helpextras",description:"Displays help text for rarer commands.",re:/!helpextras\b/iv,helpInfo:{name:"!helpextras",value:"Displays help text for rarer commands."},async slashCommand(e){e.inCachedGuild()&&await(this.action?.({author:e.user,channel:{send(t){e.reply(t)}}}))},action(e){e.channel.send({content:`Here are the instructions you need, ${e.author.username}.`,embeds:[{color:8359053,description:"The following commands can help me process your requests. Make sure to mention me when trying to use them, like this: `@BahaiBot !helpextras`",fields:o}]})}},n={name:"helpadmin",description:"List available help commands available only to admins.",re:/!helpadmin\b/iv,helpInfo:{name:"!helpadmin",value:"Displays help text for commands available only to admins."},async slashCommand(e){e.inCachedGuild()&&await(this.action?.({author:e.user,channel:{send(t){e.reply(t)}}}))},action(e){e.channel.send({content:`Here are the instructions you need, ${e.author.username}.`,embeds:[{color:8359053,description:"The following administrator commands can help me process your requests. Make sure to mention me when trying to use them, like this: `@BahaiBot !helpextras`",fields:i}]})}};e.help=t,e.helpextras=r,e.helpadmin=n;const a=Object.values(e).map(({helpInfo:e})=>e).filter(Boolean),o=Object.values(e).map(({helpExtra:e})=>e).filter(Boolean),i=Object.values(e).map(({helpAdmin:e})=>e).filter(Boolean);return e},Fr="346962599771897859",Mr="351854934368583681",Pr="346962600212561920",Hr="671628531717111808",Wr="346963530836344832",Ur="644722296929648641",Gr="325981722082672661",Vr="391408369891672064",zr="309427494778306560",Jr=[zr,"324993843005227008","410259427770499072"],Kr=["Admins","Trusted Servant","Mods","Help"],Zr="ADMINISTRATOR",Yr=async function({app:e,router:t,Discord:r,wikiTools:n,client:a,guildCheckin:o,_:i,getLocalizedSetting:s,fs:l,settings:c,discordTTS:u,DiscordVoice:p}){const{PUPPET_AUTHOR:h=zr,ADMIN_PERMISSION:d=Zr,ADMIN_IDS:g=Jr,ADMIN_ROLES:f=Kr,enabledCommandGroups:m=["*"],disabledCommandGroups:y=[]}=c,b=m.includes("*"),v=await Promise.all([["socialInfo",()=>$r({ADMIN_ROLES:f,client:a,_:i,Discord:r})],["bahaiWritings",()=>Br({fs:l,settings:c,client:a,Discord:r})],["bahaiWikis",()=>Nr({wikiTools:n,client:a,_:i,Discord:r})],["admin",()=>jr({ADMIN_IDS:g,ADMIN_PERMISSION:d,PUPPET_AUTHOR:h,guildCheckin:o,_:i,discordTTS:u,DiscordVoice:p,Discord:r})],["bahaiInfo",()=>_r({client:a,Discord:r})],["bahaiSalutations",()=>(({client:e,BSTAR_EMOJI_ID_LAB:t})=>{const r=t=>{const r=e.emojis.cache.find(e=>"9star"===e.name);return r&&t.react(r),r};return{abha:{re:/\b(?:all[aá]h['’´\-]?[uo]?['’´\-]?abh[aá]|abh[aá])/iv,helpExtra:{name:"allahuabha",value:"Sends the Bahá'í greeting, Alláh'u'Abhá"},action(e){const t=r(e);e.channel.send(`Alláh-u-Abhá, ${e.author.username}! ${t?t.toString():""}`)},notMentioned:{check:e=>Boolean(e.mentions.users?.first()),action(e){r(e)}}},nawruz:{re:/\b(?:(?:happy|joyous)\s?n[ao]w[\- ]?ro?[uú]z|n[ao]w[\- ]?ro?[uú]z\s?(?:m[uo]b[aá]r[aá]k))\b/iv,helpExtra:{name:"nawruz",value:"Sends a greeting for the Bahá'í Holy Day Naw-Rúz"},action(t){const n=r(t),a=e.emojis.cache.find(e=>"sabzi"===e.name);t.channel.send(`Happy Naw-Rúz! ${n?n.toString():""}${a?a.toString():""}`)}},ridvan:{re:/\b(?:(?:happy|joyous)\s?r[ie][ḍdz][vw][aá]n|r[ie][ḍdz][vw][aá]n\s?(?:m[uo]b[aá]r[aá]k))\b/iv,helpExtra:{name:"ridvan",value:"Sends a greeting for the Bahá'í Holy Day Ridván"},action(e){const t=r(e);e.channel.send(`Happy Ridván! ${t?t.toString():""}`)}},ninePointedStar:{re:/\u{1F7D9}/u,helpExtra:{name:"🟙",value:"Sends a greeting via a Bahá'í symbol, the nine-pointed star"},action(e){e.channel.send(`<:bstar:${t}>`)},notMentioned:{action(e){e.react(`<:bstar:${t}>`)}}}}})({client:a,BSTAR_EMOJI_ID_LAB:"327468698032013312"})],["salutations",()=>({sup:{re:/\b(?:su+p|wh[au]+[sz]+[au]+p|(?:(?:what|wut)['’´]?s (?:up|new|good|gud|cookin[g'’´])))\b/iv,helpExtra:{name:"sup",value:"Sends the greeting 'What's up'"},action(e){const t=["Not much","Not too much","Not a lot","Not very much"],r=t[Math.floor(Math.random()*t.length)],n=["Just glad to be here.","Just happy to be here.","Same as usual.","Same old, same old.","Just like usual.","Just waiting to be of service.","Just waiting to be of service to somebody.","Just waiting to be of service to someone.","Just waiting for questions to answer.","Just waiting for questions I can help answer."],a=n[Math.floor(Math.random()*n.length)];e.channel.send(`${r}, ${e.author.username}. ${a}`)}},morning:{re:/\bgood morning\b/iv,helpExtra:{name:"good morning",value:"Sends the greeting 'Good morning'"},action(e){e.channel.send(`Good morning ${e.author.username}! :coffee:`)}},afternoon:{re:/\bgood afternoon\b/iv,helpExtra:{name:"good afternoon",value:"Sends the greeting 'Good afternoon'"},action(e){e.channel.send(`Good afternoon ${e.author.username}!`)}},evening:{re:/\bgood evening\b/iv,helpExtra:{name:"good evening",value:"Sends the greeting 'Good evening'"},action(e){e.channel.send(`Good evening ${e.author.username}!`)}},hello:{re:/\b(?:h[uea]llo|hi|hi there|howdy|yo|heya|sal[aá]{1,2}m)\b/iv,helpExtra:{name:"hello",value:"Sends the greeting 'Hello'"},action(e){e.channel.send(`Hello ${e.author.username}!`)}},welcome:{re:/^(?:everyone|everybody)?\W*(?:please|pleez|pls|plz)?\W*(?:\W*welcome|.*>+\W*welcome\b|.*\bwb\b)/iv,helpExtra:{name:"welcome",value:"Sends the greeting 'Welcome'"},action(e){e.channel.send(`Thanks, ${e.author.username}! :wave:`)},notMentioned:{check:e=>Boolean(e.mentions.users.first()),action(e){e.react("👋")}}}})],["lightHearted",()=>({coffee:{re:/\u{2615}/u,helpExtra:{name:"☕",value:"Sends a coffee cup emoji"},action(e){e.channel.send(":coffee:")},notMentioned:{action(e){e.react("☕")}}},tea:{re:/\u{1F375}/u,helpExtra:{name:"🍵",value:"Sends a tea emoji"},action(e){e.channel.send(":tea:")},notMentioned:{action(e){e.react("🍵")}}},popcorn:{re:/\u{1F37F}/u,helpExtra:{name:"🍿",value:"Sends a popcorn emoji"},action(e){e.channel.send(":popcorn:")},notMentioned:{action(e){e.react("🍿")}}},unladen:{re:/\bunladen\sswallow\b/iv,helpExtra:{name:"unladen swallow",value:"Prompt for a Monty Python response"},action(e){e.channel.send("What do you mean, an African, or European swallow?")}},bruh:{re:/\bbruh\b/iv,helpExtra:{name:"bruh",value:"Sends a Bruh"},action(e){e.channel.send("Bruh.")}},goodbot:{re:/\bgood\s?bot\b/iv,helpExtra:{name:"good bot",value:"Praises the bot"},action(e){e.react("😊"),e.channel.send("Thanks!")}},badbot:{re:/\bbad\s?bot\b/iv,helpExtra:{name:"bad bot",value:"Criticizes the bot"},action(e){e.react("☹️"),e.channel.send("Sorry.")}},repeating:{re:/\brepeating yourself\b/iv,helpExtra:{name:"repeating yourself",value:"Indicate the bot is repeating itself"},action(e){const t=["Oops, sorry...","Oops, sorry!","Sorry!","Oops!","Sorry...","Sorry... :sweat_smile:","Oops, sorry... :sweat_smile:"],r=t[Math.floor(Math.random()*t.length)],n=["I tend to do that, don't I?","I guess I tend to do that, don't I?","I suppose I tend to do that, don't I?","I'm just a chatbot, after all.","I am a chatbot, after all.","I *am* a chatbot, after all.","That does happen a lot, doesn't it."],a=n[Math.floor(Math.random()*n.length)];e.channel.send(`${r} ${a}`)}},santacat:{re:/\b(?:my|santa['’´]?s)\scat\b/iv,helpExtra:{name:"santa cat",value:"Makes reference to a Santa cat"},action(e){const t=["Not telling.","That's a secret to everybody.","Didn't somebody make a meme out of it?","Which one? This one? :cat2:","Wouldn't you like to know.","Who do you think I am? Schrödinger?"],r=t[Math.floor(Math.random()*t.length)];e.channel.send(r)}},ping:{re:/\bping\b/iv,helpExtra:{name:"ping",value:"Pings the bot"},action(e){e.channel.send("Pong :ping_pong:")}}})]].map(async([e,t])=>!b&&!m.includes(e)||y.includes(e)?null:await t())),w=v.reduce((e,t)=>e={...e,...t},{});return Lr({commands:w}),w.default=(({app:e,router:t,client:r,Discord:n,_:a,settings:o})=>({re:/[\s\S]*/u,async action(i){const s=i.content.trimStart().replaceAll(/<@!?(?<snowflake>\d+)>/gv,(e,t,n,a,{snowflake:o})=>{if(o===r.user?.id)return"";const{username:i}=r.users.resolve(o);return i}),l=i.author.id,c={session:e.projectAgentSessionPath(o.PROJECT_ID,l),queryInput:{text:{text:s,languageCode:a.resolvedLocale}}};await async function(){try{const[o]=await e.detectIntent(c);return await t(o,i,r,n,a),o}catch(e){throw i.channel.send(`<@${i.author.id}>, I couldn't process your question at the moment.`),e}}()}}))({app:e,router:t,client:a,Discord:r,_:i,settings:c}),w},Qr=(e,t,r,n,a)=>{console.log(a("routerResponse"),e);const o=e.queryResult?.fulfillmentMessages?.[0]?.text?.text?.[0];t.channel.send(o)},Xr={debugCheckin:["Hi","Hi","Hi there","Hello","Hello","Hello there","Hey","What's up","What's new"],fyiCheckin:{general:["Hi, everyone.","Hi, everybody.","Hi, everyone.","Hi there, everyone!","Hello, everyone.","Hello there, everyone.","Alláh-u-Abhá!","Alláh’u’abhá, everyone.","Alláh-u-Abhá, everyone.","What's cooking, everybody?","Hey all, what's cooking?","What's up, everyone?","What's good, everyone?","Hey everyone, what's new?","Hey everybody, what's up?","Hey, what's up everyone?","Hi everybody, what's up?"],ircBridge:["Hello IRC.","Hi, everybody.","Hi, everyone.","Hi there, everyone!","Hello, everyone.","Hello there, everyone.","Alláh-u-Abhá!","Alláh-u-Abhá, IRC.","Alláh-u-Abhá, everyone.","What's cooking, everybody?","Hey all, what's cooking?","What's up, everyone?","What's good, everyone?","Hey everyone, what's new?","Hey everybody, what's up?","Hey, what's up everyone?","Hi everybody, what's up?"]},guildMemberAdd:["Hi","Hi","Hi there","Hello","Hello","Hello there","Hey","What's up","What's new"]},en={guildMemberAdd:e=>["Happy to have you with us!","Pleased to have you with us!","Great to have you with us!","It's great to have you with us!","It's a pleasure to have you with us!","Pleased to have you with us! :smile:","It's a pleasure to have you with us! :smile:","Happy to have you with us! :smile:","Great to have you with us! :smile:",`Happy to have you with us! ${e}`,"Glad you could join us! :smile:",`Glad you could join us! ${e}`,"Happy to have you with us today!","Pleased to have you with us today!","Great to have you with us today!","It's great to have you with us today!","It's a pleasure to have you with us today!","Pleased to have you with us today! :smile:","It's a pleasure to have you with us today! :smile:","Happy to have you with us today! :smile:","Great to have you with us today! :smile:",`Happy to have you with us today! ${e}`,"Glad you could join us today! :smile:",`Glad you could join us today! ${e}`]},tn=Date.now();
/**
 * @license MIT
 * @see Adapted from {@link https://github.com/notunderctrl/discordjs-v14-series/tree/master/07%20-%20Command%20Handler}
 * @param {import('discord.js').ApplicationCommand<
 *   {guild: import('discord.js').GuildResolvable
 * }>} existingCommand
 * @param {Partial<Pick<import('discord.js').ApplicationCommand<
 *   {guild: import('discord.js').GuildResolvable
 * }>, "description"|"options">>} localCommand
 * @returns {boolean}
 */
const rn="en-US",nn=[rn],an=async(e,t,r)=>{const n=await(e.application?.commands);n?(await n.fetch(),await Promise.all(Object.values(t).map(async e=>{const{name:t,description:a,options:o}=e;if(!t||!a)return;const i=await n.cache.find(e=>e.name===t);if(i){if(e.deleted)return await n.delete(i.id),void console.log(r("deleted_command",{name:t}));((e,t)=>{const r=(e,t)=>{for(const r of t){const t=e?.find(e=>e.name===r.name);if(!t)return!0;if(r.value!==t.value)return!0}return!1},n=(e,t)=>{for(const a of t){const t=e?.find(e=>e.name===a.name);if(!t)return!0;if(a.description!==t.description||a.type!==t.type||("required"in a&&a.required||!1)!==("required"in t&&t.required)||("choices"in a&&a.choices?.length||0)!==("choices"in t&&t.choices?.length||0)||r("choices"in t&&t.choices||[],"choices"in a&&a.choices||[]))return!0;if("options"in a||"options"in t){let e=[];"options"in a&&Array.isArray(a.options)&&(e=a.options);let r=[];if("options"in t&&Array.isArray(t.options)&&(r=t.options),e.length!==r.length)return!0;if(n(r,e))return!0}}return!1};return e.description!==t.description||e.options?.length!==(t.options?.length||0)||n(e.options,t.options||[])})(i,e)&&(await n.edit(i.id,{description:a,options:o}),console.log(r("edited_command",{name:t})))}else{if(e.deleted)return void console.log(`⏩ Skipping registering command "${t}" as it's set to delete.`);await n.create({name:t,description:a,options:o}),console.log(r("registered_command",{name:t}))}}))):console.log(r("no_application_commands_found"))},on=async({checkins:e=!1,locales:t=("undefined"==typeof navigator?[rn]:[...navigator.languages.filter(e=>nn.includes(e)),rn]),fetch:r=globalThis.fetch,i18n:n=globalThis.intlDom?.i18n,striptags:a=globalThis.striptags,client:o,Discord:i,discordTTS:s,DiscordVoice:l,dialogflow:c,fs:u,getSettings:p,getPath:h=e=>e,commandInterval:d=2e3,rateLimiter:g=new Ir.RateLimiter(1,d),exitNoThrow:f=!1})=>{const m=o||new i.Client({intents:[i.GatewayIntentBits.Guilds,i.GatewayIntentBits.GuildMessages,i.GatewayIntentBits.MessageContent,i.GatewayIntentBits.GuildMembers,i.GatewayIntentBits.GuildVoiceStates,i.GatewayIntentBits.GuildPresences],partials:[i.Partials.GuildMember]}),y=JSON.parse(await u.readFile(h("settings.json"),"utf8")),b="function"==typeof p?p:e=>e.development,v=b(y),w=new c.SessionsClient({keyFilename:h(v.PROJECT_JSON)}),{token:k,disableNotMentioned:T=!1,welcomeChannel:A="welcome",awesomeEmoji:S="awesome",helpTeam:O=Ur,rulesChannel:E=Mr}=v,q=await n({localesBasePath:"src",locales:t}),x=(e,{defaultValue:t}={})=>v?.locales?.[q.resolvedLocale][e]||t||q(e),D=function({fetch:e,striptags:t,_:r}){return{async bpGetToday(){const n=Date.now(),a={action:"parse",page:`Bahaipedia:Today_in_History/${new Intl.DateTimeFormat(r.resolvedLocale,{month:"long",day:"numeric"}).format(n).toString()}`,prop:"text",format:"json"},o=`https://bahaipedia.org/api.php?${new URLSearchParams({...a,origin:"*"})}`;try{const r=(await(await e(o)).json()).parse.text["*"].split("</center>\n");return t(r.length>1?r[1]:r[0])}catch(e){return console.error("Error retrieving JSON for today URL",o,e),""}},async wikiGetRandom(t,r,n){const a=`https://${r}/api.php`,o={action:"query",indexpageids:"1",prop:"bahai.media"===r?"imageinfo":"",iiprop:"bahai.media"===r?"url":"",generator:"random",grnnamespace:"bahai.media"===r?"6":"0",grnlimit:String(t),format:"json"},i=`${a}?${new URLSearchParams({...o,origin:"*"})}`;try{const t=await(await e(i)).json(),a=t.query.pages[t.query.pageids[0]].title;return{title:a,url:`https://${r}/${n?"wiki/":""}${encodeURIComponent(a)}`,img:"bahai.media"===r?t.query.pages[t.query.pageids[0]].imageinfo[0].url:""}}catch(e){return console.error("Error retrieving random wiki URL",i,e),""}},async wikiGetURL(t,r,n,a=!1){const o=`https://${n}/api.php`,i={action:"query",list:"search",generator:"search",prop:"bahai.media"===n?"imageinfo":"",iiprop:"bahai.media"===n?"url":"",srsearch:t,srnamespace:"bahai.media"===n?"6":"0",srlimit:String(r),srprop:"snippet",gsrsearch:t,gsrnamespace:"bahai.media"===n?"6":"0",gsrlimit:String(r),format:"json"},s=`${o}?${new URLSearchParams({...i,origin:"*"})}`;try{const t=await(await e(s)).json();if(0!==t.query.searchinfo.totalhits){const e=t.query.search[0].title;return{title:e,url:`https://${n}/${a?"wiki/":""}${encodeURIComponent(e)}`,snippet:t.query.search[0].snippet,img:"bahai.media"===n?t.query.pages[t.query.search[0].pageid].imageinfo[0].url:""}}return!1}catch(e){return void console.error("Error retrieving wiki search URL",s,e)}}}}({fetch:r,striptags:a,_:q}),I=function({client:e,fs:t,wikiTools:r,settings:n,getLocalizedSetting:a,_:o}){const{bstarEmoji:i="bstar",checkinGuilds:s=[{guildID:Gr,guildName:a("labServerName"),guildChannels:[{id:Vr,greetings:a("debugCheckin",{defaultValue:Xr.debugCheckin}),reportUptime:!0}]},{guildID:Fr,guildName:a("serverName"),guildChannels:[{id:Pr,greetings:a("fyiCheckin-general",{defaultValue:Xr.fyiCheckin.general})},{id:Hr,greetings:a("fyiCheckin-ircBridge",{defaultValue:Xr.fyiCheckin.ircBridge})},{id:Wr,bpToday:!0}]}]}=n;return async function(n=Date.now()){let a;for(const{guildID:t,guildName:r,guildChannels:n}of s){const i=e.guilds.cache.get(t);if(i&&(console.log(o("checkingIn",{guildName:r})),a=n.map(e=>{const{id:t,greetings:n}=e,a="bpToday"in e&&e.bpToday,o="reportUptime"in e&&e.reportUptime;return{guildName:r,bpToday:a,greetings:n,reportUptime:o,channel:i.channels.cache.get(t)}}).filter(({channel:e})=>e),!a.length))return}if(!a)return;const l={list:[a.map(({channel:e})=>{const t=e?.name;return`#${t}`})]},c="greet.guild.txt";try{const e=await t.stat(c),r=(n-new Date(e.mtime).getTime())/1e3;console.log(o("lastGreeting",{relativeTime:Rr(Math.floor(r)),channels:l}))}catch(e){console.log(o("firstGreet",{channels:l}))}let u;a.some(({bpToday:e})=>e)&&(u=await r.bpGetToday());for(const{channel:t,bpToday:r,greetings:s,guildName:l,reportUptime:c}of a){if(console.log(o("channelFound",{guildName:l,channelName:t?.name})),s){const e=s[Math.floor(Math.random()*s.length)];if(c){const r=new Date,a=n-tn;t?.send(o("uptimeGreet",{greet:e,now:r.toString(),uptime:Rr(Math.floor(a/1e3))}))}else t?.send(e)}if(!r||!u)continue;const a=e.emojis.cache.find(e=>e.name===i);console.log(o("postingTodayInHistory")),t?.send({content:o("hereIsQueryResult"),embeds:[{color:3447003,description:o("todayInHistoryResult",{today:{date:[Date.now(),{month:"long",day:"numeric"}]},bstar:a?.toString()??"",todayInHistoryResult:u})}]})}try{await t.writeFile(c,n.toString()),console.log(o("greetingSent",{channels:l}))}catch(e){console.error(o("errorWritingGuild",{guildFileName:c}),e)}}}({client:m,fs:u,wikiTools:D,settings:v,getLocalizedSetting:x,_:q}),R=await Yr({app:w,router:Qr,Discord:i,wikiTools:D,client:m,guildCheckin:I,_:q,getLocalizedSetting:x,fs:u,settings:v,discordTTS:s,DiscordVoice:l});return m.on("interactionCreate",async e=>{if(!e.isChatInputCommand()&&!e.isStringSelectMenu()&&!e.isAutocomplete())return;const t=e.isAutocomplete()?Object.values(R).find(t=>t.name===e.commandName):e.isStringSelectMenu()?Object.values(R).find(t=>t.name===e.customId.split("_")[0]):Object.values(R).find(t=>t.name===e.commandName);t&&(e.isAutocomplete()?await(t?.autocomplete?.(e)):(await(t?.slashCommand?.(e)),m.emit("bahaibot:command-finished")))}),m.on("clientReady",async()=>{console.log(q("BahaiBotOnline")),await an(m,R,q),e&&(m.user?.setPresence({activities:[{name:"@BahaiBot !help",type:0}]}),function(e,t=1e3,{exitNoThrow:r=!1}={}){let n,a=Date.now()+t;n=setTimeout(function o(){const i=Date.now()-a;if(i>t){if(r)return;throw new Error(`Unexpected condition: ${i} time drift exceeding interval ${t}`)}const s=e(t)||0;a+=t+s,n=setTimeout(o,Math.max(0,t-i)+s)},t)}(e=>{const t=new Date;if(12===t.getUTCHours()){if(t.getUTCMinutes()<15)return 24e5-e;I()}return 0},3e6,{exitNoThrow:f}))}),m.on("messageCreate",async e=>{const t=e;if(m.user&&t.mentions.has(m.user)){if((e=>g.take(e.author.id))(t))return;for(const e of Object.values(R))if(e.re?.test(t.content)){try{await(e.action?.(t))}catch(e){console.error(q("errorExecuting")),console.error(t.content,e)}m.emit("bahaibot:command-finished");break}m.emit("bahaibot:command-finished")}else if(!T){const e=Object.values(R).filter(e=>e.notMentioned);for(const{re:r,notMentioned:n}of e)if(r?.test(t.content)&&(!n?.check||n.check(t))){await(n?.action(t)),m.emit("bahaibot:command-finished");break}m.emit("bahaibot:command-finished")}}),m.on("guildMemberAdd",e=>{const t=e.guild.channels.cache.find(e=>e.name===A);if(!t||!t.isTextBased())return;const r=m.emojis.cache.find(e=>e.name===S),n=x("greet-guildMemberAdd",{defaultValue:Xr.guildMemberAdd}),a=n[Math.floor(Math.random()*n.length)],o=x("happies",{defaultValue:en}),i=r?o.guildMemberAdd(r.toString()):o.guildMemberAdd(":smile:"),s=i[Math.floor(Math.random()*i.length)];t.send(q("guildMemberAddWelcome",{userID:`<@!${e.user.id}>`,greet:a,happy:s,serverName:x("serverName"),helpTeam:`<@&${O}>`,rulesChannel:e.guild.channels.cache.get(E)?.toString()??""}))}),m.login(k),{client:m,botCommands:R,guildCheckin:I,system:y,getSettings:b}},{hash:sn,search:ln}=location,cn=sn.slice(1),un=[new URLSearchParams(cn).get("locales")||new URLSearchParams(ln).get("locales")||"en_US"],pn=Boolean(new URLSearchParams(cn).get("checkins")||new URLSearchParams(ln).get("checkins")),hn=e=>`${location.href.replace(/\/$/v,"")}/${e}`,dn={readFile:async e=>await(await fetch("object"==typeof e&&"href"in e&&e.href?e.href:e)).text(),writeFile(e,t){localStorage.setItem(`bahaibot-${e}`,String(t||Date.now()))},stat:e=>Promise.resolve({mtime:new Date(Number(localStorage.getItem(`bahaibot-${e}`)))}),unlink(e){localStorage.removeItem(e)}};function gn(e){return on({checkins:pn,locales:un,getPath:hn,fs:dn,fetch:fetch,i18n:X,striptags:e=>hr(e).result,...e})}export{gn as default};
//# sourceMappingURL=integratedClientServerBot.esm.min.js.map
