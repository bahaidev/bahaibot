import{createRequire as e}from"module";import t,{EventEmitter as n,once as r}from"events";import i,{Buffer as o}from"buffer";import s,{getCiphers as a}from"crypto";import{createSocket as l}from"dgram";import c,{isIPv4 as u}from"net";import d from"https";import h from"http";import p from"tls";import m,{Readable as f,pipeline as g}from"stream";import y from"url";import b from"zlib";import v,{nextTick as S}from"process";import T from"child_process";import _ from"ffmpeg-static";import{resolve as E,dirname as w}from"path";function A(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?A(Object(n),!0).forEach(function(t){P(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function I(){I=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,i){var o=new RegExp(e,r);return t.set(o,i||t.get(e)),U(o,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce(function(t,n){var i=r[n];if("number"==typeof i)t[n]=e[i];else{for(var o=0;void 0===e[i[o]]&&o+1<i.length;)o++;t[n]=e[i[o]]}return t},Object.create(null))}return D(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var i=n.indices;i&&(i.groups=r(i,this))}return n},n.prototype[Symbol.replace]=function(n,i){if("string"==typeof i){var o=t.get(this);return e[Symbol.replace].call(this,n,i.replace(/\$<([^>]+)>/g,function(e,t){var n=o[t];return"$"+(Array.isArray(n)?n.join("$"):n)}))}if("function"==typeof i){var s=this;return e[Symbol.replace].call(this,n,function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(r(e,s)),i.apply(this,e)})}return e[Symbol.replace].call(this,n,i)},I.apply(this,arguments)}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function R(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function M(e,t,n){return t&&R(e.prototype,t),n&&R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P(e,t,n){return(t=q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function x(e,t){if(t&&("object"==typeof t||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,r=N(e);if(t){var i=N(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return x(this,n)}}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,s,a=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(a.push(r.value),a.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(c)throw i}}return a}}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e){return function(e){if(Array.isArray(e))return $(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(e,t){if(e){if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$(e,t):void 0}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function q(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t);if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var j=globalThis.jsonExtra,V=function(e){return e.replace(/\\+/g,function(e){return e.slice(0,e.length/2)})},H=function(e){return j.parse("{"+(e||"").replace(/^\{/,"").replace(/\}$/,"")+"}")},W=function(e,t,n){var r,i=n.onMatch,o=n.extra,s=n.betweenMatches,a=n.afterMatch,l=n.escapeAtOne,c=0;if(o&&(s=o,a=o,l=o),!s||!a)throw new Error("You must have `extra` or `betweenMatches` and `afterMatch` arguments.");for(;null!==(r=e.exec(t));){var u=B(r,2),d=u[0],h=u[1],p=e.lastIndex,m=p-d.length;m>c&&s(t.slice(c,m)),l&&h.length%2?(c=p,l(d)):(i.apply(void 0,F(r)),c=p)}c!==t.length&&a(t.slice(c))},z="undefined"!=typeof fetch?fetch:null,K=function(){return z},J="undefined"!=typeof document?document:null,Y=function(){return J};var Q=function(e,t,n){return t.sort(new Intl.Collator(e,n).compare)},X=function(e,t,n){return new Intl.ListFormat(e,n).format(t)},Z=function(e,t,n,r,i){if("function"!=typeof n)return function(e,t,n,r){return Q(e,t,r),X(e,t,n)}(e,t,n,r);Q(e,t,i);var o=function(){var e=Date.now();return"undefined"!=typeof performance&&"function"==typeof performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=Math.trunc((e+16*Math.random())%16);return e=Math.floor(e/16),("x"===t?n:3&n|8).toString(16)})}(),s=F(t).map(function(e,t){return"<<".concat(o).concat(t,">>")}),a=[],l=function(e){a.push(e)};W(new RegExp("<<".concat(o,"(\\d)>>"),"gu"),X(e,s,r),{betweenMatches:l,afterMatch:l,onMatch:function(e,r){l(n(t[Number(r)],Number(r)))}});var c=Y().createDocumentFragment();return c.append.apply(c,a),c},ee=function(e){var t=e.object;if(Array.isArray(t)){if("function"==typeof t[1]){var n=B(t,4);return{value:n[0],callback:n[1],options:n[2],extraOpts:n[3]}}var r=B(t,3);return{value:r[0],options:r[1],extraOpts:r[2]}}return{value:t}},te=function(e){var t=e.value,n=e.arg;e.key;var r,i=e.locale;if("string"==typeof t||t&&"object"===C(t)&&"nodeType"in t)return t;var o=function(e){var t=e.type,i=e.options,o=void 0===i?r:i,s=e.checkArgOptions,a=void 0!==s&&s;if("string"==typeof n){var l=B(n.split("|"),3),c=l[0],u=l[1],d=l[2];"DATE"===c&&(c="DATETIME"),c===t&&(u?a&&!d||(o=k(k({},o),H(a&&d?d:u))):o={})}return o},s=!1;if(t&&"object"===C(t)&&!Array.isArray(t)){var a=Object.keys(t)[0];if(["number","date","datetime","dateRange","datetimeRange","relative","region","language","script","currency","list","plural"].includes(a)){var l,c,u=t[a],d=ee({object:u});switch(t=d.value,r=d.options,l=d.extraOpts,c=d.callback,a){case"date":case"datetime":s=!0;break;case"dateRange":case"datetimeRange":var h=new Intl.DateTimeFormat(i,o({type:"DATERANGE",options:l}));return h.formatRange.apply(h,F([t,r].map(function(e){return"number"==typeof e?new Date(e):e})));case"region":case"language":case"script":case"currency":return new Intl.DisplayNames(i,k(k({},o({type:a.toUpperCase()})),{},{type:a})).of(t);case"relative":var p=[r,l];return l=p[0],r=p[1],new Intl.RelativeTimeFormat(i,o({type:"RELATIVE"})).format(t,l);case"list":return c?Z(i,t,c,o({type:"LIST"}),o({type:"LIST",options:l,checkArgOptions:!0})):Z(i,t,o({type:"LIST"}),o({type:"LIST",options:l,checkArgOptions:!0}))}}}if(t&&("number"==typeof t&&(s||/^DATE(?:TIME)(?:\||$)/.test(n))&&(t=new Date(t)),"object"===C(t)&&"getTime"in t&&"function"==typeof t.getTime))return new Intl.DateTimeFormat(i,o({type:"DATETIME"})).format(t);if(Array.isArray(t)){var m,f=t[2];return(m=new Intl.DateTimeFormat(i,o({type:"DATERANGE",options:f}))).formatRange.apply(m,F(t.slice(0,2).map(function(e){return"number"==typeof e?new Date(e):e})))}if("number"==typeof t)return new Intl.NumberFormat(i,o({type:"NUMBER"})).format(t);throw new TypeError("Unknown formatter")},ne=M(function e(){O(this,e)}),re=function(e){var t=e.key,n=e.body,r=e.type,i=e.messageStyle,o=me({messageStyle:void 0===i?"richNested":i})({body:n},t);if(!o)throw new Error("Key value not found for ".concat(r," key: (").concat(t,")"));return o.value},ie=function(){D(t,ne);var e=L(t);function t(n){var r;return O(this,t),(r=e.call(this)).locals=n,r}return M(t,[{key:"getSubstitution",value:function(e){return re({key:e.slice(1),body:this.locals,type:"local"})}},{key:"isMatch",value:function(e){var t=e.slice(1).split("."),n=this.locals;return this.constructor.isMatchingKey(e)&&t.every(function(e){var t=e in n;return n=n[e],t})}}],[{key:"isMatchingKey",value:function(e){return e.startsWith("-")}}]),t}(),oe=function(){D(t,ne);var e=L(t);function t(n){var r;return O(this,t),(r=e.call(this)).substitutions=n,r}return M(t,[{key:"isMatch",value:function(e){return this.constructor.isMatchingKey(e)&&e in this.substitutions}}],[{key:"isMatchingKey",value:function(e){return/^[0-9A-Z_a-z]/.test(e)}}]),t}(),se=function(){D(t,ne);var e=L(t);function t(n,r){var i,o=r.substitutions;return O(this,t),(i=e.call(this)).switches=n,i.substitutions=o,i}return M(t,[{key:"getSubstitution",value:function(e,t){var n,r,i=t.locale,o=t.usedKeys,s=t.arg,a=t.missingSuppliedFormatters,l=this.constructor.getKey(e).slice(1),c=B(this.getMatch(l),3),u=c[0],d=c[1],h=c[2];if(o.push(h),u&&u.includes("|")){var p=B(u.split("|"),3);n=p[1],r=p[2]}if(!d)return a({key:e,formatter:this}),"\\{"+e+"}";var m=function(e,t){var n=H(r);return new Intl.NumberFormat(i,k(k({},t),n)).format(e)},f=function(e,t){var n=H(r);return new Intl.PluralRules(i,k(k({},t),n)).select(e)},g=this.substitutions[h],y=g;if("number"==typeof g)switch(n){case"NUMBER":y=m(g);break;case"PLURAL":y=f(g);break;default:y=new Intl.PluralRules(i).select(g)}else if(g&&"object"===C(g)){var b=Object.keys(g)[0];if(["number","plural"].includes(b)){var v=ee({object:g[b]}),S=v.value,T=v.options;if(n||(n=b.toUpperCase()),!(b.toUpperCase()===n))throw new TypeError('Expecting type "'.concat(n.toLowerCase(),'"; instead found "').concat(b,'".'));switch(n){case"NUMBER":y=m(S,T);break;case"PLURAL":y=f(S,T)}}}var _="richNested",E=function(e){return e.replace(/\\/g,"\\\\").replace(/\./g,"\\.")};try{return re({messageStyle:_,key:y?E(y):s,body:d,type:"switch"})}catch(e){try{return re({messageStyle:_,key:"*"+E(y),body:d,type:"switch"})}catch(e){var w=Object.keys(d).find(function(e){return e.startsWith("*")});if(!w)throw new Error("No defaults found for switch ".concat(l));return re({messageStyle:_,key:E(w),body:d,type:"switch"})}}}},{key:"isMatch",value:function(e){return Boolean(e&&this.constructor.isMatchingKey(e)&&this.getMatch(e.slice(1)).length)}},{key:"getMatch",value:function(e){var t=this,n=e.split(".");return n.reduce(function(r,i,o){if(o<n.length-1){if(!(i in r))throw new Error('Switch key "'.concat(i,'" not found (from "~').concat(e,'")'));return r[i]}var s=Object.entries(r).find(function(e){var n=B(e,1)[0];return i===t.constructor.getKey(n)});return s?[].concat(F(s),[i]):[]},this.switches)}}],[{key:"isMatchingKey",value:function(e){return e.startsWith("~")}},{key:"getKey",value:function(e){var t=e.match(/^(?:[\0-\{\}-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*/);return t&&t[0]}}]),t}();function ae(e,t,n){if(!e.s){if(n instanceof le){if(!n.s)return void(n.o=ae.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(ae.bind(null,e,t),ae.bind(null,e,2));e.s=t,e.v=n;var r=e.o;r&&r(e)}}var le=function(){function e(){}return e.prototype.then=function(t,n){var r=new e,i=this.s;if(i){var o=1&i?t:n;if(o){try{ae(r,1,o(this.v))}catch(e){ae(r,2,e)}return r}return this}return this.o=function(e){try{var i=e.v;1&e.s?ae(r,1,t?t(i):i):n?ae(r,1,n(i)):ae(r,2,i)}catch(e){ae(r,2,e)}},r},e}();function ce(e){return e instanceof le&&1&e.s}var ue=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Reached end of values array.";if(!Array.isArray(e))throw new TypeError("The `values` argument to `promiseChainForValues` must be an array.");if("function"!=typeof t)throw new TypeError("The `errBack` argument to `promiseChainForValues` must be a function.");return function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}(function(){var r,i,o,s,a=!1,l=Promise.reject(new Error("Intentionally reject so as to begin checking chain"));return o=function(e,t,n){for(var r;;){var i=e();if(ce(i)&&(i=i.v),!i)return o;if(i.then){r=0;break}var o=n();if(o&&o.then){if(!ce(o)){r=1;break}o=o.s}}var s=new le,a=ae.bind(null,s,2);return(0===r?i.then(c):1===r?o.then(l):(void 0).then(function(){(i=e())?i.then?i.then(c).then(void 0,a):c(i):ae(s,1,o)})).then(void 0,a),s;function l(t){o=t;do{if(!(i=e())||ce(i)&&!i.v)return void ae(s,1,o);if(i.then)return void i.then(c).then(void 0,a);ce(o=n())&&(o=o.v)}while(!o||!o.then);o.then(l).then(void 0,a)}function c(e){e?(o=n())&&o.then?o.then(l).then(void 0,a):l(o):ae(s,1,o)}}(function(){return!a},0,function(){var o=e.shift();return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){return function(e,t){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}(l,function(e){r=e,a=!0})},function(){if(i)throw new Error(n);e.length||(i=!0),l=t(o)})}),s=function(e){return r},o&&o.then?o.then(s):s(o)})()},de=function(e,t){if("string"!=typeof e)throw new TypeError("`defaultLocaleResolver` expects a string `localesBasePath`.");if("string"!=typeof t)throw new TypeError("`defaultLocaleResolver` expects a string `locale`.");if(/[\.\/\\]/.test(t))throw new TypeError("Locales cannot use file-reserved characters, `.`, `/` or `\\`");return"".concat(e.replace(/\/$/,""),"/_locales/").concat(t,"/messages.json")},he=function(e){var t=e.string,n=e.dom,r=e.usedKeys,i=e.substitutions,o=e.allSubstitutions,s=e.locale,a=e.locals,l=e.switches,c=e.maximumLocalNestingDepth,u=void 0===c?3:c,d=e.missingSuppliedFormatters,h=e.checkExtraSuppliedFormatters;if("number"!=typeof u)throw new TypeError("`maximumLocalNestingDepth` must be a number.");var p=function(){Object.entries(i).forEach(function(e){var t=B(e,2),n=t[0];"function"==typeof t[1]&&r.push(n)})};p();var m=new ie(a),f=new oe(i),g=new se(l,{substitutions:i}),y=/(\\*)\{((?:(?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])|\\\})*?)(?:(\|)((?:[\0-\|~-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*))?\}/g;o&&(o=Array.isArray(o)?o:[o]);var b=function(e){var t,n=e.key,i=e.arg,a=e.substs;return m.constructor.isMatchingKey(n)?t=m.getSubstitution(n):g.constructor.isMatchingKey(n)?t=g.getSubstitution(n,{locale:s,usedKeys:r,arg:i,missingSuppliedFormatters:d}):"function"==typeof(t=a[n])&&(t=t({arg:i,key:n})),o?t=o.reduce(function(e,t){return t({value:e,arg:i,key:n,locale:s})},t):i&&/^(?:NUMBER|DATE(?:TIME|RANGE|TIMERANGE)?|REGION|LANGUAGE|SCRIPT|CURRENCY|RELATIVE|LIST)(?:\||$)/.test(i)&&(t=te({value:t,arg:i,key:n,locale:s})),t},v=1,S=function(e){var t=e.substitution,n=e.ky,r=e.arg,o=e.processSubsts,s=t;if("string"==typeof t&&t.includes("{")){if(v++>u)throw new TypeError("Too much recursion in local variables.");if(m.constructor.isMatchingKey(n)){var a,l=i;r&&(a=H(r),l=k(k({},i),a)),s=o({str:t,substs:l,formatter:m}),a&&h({substitutions:a})}else g.constructor.isMatchingKey(n)&&(s=o({str:t}))}return s};if(!n){var T=!1,_=function e(t){var n=t.str,o=t.substs,s=void 0===o?i:o,a=t.formatter,l=void 0===a?f:a;return n.replace(y,function(t,n,i,o,a){if(n.length%2)return t;if(d({key:i,formatter:l}))return t;var c=b({key:i,arg:a,substs:s});return c=S({substitution:c,ky:i,arg:a,processSubsts:e}),T=T||null!==c&&"object"===C(c)&&"nodeType"in c,r.push(i),n+c})}({str:t});if(!T)return h({substitutions:i}),r.length=0,p(),V(_);r.length=0,p()}v=1;var E=function e(t){var n=t.str,o=t.substs,s=void 0===o?i:o,a=t.formatter,l=void 0===a?f:a,c=[],u=new RegExp(y,"gu"),h=function(){c.push.apply(c,arguments)};return W(u,n,{extra:h,onMatch:function(t,n,i,o,a){if(d({key:i,formatter:l}))h(t);else{n.length&&h(n);var c=b({key:i,arg:a,substs:s});c=S({substitution:c,ky:i,arg:a,processSubsts:e}),Array.isArray(c)?h.apply(void 0,F(c)):c&&"object"===C(c)&&"nodeType"in c?h(c.cloneNode(!0)):h(c)}r.push(i)}}),c}({str:t});return h({substitutions:i}),r.length=0,E.map(function(e){return"string"==typeof e?V(e):e})};function pe(e,t){if(Array.isArray(e)&&e.every(function(e){return"string"==typeof e})&&"string"==typeof t&&t.endsWith("Nested"))return e.map(function(e){return e.replace(I(/(\\+)/g,{backslashes:1}),"\\$<backslashes>").replace(/\./g,"\\.")}).join(".");if("string"!=typeof e)throw new TypeError("`key` is expected to be a string (or array of strings for nested style)");return e}var me=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).messageStyle,t=void 0===e?"richNested":e;return"function"==typeof t?t:"richNested"===t?function(e,t){var n=e&&"object"===C(e)&&e.body,r=[],i=function(e){r.length||(r[0]=""),r[r.length-1]+=e};W(/(\\*)\./g,t,{extra:i,onMatch:function(e,t){i(t),r.push("")}});var o=r.map(function(e){return V(e)}),s=!1,a=n;return o.some(function(e,t,n){return!a||"object"!==C(a)||(t===n.length-1&&e in a&&a[e]&&"object"===C(a[e])&&"message"in a[e]&&"string"==typeof a[e].message&&(s={value:a[e].message,info:a[e]}),a=a[e],!1)}),s}:"rich"===t?function(e,t){var n=e&&"object"===C(e)&&e.body;return!!(n&&"object"===C(n)&&t in n&&n[t]&&"object"===C(n[t])&&"message"in n[t]&&"string"==typeof n[t].message)&&{value:n[t].message,info:n[t]}}:"plain"===t?function(e,t){var n=e&&"object"===C(e)&&e.body;return!!(n&&"object"===C(n)&&t in n&&n[t]&&"string"==typeof n[t])&&{value:n[t]}}:"plainNested"===t?function(e,t){var n=e&&"object"===C(e)&&e.body;if(n&&"object"===C(n)){var r=t.split(/(?<!\\)\./).reduce(function(e,t){return e&&"object"===C(e)&&e[t]?e[t]:null},n);if(r&&"string"==typeof r)return{value:r}}return!1}:function(){throw new TypeError("Unknown `messageStyle` ".concat(t))}()};function fe(e,t,n){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}function ge(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return Promise.resolve(e.apply(this,t))}catch(e){return Promise.reject(e)}}}var ye=function(e){if(!e.includes("-"))throw new Error("Locale not available");return e.replace(/\x2D(?:[\0-,\.-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])*$/,"")},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locales,n=e.defaultLocales,r=e.localeResolver,i=e.localesBasePath,o=e.localeMatcher;return ve({locales:t,defaultLocales:n,localeResolver:r,localesBasePath:i,localeMatcher:o})},ve=ge(function(e){var t=ge(function(e){if("string"!=typeof e)throw new TypeError("Non-string locale type");var n=a(c,e);if("string"!=typeof n)throw new TypeError("`localeResolver` expected to resolve to (URL) string.");return function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}(function(){var t=K();return fe(p?t(n,{method:"HEAD"}):t(n),function(t){if(404===t.status)throw new Error("Trying again");return p?e:fe(t.json(),function(t){return{locale:e,strings:t}})})},function(n){if("SyntaxError"===n.name)throw n;return fe(d(e),t)})}),n=e.locales,r=void 0===n?"undefined"!=typeof intlDomLocale?[intlDomLocale]:"undefined"==typeof navigator?[]:navigator.languages:n,i=e.defaultLocales,o=void 0===i?["en-US"]:i,s=e.localeResolver,a=void 0===s?de:s,l=e.localesBasePath,c=void 0===l?".":l,u=e.localeMatcher,d=void 0===u?"lookup":u,h=e.headOnly,p=void 0!==h&&h;if("lookup"===d)d=ye;else if("function"!=typeof d)throw new TypeError('`localeMatcher` must be "lookup" or a function!');return ue([].concat(F(r),F(o)),t,"No matching locale found for "+[].concat(F(r),F(o)).join(", "))});function Se(e,t,n){return e&&e.then||(e=Promise.resolve(e)),t?e.then(t):e}var Te,_e,Ee=function(e){var t=e.strings,n=e.resolvedLocale,r=e.messageStyle,i=void 0===r?"richNested":r,o=e.allSubstitutions,s=e.insertNodes,a=e.keyCheckerConverter,l=void 0===a?pe:a,c=e.defaults,u=e.substitutions,d=e.dom,h=void 0!==d&&d,p=e.forceNodeReturn,m=void 0!==p&&p,f=e.throwOnMissingSuppliedFormatters,g=void 0===f||f,y=e.throwOnExtraSuppliedFormatters,b=void 0===y||y;if(!t||"object"!==C(t))throw new TypeError("Locale strings must be an object!");var v=me({messageStyle:i}),S=function(e,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},d=a.allSubstitutions,p=void 0===d?o:d,f=a.defaults,y=void 0===f?c:f,S=a.dom,T=void 0===S?h:S,_=a.forceNodeReturn,E=void 0===_?m:_,w=a.throwOnMissingSuppliedFormatters,A=void 0===w?g:w,I=a.throwOnExtraSuppliedFormatters,O=void 0===I?b:I;e=l(e,i);var R=v(t,e),M=function(e){var t,n=e.message,r=e.defaults,i=e.messageStyle,o=e.messageForKey,s=void 0===o?me({messageStyle:i}):o,a=e.key;if("string"==typeof n)t=n;else if(!1===r||null==r)t=!1;else{if(!r||"object"!==C(r))throw new TypeError("Default locale strings must resolve to `false`, nullish, or an object!");var l=s(r,a);t=l?l.value:l}if(!1===t)throw new Error("Key value not found for key: (".concat(a,")"));return t}({message:!(!R||"string"!=typeof R.value)&&R.value,defaults:y,messageForKey:v,key:e});return function(e){var t=e.string,n=e.locale,r=e.locals,i=e.switches,o=e.allSubstitutions,s=void 0===o?[te]:o,a=e.insertNodes,l=void 0===a?he:a,c=e.substitutions,u=void 0!==c&&c,d=e.dom,h=void 0!==d&&d,p=e.forceNodeReturn,m=void 0!==p&&p,f=e.throwOnMissingSuppliedFormatters,g=void 0===f||f,y=e.throwOnExtraSuppliedFormatters,b=void 0===y||y;if("string"!=typeof t)throw new TypeError("An options object with a `string` property set to a string must be provided for `getDOMForLocaleString`.");var v=function(e){var t=Y();return m?t.createTextNode(e):e},S=[];if(!u&&!s&&!g)return v(t);u||(u={});var T=l({string:t,dom:h,usedKeys:S,substitutions:u,allSubstitutions:s,locale:n,locals:r,switches:i,missingSuppliedFormatters:function(e){var t=e.key,n=e.formatter,r=n.isMatch(t);if(n.constructor.isMatchingKey(t)&&!r){if(g)throw new Error("Missing formatting key: ".concat(t));return!0}return!1},checkExtraSuppliedFormatters:function(e){var t=e.substitutions;b&&Object.keys(t).forEach(function(e){if(!S.includes(e))throw new Error("Extra formatting key: ".concat(e))})}});if("string"==typeof T)return v(T);var _=Y().createDocumentFragment();return _.append.apply(_,F(T)),_}({string:M,locals:t.head&&t.head.locals,switches:t.head&&t.head.switches,locale:n,allSubstitutions:p,insertNodes:s,substitutions:k(k({},u),r),dom:T,forceNodeReturn:E,throwOnMissingSuppliedFormatters:A,throwOnExtraSuppliedFormatters:O})};return S.resolvedLocale=n,S.strings=t,S.sort=function(e,t){return Q(n,e,t)},S.sortList=function(e,t,r,i){return Z(n,e,t,r,i)},S.list=function(e,t){return X(n,e,t)},S},we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.locales,n=e.defaultLocales,r=e.localeStringFinder,i=void 0===r?be:r,o=e.localesBasePath,s=e.localeResolver,a=e.localeMatcher,l=e.messageStyle,c=e.allSubstitutions,u=e.insertNodes,d=e.keyCheckerConverter,h=e.defaults,p=e.substitutions,m=e.maximumLocalNestingDepth,f=e.dom,g=e.forceNodeReturn,y=e.throwOnMissingSuppliedFormatters,b=e.throwOnExtraSuppliedFormatters;try{return Se(i({locales:t,defaultLocales:n,localeResolver:s,localesBasePath:o,localeMatcher:a}),function(e){var t,r,v=e.strings,S=e.locale;return t=function(){return Ee({strings:v,resolvedLocale:S,messageStyle:l,allSubstitutions:c,insertNodes:u,keyCheckerConverter:d,defaults:h,substitutions:p,maximumLocalNestingDepth:m,dom:f,forceNodeReturn:g,throwOnMissingSuppliedFormatters:y,throwOnExtraSuppliedFormatters:b})},(r=function(){if(!h&&n)return Se(i({locales:n,defaultLocales:[],localeResolver:s,localesBasePath:o,localeMatcher:a}),function(e){h=e.strings,e.locale===S&&(h=null)})}())&&r.then?r.then(t):t(r)})}catch(e){return Promise.reject(e)}};function Ae(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ke(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if("function"==typeof t){var n=function e(){var n=!1;try{n=this instanceof e}catch{}return n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}),n}var Ce=Ae(function(){if(_e)return Te;function e(e){return e instanceof Buffer?Buffer.from(e):new e.constructor(e.buffer.slice(),e.byteOffset,e.length)}return _e=1,Te=function(t){if((t=t||{}).circles)return function(t){const n=[],r=[],i=new Map;if(i.set(Date,e=>new Date(e)),i.set(Map,(e,t)=>new Map(s(Array.from(e),t))),i.set(Set,(e,t)=>new Set(s(Array.from(e),t))),t.constructorHandlers)for(const e of t.constructorHandlers)i.set(e[0],e[1]);let o=null;return t.proto?l:a;function s(t,s){const a=Object.keys(t),l=new Array(a.length);for(let c=0;c<a.length;c++){const u=a[c],d=t[u];if("object"!=typeof d||null===d)l[u]=d;else if(d.constructor!==Object&&(o=i.get(d.constructor)))l[u]=o(d,s);else if(ArrayBuffer.isView(d))l[u]=e(d);else{const e=n.indexOf(d);l[u]=-1!==e?r[e]:s(d)}}return l}function a(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return s(t,a);if(t.constructor!==Object&&(o=i.get(t.constructor)))return o(t,a);const l={};n.push(t),r.push(l);for(const s in t){if(!1===Object.hasOwnProperty.call(t,s))continue;const c=t[s];if("object"!=typeof c||null===c)l[s]=c;else if(c.constructor!==Object&&(o=i.get(c.constructor)))l[s]=o(c,a);else if(ArrayBuffer.isView(c))l[s]=e(c);else{const e=n.indexOf(c);l[s]=-1!==e?r[e]:a(c)}}return n.pop(),r.pop(),l}function l(t){if("object"!=typeof t||null===t)return t;if(Array.isArray(t))return s(t,l);if(t.constructor!==Object&&(o=i.get(t.constructor)))return o(t,l);const a={};n.push(t),r.push(a);for(const s in t){const c=t[s];if("object"!=typeof c||null===c)a[s]=c;else if(c.constructor!==Object&&(o=i.get(c.constructor)))a[s]=o(c,l);else if(ArrayBuffer.isView(c))a[s]=e(c);else{const e=n.indexOf(c);a[s]=-1!==e?r[e]:l(c)}}return n.pop(),r.pop(),a}}(t);const n=new Map;if(n.set(Date,e=>new Date(e)),n.set(Map,(e,t)=>new Map(i(Array.from(e),t))),n.set(Set,(e,t)=>new Set(i(Array.from(e),t))),t.constructorHandlers)for(const e of t.constructorHandlers)n.set(e[0],e[1]);let r=null;return t.proto?function t(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,t);if(o.constructor!==Object&&(r=n.get(o.constructor)))return r(o,t);const s={};for(const i in o){const a=o[i];"object"!=typeof a||null===a?s[i]=a:a.constructor!==Object&&(r=n.get(a.constructor))?s[i]=r(a,t):ArrayBuffer.isView(a)?s[i]=e(a):s[i]=t(a)}return s}:function t(o){if("object"!=typeof o||null===o)return o;if(Array.isArray(o))return i(o,t);if(o.constructor!==Object&&(r=n.get(o.constructor)))return r(o,t);const s={};for(const i in o){if(!1===Object.hasOwnProperty.call(o,i))continue;const a=o[i];"object"!=typeof a||null===a?s[i]=a:a.constructor!==Object&&(r=n.get(a.constructor))?s[i]=r(a,t):ArrayBuffer.isView(a)?s[i]=e(a):s[i]=t(a)}return s};function i(t,i){const o=Object.keys(t),s=new Array(o.length);for(let a=0;a<o.length;a++){const l=o[a],c=t[l];"object"!=typeof c||null===c?s[l]=c:c.constructor!==Object&&(r=n.get(c.constructor))?s[l]=r(c,i):ArrayBuffer.isView(c)?s[l]=e(c):s[l]=i(c)}return s}}}());function Ie(e){if(null==e||"object"!=typeof e)return!1;let t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&!(Symbol.toStringTag in e))}function Oe(e){return"string"==typeof e}function Re(e){return Number.isSafeInteger(e)&&e>=0}function Me(e){return null!=e}function Pe(e,t){return Ie(e)&&Oe(t)&&t in e}
/**
 * @name codsen-utils
 * @fileoverview Various utility functions
 * @version 1.7.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/codsen-utils/}
 */
Ce();var De="object"==typeof global&&global&&global.Object===Object&&global,Ne="object"==typeof self&&self&&self.Object===Object&&self,Ue=De||Ne||Function("return this")(),xe=Ue.Symbol,Le=Object.prototype,Be=Le.hasOwnProperty,Fe=Le.toString,Ge=xe?xe.toStringTag:void 0;var $e=Object.prototype.toString;var qe=xe?xe.toStringTag:void 0;function je(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":qe&&qe in Object(e)?function(e){var t=Be.call(e,Ge),n=e[Ge];try{e[Ge]=void 0;var r=!0}catch(e){}var i=Fe.call(e);return r&&(t?e[Ge]=n:delete e[Ge]),i}(e):function(e){return $e.call(e)}(e)}function Ve(e){return null!=e&&"object"==typeof e}var He=Array.isArray,We=xe?xe.prototype:void 0,ze=We?We.toString:void 0;function Ke(e){if("string"==typeof e)return e;if(He(e))return function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(e,Ke)+"";if(function(e){return"symbol"==typeof e||Ve(e)&&"[object Symbol]"==je(e)}(e))return ze?ze.call(e):"";var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}var Je=/\s/;var Ye=/^\s+/;function Qe(e){return e?e.slice(0,function(e){for(var t=e.length;t--&&Je.test(e.charAt(t)););return t}(e)+1).replace(Ye,""):e}function Xe(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ze(e){return e}function et(e){if(!Xe(e))return!1;var t=je(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var tt,nt=Ue["__core-js_shared__"],rt=(tt=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+tt:"";var it=Function.prototype.toString;var ot=/^\[object .+?Constructor\]$/,st=Function.prototype,at=Object.prototype,lt=st.toString,ct=at.hasOwnProperty,ut=RegExp("^"+lt.call(ct).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function dt(e){return!(!Xe(e)||(t=e,rt&&rt in t))&&(et(e)?ut:ot).test(function(e){if(null!=e){try{return it.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function ht(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return dt(n)?n:void 0}var pt=Date.now;var mt,ft,gt,yt=function(){try{var e=ht(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),bt=yt?function(e,t){return yt(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:Ze,vt=(mt=bt,ft=0,gt=0,function(){var e=pt(),t=16-(e-gt);if(gt=e,t>0){if(++ft>=800)return arguments[0]}else ft=0;return mt.apply(void 0,arguments)});function St(e){return e!=e}function Tt(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n){for(var r=e.length,i=n+-1;++i<r;)if(t(e[i],i,e))return i;return-1}(e,St,n)}function _t(e,t){return!!(null==e?0:e.length)&&Tt(e,t,0)>-1}function Et(e,t){return e===t||e!=e&&t!=t}var wt=Math.max;var At=ht(Object,"create");var kt=Object.prototype.hasOwnProperty;var Ct=Object.prototype.hasOwnProperty;function It(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ot(e,t){for(var n=e.length;n--;)if(Et(e[n][0],t))return n;return-1}It.prototype.clear=function(){this.__data__=At?At(null):{},this.size=0},It.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},It.prototype.get=function(e){var t=this.__data__;if(At){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return kt.call(t,e)?t[e]:void 0},It.prototype.has=function(e){var t=this.__data__;return At?void 0!==t[e]:Ct.call(t,e)},It.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=At&&void 0===t?"__lodash_hash_undefined__":t,this};var Rt=Array.prototype.splice;function Mt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Mt.prototype.clear=function(){this.__data__=[],this.size=0},Mt.prototype.delete=function(e){var t=this.__data__,n=Ot(t,e);return!(n<0)&&(n==t.length-1?t.pop():Rt.call(t,n,1),--this.size,!0)},Mt.prototype.get=function(e){var t=this.__data__,n=Ot(t,e);return n<0?void 0:t[n][1]},Mt.prototype.has=function(e){return Ot(this.__data__,e)>-1},Mt.prototype.set=function(e,t){var n=this.__data__,r=Ot(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var Pt=ht(Ue,"Map");function Dt(e,t){var n,r,i=e.__data__;return("string"==(r=typeof(n=t))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof t?"string":"hash"]:i.map}function Nt(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ut(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}(e,t,n)}Nt.prototype.clear=function(){this.size=0,this.__data__={hash:new It,map:new(Pt||Mt),string:new It}},Nt.prototype.delete=function(e){var t=Dt(this,e).delete(e);return this.size-=t?1:0,t},Nt.prototype.get=function(e){return Dt(this,e).get(e)},Nt.prototype.has=function(e){return Dt(this,e).has(e)},Nt.prototype.set=function(e,t){var n=Dt(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};var xt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");var Lt="\\ud800-\\udfff",Bt="["+Lt+"]",Ft="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Gt="\\ud83c[\\udffb-\\udfff]",$t="[^"+Lt+"]",qt="(?:\\ud83c[\\udde6-\\uddff]){2}",jt="[\\ud800-\\udbff][\\udc00-\\udfff]",Vt="(?:"+Ft+"|"+Gt+")"+"?",Ht="[\\ufe0e\\ufe0f]?",Wt=Ht+Vt+("(?:\\u200d(?:"+[$t,qt,jt].join("|")+")"+Ht+Vt+")*"),zt="(?:"+[$t+Ft+"?",Ft,qt,jt,Bt].join("|")+")",Kt=RegExp(Gt+"(?="+Gt+")|"+zt+Wt,"g");function Jt(e){return function(e){return xt.test(e)}(e)?function(e){return e.match(Kt)||[]}(e):function(e){return e.split("")}(e)}function Yt(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Nt;++t<n;)this.add(e[t])}function Qt(e,t){return e.has(t)}function Xt(e){return Ve(e)&&function(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}(e.length)&&!et(e)}(e)}Yt.prototype.add=Yt.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Yt.prototype.has=function(e){return this.__data__.has(e)};function Zt(e,t,n){var r;if((e=null==(r=e)?"":Ke(r))&&void 0===t)return Qe(e);if(!e||!(t=Ke(t)))return e;var i=Jt(e),o=Jt(t),s=function(e,t){for(var n=-1,r=e.length;++n<r&&Tt(t,e[n],0)>-1;);return n}(i,o),a=function(e,t){for(var n=e.length;n--&&Tt(t,e[n],0)>-1;);return n}(i,o)+1;return Ut(i,s,a).join("")}var en=function(e,t){return vt(function(e,t,n){return t=wt(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=wt(r.length-t,0),s=Array(o);++i<o;)s[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(s),function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(e,this,a)}}(e,t,Ze),e+"")}(function(e,t){return Xt(e)?function(e,t,n,r){var i=-1,o=_t,s=!0,a=e.length,l=[],c=t.length;if(!a)return l;t.length>=200&&(o=Qt,s=!1,t=new Yt(t));e:for(;++i<a;){var u=e[i],d=u;if(u=0!==u?u:0,s&&d==d){for(var h=c;h--;)if(t[h]===d)continue e;l.push(u)}else o(t,d,r)||l.push(u)}return l}(e,t):[]}),tn=function(){return tn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},tn.apply(this,arguments)};function nn(e,t){for(var n={},r={},i=e.split("~~"),o=!1,s=0;i.length>s;s++){for(var a=i[s].split("~"),l=0;l<a.length;l+=2){var c=a[l],u=a[l+1],d="&"+c+";";n[d]=u,o&&(n["&"+c]=u),r[u]=d}o=!0}return t?{entities:tn(tn({},n),t.entities),characters:tn(tn({},r),t.characters)}:{entities:n,characters:r}}var rn={xml:/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html4:/&notin;|&(?:nbsp|iexcl|cent|pound|curren|yen|brvbar|sect|uml|copy|ordf|laquo|not|shy|reg|macr|deg|plusmn|sup2|sup3|acute|micro|para|middot|cedil|sup1|ordm|raquo|frac14|frac12|frac34|iquest|Agrave|Aacute|Acirc|Atilde|Auml|Aring|AElig|Ccedil|Egrave|Eacute|Ecirc|Euml|Igrave|Iacute|Icirc|Iuml|ETH|Ntilde|Ograve|Oacute|Ocirc|Otilde|Ouml|times|Oslash|Ugrave|Uacute|Ucirc|Uuml|Yacute|THORN|szlig|agrave|aacute|acirc|atilde|auml|aring|aelig|ccedil|egrave|eacute|ecirc|euml|igrave|iacute|icirc|iuml|eth|ntilde|ograve|oacute|ocirc|otilde|ouml|divide|oslash|ugrave|uacute|ucirc|uuml|yacute|thorn|yuml|quot|amp|lt|gt|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g,html5:/&centerdot;|&copysr;|&divideontimes;|&gtcc;|&gtcir;|&gtdot;|&gtlPar;|&gtquest;|&gtrapprox;|&gtrarr;|&gtrdot;|&gtreqless;|&gtreqqless;|&gtrless;|&gtrsim;|&ltcc;|&ltcir;|&ltdot;|&lthree;|&ltimes;|&ltlarr;|&ltquest;|&ltrPar;|&ltri;|&ltrie;|&ltrif;|&notin;|&notinE;|&notindot;|&notinva;|&notinvb;|&notinvc;|&notni;|&notniva;|&notnivb;|&notnivc;|&parallel;|&timesb;|&timesbar;|&timesd;|&(?:AElig|AMP|Aacute|Acirc|Agrave|Aring|Atilde|Auml|COPY|Ccedil|ETH|Eacute|Ecirc|Egrave|Euml|GT|Iacute|Icirc|Igrave|Iuml|LT|Ntilde|Oacute|Ocirc|Ograve|Oslash|Otilde|Ouml|QUOT|REG|THORN|Uacute|Ucirc|Ugrave|Uuml|Yacute|aacute|acirc|acute|aelig|agrave|amp|aring|atilde|auml|brvbar|ccedil|cedil|cent|copy|curren|deg|divide|eacute|ecirc|egrave|eth|euml|frac12|frac14|frac34|gt|iacute|icirc|iexcl|igrave|iquest|iuml|laquo|lt|macr|micro|middot|nbsp|not|ntilde|oacute|ocirc|ograve|ordf|ordm|oslash|otilde|ouml|para|plusmn|pound|quot|raquo|reg|sect|shy|sup1|sup2|sup3|szlig|thorn|times|uacute|ucirc|ugrave|uml|uuml|yacute|yen|yuml|#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);?/g},on={};on.xml=nn("lt~<~gt~>~quot~\"~apos~'~amp~&"),on.html4=nn("apos~'~OElig~Œ~oelig~œ~Scaron~Š~scaron~š~Yuml~Ÿ~circ~ˆ~tilde~˜~ensp~ ~emsp~ ~thinsp~ ~zwnj~‌~zwj~‍~lrm~‎~rlm~‏~ndash~–~mdash~—~lsquo~‘~rsquo~’~sbquo~‚~ldquo~“~rdquo~”~bdquo~„~dagger~†~Dagger~‡~permil~‰~lsaquo~‹~rsaquo~›~euro~€~fnof~ƒ~Alpha~Α~Beta~Β~Gamma~Γ~Delta~Δ~Epsilon~Ε~Zeta~Ζ~Eta~Η~Theta~Θ~Iota~Ι~Kappa~Κ~Lambda~Λ~Mu~Μ~Nu~Ν~Xi~Ξ~Omicron~Ο~Pi~Π~Rho~Ρ~Sigma~Σ~Tau~Τ~Upsilon~Υ~Phi~Φ~Chi~Χ~Psi~Ψ~Omega~Ω~alpha~α~beta~β~gamma~γ~delta~δ~epsilon~ε~zeta~ζ~eta~η~theta~θ~iota~ι~kappa~κ~lambda~λ~mu~μ~nu~ν~xi~ξ~omicron~ο~pi~π~rho~ρ~sigmaf~ς~sigma~σ~tau~τ~upsilon~υ~phi~φ~chi~χ~psi~ψ~omega~ω~thetasym~ϑ~upsih~ϒ~piv~ϖ~bull~•~hellip~…~prime~′~Prime~″~oline~‾~frasl~⁄~weierp~℘~image~ℑ~real~ℜ~trade~™~alefsym~ℵ~larr~←~uarr~↑~rarr~→~darr~↓~harr~↔~crarr~↵~lArr~⇐~uArr~⇑~rArr~⇒~dArr~⇓~hArr~⇔~forall~∀~part~∂~exist~∃~empty~∅~nabla~∇~isin~∈~notin~∉~ni~∋~prod~∏~sum~∑~minus~−~lowast~∗~radic~√~prop~∝~infin~∞~ang~∠~and~∧~or~∨~cap~∩~cup~∪~int~∫~there4~∴~sim~∼~cong~≅~asymp~≈~ne~≠~equiv~≡~le~≤~ge~≥~sub~⊂~sup~⊃~nsub~⊄~sube~⊆~supe~⊇~oplus~⊕~otimes~⊗~perp~⊥~sdot~⋅~lceil~⌈~rceil~⌉~lfloor~⌊~rfloor~⌋~lang~〈~rang~〉~loz~◊~spades~♠~clubs~♣~hearts~♥~diams~♦~~nbsp~ ~iexcl~¡~cent~¢~pound~£~curren~¤~yen~¥~brvbar~¦~sect~§~uml~¨~copy~©~ordf~ª~laquo~«~not~¬~shy~­~reg~®~macr~¯~deg~°~plusmn~±~sup2~²~sup3~³~acute~´~micro~µ~para~¶~middot~·~cedil~¸~sup1~¹~ordm~º~raquo~»~frac14~¼~frac12~½~frac34~¾~iquest~¿~Agrave~À~Aacute~Á~Acirc~Â~Atilde~Ã~Auml~Ä~Aring~Å~AElig~Æ~Ccedil~Ç~Egrave~È~Eacute~É~Ecirc~Ê~Euml~Ë~Igrave~Ì~Iacute~Í~Icirc~Î~Iuml~Ï~ETH~Ð~Ntilde~Ñ~Ograve~Ò~Oacute~Ó~Ocirc~Ô~Otilde~Õ~Ouml~Ö~times~×~Oslash~Ø~Ugrave~Ù~Uacute~Ú~Ucirc~Û~Uuml~Ü~Yacute~Ý~THORN~Þ~szlig~ß~agrave~à~aacute~á~acirc~â~atilde~ã~auml~ä~aring~å~aelig~æ~ccedil~ç~egrave~è~eacute~é~ecirc~ê~euml~ë~igrave~ì~iacute~í~icirc~î~iuml~ï~eth~ð~ntilde~ñ~ograve~ò~oacute~ó~ocirc~ô~otilde~õ~ouml~ö~divide~÷~oslash~ø~ugrave~ù~uacute~ú~ucirc~û~uuml~ü~yacute~ý~thorn~þ~yuml~ÿ~quot~\"~amp~&~lt~<~gt~>"),on.html5=nn('Abreve~Ă~Acy~А~Afr~𝔄~Amacr~Ā~And~⩓~Aogon~Ą~Aopf~𝔸~ApplyFunction~⁡~Ascr~𝒜~Assign~≔~Backslash~∖~Barv~⫧~Barwed~⌆~Bcy~Б~Because~∵~Bernoullis~ℬ~Bfr~𝔅~Bopf~𝔹~Breve~˘~Bscr~ℬ~Bumpeq~≎~CHcy~Ч~Cacute~Ć~Cap~⋒~CapitalDifferentialD~ⅅ~Cayleys~ℭ~Ccaron~Č~Ccirc~Ĉ~Cconint~∰~Cdot~Ċ~Cedilla~¸~CenterDot~·~Cfr~ℭ~CircleDot~⊙~CircleMinus~⊖~CirclePlus~⊕~CircleTimes~⊗~ClockwiseContourIntegral~∲~CloseCurlyDoubleQuote~”~CloseCurlyQuote~’~Colon~∷~Colone~⩴~Congruent~≡~Conint~∯~ContourIntegral~∮~Copf~ℂ~Coproduct~∐~CounterClockwiseContourIntegral~∳~Cross~⨯~Cscr~𝒞~Cup~⋓~CupCap~≍~DD~ⅅ~DDotrahd~⤑~DJcy~Ђ~DScy~Ѕ~DZcy~Џ~Darr~↡~Dashv~⫤~Dcaron~Ď~Dcy~Д~Del~∇~Dfr~𝔇~DiacriticalAcute~´~DiacriticalDot~˙~DiacriticalDoubleAcute~˝~DiacriticalGrave~`~DiacriticalTilde~˜~Diamond~⋄~DifferentialD~ⅆ~Dopf~𝔻~Dot~¨~DotDot~⃜~DotEqual~≐~DoubleContourIntegral~∯~DoubleDot~¨~DoubleDownArrow~⇓~DoubleLeftArrow~⇐~DoubleLeftRightArrow~⇔~DoubleLeftTee~⫤~DoubleLongLeftArrow~⟸~DoubleLongLeftRightArrow~⟺~DoubleLongRightArrow~⟹~DoubleRightArrow~⇒~DoubleRightTee~⊨~DoubleUpArrow~⇑~DoubleUpDownArrow~⇕~DoubleVerticalBar~∥~DownArrow~↓~DownArrowBar~⤓~DownArrowUpArrow~⇵~DownBreve~̑~DownLeftRightVector~⥐~DownLeftTeeVector~⥞~DownLeftVector~↽~DownLeftVectorBar~⥖~DownRightTeeVector~⥟~DownRightVector~⇁~DownRightVectorBar~⥗~DownTee~⊤~DownTeeArrow~↧~Downarrow~⇓~Dscr~𝒟~Dstrok~Đ~ENG~Ŋ~Ecaron~Ě~Ecy~Э~Edot~Ė~Efr~𝔈~Element~∈~Emacr~Ē~EmptySmallSquare~◻~EmptyVerySmallSquare~▫~Eogon~Ę~Eopf~𝔼~Equal~⩵~EqualTilde~≂~Equilibrium~⇌~Escr~ℰ~Esim~⩳~Exists~∃~ExponentialE~ⅇ~Fcy~Ф~Ffr~𝔉~FilledSmallSquare~◼~FilledVerySmallSquare~▪~Fopf~𝔽~ForAll~∀~Fouriertrf~ℱ~Fscr~ℱ~GJcy~Ѓ~Gammad~Ϝ~Gbreve~Ğ~Gcedil~Ģ~Gcirc~Ĝ~Gcy~Г~Gdot~Ġ~Gfr~𝔊~Gg~⋙~Gopf~𝔾~GreaterEqual~≥~GreaterEqualLess~⋛~GreaterFullEqual~≧~GreaterGreater~⪢~GreaterLess~≷~GreaterSlantEqual~⩾~GreaterTilde~≳~Gscr~𝒢~Gt~≫~HARDcy~Ъ~Hacek~ˇ~Hat~^~Hcirc~Ĥ~Hfr~ℌ~HilbertSpace~ℋ~Hopf~ℍ~HorizontalLine~─~Hscr~ℋ~Hstrok~Ħ~HumpDownHump~≎~HumpEqual~≏~IEcy~Е~IJlig~Ĳ~IOcy~Ё~Icy~И~Idot~İ~Ifr~ℑ~Im~ℑ~Imacr~Ī~ImaginaryI~ⅈ~Implies~⇒~Int~∬~Integral~∫~Intersection~⋂~InvisibleComma~⁣~InvisibleTimes~⁢~Iogon~Į~Iopf~𝕀~Iscr~ℐ~Itilde~Ĩ~Iukcy~І~Jcirc~Ĵ~Jcy~Й~Jfr~𝔍~Jopf~𝕁~Jscr~𝒥~Jsercy~Ј~Jukcy~Є~KHcy~Х~KJcy~Ќ~Kcedil~Ķ~Kcy~К~Kfr~𝔎~Kopf~𝕂~Kscr~𝒦~LJcy~Љ~Lacute~Ĺ~Lang~⟪~Laplacetrf~ℒ~Larr~↞~Lcaron~Ľ~Lcedil~Ļ~Lcy~Л~LeftAngleBracket~⟨~LeftArrow~←~LeftArrowBar~⇤~LeftArrowRightArrow~⇆~LeftCeiling~⌈~LeftDoubleBracket~⟦~LeftDownTeeVector~⥡~LeftDownVector~⇃~LeftDownVectorBar~⥙~LeftFloor~⌊~LeftRightArrow~↔~LeftRightVector~⥎~LeftTee~⊣~LeftTeeArrow~↤~LeftTeeVector~⥚~LeftTriangle~⊲~LeftTriangleBar~⧏~LeftTriangleEqual~⊴~LeftUpDownVector~⥑~LeftUpTeeVector~⥠~LeftUpVector~↿~LeftUpVectorBar~⥘~LeftVector~↼~LeftVectorBar~⥒~Leftarrow~⇐~Leftrightarrow~⇔~LessEqualGreater~⋚~LessFullEqual~≦~LessGreater~≶~LessLess~⪡~LessSlantEqual~⩽~LessTilde~≲~Lfr~𝔏~Ll~⋘~Lleftarrow~⇚~Lmidot~Ŀ~LongLeftArrow~⟵~LongLeftRightArrow~⟷~LongRightArrow~⟶~Longleftarrow~⟸~Longleftrightarrow~⟺~Longrightarrow~⟹~Lopf~𝕃~LowerLeftArrow~↙~LowerRightArrow~↘~Lscr~ℒ~Lsh~↰~Lstrok~Ł~Lt~≪~Map~⤅~Mcy~М~MediumSpace~ ~Mellintrf~ℳ~Mfr~𝔐~MinusPlus~∓~Mopf~𝕄~Mscr~ℳ~NJcy~Њ~Nacute~Ń~Ncaron~Ň~Ncedil~Ņ~Ncy~Н~NegativeMediumSpace~​~NegativeThickSpace~​~NegativeThinSpace~​~NegativeVeryThinSpace~​~NestedGreaterGreater~≫~NestedLessLess~≪~NewLine~\n~Nfr~𝔑~NoBreak~⁠~NonBreakingSpace~ ~Nopf~ℕ~Not~⫬~NotCongruent~≢~NotCupCap~≭~NotDoubleVerticalBar~∦~NotElement~∉~NotEqual~≠~NotEqualTilde~≂̸~NotExists~∄~NotGreater~≯~NotGreaterEqual~≱~NotGreaterFullEqual~≧̸~NotGreaterGreater~≫̸~NotGreaterLess~≹~NotGreaterSlantEqual~⩾̸~NotGreaterTilde~≵~NotHumpDownHump~≎̸~NotHumpEqual~≏̸~NotLeftTriangle~⋪~NotLeftTriangleBar~⧏̸~NotLeftTriangleEqual~⋬~NotLess~≮~NotLessEqual~≰~NotLessGreater~≸~NotLessLess~≪̸~NotLessSlantEqual~⩽̸~NotLessTilde~≴~NotNestedGreaterGreater~⪢̸~NotNestedLessLess~⪡̸~NotPrecedes~⊀~NotPrecedesEqual~⪯̸~NotPrecedesSlantEqual~⋠~NotReverseElement~∌~NotRightTriangle~⋫~NotRightTriangleBar~⧐̸~NotRightTriangleEqual~⋭~NotSquareSubset~⊏̸~NotSquareSubsetEqual~⋢~NotSquareSuperset~⊐̸~NotSquareSupersetEqual~⋣~NotSubset~⊂⃒~NotSubsetEqual~⊈~NotSucceeds~⊁~NotSucceedsEqual~⪰̸~NotSucceedsSlantEqual~⋡~NotSucceedsTilde~≿̸~NotSuperset~⊃⃒~NotSupersetEqual~⊉~NotTilde~≁~NotTildeEqual~≄~NotTildeFullEqual~≇~NotTildeTilde~≉~NotVerticalBar~∤~Nscr~𝒩~Ocy~О~Odblac~Ő~Ofr~𝔒~Omacr~Ō~Oopf~𝕆~OpenCurlyDoubleQuote~“~OpenCurlyQuote~‘~Or~⩔~Oscr~𝒪~Otimes~⨷~OverBar~‾~OverBrace~⏞~OverBracket~⎴~OverParenthesis~⏜~PartialD~∂~Pcy~П~Pfr~𝔓~PlusMinus~±~Poincareplane~ℌ~Popf~ℙ~Pr~⪻~Precedes~≺~PrecedesEqual~⪯~PrecedesSlantEqual~≼~PrecedesTilde~≾~Product~∏~Proportion~∷~Proportional~∝~Pscr~𝒫~Qfr~𝔔~Qopf~ℚ~Qscr~𝒬~RBarr~⤐~Racute~Ŕ~Rang~⟫~Rarr~↠~Rarrtl~⤖~Rcaron~Ř~Rcedil~Ŗ~Rcy~Р~Re~ℜ~ReverseElement~∋~ReverseEquilibrium~⇋~ReverseUpEquilibrium~⥯~Rfr~ℜ~RightAngleBracket~⟩~RightArrow~→~RightArrowBar~⇥~RightArrowLeftArrow~⇄~RightCeiling~⌉~RightDoubleBracket~⟧~RightDownTeeVector~⥝~RightDownVector~⇂~RightDownVectorBar~⥕~RightFloor~⌋~RightTee~⊢~RightTeeArrow~↦~RightTeeVector~⥛~RightTriangle~⊳~RightTriangleBar~⧐~RightTriangleEqual~⊵~RightUpDownVector~⥏~RightUpTeeVector~⥜~RightUpVector~↾~RightUpVectorBar~⥔~RightVector~⇀~RightVectorBar~⥓~Rightarrow~⇒~Ropf~ℝ~RoundImplies~⥰~Rrightarrow~⇛~Rscr~ℛ~Rsh~↱~RuleDelayed~⧴~SHCHcy~Щ~SHcy~Ш~SOFTcy~Ь~Sacute~Ś~Sc~⪼~Scedil~Ş~Scirc~Ŝ~Scy~С~Sfr~𝔖~ShortDownArrow~↓~ShortLeftArrow~←~ShortRightArrow~→~ShortUpArrow~↑~SmallCircle~∘~Sopf~𝕊~Sqrt~√~Square~□~SquareIntersection~⊓~SquareSubset~⊏~SquareSubsetEqual~⊑~SquareSuperset~⊐~SquareSupersetEqual~⊒~SquareUnion~⊔~Sscr~𝒮~Star~⋆~Sub~⋐~Subset~⋐~SubsetEqual~⊆~Succeeds~≻~SucceedsEqual~⪰~SucceedsSlantEqual~≽~SucceedsTilde~≿~SuchThat~∋~Sum~∑~Sup~⋑~Superset~⊃~SupersetEqual~⊇~Supset~⋑~TRADE~™~TSHcy~Ћ~TScy~Ц~Tab~\t~Tcaron~Ť~Tcedil~Ţ~Tcy~Т~Tfr~𝔗~Therefore~∴~ThickSpace~  ~ThinSpace~ ~Tilde~∼~TildeEqual~≃~TildeFullEqual~≅~TildeTilde~≈~Topf~𝕋~TripleDot~⃛~Tscr~𝒯~Tstrok~Ŧ~Uarr~↟~Uarrocir~⥉~Ubrcy~Ў~Ubreve~Ŭ~Ucy~У~Udblac~Ű~Ufr~𝔘~Umacr~Ū~UnderBar~_~UnderBrace~⏟~UnderBracket~⎵~UnderParenthesis~⏝~Union~⋃~UnionPlus~⊎~Uogon~Ų~Uopf~𝕌~UpArrow~↑~UpArrowBar~⤒~UpArrowDownArrow~⇅~UpDownArrow~↕~UpEquilibrium~⥮~UpTee~⊥~UpTeeArrow~↥~Uparrow~⇑~Updownarrow~⇕~UpperLeftArrow~↖~UpperRightArrow~↗~Upsi~ϒ~Uring~Ů~Uscr~𝒰~Utilde~Ũ~VDash~⊫~Vbar~⫫~Vcy~В~Vdash~⊩~Vdashl~⫦~Vee~⋁~Verbar~‖~Vert~‖~VerticalBar~∣~VerticalLine~|~VerticalSeparator~❘~VerticalTilde~≀~VeryThinSpace~ ~Vfr~𝔙~Vopf~𝕍~Vscr~𝒱~Vvdash~⊪~Wcirc~Ŵ~Wedge~⋀~Wfr~𝔚~Wopf~𝕎~Wscr~𝒲~Xfr~𝔛~Xopf~𝕏~Xscr~𝒳~YAcy~Я~YIcy~Ї~YUcy~Ю~Ycirc~Ŷ~Ycy~Ы~Yfr~𝔜~Yopf~𝕐~Yscr~𝒴~ZHcy~Ж~Zacute~Ź~Zcaron~Ž~Zcy~З~Zdot~Ż~ZeroWidthSpace~​~Zfr~ℨ~Zopf~ℤ~Zscr~𝒵~abreve~ă~ac~∾~acE~∾̳~acd~∿~acy~а~af~⁡~afr~𝔞~aleph~ℵ~amacr~ā~amalg~⨿~andand~⩕~andd~⩜~andslope~⩘~andv~⩚~ange~⦤~angle~∠~angmsd~∡~angmsdaa~⦨~angmsdab~⦩~angmsdac~⦪~angmsdad~⦫~angmsdae~⦬~angmsdaf~⦭~angmsdag~⦮~angmsdah~⦯~angrt~∟~angrtvb~⊾~angrtvbd~⦝~angsph~∢~angst~Å~angzarr~⍼~aogon~ą~aopf~𝕒~ap~≈~apE~⩰~apacir~⩯~ape~≊~apid~≋~approx~≈~approxeq~≊~ascr~𝒶~ast~*~asympeq~≍~awconint~∳~awint~⨑~bNot~⫭~backcong~≌~backepsilon~϶~backprime~‵~backsim~∽~backsimeq~⋍~barvee~⊽~barwed~⌅~barwedge~⌅~bbrk~⎵~bbrktbrk~⎶~bcong~≌~bcy~б~becaus~∵~because~∵~bemptyv~⦰~bepsi~϶~bernou~ℬ~beth~ℶ~between~≬~bfr~𝔟~bigcap~⋂~bigcirc~◯~bigcup~⋃~bigodot~⨀~bigoplus~⨁~bigotimes~⨂~bigsqcup~⨆~bigstar~★~bigtriangledown~▽~bigtriangleup~△~biguplus~⨄~bigvee~⋁~bigwedge~⋀~bkarow~⤍~blacklozenge~⧫~blacksquare~▪~blacktriangle~▴~blacktriangledown~▾~blacktriangleleft~◂~blacktriangleright~▸~blank~␣~blk12~▒~blk14~░~blk34~▓~block~█~bne~=⃥~bnequiv~≡⃥~bnot~⌐~bopf~𝕓~bot~⊥~bottom~⊥~bowtie~⋈~boxDL~╗~boxDR~╔~boxDl~╖~boxDr~╓~boxH~═~boxHD~╦~boxHU~╩~boxHd~╤~boxHu~╧~boxUL~╝~boxUR~╚~boxUl~╜~boxUr~╙~boxV~║~boxVH~╬~boxVL~╣~boxVR~╠~boxVh~╫~boxVl~╢~boxVr~╟~boxbox~⧉~boxdL~╕~boxdR~╒~boxdl~┐~boxdr~┌~boxh~─~boxhD~╥~boxhU~╨~boxhd~┬~boxhu~┴~boxminus~⊟~boxplus~⊞~boxtimes~⊠~boxuL~╛~boxuR~╘~boxul~┘~boxur~└~boxv~│~boxvH~╪~boxvL~╡~boxvR~╞~boxvh~┼~boxvl~┤~boxvr~├~bprime~‵~breve~˘~bscr~𝒷~bsemi~⁏~bsim~∽~bsime~⋍~bsol~\\~bsolb~⧅~bsolhsub~⟈~bullet~•~bump~≎~bumpE~⪮~bumpe~≏~bumpeq~≏~cacute~ć~capand~⩄~capbrcup~⩉~capcap~⩋~capcup~⩇~capdot~⩀~caps~∩︀~caret~⁁~caron~ˇ~ccaps~⩍~ccaron~č~ccirc~ĉ~ccups~⩌~ccupssm~⩐~cdot~ċ~cemptyv~⦲~centerdot~·~cfr~𝔠~chcy~ч~check~✓~checkmark~✓~cir~○~cirE~⧃~circeq~≗~circlearrowleft~↺~circlearrowright~↻~circledR~®~circledS~Ⓢ~circledast~⊛~circledcirc~⊚~circleddash~⊝~cire~≗~cirfnint~⨐~cirmid~⫯~cirscir~⧂~clubsuit~♣~colon~:~colone~≔~coloneq~≔~comma~,~commat~@~comp~∁~compfn~∘~complement~∁~complexes~ℂ~congdot~⩭~conint~∮~copf~𝕔~coprod~∐~copysr~℗~cross~✗~cscr~𝒸~csub~⫏~csube~⫑~csup~⫐~csupe~⫒~ctdot~⋯~cudarrl~⤸~cudarrr~⤵~cuepr~⋞~cuesc~⋟~cularr~↶~cularrp~⤽~cupbrcap~⩈~cupcap~⩆~cupcup~⩊~cupdot~⊍~cupor~⩅~cups~∪︀~curarr~↷~curarrm~⤼~curlyeqprec~⋞~curlyeqsucc~⋟~curlyvee~⋎~curlywedge~⋏~curvearrowleft~↶~curvearrowright~↷~cuvee~⋎~cuwed~⋏~cwconint~∲~cwint~∱~cylcty~⌭~dHar~⥥~daleth~ℸ~dash~‐~dashv~⊣~dbkarow~⤏~dblac~˝~dcaron~ď~dcy~д~dd~ⅆ~ddagger~‡~ddarr~⇊~ddotseq~⩷~demptyv~⦱~dfisht~⥿~dfr~𝔡~dharl~⇃~dharr~⇂~diam~⋄~diamond~⋄~diamondsuit~♦~die~¨~digamma~ϝ~disin~⋲~div~÷~divideontimes~⋇~divonx~⋇~djcy~ђ~dlcorn~⌞~dlcrop~⌍~dollar~$~dopf~𝕕~dot~˙~doteq~≐~doteqdot~≑~dotminus~∸~dotplus~∔~dotsquare~⊡~doublebarwedge~⌆~downarrow~↓~downdownarrows~⇊~downharpoonleft~⇃~downharpoonright~⇂~drbkarow~⤐~drcorn~⌟~drcrop~⌌~dscr~𝒹~dscy~ѕ~dsol~⧶~dstrok~đ~dtdot~⋱~dtri~▿~dtrif~▾~duarr~⇵~duhar~⥯~dwangle~⦦~dzcy~џ~dzigrarr~⟿~eDDot~⩷~eDot~≑~easter~⩮~ecaron~ě~ecir~≖~ecolon~≕~ecy~э~edot~ė~ee~ⅇ~efDot~≒~efr~𝔢~eg~⪚~egs~⪖~egsdot~⪘~el~⪙~elinters~⏧~ell~ℓ~els~⪕~elsdot~⪗~emacr~ē~emptyset~∅~emptyv~∅~emsp13~ ~emsp14~ ~eng~ŋ~eogon~ę~eopf~𝕖~epar~⋕~eparsl~⧣~eplus~⩱~epsi~ε~epsiv~ϵ~eqcirc~≖~eqcolon~≕~eqsim~≂~eqslantgtr~⪖~eqslantless~⪕~equals~=~equest~≟~equivDD~⩸~eqvparsl~⧥~erDot~≓~erarr~⥱~escr~ℯ~esdot~≐~esim~≂~excl~!~expectation~ℰ~exponentiale~ⅇ~fallingdotseq~≒~fcy~ф~female~♀~ffilig~ﬃ~fflig~ﬀ~ffllig~ﬄ~ffr~𝔣~filig~ﬁ~fjlig~fj~flat~♭~fllig~ﬂ~fltns~▱~fopf~𝕗~fork~⋔~forkv~⫙~fpartint~⨍~frac13~⅓~frac15~⅕~frac16~⅙~frac18~⅛~frac23~⅔~frac25~⅖~frac35~⅗~frac38~⅜~frac45~⅘~frac56~⅚~frac58~⅝~frac78~⅞~frown~⌢~fscr~𝒻~gE~≧~gEl~⪌~gacute~ǵ~gammad~ϝ~gap~⪆~gbreve~ğ~gcirc~ĝ~gcy~г~gdot~ġ~gel~⋛~geq~≥~geqq~≧~geqslant~⩾~ges~⩾~gescc~⪩~gesdot~⪀~gesdoto~⪂~gesdotol~⪄~gesl~⋛︀~gesles~⪔~gfr~𝔤~gg~≫~ggg~⋙~gimel~ℷ~gjcy~ѓ~gl~≷~glE~⪒~gla~⪥~glj~⪤~gnE~≩~gnap~⪊~gnapprox~⪊~gne~⪈~gneq~⪈~gneqq~≩~gnsim~⋧~gopf~𝕘~grave~`~gscr~ℊ~gsim~≳~gsime~⪎~gsiml~⪐~gtcc~⪧~gtcir~⩺~gtdot~⋗~gtlPar~⦕~gtquest~⩼~gtrapprox~⪆~gtrarr~⥸~gtrdot~⋗~gtreqless~⋛~gtreqqless~⪌~gtrless~≷~gtrsim~≳~gvertneqq~≩︀~gvnE~≩︀~hairsp~ ~half~½~hamilt~ℋ~hardcy~ъ~harrcir~⥈~harrw~↭~hbar~ℏ~hcirc~ĥ~heartsuit~♥~hercon~⊹~hfr~𝔥~hksearow~⤥~hkswarow~⤦~hoarr~⇿~homtht~∻~hookleftarrow~↩~hookrightarrow~↪~hopf~𝕙~horbar~―~hscr~𝒽~hslash~ℏ~hstrok~ħ~hybull~⁃~hyphen~‐~ic~⁣~icy~и~iecy~е~iff~⇔~ifr~𝔦~ii~ⅈ~iiiint~⨌~iiint~∭~iinfin~⧜~iiota~℩~ijlig~ĳ~imacr~ī~imagline~ℐ~imagpart~ℑ~imath~ı~imof~⊷~imped~Ƶ~in~∈~incare~℅~infintie~⧝~inodot~ı~intcal~⊺~integers~ℤ~intercal~⊺~intlarhk~⨗~intprod~⨼~iocy~ё~iogon~į~iopf~𝕚~iprod~⨼~iscr~𝒾~isinE~⋹~isindot~⋵~isins~⋴~isinsv~⋳~isinv~∈~it~⁢~itilde~ĩ~iukcy~і~jcirc~ĵ~jcy~й~jfr~𝔧~jmath~ȷ~jopf~𝕛~jscr~𝒿~jsercy~ј~jukcy~є~kappav~ϰ~kcedil~ķ~kcy~к~kfr~𝔨~kgreen~ĸ~khcy~х~kjcy~ќ~kopf~𝕜~kscr~𝓀~lAarr~⇚~lAtail~⤛~lBarr~⤎~lE~≦~lEg~⪋~lHar~⥢~lacute~ĺ~laemptyv~⦴~lagran~ℒ~langd~⦑~langle~⟨~lap~⪅~larrb~⇤~larrbfs~⤟~larrfs~⤝~larrhk~↩~larrlp~↫~larrpl~⤹~larrsim~⥳~larrtl~↢~lat~⪫~latail~⤙~late~⪭~lates~⪭︀~lbarr~⤌~lbbrk~❲~lbrace~{~lbrack~[~lbrke~⦋~lbrksld~⦏~lbrkslu~⦍~lcaron~ľ~lcedil~ļ~lcub~{~lcy~л~ldca~⤶~ldquor~„~ldrdhar~⥧~ldrushar~⥋~ldsh~↲~leftarrow~←~leftarrowtail~↢~leftharpoondown~↽~leftharpoonup~↼~leftleftarrows~⇇~leftrightarrow~↔~leftrightarrows~⇆~leftrightharpoons~⇋~leftrightsquigarrow~↭~leftthreetimes~⋋~leg~⋚~leq~≤~leqq~≦~leqslant~⩽~les~⩽~lescc~⪨~lesdot~⩿~lesdoto~⪁~lesdotor~⪃~lesg~⋚︀~lesges~⪓~lessapprox~⪅~lessdot~⋖~lesseqgtr~⋚~lesseqqgtr~⪋~lessgtr~≶~lesssim~≲~lfisht~⥼~lfr~𝔩~lg~≶~lgE~⪑~lhard~↽~lharu~↼~lharul~⥪~lhblk~▄~ljcy~љ~ll~≪~llarr~⇇~llcorner~⌞~llhard~⥫~lltri~◺~lmidot~ŀ~lmoust~⎰~lmoustache~⎰~lnE~≨~lnap~⪉~lnapprox~⪉~lne~⪇~lneq~⪇~lneqq~≨~lnsim~⋦~loang~⟬~loarr~⇽~lobrk~⟦~longleftarrow~⟵~longleftrightarrow~⟷~longmapsto~⟼~longrightarrow~⟶~looparrowleft~↫~looparrowright~↬~lopar~⦅~lopf~𝕝~loplus~⨭~lotimes~⨴~lowbar~_~lozenge~◊~lozf~⧫~lpar~(~lparlt~⦓~lrarr~⇆~lrcorner~⌟~lrhar~⇋~lrhard~⥭~lrtri~⊿~lscr~𝓁~lsh~↰~lsim~≲~lsime~⪍~lsimg~⪏~lsqb~[~lsquor~‚~lstrok~ł~ltcc~⪦~ltcir~⩹~ltdot~⋖~lthree~⋋~ltimes~⋉~ltlarr~⥶~ltquest~⩻~ltrPar~⦖~ltri~◃~ltrie~⊴~ltrif~◂~lurdshar~⥊~luruhar~⥦~lvertneqq~≨︀~lvnE~≨︀~mDDot~∺~male~♂~malt~✠~maltese~✠~map~↦~mapsto~↦~mapstodown~↧~mapstoleft~↤~mapstoup~↥~marker~▮~mcomma~⨩~mcy~м~measuredangle~∡~mfr~𝔪~mho~℧~mid~∣~midast~*~midcir~⫰~minusb~⊟~minusd~∸~minusdu~⨪~mlcp~⫛~mldr~…~mnplus~∓~models~⊧~mopf~𝕞~mp~∓~mscr~𝓂~mstpos~∾~multimap~⊸~mumap~⊸~nGg~⋙̸~nGt~≫⃒~nGtv~≫̸~nLeftarrow~⇍~nLeftrightarrow~⇎~nLl~⋘̸~nLt~≪⃒~nLtv~≪̸~nRightarrow~⇏~nVDash~⊯~nVdash~⊮~nacute~ń~nang~∠⃒~nap~≉~napE~⩰̸~napid~≋̸~napos~ŉ~napprox~≉~natur~♮~natural~♮~naturals~ℕ~nbump~≎̸~nbumpe~≏̸~ncap~⩃~ncaron~ň~ncedil~ņ~ncong~≇~ncongdot~⩭̸~ncup~⩂~ncy~н~neArr~⇗~nearhk~⤤~nearr~↗~nearrow~↗~nedot~≐̸~nequiv~≢~nesear~⤨~nesim~≂̸~nexist~∄~nexists~∄~nfr~𝔫~ngE~≧̸~nge~≱~ngeq~≱~ngeqq~≧̸~ngeqslant~⩾̸~nges~⩾̸~ngsim~≵~ngt~≯~ngtr~≯~nhArr~⇎~nharr~↮~nhpar~⫲~nis~⋼~nisd~⋺~niv~∋~njcy~њ~nlArr~⇍~nlE~≦̸~nlarr~↚~nldr~‥~nle~≰~nleftarrow~↚~nleftrightarrow~↮~nleq~≰~nleqq~≦̸~nleqslant~⩽̸~nles~⩽̸~nless~≮~nlsim~≴~nlt~≮~nltri~⋪~nltrie~⋬~nmid~∤~nopf~𝕟~notinE~⋹̸~notindot~⋵̸~notinva~∉~notinvb~⋷~notinvc~⋶~notni~∌~notniva~∌~notnivb~⋾~notnivc~⋽~npar~∦~nparallel~∦~nparsl~⫽⃥~npart~∂̸~npolint~⨔~npr~⊀~nprcue~⋠~npre~⪯̸~nprec~⊀~npreceq~⪯̸~nrArr~⇏~nrarr~↛~nrarrc~⤳̸~nrarrw~↝̸~nrightarrow~↛~nrtri~⋫~nrtrie~⋭~nsc~⊁~nsccue~⋡~nsce~⪰̸~nscr~𝓃~nshortmid~∤~nshortparallel~∦~nsim~≁~nsime~≄~nsimeq~≄~nsmid~∤~nspar~∦~nsqsube~⋢~nsqsupe~⋣~nsubE~⫅̸~nsube~⊈~nsubset~⊂⃒~nsubseteq~⊈~nsubseteqq~⫅̸~nsucc~⊁~nsucceq~⪰̸~nsup~⊅~nsupE~⫆̸~nsupe~⊉~nsupset~⊃⃒~nsupseteq~⊉~nsupseteqq~⫆̸~ntgl~≹~ntlg~≸~ntriangleleft~⋪~ntrianglelefteq~⋬~ntriangleright~⋫~ntrianglerighteq~⋭~num~#~numero~№~numsp~ ~nvDash~⊭~nvHarr~⤄~nvap~≍⃒~nvdash~⊬~nvge~≥⃒~nvgt~>⃒~nvinfin~⧞~nvlArr~⤂~nvle~≤⃒~nvlt~<⃒~nvltrie~⊴⃒~nvrArr~⤃~nvrtrie~⊵⃒~nvsim~∼⃒~nwArr~⇖~nwarhk~⤣~nwarr~↖~nwarrow~↖~nwnear~⤧~oS~Ⓢ~oast~⊛~ocir~⊚~ocy~о~odash~⊝~odblac~ő~odiv~⨸~odot~⊙~odsold~⦼~ofcir~⦿~ofr~𝔬~ogon~˛~ogt~⧁~ohbar~⦵~ohm~Ω~oint~∮~olarr~↺~olcir~⦾~olcross~⦻~olt~⧀~omacr~ō~omid~⦶~ominus~⊖~oopf~𝕠~opar~⦷~operp~⦹~orarr~↻~ord~⩝~order~ℴ~orderof~ℴ~origof~⊶~oror~⩖~orslope~⩗~orv~⩛~oscr~ℴ~osol~⊘~otimesas~⨶~ovbar~⌽~par~∥~parallel~∥~parsim~⫳~parsl~⫽~pcy~п~percnt~%~period~.~pertenk~‱~pfr~𝔭~phiv~ϕ~phmmat~ℳ~phone~☎~pitchfork~⋔~planck~ℏ~planckh~ℎ~plankv~ℏ~plus~+~plusacir~⨣~plusb~⊞~pluscir~⨢~plusdo~∔~plusdu~⨥~pluse~⩲~plussim~⨦~plustwo~⨧~pm~±~pointint~⨕~popf~𝕡~pr~≺~prE~⪳~prap~⪷~prcue~≼~pre~⪯~prec~≺~precapprox~⪷~preccurlyeq~≼~preceq~⪯~precnapprox~⪹~precneqq~⪵~precnsim~⋨~precsim~≾~primes~ℙ~prnE~⪵~prnap~⪹~prnsim~⋨~profalar~⌮~profline~⌒~profsurf~⌓~propto~∝~prsim~≾~prurel~⊰~pscr~𝓅~puncsp~ ~qfr~𝔮~qint~⨌~qopf~𝕢~qprime~⁗~qscr~𝓆~quaternions~ℍ~quatint~⨖~quest~?~questeq~≟~rAarr~⇛~rAtail~⤜~rBarr~⤏~rHar~⥤~race~∽̱~racute~ŕ~raemptyv~⦳~rangd~⦒~range~⦥~rangle~⟩~rarrap~⥵~rarrb~⇥~rarrbfs~⤠~rarrc~⤳~rarrfs~⤞~rarrhk~↪~rarrlp~↬~rarrpl~⥅~rarrsim~⥴~rarrtl~↣~rarrw~↝~ratail~⤚~ratio~∶~rationals~ℚ~rbarr~⤍~rbbrk~❳~rbrace~}~rbrack~]~rbrke~⦌~rbrksld~⦎~rbrkslu~⦐~rcaron~ř~rcedil~ŗ~rcub~}~rcy~р~rdca~⤷~rdldhar~⥩~rdquor~”~rdsh~↳~realine~ℛ~realpart~ℜ~reals~ℝ~rect~▭~rfisht~⥽~rfr~𝔯~rhard~⇁~rharu~⇀~rharul~⥬~rhov~ϱ~rightarrow~→~rightarrowtail~↣~rightharpoondown~⇁~rightharpoonup~⇀~rightleftarrows~⇄~rightleftharpoons~⇌~rightrightarrows~⇉~rightsquigarrow~↝~rightthreetimes~⋌~ring~˚~risingdotseq~≓~rlarr~⇄~rlhar~⇌~rmoust~⎱~rmoustache~⎱~rnmid~⫮~roang~⟭~roarr~⇾~robrk~⟧~ropar~⦆~ropf~𝕣~roplus~⨮~rotimes~⨵~rpar~)~rpargt~⦔~rppolint~⨒~rrarr~⇉~rscr~𝓇~rsh~↱~rsqb~]~rsquor~’~rthree~⋌~rtimes~⋊~rtri~▹~rtrie~⊵~rtrif~▸~rtriltri~⧎~ruluhar~⥨~rx~℞~sacute~ś~sc~≻~scE~⪴~scap~⪸~sccue~≽~sce~⪰~scedil~ş~scirc~ŝ~scnE~⪶~scnap~⪺~scnsim~⋩~scpolint~⨓~scsim~≿~scy~с~sdotb~⊡~sdote~⩦~seArr~⇘~searhk~⤥~searr~↘~searrow~↘~semi~;~seswar~⤩~setminus~∖~setmn~∖~sext~✶~sfr~𝔰~sfrown~⌢~sharp~♯~shchcy~щ~shcy~ш~shortmid~∣~shortparallel~∥~sigmav~ς~simdot~⩪~sime~≃~simeq~≃~simg~⪞~simgE~⪠~siml~⪝~simlE~⪟~simne~≆~simplus~⨤~simrarr~⥲~slarr~←~smallsetminus~∖~smashp~⨳~smeparsl~⧤~smid~∣~smile~⌣~smt~⪪~smte~⪬~smtes~⪬︀~softcy~ь~sol~/~solb~⧄~solbar~⌿~sopf~𝕤~spadesuit~♠~spar~∥~sqcap~⊓~sqcaps~⊓︀~sqcup~⊔~sqcups~⊔︀~sqsub~⊏~sqsube~⊑~sqsubset~⊏~sqsubseteq~⊑~sqsup~⊐~sqsupe~⊒~sqsupset~⊐~sqsupseteq~⊒~squ~□~square~□~squarf~▪~squf~▪~srarr~→~sscr~𝓈~ssetmn~∖~ssmile~⌣~sstarf~⋆~star~☆~starf~★~straightepsilon~ϵ~straightphi~ϕ~strns~¯~subE~⫅~subdot~⪽~subedot~⫃~submult~⫁~subnE~⫋~subne~⊊~subplus~⪿~subrarr~⥹~subset~⊂~subseteq~⊆~subseteqq~⫅~subsetneq~⊊~subsetneqq~⫋~subsim~⫇~subsub~⫕~subsup~⫓~succ~≻~succapprox~⪸~succcurlyeq~≽~succeq~⪰~succnapprox~⪺~succneqq~⪶~succnsim~⋩~succsim~≿~sung~♪~supE~⫆~supdot~⪾~supdsub~⫘~supedot~⫄~suphsol~⟉~suphsub~⫗~suplarr~⥻~supmult~⫂~supnE~⫌~supne~⊋~supplus~⫀~supset~⊃~supseteq~⊇~supseteqq~⫆~supsetneq~⊋~supsetneqq~⫌~supsim~⫈~supsub~⫔~supsup~⫖~swArr~⇙~swarhk~⤦~swarr~↙~swarrow~↙~swnwar~⤪~target~⌖~tbrk~⎴~tcaron~ť~tcedil~ţ~tcy~т~tdot~⃛~telrec~⌕~tfr~𝔱~therefore~∴~thetav~ϑ~thickapprox~≈~thicksim~∼~thkap~≈~thksim~∼~timesb~⊠~timesbar~⨱~timesd~⨰~tint~∭~toea~⤨~top~⊤~topbot~⌶~topcir~⫱~topf~𝕥~topfork~⫚~tosa~⤩~tprime~‴~triangle~▵~triangledown~▿~triangleleft~◃~trianglelefteq~⊴~triangleq~≜~triangleright~▹~trianglerighteq~⊵~tridot~◬~trie~≜~triminus~⨺~triplus~⨹~trisb~⧍~tritime~⨻~trpezium~⏢~tscr~𝓉~tscy~ц~tshcy~ћ~tstrok~ŧ~twixt~≬~twoheadleftarrow~↞~twoheadrightarrow~↠~uHar~⥣~ubrcy~ў~ubreve~ŭ~ucy~у~udarr~⇅~udblac~ű~udhar~⥮~ufisht~⥾~ufr~𝔲~uharl~↿~uharr~↾~uhblk~▀~ulcorn~⌜~ulcorner~⌜~ulcrop~⌏~ultri~◸~umacr~ū~uogon~ų~uopf~𝕦~uparrow~↑~updownarrow~↕~upharpoonleft~↿~upharpoonright~↾~uplus~⊎~upsi~υ~upuparrows~⇈~urcorn~⌝~urcorner~⌝~urcrop~⌎~uring~ů~urtri~◹~uscr~𝓊~utdot~⋰~utilde~ũ~utri~▵~utrif~▴~uuarr~⇈~uwangle~⦧~vArr~⇕~vBar~⫨~vBarv~⫩~vDash~⊨~vangrt~⦜~varepsilon~ϵ~varkappa~ϰ~varnothing~∅~varphi~ϕ~varpi~ϖ~varpropto~∝~varr~↕~varrho~ϱ~varsigma~ς~varsubsetneq~⊊︀~varsubsetneqq~⫋︀~varsupsetneq~⊋︀~varsupsetneqq~⫌︀~vartheta~ϑ~vartriangleleft~⊲~vartriangleright~⊳~vcy~в~vdash~⊢~vee~∨~veebar~⊻~veeeq~≚~vellip~⋮~verbar~|~vert~|~vfr~𝔳~vltri~⊲~vnsub~⊂⃒~vnsup~⊃⃒~vopf~𝕧~vprop~∝~vrtri~⊳~vscr~𝓋~vsubnE~⫋︀~vsubne~⊊︀~vsupnE~⫌︀~vsupne~⊋︀~vzigzag~⦚~wcirc~ŵ~wedbar~⩟~wedge~∧~wedgeq~≙~wfr~𝔴~wopf~𝕨~wp~℘~wr~≀~wreath~≀~wscr~𝓌~xcap~⋂~xcirc~◯~xcup~⋃~xdtri~▽~xfr~𝔵~xhArr~⟺~xharr~⟷~xlArr~⟸~xlarr~⟵~xmap~⟼~xnis~⋻~xodot~⨀~xopf~𝕩~xoplus~⨁~xotime~⨂~xrArr~⟹~xrarr~⟶~xscr~𝓍~xsqcup~⨆~xuplus~⨄~xutri~△~xvee~⋁~xwedge~⋀~yacy~я~ycirc~ŷ~ycy~ы~yfr~𝔶~yicy~ї~yopf~𝕪~yscr~𝓎~yucy~ю~zacute~ź~zcaron~ž~zcy~з~zdot~ż~zeetrf~ℨ~zfr~𝔷~zhcy~ж~zigrarr~⇝~zopf~𝕫~zscr~𝓏~~AMP~&~COPY~©~GT~>~LT~<~QUOT~"~REG~®',on.html4);var sn={0:65533,128:8364,130:8218,131:402,132:8222,133:8230,134:8224,135:8225,136:710,137:8240,138:352,139:8249,140:338,142:381,145:8216,146:8217,147:8220,148:8221,149:8226,150:8211,151:8212,152:732,153:8482,154:353,155:8250,156:339,158:382,159:376},an=String.fromCodePoint||function(e){return String.fromCharCode(Math.floor((e-65536)/1024)+55296,(e-65536)%1024+56320)},ln=function(){return ln=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ln.apply(this,arguments)},cn=ln(ln({},on),{all:on.html5}),un={scope:"body",level:"all"},dn=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+);/g,hn=/&(?:#\d+|#[xX][\da-fA-F]+|[0-9a-zA-Z]+)[;=]?/g,pn={xml:{strict:dn,attribute:hn,body:rn.xml},html4:{strict:dn,attribute:hn,body:rn.html4},html5:{strict:dn,attribute:hn,body:rn.html5}},mn=ln(ln({},pn),{all:pn.html5}),fn=String.fromCharCode,gn=fn(65533);function yn(e,t){var n=void 0===t?un:t,r=n.level,i=void 0===r?"all":r,o=n.scope,s=void 0===o?"xml"===i?"strict":"body":o;if(!e)return"";var a=mn[i][s],l=cn[i].entities,c="attribute"===s,u="strict"===s;return e.replace(a,function(e){return function(e,t,n,r){var i=e,o=e[e.length-1];if(n&&"="===o)i=e;else if(r&&";"!==o)i=e;else{var s=t[e];if(s)i=s;else if("&"===e[0]&&"#"===e[1]){var a=e[2],l="x"==a||"X"==a?parseInt(e.substr(3),16):parseInt(e.substr(2));i=l>=1114111?gn:l>65535?an(l):fn(sn[l]||l)}}return i}(e,l,c,u)})}
/**
 * @name ranges-sort
 * @fileoverview Sort string index ranges
 * @version 6.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-sort/}
 */var bn={strictlyTwoElementsInRangeArrays:!1,progressFn:null};function vn(e,t){if(!Array.isArray(e)||!e.length)return e;let n,r,i={...bn,...t};if(i.strictlyTwoElementsInRangeArrays&&!e.every((e,t)=>!(!Array.isArray(e)||2!==e.length)||(n=t,r=e.length,!1)))throw new TypeError(`ranges-sort: [THROW_ID_03] The first argument should be an array and must consist of arrays which are natural number indexes representing TWO string index ranges. However, ${n}th range (${JSON.stringify(e[n],null,4)}) has not two but ${r} elements!`);if(!e.every((e,t)=>!(!Array.isArray(e)||!Number.isInteger(e[0])||e[0]<0||!Number.isInteger(e[1])||e[1]<0)||(n=t,!1)))throw new TypeError(`ranges-sort: [THROW_ID_04] The first argument should be an array and must consist of arrays which are natural number indexes representing string index ranges. However, ${n}th range (${JSON.stringify(e[n],null,4)}) does not consist of only natural numbers!`);let o=e.length**2,s=0;return Array.from(e).sort((e,t)=>(i.progressFn&&(s+=1,i.progressFn(Math.floor(100*s/o))),e[0]===t[0]?e[1]<t[1]?-1:e[1]>t[1]?1:0:e[0]<t[0]?-1:1
/**
 * @name ranges-merge
 * @fileoverview Merge and sort string index ranges
 * @version 9.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-merge/}
 */))}var Sn={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};var Tn="production"===process.env.NODE_ENV,_n="Invariant failed";
/**
 * @name ranges-apply
 * @fileoverview Take an array of string index ranges, delete/replace the string according to them
 * @version 7.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-apply/}
 */
function En(e,t,n){if(0===arguments.length)throw new Error("ranges-apply: [THROW_ID_01] inputs missing!");if("string"!=typeof e)throw new TypeError(`ranges-apply: [THROW_ID_02] first input argument must be a string! Currently it's: ${typeof e}, equal to: ${JSON.stringify(e,null,4)}`);if(t&&!Array.isArray(t))throw new TypeError(`ranges-apply: [THROW_ID_03] second input argument must be an array (or null)! Currently it's: ${typeof t}, equal to: ${JSON.stringify(t,null,4)}`);if(!t?.filter(e=>e).length)return e;let r;r=Array.isArray(t)&&Number.isInteger(t[0])&&Number.isInteger(t[1])?[Array.from(t)]:Array.from(t),r.length,r.filter(e=>e).forEach((e,t)=>{if(!Array.isArray(e))throw new TypeError(`ranges-apply: [THROW_ID_05] ranges array, second input arg., has ${t}th element not an array: ${JSON.stringify(e,null,4)}, which is ${typeof e}`);if(!Number.isInteger(e[0])){if(!Number.isInteger(+e[0])||+e[0]<0)throw new TypeError(`ranges-apply: [THROW_ID_06] ranges array, second input arg. has ${t}th element, array ${JSON.stringify(e,null,0)}. Its first element is not an integer, string index, but ${typeof e[0]}, equal to: ${JSON.stringify(e[0],null,4)}.`);r[t][0]=+r[t][0]}if(!Number.isInteger(e[1])){if(!Number.isInteger(+e[1])||+e[1]<0)throw new TypeError(`ranges-apply: [THROW_ID_07] ranges array, second input arg. has ${t}th element, array ${JSON.stringify(e,null,0)}. Its second element is not an integer, string index, but ${typeof e[1]}, equal to: ${JSON.stringify(e[1],null,4)}.`);r[t][1]=+r[t][1]}});let i=function(e,t){function n(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}if(!Array.isArray(e)||!e.length)return null;let r;if(t){if(!n(t))throw new Error(`emlint: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n${JSON.stringify(t,null,4)} (type ${typeof t})`);if(r={...Sn,...t},r.progressFn&&n(r.progressFn)&&!Object.keys(r.progressFn).length)r.progressFn=null;else if(r.progressFn&&"function"!=typeof r.progressFn)throw new Error(`ranges-merge: [THROW_ID_01] opts.progressFn must be a function! It was given of a type: "${typeof r.progressFn}", equal to ${JSON.stringify(r.progressFn,null,4)}`);if(![1,2,"1","2"].includes(r.mergeType))throw new Error(`ranges-merge: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "${typeof r.mergeType}", equal to ${JSON.stringify(r.mergeType,null,4)}`);if("boolean"!=typeof r.joinRangesThatTouchEdges)throw new Error(`ranges-merge: [THROW_ID_04] opts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "${typeof r.joinRangesThatTouchEdges}", equal to ${JSON.stringify(r.joinRangesThatTouchEdges,null,4)}`)}else r={...Sn};let i,o,s,a=e.filter(e=>Array.isArray(e)).map(e=>[...e]).filter(e=>void 0!==e[2]||e[0]!==e[1]);i=r.progressFn?vn(a,{progressFn:e=>{s=Math.floor(e/5),s!==o&&(o=s,r.progressFn(s))}}):vn(a);let l=i.length-1;for(let e=l;e>0;e--)r.progressFn&&(s=Math.floor(78*(1-e/l))+21,s!==o&&s>o&&(o=s,r.progressFn(s))),(i[e][0]<=i[e-1][0]||!r.joinRangesThatTouchEdges&&i[e][0]<i[e-1][1]||r.joinRangesThatTouchEdges&&i[e][0]<=i[e-1][1])&&(i[e-1][0]=Math.min(i[e][0],i[e-1][0]),i[e-1][1]=Math.max(i[e][1],i[e-1][1]),void 0!==i[e][2]&&(i[e-1][0]>=i[e][0]||i[e-1][1]<=i[e][1])&&null!==i[e-1][2]&&(null===i[e][2]&&null!==i[e-1][2]?i[e-1][2]=null:null!=i[e-1][2]?2==+r.mergeType&&i[e-1][0]===i[e][0]?i[e-1][2]=i[e][2]:i[e-1][2]+=i[e][2]:i[e-1][2]=i[e][2]),i.splice(e,1),e=i.length);return i.length?i:null}(r,{progressFn:e=>{}});!function(e){if(!e){if(Tn)throw new Error(_n);throw new Error(_n)}}(i);let o=i.length;if(o>0){let t=e.slice(i[o-1][1]);e=i.reduce((t,n,r,i)=>{let o=0===r?0:i[r-1][1],s=i[r][0];return`${t}${e.slice(o,s)}${i[r][2]||""}`},""),e+=t}return e}
/**
 * @name string-collapse-leading-whitespace
 * @fileoverview Collapse the leading and trailing whitespace of a string
 * @version 7.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/string-collapse-leading-whitespace/}
 */function wn(e,t=1){function n(e){return Array.from(e).reverse().join("")}function r(e,t,n){let r=n?"\n":"\r",i=n?"\r":"\n";if(!e)return e;let o=0,s="";for(let n=0,a=e.length;n<a;n++)(e[n]===r||e[n]===i&&e[n-1]!==r)&&o++,"\r\n".includes(e[n])||" "===e[n]?" "===e[n]?s+=e[n]:e[n]===r?o<=t&&(s+=e[n],e[n+1]===i&&(s+=e[n+1],n++)):e[n]===i&&e?.[n-1]!==r&&o<=t&&(s+=e[n]):!e[n+1]&&!o&&(s+=" ");return s}if("string"==typeof e&&e.length){let i=1;"number"==typeof+t&&Number.isInteger(+t)&&+t>=0&&(i=+t);let o="",s="";if(e.trim()){if(!e[0].trim())for(let t=0,n=e.length;t<n;t++)if(e[t].trim()){o=e.slice(0,t);break}}else o=e;if(e.trim()&&(""===e.slice(-1).trim()||" "===e.slice(-1)))for(let t=e.length;t--;)if(e[t].trim()){s=e.slice(t+1);break}return`${r(o,i,!1)}${e.trim()}${n(r(n(s),i,!0))}`}return e}
/**
 * @name ranges-push
 * @fileoverview Gather string index ranges
 * @version 7.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/ranges-push/}
 */var An={mergeType:1,progressFn:null,joinRangesThatTouchEdges:!0};var kn={limitToBeAddedWhitespace:!1,limitLinebreaksCount:1,mergeType:1},Cn=class{constructor(e){let t={...kn,...e};if(t.mergeType&&1!==t.mergeType&&2!==t.mergeType)if(Oe(t.mergeType)&&"1"===t.mergeType.trim())t.mergeType=1;else{if(!Oe(t.mergeType)||"2"!==t.mergeType.trim())throw new Error(`ranges-push: [THROW_ID_02] opts.mergeType was customised to a wrong thing! It was given of a type: "${typeof t.mergeType}", equal to ${JSON.stringify(t.mergeType,null,4)}`);t.mergeType=2}this.opts=t,this.ranges=[]}ranges;opts;add(e,t,n){if(null==e&&null==t)return;if(Me(e)&&!Me(t)){if(Array.isArray(e)){if(e.length){if(e.some(e=>Array.isArray(e)))return void e.forEach(e=>{Array.isArray(e)&&this.add(...e)});e.length&&Re(+e[0])&&Re(+e[1])&&this.add(...e)}return}throw new TypeError(`ranges-push/Ranges/add(): [THROW_ID_12] the first input argument, "from" is set (${JSON.stringify(e,null,0)}) but second-one, "to" is not (${JSON.stringify(t,null,0)})`)}if(!Me(e)&&Me(t))throw new TypeError(`ranges-push/Ranges/add(): [THROW_ID_13] the second input argument, "to" is set (${JSON.stringify(t,null,0)}) but first-one, "from" is not (${JSON.stringify(e,null,0)})`);let r=+e,i=+t;if(!Re(r)||!Re(i))throw Re(r)&&r>=0?new TypeError(`ranges-push/Ranges/add(): [THROW_ID_10] "to" value, the second input argument, must be a natural number or zero! Currently it's of a type "${typeof i}" equal to: ${JSON.stringify(i,null,4)}`):new TypeError(`ranges-push/Ranges/add(): [THROW_ID_09] "from" value, the first input argument, must be a natural number or zero! Currently it's of a type "${typeof r}" equal to: ${JSON.stringify(r,null,4)}`);if(Me(n)&&!Oe(n)&&!function(e){return Number.isFinite(e)}(n))throw new TypeError(`ranges-push/Ranges/add(): [THROW_ID_08] The third argument, the value to add, was given not as string but ${typeof n}, equal to:\n${JSON.stringify(n,null,4)}`);if(Me(this.ranges)&&Array.isArray(this.last())&&r===this.last()[1]){if(this.last()[1]=i,this.last()[2],null!==this.last()[2]&&Me(n)){let e=!this.last()[2]||!this.last()[2].length||this.opts?.mergeType&&1!==this.opts.mergeType?n:`${this.last()[2]}${n}`;this.opts.limitToBeAddedWhitespace&&(e=wn(e,this.opts.limitLinebreaksCount)),Oe(e)&&!e.length||(this.last()[2]=e)}}else{this.ranges||(this.ranges=[]);let e=void 0===n||Oe(n)&&!n.length?[r,i]:[r,i,n&&this.opts.limitToBeAddedWhitespace?wn(n,this.opts.limitLinebreaksCount):n];this.ranges.push(e)}}push(e,t,n){this.add(e,t,n)}current(){return Array.isArray(this.ranges)&&this.ranges.length?(this.ranges=function(e,t){function n(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}if(!Array.isArray(e)||!e.length)return null;let r;if(t){if(!n(t))throw new Error(`ranges-merge: [THROW_ID_03] the second input argument must be a plain object. It was given as:\n${JSON.stringify(t,null,4)} (type ${typeof t})`);if(r={...An,...t},r.progressFn&&n(r.progressFn)&&!Object.keys(r.progressFn).length)r.progressFn=null;else if(r.progressFn&&"function"!=typeof r.progressFn)throw new Error(`ranges-merge: [THROW_ID_01] resolvedOpts.progressFn must be a function! It was given of a type: "${typeof r.progressFn}", equal to ${JSON.stringify(r.progressFn,null,4)}`);if(![1,2,"1","2"].includes(r.mergeType))throw new Error(`ranges-merge: [THROW_ID_02] resolvedOpts.mergeType was customised to a wrong thing! It was given of a type: "${typeof r.mergeType}", equal to ${JSON.stringify(r.mergeType,null,4)}`);if("boolean"!=typeof r.joinRangesThatTouchEdges)throw new Error(`ranges-merge: [THROW_ID_04] resolvedOpts.joinRangesThatTouchEdges was customised to a wrong thing! It was given of a type: "${typeof r.joinRangesThatTouchEdges}", equal to ${JSON.stringify(r.joinRangesThatTouchEdges,null,4)}`)}else r={...An};let i,o,s,a=e.filter(e=>Array.isArray(e)).map(e=>[...e]).filter(e=>void 0!==e[2]||e[0]!==e[1]);i=r.progressFn?vn(a,{progressFn:e=>{s=Math.floor(e/5),s!==o&&(o=s,null!=r.progressFn&&r.progressFn(s))}}):vn(a);let l=i.length-1;for(let e=l;e>0;e--)r.progressFn&&(s=Math.floor(78*(1-e/l))+21,s!==o&&s>o&&(o=s,r.progressFn(s))),(i[e][0]<=i[e-1][0]||!r.joinRangesThatTouchEdges&&i[e][0]<i[e-1][1]||r.joinRangesThatTouchEdges&&i[e][0]<=i[e-1][1])&&(i[e-1][0]=Math.min(i[e][0],i[e-1][0]),i[e-1][1]=Math.max(i[e][1],i[e-1][1]),void 0!==i[e][2]&&(i[e-1][0]>=i[e][0]||i[e-1][1]<=i[e][1])&&null!==i[e-1][2]&&(null===i[e][2]&&null!==i[e-1][2]?i[e-1][2]=null:null!=i[e-1][2]?2==+(r||{})?.mergeType&&i[e-1][0]===i[e][0]?i[e-1][2]=i[e][2]:i[e-1][2]+=i[e][2]:i[e-1][2]=i[e][2]),i.splice(e,1),e=i.length);return i.length?i:null}(this.ranges,{mergeType:this.opts.mergeType}),this.ranges&&this.opts.limitToBeAddedWhitespace?this.ranges.map(e=>Me(e[2])?[e[0],e[1],wn(e[2],this.opts.limitLinebreaksCount)]:e):this.ranges):null}wipe(){this.ranges=[]}replace(e){if(Array.isArray(e)&&e.length){if(!Array.isArray(e[0])||!Re(e[0][0]))throw new Error(`ranges-push/Ranges/replace(): [THROW_ID_11] Single range was given but we expected array of arrays! The first element, ${JSON.stringify(e[0],null,4)} should be an array and its first element should be an integer, a string index.`);this.ranges=Array.from(e)}else this.ranges=[]}last(){return Array.isArray(this.ranges)&&this.ranges.length?this.ranges[this.ranges.length-1]:null}};
/**
 * @name string-left-right
 * @fileoverview Looks up the first non-whitespace character to the left/right of a given index
 * @version 6.1.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/string-left-right/}
 */Ce();function In(e,t=0){return function({str:e,idx:t=0,stopAtNewlines:n=!1,stopAtRawNbsp:r=!1}){if("string"!=typeof e||!e.length||((!t||"number"!=typeof t)&&(t=0),!e[t+1]))return null;if(e[t+1]&&(e[t+1].trim()||n&&"\n\r".includes(e[t+1])||r&&" "===e[t+1]))return t+1;if(e[t+2]&&(e[t+2].trim()||n&&"\n\r".includes(e[t+2])||r&&" "===e[t+2]))return t+2;for(let i=t+1,o=e.length;i<o;i++)if(e[i].trim()||n&&"\n\r".includes(e[i])||r&&" "===e[i])return i;return null}({str:e,idx:t,stopAtNewlines:!1,stopAtRawNbsp:!1})}
/**
 * @name string-strip-html
 * @fileoverview Strip HTML tags from strings. No parser, accepts mixed sources.
 * @version 13.5.0
 * @author Roy Revelt
 * @license MIT
 * {@link https://codsen.com/os/string-strip-html/}
 */function On(e){return/[-_A-Za-z0-9]/.test(e)}function Rn(e,t){if(!e)return[];if(Array.isArray(e))return e.filter(e=>"string"==typeof e&&e.trim());if("string"==typeof e)return e.trim()?[e]:[];throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_05] ${t} must be array containing zero or more strings or something falsey. Currently it's equal to: ${e}, that a type of ${typeof e}.`)}function Mn(e,t,n,r){for(let i=t,o=e.length;i<o;i++){if(e.startsWith(n,i))return!0;if(e.startsWith(r,i))return!1}return!1}function Pn(e,t,n){return e?.quotes?.value&&Mn(t,n+1,e.quotes.value,">"),Mn(t,e?.quotes?.next-1,e?.quotes?.value,">"),!e?.quotes||!Mn(t,n+1,e.quotes.value,">")&&-1!==e?.quotes?.next&&Mn(t,e?.quotes?.next-1,e?.quotes?.value,">")}function Dn(e,t){return(t.match(new RegExp(e,"g"))||[]).length}var Nn=new Set(["!doctype","abbr","address","area","article","aside","audio","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","doctype","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","math","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","param","picture","pre","progress","rb","rp","rt","rtc","ruby","samp","script","section","select","slot","small","source","span","strong","style","sub","summary","sup","svg","table","tbody","td","template","textarea","tfoot","th","thead","time","title","tr","track","ul","var","video","wbr","xml"]),Un=new Set(["a","b","i","p","q","s","u"]),xn=new Set([".",",",";","!","?"]),Ln=new Set([".",",","?",";",")","…",'"',"»"]),Bn=new Set(["a","abbr","acronym","audio","b","bdi","bdo","big","button","canvas","cite","code","data","datalist","del","dfn","em","embed","i","iframe","input","ins","kbd","label","map","mark","meter","noscript","object","output","picture","progress","q","ruby","s","samp","select","slot","small","span","strong","sub","sup","svg","template","textarea","time","u","tt","var","video","wbr"]),Fn={ignoreTags:[],ignoreTagsWithTheirContents:[],onlyStripTags:[],stripTogetherWithTheirContents:["script","style","xml"],skipHtmlDecoding:!1,trimOnlySpaces:!1,stripRecognisedHTMLOnly:!1,dumpLinkHrefsNearby:{enabled:!1,putOnNewLine:!1,wrapHeads:"",wrapTails:""},ignoreIndentations:!1,cb:null,reportProgressFunc:null,reportProgressFuncFrom:0,reportProgressFuncTo:100};function Gn(e,t){let n=Date.now(),r=[],i=[],o=[],s=[],a={};a={attributes:[]};let l=null,c=null,u=null,d=!1,h={},p={tagName:"",hrefValue:"",openingTagEnds:void 0},m="",f=!1,g=null,y=!0;function b(t,n,i){if(Array.isArray(n.stripTogetherWithTheirContents)&&(n.stripTogetherWithTheirContents.includes(a.name)||n.stripTogetherWithTheirContents.includes("*")))if(a.slashPresent&&Array.isArray(r)&&r.some(e=>e.name===a.name)){for(let o=r.length;o--;)if(r[o].name===a.name){s=s.filter(([e,n])=>(e<r[o].lastOpeningBracketAt||e>=t+1)&&(n<=r[o].lastOpeningBracketAt||n>t+1));let l=t+1;a.lastClosingBracketAt&&(l=a.lastClosingBracketAt+1),s.push([r[o].lastOpeningBracketAt,l]),Ln.has(e[t])&&n.cb?n.cb({tag:a,deleteFrom:r[o].lastOpeningBracketAt,deleteTo:t+1,insert:null,rangesArr:i,proposedReturn:[r[o].lastOpeningBracketAt,t,null]}):n.cb&&n.cb({tag:a,deleteFrom:r[o].lastOpeningBracketAt,deleteTo:t,insert:"",rangesArr:i,proposedReturn:[r[o].lastOpeningBracketAt,t,""]}),r.splice(o,1);break}}else a.slashPresent||r.push(a);else Array.isArray(n.ignoreTagsWithTheirContents)&&E(t,n,a)&&(y=!1)}function v(t,n,r,i,o,s){if(Array.isArray(I.current())&&"number"==typeof r&&0===I.current()[0][0]&&I.current()[0][1]>=r)return"";if(e.length===i&&s&&!A?.dumpLinkHrefsNearby?.enabled)return null;let l="";if(Number.isInteger(r)&&r<o&&(l+=t.slice(r,o)),Number.isInteger(i)&&i>s+1){let n=t.slice(s+1,i);i&&!In(e,i-1)&&(n=n.trimEnd()),n.includes("\n")&&T(i,t)?l+=" ":l+=n}let c=!Ln.has(t[n]),u=">"!==t[i-1]||!t[r].trim(),d=!['"',"("].includes(t[o-1]),h=![";",".",":","!"].includes(t[n]);if((c||u&&d&&h)&&(u||d)&&"!"!==t[n]&&(!Bn.has(a.name)||"number"==typeof r&&r<o||"number"==typeof i&&i>s+1)){let e=l.match(/\n/g);return Array.isArray(e)&&e.length?1===e.length?"\n":2===e.length?"\n\n":"\n\n\n":" "}return""}function S(t,n){if(t.dumpLinkHrefsNearby?.enabled&&p.tagName&&p.tagName===a.name&&a.lastOpeningBracketAt&&(p.openingTagEnds&&a.lastOpeningBracketAt>p.openingTagEnds||!p.openingTagEnds)&&(f=!0),f){let r=t.dumpLinkHrefsNearby?.putOnNewLine?"\n\n":"";m=`${r}${p.hrefValue}`,("number"!=typeof n||In(e,n-1))&&(m+=r)}}function T(t,n){return n?"<"===n[t]&&"%"!==n[t+1]:"<"===e[t]&&"%"!==e[t+1]}function _(t){return">"===e[t]&&"%"!==e[t-1]}function E(t,n,r){if(n.ignoreTagsWithTheirContents.includes("*"))return!0;let o=e.indexOf(`<${r.name}`,t),s=e.indexOf(`</${r.name}`,t);return!(!r.slashPresent&&-1===s||r.slashPresent&&!i.some(e=>e.name===r.name)||s>-1&&o>-1&&o<s)&&n.ignoreTagsWithTheirContents.includes(r.name)}if("string"!=typeof e)throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_01] Input must be string! Currently it's: ${(typeof e).toLowerCase()}, equal to:\n${JSON.stringify(e,null,4)}`);if(t){if(!Ie(t))throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_02] Optional Options Object must be a plain object! Currently it's: ${(typeof t).toLowerCase()}, equal to:\n${JSON.stringify(t,null,4)}`);if(t.reportProgressFunc&&"function"!=typeof t.reportProgressFunc)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_03] The Optional Options Object's key reportProgressFunc, callback function, should be a function but it was given as type ${typeof t.reportProgressFunc}, equal to ${JSON.stringify(t.reportProgressFunc,null,4)}`);if("boolean"==typeof t.dumpLinkHrefsNearby&&null!=t.dumpLinkHrefsNearby)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_04] The Optional Options Object's key should be a plain object but it was given as type ${typeof t.dumpLinkHrefsNearby}, equal to ${JSON.stringify(t.dumpLinkHrefsNearby,null,4)}`)}function w(){f&&(p={tagName:"",hrefValue:"",openingTagEnds:void 0},f=!1)}let A={...Fn,...t,dumpLinkHrefsNearby:Object.assign({},Fn.dumpLinkHrefsNearby,t?.dumpLinkHrefsNearby)};if(Pe(A,"returnRangesOnly"))throw new TypeError("string-strip-html/stripHtml(): [THROW_ID_05] The Optional Options Object's key returnRangesOnly has been removed from the API since v.5 release.");if(A.reportProgressFunc){if("number"!=typeof A.reportProgressFuncFrom)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_06] The Optional Options Object's key reportProgressFuncFrom, callback function's "from" range, should be a number but it was given as type ${typeof A.reportProgressFuncFrom}, equal to ${JSON.stringify(A.reportProgressFuncFrom,null,4)}`);if("number"!=typeof A.reportProgressFuncTo)throw new Error(`string-strip-html/stripHtml(): [THROW_ID_07] The Optional Options Object's key reportProgressFuncTo, callback function's "to" range, should be a number but it was given as type ${typeof A.reportProgressFuncTo}, equal to ${JSON.stringify(A.reportProgressFuncTo,null,4)}`)}A.ignoreTags=Rn(A.ignoreTags,"resolvedOpts.ignoreTags"),A.onlyStripTags=Rn(A.onlyStripTags,"resolvedOpts.onlyStripTags");let k=!!A.onlyStripTags.length;A.onlyStripTags.length&&A.ignoreTags.length&&(A.onlyStripTags=en(A.onlyStripTags,...A.ignoreTags)),A.stripTogetherWithTheirContents?"string"==typeof A.stripTogetherWithTheirContents&&A.stripTogetherWithTheirContents.length&&(A.stripTogetherWithTheirContents=[A.stripTogetherWithTheirContents]):A.stripTogetherWithTheirContents=[];let C={};if(A.stripTogetherWithTheirContents&&Array.isArray(A.stripTogetherWithTheirContents)&&A.stripTogetherWithTheirContents.length&&!A.stripTogetherWithTheirContents.every((e,t)=>"string"==typeof e||(C.el=e,C.i=t,!1)))throw new TypeError(`string-strip-html/stripHtml(): [THROW_ID_08] Optional Options Object's key stripTogetherWithTheirContents was set to contain not just string elements! For example, element at index ${C.i} has a value ${C.el} which is not string but ${(typeof C.el).toLowerCase()}.`);A.cb||(A.cb=({rangesArr:e,proposedReturn:t})=>{t&&e.push(...t)});let I=new Cn({limitToBeAddedWhitespace:!0,limitLinebreaksCount:2});if(!A.skipHtmlDecoding)for(;e!==yn(e,{scope:"strict"});)e=yn(e,{scope:"strict"});let O=!1,R=!1,M=0,P=0,D=e.length,N=Math.floor(D/2);for(let t=0;t<D;t++){if(A.reportProgressFunc&&(D>1e3&&D<2e3?t===N&&A.reportProgressFunc(Math.floor((A.reportProgressFuncTo-A.reportProgressFuncFrom)/2)):D>=2e3&&(M=A.reportProgressFuncFrom+Math.floor(t/D*(A.reportProgressFuncTo-A.reportProgressFuncFrom)),M!==P&&(P=M,A.reportProgressFunc(M)))),Object.keys(a).length>1&&a.lastClosingBracketAt&&a.lastClosingBracketAt<t&&" "!==e[t]&&null===g&&(g=t),!O&&"%"===e[t]&&"{"===e[t-1]&&e.includes("%}",t+1)){u=null;let n=e.indexOf("%}",t)-1;if(n>t){t=n;continue}}if(!O&&_(t)&&(!a||Object.keys(a).length<2)&&t>1)for(let n=t;n--;)if(void 0===e[n-1]||_(n)){let r=void 0===e[n-1]?n:n+1,i=e.slice(r,t+1)||"";if((i.includes("/>")||i.includes("/ >")||i.includes('="')||i.includes("='"))&&e!==`<${Zt(i.trim(),"/>")}>`&&[...Nn].some(e=>Zt(i.trim().split(/\s+/).filter(e=>e.trim()).filter((e,t)=>0===t),"/>").toLowerCase()===e)&&""===Gn(`<${i.trim()}>`,A).result){(!o.length||o[o.length-1][0]!==a.lastOpeningBracketAt)&&o.push([r,t+1]),(!s.length||s[s.length-1][0]!==a.lastOpeningBracketAt)&&s.push([r,t+1]);let n=v(e,t,r,t+1,r,t+1),i=t+1;if(e[i]&&!e[i].trim())for(let t=i;t<D;t++)if(e[t].trim()){i=t;break}A.cb({tag:a,deleteFrom:r,deleteTo:i,insert:n,rangesArr:I,proposedReturn:[r,i,n]})}break}if(!R&&"/"===e[t]&&!a.quotes?.value&&Number.isInteger(a.lastOpeningBracketAt)&&!Number.isInteger(a.lastClosingBracketAt)&&(a.slashPresent=t),'"'===e[t]||"'"===e[t])if(!R&&a.nameStarts&&a?.quotes?.value===e[t])if(void 0===h.valueStarts)h={},delete a.quotes;else{let n;h.valueEnds=t,h.value=e.slice(h.valueStarts,t),a.attributes.push(h),h={},delete a.quotes,A.dumpLinkHrefsNearby?.enabled&&!r.length&&a.attributes.some(e=>{if("string"==typeof e.name&&"href"===e.name.toLowerCase())return n=`${A.dumpLinkHrefsNearby?.wrapHeads||""}${e.value}${A.dumpLinkHrefsNearby?.wrapTails||""}`,!0})&&(p={tagName:a.name,hrefValue:n,openingTagEnds:void 0})}else!R&&!a.quotes&&a.nameStarts&&(a.quotes={},a.quotes.value=e[t],a.quotes.start=t,a.quotes.next=e.indexOf(e[t],t+1),h.nameStarts&&h.nameEnds&&h.nameEnds<t&&h.nameStarts<t&&!h.valueStarts&&(h.name=e.slice(h.nameStarts,h.nameEnds)));if(!(void 0===a.nameStarts||void 0!==a.nameEnds||e[t].trim()&&On(e[t]))){if(a.nameEnds=t,a.name=e.slice(a.nameStarts,a.nameEnds+(_(t)||"/"===e[t]||void 0!==e[t+1]?0:1)),"!"!==e[a.nameStarts-1]&&!a.name.replace(/-/g,"").length||/^\d+$/.test(a.name[0])){a={};continue}if("string"==typeof a.name&&"doctype"===a.name.toLowerCase()&&(R=!0),T(t)){S(A);let n=v(e,t,a.leftOuterWhitespace,t,a.lastOpeningBracketAt,t);(A.stripTogetherWithTheirContents.includes(a.name)||A.stripTogetherWithTheirContents.includes("*"))&&(s=s.filter(([e,n])=>!(e===a.leftOuterWhitespace&&n===t))),A.cb({tag:a,deleteFrom:a.leftOuterWhitespace,deleteTo:t,insert:`${n}${m}${n}`,rangesArr:I,proposedReturn:[a.leftOuterWhitespace,t,`${n}${m}${n}`]}),w(),b(t,A,I)}}if(a.quotes?.start&&a.quotes.start<t&&!a.quotes.end&&h.nameEnds&&h.equalsAt&&!h.valueStarts&&(h.valueStarts=t),!a.quotes&&h.nameEnds&&"="===e[t]&&!h.valueStarts&&!h.equalsAt&&(h.equalsAt=t),!a.quotes&&h.nameStarts&&h.nameEnds&&!h.valueStarts&&e[t].trim()&&"="!==e[t]&&(a.attributes.push(h),h={}),!a.quotes&&h.nameStarts&&!h.nameEnds&&(R&&"'\"".includes(e[h.nameStarts])?h.nameStarts<t&&e[t]===e[h.nameStarts]&&(h.nameEnds=t+1,h.name=e.slice(h.nameStarts,h.nameEnds)):e[t].trim()?"="===e[t]?h.equalsAt||(h.nameEnds=t,h.equalsAt=t,h.name=e.slice(h.nameStarts,h.nameEnds)):("/"===e[t]||_(t)||T(t))&&(h.nameEnds=t,h.name=e.slice(h.nameStarts,h.nameEnds),a.attributes.push(h),h={}):(h.nameEnds=t,h.name=e.slice(h.nameStarts,h.nameEnds))),!a.quotes&&a.nameEnds<t&&!e[t-1].trim()&&e[t].trim()&&!"<>/!".includes(e[t])&&!h.nameStarts&&!a.lastClosingBracketAt&&(h.nameStarts=t),null!==a.lastOpeningBracketAt&&a.lastOpeningBracketAt<t&&"/"===e[t]&&a.onlyPlausible&&(a.onlyPlausible=!1),null!==a.lastOpeningBracketAt&&a.lastOpeningBracketAt<t&&"/"!==e[t]&&(void 0===a.onlyPlausible&&(e[t].trim()&&!T(t)||a.slashPresent?a.onlyPlausible=!1:a.onlyPlausible=!0),e[t].trim()&&void 0===a.nameStarts&&!T(t)&&"/"!==e[t]&&!_(t)&&"!"!==e[t]&&(a.nameStarts=t,a.nameContainsLetters=!1)),a.nameStarts&&!a.quotes&&"string"==typeof e[t]&&e[t].toLowerCase()!==e[t].toUpperCase()&&(a.nameContainsLetters=!0),_(t)&&(Pn(a,e,t)||a.quotes.value&&"number"==typeof a.lastOpeningBracketAt&&Dn(a.quotes.value,e.slice(a.lastOpeningBracketAt,t))%2==1&&!e.slice(a.lastOpeningBracketAt+1,t).includes("<")&&!e.slice(a.lastOpeningBracketAt+1,t).includes(">"))&&void 0!==a.lastOpeningBracketAt&&(a.lastClosingBracketAt=t,g=null,Object.keys(h).length&&(a.attributes.push(h),h={}),A.dumpLinkHrefsNearby?.enabled&&p.tagName&&!p.openingTagEnds&&(p.openingTagEnds=t)),(!R||">"===e[t])&&void 0!==a.lastOpeningBracketAt){if(void 0===a.lastClosingBracketAt){if(a.lastOpeningBracketAt<t&&!T(t)&&(void 0===e[t+1]||T(t+1)&&!a?.quotes?.value)&&a.nameContainsLetters&&"number"==typeof a.nameStarts){if(a.name=e.slice(a.nameStarts,a.nameEnds||t+1).toLowerCase(),(!o.length||o[o.length-1][0]!==a.lastOpeningBracketAt)&&o.push([a.lastOpeningBracketAt,t+1]),A.ignoreTags.includes(a.name)||E(t,A,a)||!Nn.has(a.name)&&(a.onlyPlausible||A.stripRecognisedHTMLOnly)){a={},h={};continue}if((Nn.has(a.name)||Un.has(a.name))&&(!1===a.onlyPlausible||!0===a.onlyPlausible&&a.attributes.length)||void 0===e[t+1]){S(A);let n,r=v(e,t,a.leftOuterWhitespace,t+1,a.lastOpeningBracketAt,a.lastClosingBracketAt);O&&"script"===a.name&&a.slashPresent&&(O=!1),n=null===r||null===m?null:`${r}${m}${r}`,A.cb({tag:a,deleteFrom:a.leftOuterWhitespace,deleteTo:t+1,insert:n,rangesArr:I,proposedReturn:[a.leftOuterWhitespace,t+1,n]}),w(),b(t,A,I)}if(!s.length||s[s.length-1][0]!==a.lastOpeningBracketAt&&s[s.length-1][1]!==t+1)if(A.stripTogetherWithTheirContents.includes(a.name)||A.stripTogetherWithTheirContents.includes("*")){let e;for(let t=r.length;t--;)r[t].name===a.name&&(e=r[t]);e?(s=s.filter(([t])=>t!==e.lastOpeningBracketAt),s.push([e.lastOpeningBracketAt,t+1])):s.push([a.lastOpeningBracketAt,t+1])}else s.push([a.lastOpeningBracketAt,t+1])}}else if(t>a.lastClosingBracketAt&&e[t].trim()||void 0===e[t+1]||A.ignoreIndentations&&"\r\n".includes(e[t])){let n=a.lastClosingBracketAt===t?t+1:t;A.trimOnlySpaces&&n===D-1&&null!==g&&g<t&&(n=g),(!o.length||o[o.length-1][0]!==a.lastOpeningBracketAt)&&o.push([a.lastOpeningBracketAt,a.lastClosingBracketAt+1]);let r=A.ignoreTags.includes(a.name),l=E(t,A,a);if(!y||A.stripRecognisedHTMLOnly&&"string"==typeof a.name&&!Nn.has(a.name.toLowerCase())&&!Un.has(a.name.toLowerCase())||!k&&(r||l)||k&&!A.onlyStripTags.includes(a.name)||A.ignoreTagsWithTheirContents.includes(a.name)){if(l)if(a.slashPresent){for(let e=i.length;e--;)if(i[e].name===a.name){i.splice(e,1);break}i.length||(y=!0)}else y&&(y=!1),i.push(a);A.cb({tag:a,deleteFrom:null,deleteTo:null,insert:null,rangesArr:I,proposedReturn:null}),a={},h={}}else if(!a.onlyPlausible||0===a.attributes.length&&a.name&&(Nn.has(a.name.toLowerCase())||Un.has(a.name.toLowerCase()))||a.attributes?.some(e=>e.equalsAt)){(!s.length||s[s.length-1][0]!==a.lastOpeningBracketAt)&&s.push([a.lastOpeningBracketAt,a.lastClosingBracketAt+1]);let r,i=v(e,t,a.leftOuterWhitespace,n,a.lastOpeningBracketAt,a.lastClosingBracketAt);m="",f=!1,S(A,n),"string"==typeof m&&m.length?(r=`${i}${m}${"\n\n"===i?"\n":i}`,n===a.lastClosingBracketAt+1&&(!e[n]||!xn.has(e[n]))&&(r+=" "),a.leftOuterWhitespace===a.lastOpeningBracketAt&&I.last()&&I.last()[1]<a.lastOpeningBracketAt&&(!A?.dumpLinkHrefsNearby?.putOnNewLine||!xn.has(e[n]))&&(r=" "+r)):r=i,null!==r&&(0===a.leftOuterWhitespace||!In(e,n-1))&&(!A.dumpLinkHrefsNearby?.enabled||"a"!==a.name)&&(r=void 0);let o=0;if(f&&xn.has(e[n])){A.dumpLinkHrefsNearby?.putOnNewLine&&(r=`${e[n]}${r||""}`);let i=In(e,n);i&&r?.endsWith("\n")?o+=i-t:(!i||i>t)&&o++}A.cb({tag:a,deleteFrom:a.leftOuterWhitespace,deleteTo:n+o,insert:r,rangesArr:I,proposedReturn:[a.leftOuterWhitespace,n+o,r]}),w(),b(t,A,I)}else a={};_(t)||(a={})}R&&(R=!1)}if((!O||"<"===e[t]&&In(e,In(e,t))&&"/"===e[In(e,t)]&&e.startsWith("script",In(e,In(e,t))))&&T(t)&&!T(t-1)&&!"'\"".includes(e[t+1])&&(!"'\"".includes(e[t+2])||/\w/.test(e[t+1]))&&("c"!==e[t+1]||":"!==e[t+2])&&("f"!==e[t+1]||"m"!==e[t+2]||"t"!==e[t+3]||":"!==e[t+4])&&("s"!==e[t+1]||"q"!==e[t+2]||"l"!==e[t+3]||":"!==e[t+4])&&("x"!==e[t+1]||":"!==e[t+2])&&("f"!==e[t+1]||"n"!==e[t+2]||":"!==e[t+3])&&Pn(a,e,t)){if(_(In(e,t)))continue;if(a.nameEnds&&a.nameEnds<t&&!a.lastClosingBracketAt&&(!0===a.onlyPlausible&&a.attributes?.length||!1===a.onlyPlausible)){let n=v(e,t,a.leftOuterWhitespace,t,a.lastOpeningBracketAt,t);A.cb({tag:a,deleteFrom:a.leftOuterWhitespace,deleteTo:t,insert:n,rangesArr:I,proposedReturn:[a.leftOuterWhitespace,t,n]}),b(t,A,I),a={},h={}}if(void 0!==a.lastOpeningBracketAt&&a.onlyPlausible&&a.name&&!a.quotes&&(a.lastOpeningBracketAt=void 0,a.name=void 0,a.onlyPlausible=!1),!(void 0!==a.lastOpeningBracketAt&&a.onlyPlausible||a.quotes||(a.lastOpeningBracketAt=t,a.slashPresent=!1,a.attributes=[],null===l?a.leftOuterWhitespace=t:A.trimOnlySpaces&&0===l?a.leftOuterWhitespace=c||t:a.leftOuterWhitespace=l,"!--"!=`${e[t+1]}${e[t+2]}${e[t+3]}`&&"![CDATA["!=`${e[t+1]}${e[t+2]}${e[t+3]}${e[t+4]}${e[t+5]}${e[t+6]}${e[t+7]}${e[t+8]}`))){let n,r=!0;"-"===e[t+2]&&(r=!1);for(let i=t;i<D;i++)if((!n&&r&&"]]>"==`${e[i-2]}${e[i-1]}${e[i]}`||!r&&"--\x3e"==`${e[i-2]}${e[i-1]}${e[i]}`)&&(n=i),n&&(n<i&&e[i].trim()||void 0===e[i+1])){let r=i;(void 0===e[i+1]&&!e[i].trim()||">"===e[i])&&(r+=1),(!o.length||o[o.length-1][0]!==a.lastOpeningBracketAt)&&o.push([a.lastOpeningBracketAt,n+1]),(!s.length||s[s.length-1][0]!==a.lastOpeningBracketAt)&&s.push([a.lastOpeningBracketAt,n+1]);let l=v(e,i,a.leftOuterWhitespace,r,a.lastOpeningBracketAt,n);A.cb({tag:a,deleteFrom:a.leftOuterWhitespace,deleteTo:r,insert:l,rangesArr:I,proposedReturn:[a.leftOuterWhitespace,r,l]}),t=i-1,">"===e[i]&&(t=i),a={},h={};break}}}e[t].trim()&&847!==e[t].charCodeAt(0)?(null!==l&&(!a.quotes&&h.equalsAt>l-1&&h.nameEnds&&h.equalsAt>h.nameEnds&&'"'!==e[t]&&"'"!==e[t]&&(Ie(h)&&a.attributes.push(h),h={},a.equalsSpottedAt=void 0),l=null),d||(d=!0,y&&!O&&"number"==typeof u&&t&&u<t-1&&(e.slice(u+1,t).trim()?u=null:A.ignoreIndentations||I.push([u+1,t])))):(null===l&&(l=t,void 0!==a.lastOpeningBracketAt&&a.lastOpeningBracketAt<t&&a.nameStarts&&a.nameStarts<a.lastOpeningBracketAt&&t===a.lastOpeningBracketAt+1&&!r.some(e=>e.name===a.name)&&(a.onlyPlausible=!0,a.name=void 0,a.nameStarts=void 0)),("\n"===e[t]||"\r"===e[t])&&(u=t,d&&(d=!1)))," "===e[t]?null===c&&(c=t):null!==c&&(c=null),"script"===a.name&&(O=!a.slashPresent)}if(e&&!A.ignoreIndentations&&(A.trimOnlySpaces&&" "===e[0]||!A.trimOnlySpaces&&!e[0].trim()))for(let t=0;t<D;t++){if(A.trimOnlySpaces&&" "!==e[t]||!A.trimOnlySpaces&&e[t].trim()){I.push([0,t]);break}e[t+1]||I.push([0,t+1])}if(e&&(A.trimOnlySpaces&&" "===e[~-e.length]||!A.trimOnlySpaces&&!e[~-e.length].trim()))for(let t=e.length;t--;)if(A.trimOnlySpaces&&" "!==e[t]||!A.trimOnlySpaces&&e[t].trim()){I.push([t+1,D]);break}let U=I.current();if(!t?.cb&&U&&(U[0]&&!U[0][0]&&(U[0][1],I.ranges[0]=[I.ranges[0][0],I.ranges[0][1]]),U[U.length-1]&&U[U.length-1][1]===e.length&&(U[U.length-1][0],I.ranges))){let t=I.ranges[I.ranges.length-1][0];e[t-1]&&(A.trimOnlySpaces&&" "===e[t-1]||!A.trimOnlySpaces&&!e[t-1].trim())&&(t-=1);let n=I.ranges[I.ranges.length-1][2];I.ranges[I.ranges.length-1]=[t,I.ranges[I.ranges.length-1][1]],n?.trim()&&I.ranges[I.ranges.length-1].push(n.trimEnd())}return{log:{timeTakenInMilliseconds:Date.now()-n},result:En(e,I.current()),ranges:I.current(),allTagLocations:o,filteredTagLocations:s}}var $n={},qn={},jn={},Vn={},Hn={},Wn={};const zn=("undefined"!=typeof globalThis?globalThis:global).performance;var Kn,Jn,Yn,Qn,Xn,Zn,er=ke(Object.freeze({__proto__:null,performance:zn}));function tr(){if(Kn)return Wn;Kn=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.wait=Wn.getMilliseconds=void 0;const e=er;return Wn.getMilliseconds=function(){const[t,n]=function(){const t=.001*e.performance.now();return[Math.floor(t),Math.floor(t%1*1e9)]}();return 1e3*t+Math.floor(n/1e6)},Wn.wait=function(e){return new Promise(t=>setTimeout(t,e))},Wn}function nr(){if(Jn)return Hn;Jn=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.TokenBucket=void 0;const e=tr();return Hn.TokenBucket=class{constructor({bucketSize:t,tokensPerInterval:n,interval:r,parentBucket:i}){if(this.bucketSize=t,this.tokensPerInterval=n,"string"==typeof r)switch(r){case"sec":case"second":this.interval=1e3;break;case"min":case"minute":this.interval=6e4;break;case"hr":case"hour":this.interval=36e5;break;case"day":this.interval=864e5;break;default:throw new Error("Invalid interval "+r)}else this.interval=r;this.parentBucket=i,this.content=0,this.lastDrip=e.getMilliseconds()}async removeTokens(t){if(0===this.bucketSize)return Number.POSITIVE_INFINITY;if(t>this.bucketSize)throw new Error(`Requested tokens ${t} exceeds bucket size ${this.bucketSize}`);this.drip();const n=async()=>{const n=Math.ceil((t-this.content)*(this.interval/this.tokensPerInterval));return await e.wait(n),this.removeTokens(t)};if(t>this.content)return n();if(null!=this.parentBucket){const e=await this.parentBucket.removeTokens(t);return t>this.content?n():(this.content-=t,Math.min(e,this.content))}return this.content-=t,this.content}tryRemoveTokens(e){return!this.bucketSize||!(e>this.bucketSize)&&(this.drip(),!(e>this.content)&&(!(this.parentBucket&&!this.parentBucket.tryRemoveTokens(e))&&(this.content-=e,!0)))}drip(){if(0===this.tokensPerInterval){const e=this.content;return this.content=this.bucketSize,this.content>e}const t=e.getMilliseconds(),n=Math.max(t-this.lastDrip,0);this.lastDrip=t;const r=n*(this.tokensPerInterval/this.interval),i=this.content;return this.content=Math.min(this.content+r,this.bucketSize),Math.floor(this.content)>Math.floor(i)}},Hn}function rr(){return Qn||(Qn=1,e=jn,t=jn&&jn.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=jn&&jn.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)},Object.defineProperty(e,"__esModule",{value:!0}),n(function(){if(Yn)return Vn;Yn=1,Object.defineProperty(Vn,"__esModule",{value:!0}),Vn.RateLimiter=void 0;const e=nr(),t=tr();return Vn.RateLimiter=class{constructor({tokensPerInterval:n,interval:r,fireImmediately:i}){this.tokenBucket=new e.TokenBucket({bucketSize:n,tokensPerInterval:n,interval:r}),this.tokenBucket.content=n,this.curIntervalStart=t.getMilliseconds(),this.tokensThisInterval=0,this.fireImmediately=null!=i&&i}async removeTokens(e){if(e>this.tokenBucket.bucketSize)throw new Error(`Requested tokens ${e} exceeds maximum tokens per interval ${this.tokenBucket.bucketSize}`);const n=t.getMilliseconds();if((n<this.curIntervalStart||n-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=n,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval){if(this.fireImmediately)return-1;{const r=Math.ceil(this.curIntervalStart+this.tokenBucket.interval-n);await t.wait(r);const i=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,i}}const r=await this.tokenBucket.removeTokens(e);return this.tokensThisInterval+=e,r}tryRemoveTokens(e){if(e>this.tokenBucket.bucketSize)return!1;const n=t.getMilliseconds();if((n<this.curIntervalStart||n-this.curIntervalStart>=this.tokenBucket.interval)&&(this.curIntervalStart=n,this.tokensThisInterval=0),e>this.tokenBucket.tokensPerInterval-this.tokensThisInterval)return!1;const r=this.tokenBucket.tryRemoveTokens(e);return r&&(this.tokensThisInterval+=e),r}getTokensRemaining(){return this.tokenBucket.drip(),this.tokenBucket.content}},Vn}(),e),n(nr(),e)),jn;var e,t,n}var ir=(Zn||(Zn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.RateLimiter=void 0;var t=function(){if(Xn)return qn;Xn=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.RateLimiter=void 0;var e=rr(),t=function(){function t(e,t){this.amount=e,this.interval=t,this.limiters={}}return t.prototype.take=function(t){var n=this.limiters[t];return n||(n=new e.RateLimiter({tokensPerInterval:this.amount,interval:this.interval}),this.limiters[t]=n),n.getTokensRemaining()<1||(n.removeTokens(1),!1)},t}();return qn.RateLimiter=t,qn}();Object.defineProperty(e,"RateLimiter",{enumerable:!0,get:function(){return t.RateLimiter}})}($n)),$n);function or(e){let t=e;const n=Math.floor(t/86400);t%=86400;const r=Math.floor(t/3600);t%=3600;const i=Math.floor(t/60),o=Math.floor(t%60);let s="";if(0===Math.floor(e))s="0s";else{const e=0===n,t=0===r,a=0===i,l=0===o;s+=e?"":`${n}d`,s+=e||t&&a&&l?"":", ",s+=t?"":`${r}h`,s+=t||a&&l?"":", ",s+=a?"":`${i}m`,s+=a||l?"":", ",s+=l?"":`${o}s`}return s}async function sr({fs:e,settings:t}){const n=JSON.parse(await e.readFile(new URL("../../library/library_listing.json",import.meta.url),"utf8")),r=t.embedColor,i=t.embedTextLimit??2e3,o=Object.keys(n.index),s=/\bread (?<refName>\S.+) (?<index>[\-.\d]+)\b/iv;function a(e,t){const n=e.chapters.length;return(t=Number.parseInt(String(t))-1)>-1&&t<n?e.chapters[t]:`I know which work you're talking about, but I can't find that section in it. Valid section numbers are from **1** to **${n}**.`}function l(e,t,o,s,a,l){let c="";c="hwa"===a.toLowerCase()||"hwp"===a.toLowerCase()?`**${s}. ${l.title}**\n`:`**Chapter ${s}, Para 1. ${l.title}**\n`;const u=function(e,t){const n=[];for(;e.length>t;){let r=e.slice(0,Math.max(0,t)).lastIndexOf(" ");r=r<=0?t:r,n.push(e.slice(0,Math.max(0,r)));let i=e.indexOf(" ",r)+1;(i<r||i>r+t)&&(i=r),e=e.slice(Math.max(0,i))}return n.push(e),n}(l.paras[0].text,i);u.forEach((i,s)=>{const d=new e.EmbedBuilder;if(d.setColor(r??null),d.setAuthor({name:`${n.list[n.index[a]].title} by ${n.list[n.index[a]].author}`,iconURL:t??void 0}),c+=i,d.setDescription(c),s===u.length-1&&void 0!==l.notes&&l.notes.length>0){let e="";for(const t of l.notes)e+=`${t.fn}. ${t.note}\n`;""!==e&&d.addFields({name:"Notes",value:e,inline:!1})}o.channel.send({embeds:[d]}),c=""})}async function c(t){return JSON.parse(await e.readFile(new URL(`../../library/${n.list[n.index[t]].filename}`,import.meta.url),"utf8"))}return{showList:function(e){const t=function(){let e="";for(const t of n.list)e+=`\n**${t.code.toUpperCase()}**: ${t.title} (${t.author})`;return e+="\n",e}();e.channel.send({content:`The following texts are available in my library, ${e.author.username}.`,embeds:[{color:8359053,description:"\nTo read from one of these texts, mention the book name and the section you're interested in. For example, to read the 12th Arabic Hidden Word, say: `!read HWA 12`.",fields:[{name:"Available Texts",value:t}]}]})},readBook:async function(e,t,r){const i=e.content,{groups:o}=i.match(s)??{};let{refName:u}=o;const{index:d}=o;if(!Object.hasOwn(n.index,u.toLowerCase()))return;u=u.toLowerCase();const h=a(await c(u),Number(d));"object"==typeof h?l(r,t,e,Number(d),u,h):e.channel.send(h)},readRandom:async function(e,t,n){const r=o[Math.floor(Math.random()*o.length)],i=await c(r),s=Math.floor(Math.random()*i.chapters.length);l(n,t,e,s,r,a(i,s))},reader:function(e){e.channel.send("I couldn't understand your request. Make sure you format your request like this: ``read <work> <section number>``. To see the list of works in my library, type ``read list``.")}}}const ar=function({wikiTools:e,client:t,_:n}){async function r(r,{forceToday:l}={}){const c=/!(?:bp|pedia|b9|bahai9|bm|media|img)/giv,u=r.content.split(" "),d=u.findIndex(e=>e.match(c));u.splice(0,d+1);const h=/-(?:r|rnd|rand)/giv,p=/-(?:t|tih|today)/giv,m=/-(?<nr>[1-5])/iv,f=u.join(" ");let g=!1,y=1,b=!1,v="",S="",T=!1;if(i.re.test(r.content))g=!0;else{a.re.test(r.content)?(v="bahaipedia.org",S="Bahaipedia"):o.re.test(r.content)?(v="bahai9.com",S="Bahai9",T=!0):s.re.test(r.content)&&(v="bahai.media",S="Bahaimedia");const e=u.findIndex(e=>e.match(h));if(-1!==e)b=!0,u.splice(e,1);else{const e=u.findIndex(e=>e.match(p));-1!==e&&(g=!0,u.splice(e,1))}const t=u.findIndex(e=>e.match(m));-1!==t&&(y=Number(u[t]),u.splice(t,1))}const _=t.emojis.cache.find(e=>"bstar"===e.name),E=_?.toString()?`${_.toString()} `:"";if(_&&r.react(_),b)try{await async function(t,n,r,i,o,s){let a;try{a=await e.wikiGetRandom(n,r,s)}catch(e){return void console.error("Error getting wiki random",e)}const l=a&&a.title&&a;if(l)return console.log("Query completed."),void t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${i}${o} has returned the following random page, ${t.author.username}:\n\n **[${l.title}](${l.url})**`,image:{url:""!==l.img?l.img:""}}]});t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${i}${o} did not return any results for your query, ${t.author.username}. There may have been a network problem. If you think you're getting this message in error, you may want to try again later.`}]})}(r,y,v,E,S,T)}catch(e){return void console.error("Error with random wiki",e)}else if(g&&(l||"bahaipedia.org"===v))try{await async function(t,r){let i;try{i=await e.bpGetToday()}catch(e){return void console.error("Error getting Bahaipedia Today",e)}if(i){console.log("Query completed.");const e={month:"long",day:"numeric"},o=Date.now(),s=new Intl.DateTimeFormat(n.resolvedLocale,e).format(o);return void t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${r}Here's Bahaipedia's Today in History entry for ${s}, ${t.author.username}:\n\n ${i}`}]})}t.channel.send({content:"Here is the result of your query.",embeds:[{color:3447003,description:`${r}Bahaipedia did not return any results for your query, ${t.author.username}. There may have been a network problem. If you think you're getting this message in error, you may want to try again later.`}]})}(r,E)}catch(e){return void console.error("Error with today in history",e)}else if(/[\w\s'‘’\(\)\-,.]+/giv.test(f))try{await async function(t,n,r,i,o,s,a){let l;try{l=await e.wikiGetURL(n,r,i,a)}catch(e){console.error("Error getting",e)}console.log("Result:",l);const c="object"==typeof l&&l?.title&&l;if(c){console.log(`Search completed: ${n} => ${c.title}`);const e=/<span class="searchmatch">|<\/span>/giv,r=c.snippet?.replaceAll(e,"**");return void t.channel.send({content:"Here is the result of your search.",embeds:[{color:3447003,description:`${o}${s} has returned the following page as the top result for your search, ${t.author.username}:\n\n **[${c.title}](${c.url})**\n\n${r}`,image:{url:""!==c.img?c.img:""}}]})}t.channel.send({content:"Here is the result of your search.",embeds:[{color:3447003,description:`${o}${s} did not return any results for your search, ${t.author.username}. Did you spell your search terms correctly?\n\nThere may also have been a network problem. If you think you're getting this message in error, you may want to try again later.`}]})}(r,f,y,v,E,S,T)}catch(e){return void console.error("Error searching wiki",e)}console.log(`BP command issued by ${r.author.username}.`)}const i={re:/!today\b/iv,helpInfo:{name:"!today",value:"Displays a list of events from today's date in history, via Bahaipedia."},action:async e=>await r(e,{forceToday:!0})},o={re:/!(?:b9|bahai9)\b/iv,action:async e=>await r(e)},s={re:/!(?:bm|media|img)\b/iv,action:async e=>await r(e)},a={re:/!(?:bp|pedia)\b/iv,action:r,helpInfo:{name:"!bp | !b9 | !bm [-rand | *‹keyword›*]",value:"Return a link to the top result for *keyword* on Bahaipedia (`!bp`), Bahai9.com (`!b9`), or Bahai.media (`!bm`); `-rand` displays a random article (or file)."}};return{bp:a,today:i,b9:o,bm:s}};var lr,cr={},ur={};var dr=function(){return lr||(lr=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.VoiceChannelEffectSendAnimationType=ur.GatewayDispatchEvents=ur.GatewayIntentBits=ur.GatewayCloseCodes=ur.GatewayOpcodes=ur.GatewayVersion=void 0,ur.GatewayVersion="10",function(e){e[e.Dispatch=0]="Dispatch",e[e.Heartbeat=1]="Heartbeat",e[e.Identify=2]="Identify",e[e.PresenceUpdate=3]="PresenceUpdate",e[e.VoiceStateUpdate=4]="VoiceStateUpdate",e[e.Resume=6]="Resume",e[e.Reconnect=7]="Reconnect",e[e.RequestGuildMembers=8]="RequestGuildMembers",e[e.InvalidSession=9]="InvalidSession",e[e.Hello=10]="Hello",e[e.HeartbeatAck=11]="HeartbeatAck",e[e.RequestSoundboardSounds=31]="RequestSoundboardSounds"}(e||(ur.GatewayOpcodes=e={})),function(e){e[e.UnknownError=4e3]="UnknownError",e[e.UnknownOpcode=4001]="UnknownOpcode",e[e.DecodeError=4002]="DecodeError",e[e.NotAuthenticated=4003]="NotAuthenticated",e[e.AuthenticationFailed=4004]="AuthenticationFailed",e[e.AlreadyAuthenticated=4005]="AlreadyAuthenticated",e[e.InvalidSeq=4007]="InvalidSeq",e[e.RateLimited=4008]="RateLimited",e[e.SessionTimedOut=4009]="SessionTimedOut",e[e.InvalidShard=4010]="InvalidShard",e[e.ShardingRequired=4011]="ShardingRequired",e[e.InvalidAPIVersion=4012]="InvalidAPIVersion",e[e.InvalidIntents=4013]="InvalidIntents",e[e.DisallowedIntents=4014]="DisallowedIntents"}(t||(ur.GatewayCloseCodes=t={})),function(e){e[e.Guilds=1]="Guilds",e[e.GuildMembers=2]="GuildMembers",e[e.GuildModeration=4]="GuildModeration",e[e.GuildBans=4]="GuildBans",e[e.GuildExpressions=8]="GuildExpressions",e[e.GuildEmojisAndStickers=8]="GuildEmojisAndStickers",e[e.GuildIntegrations=16]="GuildIntegrations",e[e.GuildWebhooks=32]="GuildWebhooks",e[e.GuildInvites=64]="GuildInvites",e[e.GuildVoiceStates=128]="GuildVoiceStates",e[e.GuildPresences=256]="GuildPresences",e[e.GuildMessages=512]="GuildMessages",e[e.GuildMessageReactions=1024]="GuildMessageReactions",e[e.GuildMessageTyping=2048]="GuildMessageTyping",e[e.DirectMessages=4096]="DirectMessages",e[e.DirectMessageReactions=8192]="DirectMessageReactions",e[e.DirectMessageTyping=16384]="DirectMessageTyping",e[e.MessageContent=32768]="MessageContent",e[e.GuildScheduledEvents=65536]="GuildScheduledEvents",e[e.AutoModerationConfiguration=1048576]="AutoModerationConfiguration",e[e.AutoModerationExecution=2097152]="AutoModerationExecution",e[e.GuildMessagePolls=16777216]="GuildMessagePolls",e[e.DirectMessagePolls=33554432]="DirectMessagePolls"}(n||(ur.GatewayIntentBits=n={})),function(e){e.ApplicationCommandPermissionsUpdate="APPLICATION_COMMAND_PERMISSIONS_UPDATE",e.AutoModerationActionExecution="AUTO_MODERATION_ACTION_EXECUTION",e.AutoModerationRuleCreate="AUTO_MODERATION_RULE_CREATE",e.AutoModerationRuleDelete="AUTO_MODERATION_RULE_DELETE",e.AutoModerationRuleUpdate="AUTO_MODERATION_RULE_UPDATE",e.ChannelCreate="CHANNEL_CREATE",e.ChannelDelete="CHANNEL_DELETE",e.ChannelPinsUpdate="CHANNEL_PINS_UPDATE",e.ChannelUpdate="CHANNEL_UPDATE",e.EntitlementCreate="ENTITLEMENT_CREATE",e.EntitlementDelete="ENTITLEMENT_DELETE",e.EntitlementUpdate="ENTITLEMENT_UPDATE",e.GuildAuditLogEntryCreate="GUILD_AUDIT_LOG_ENTRY_CREATE",e.GuildBanAdd="GUILD_BAN_ADD",e.GuildBanRemove="GUILD_BAN_REMOVE",e.GuildCreate="GUILD_CREATE",e.GuildDelete="GUILD_DELETE",e.GuildEmojisUpdate="GUILD_EMOJIS_UPDATE",e.GuildIntegrationsUpdate="GUILD_INTEGRATIONS_UPDATE",e.GuildMemberAdd="GUILD_MEMBER_ADD",e.GuildMemberRemove="GUILD_MEMBER_REMOVE",e.GuildMembersChunk="GUILD_MEMBERS_CHUNK",e.GuildMemberUpdate="GUILD_MEMBER_UPDATE",e.GuildRoleCreate="GUILD_ROLE_CREATE",e.GuildRoleDelete="GUILD_ROLE_DELETE",e.GuildRoleUpdate="GUILD_ROLE_UPDATE",e.GuildScheduledEventCreate="GUILD_SCHEDULED_EVENT_CREATE",e.GuildScheduledEventDelete="GUILD_SCHEDULED_EVENT_DELETE",e.GuildScheduledEventUpdate="GUILD_SCHEDULED_EVENT_UPDATE",e.GuildScheduledEventUserAdd="GUILD_SCHEDULED_EVENT_USER_ADD",e.GuildScheduledEventUserRemove="GUILD_SCHEDULED_EVENT_USER_REMOVE",e.GuildSoundboardSoundCreate="GUILD_SOUNDBOARD_SOUND_CREATE",e.GuildSoundboardSoundDelete="GUILD_SOUNDBOARD_SOUND_DELETE",e.GuildSoundboardSoundsUpdate="GUILD_SOUNDBOARD_SOUNDS_UPDATE",e.GuildSoundboardSoundUpdate="GUILD_SOUNDBOARD_SOUND_UPDATE",e.SoundboardSounds="SOUNDBOARD_SOUNDS",e.GuildStickersUpdate="GUILD_STICKERS_UPDATE",e.GuildUpdate="GUILD_UPDATE",e.IntegrationCreate="INTEGRATION_CREATE",e.IntegrationDelete="INTEGRATION_DELETE",e.IntegrationUpdate="INTEGRATION_UPDATE",e.InteractionCreate="INTERACTION_CREATE",e.InviteCreate="INVITE_CREATE",e.InviteDelete="INVITE_DELETE",e.MessageCreate="MESSAGE_CREATE",e.MessageDelete="MESSAGE_DELETE",e.MessageDeleteBulk="MESSAGE_DELETE_BULK",e.MessagePollVoteAdd="MESSAGE_POLL_VOTE_ADD",e.MessagePollVoteRemove="MESSAGE_POLL_VOTE_REMOVE",e.MessageReactionAdd="MESSAGE_REACTION_ADD",e.MessageReactionRemove="MESSAGE_REACTION_REMOVE",e.MessageReactionRemoveAll="MESSAGE_REACTION_REMOVE_ALL",e.MessageReactionRemoveEmoji="MESSAGE_REACTION_REMOVE_EMOJI",e.MessageUpdate="MESSAGE_UPDATE",e.PresenceUpdate="PRESENCE_UPDATE",e.RateLimited="RATE_LIMITED",e.Ready="READY",e.Resumed="RESUMED",e.StageInstanceCreate="STAGE_INSTANCE_CREATE",e.StageInstanceDelete="STAGE_INSTANCE_DELETE",e.StageInstanceUpdate="STAGE_INSTANCE_UPDATE",e.SubscriptionCreate="SUBSCRIPTION_CREATE",e.SubscriptionDelete="SUBSCRIPTION_DELETE",e.SubscriptionUpdate="SUBSCRIPTION_UPDATE",e.ThreadCreate="THREAD_CREATE",e.ThreadDelete="THREAD_DELETE",e.ThreadListSync="THREAD_LIST_SYNC",e.ThreadMembersUpdate="THREAD_MEMBERS_UPDATE",e.ThreadMemberUpdate="THREAD_MEMBER_UPDATE",e.ThreadUpdate="THREAD_UPDATE",e.TypingStart="TYPING_START",e.UserUpdate="USER_UPDATE",e.VoiceChannelEffectSend="VOICE_CHANNEL_EFFECT_SEND",e.VoiceServerUpdate="VOICE_SERVER_UPDATE",e.VoiceStateUpdate="VOICE_STATE_UPDATE",e.WebhooksUpdate="WEBHOOKS_UPDATE"}(r||(ur.GatewayDispatchEvents=r={})),function(e){e[e.Premium=0]="Premium",e[e.Basic=1]="Basic"}(i||(ur.VoiceChannelEffectSendAnimationType=i={}))),ur;var e,t,n,r,i}(),hr=Ae(dr);const pr=hr.GatewayCloseCodes,mr=hr.GatewayDispatchEvents,fr=hr.GatewayIntentBits,gr=hr.GatewayOpcodes,yr=hr.GatewayVersion,br=hr.VoiceChannelEffectSendAnimationType;var vr,Sr=ke(Object.freeze({__proto__:null,GatewayCloseCodes:pr,GatewayDispatchEvents:mr,GatewayIntentBits:fr,GatewayOpcodes:gr,GatewayVersion:yr,VoiceChannelEffectSendAnimationType:br,default:hr})),Tr={};var _r,Er=Ae((vr||(vr=1,_r=Tr,Object.defineProperty(_r,"__esModule",{value:!0}),_r.FormattingPatterns=void 0,_r.FormattingPatterns={User:/<@(?<id>\d{17,20})>/,UserWithNickname:/<@!(?<id>\d{17,20})>/,UserWithOptionalNickname:/<@!?(?<id>\d{17,20})>/,Channel:/<#(?<id>\d{17,20})>/,Role:/<@&(?<id>\d{17,20})>/,SlashCommand:/<\/(?<fullName>(?<name>[-_\p{Letter}\p{Number}\p{sc=Deva}\p{sc=Thai}]{1,32})(?: (?<subcommandOrGroup>[-_\p{Letter}\p{Number}\p{sc=Deva}\p{sc=Thai}]{1,32}))?(?: (?<subcommand>[-_\p{Letter}\p{Number}\p{sc=Deva}\p{sc=Thai}]{1,32}))?):(?<id>\d{17,20})>/u,Emoji:/<(?<animated>a)?:(?<name>\w{2,32}):(?<id>\d{17,20})>/,AnimatedEmoji:/<(?<animated>a):(?<name>\w{2,32}):(?<id>\d{17,20})>/,StaticEmoji:/<:(?<name>\w{2,32}):(?<id>\d{17,20})>/,Timestamp:/<t:(?<timestamp>-?\d{1,13})(:(?<style>[DFRTdft]))?>/,DefaultStyledTimestamp:/<t:(?<timestamp>-?\d{1,13})>/,StyledTimestamp:/<t:(?<timestamp>-?\d{1,13}):(?<style>[DFRTdft])>/,GuildNavigation:/<id:(?<type>customize|browse|guide|linked-roles)>/,LinkedRole:/<id:linked-roles:(?<id>\d{17,20})>/},Object.freeze(_r.FormattingPatterns)),Tr));const wr=Er.FormattingPatterns;var Ar,kr=ke(Object.freeze({__proto__:null,FormattingPatterns:wr,default:Er})),Cr={},Ir={};var Or,Rr={};var Mr,Pr={};var Dr,Nr={};var Ur,xr={};var Lr,Br={};var Fr,Gr={};var $r,qr={};var jr,Vr,Hr={},Wr={},zr={},Kr={};function Jr(){return Vr||(Vr=1,function(e){var t=zr&&zr.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=zr&&zr.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(function(){return jr||(jr=1,Object.defineProperty(Kr,"__esModule",{value:!0}),Kr.ApplicationCommandOptionType=void 0,function(e){e[e.Subcommand=1]="Subcommand",e[e.SubcommandGroup=2]="SubcommandGroup",e[e.String=3]="String",e[e.Integer=4]="Integer",e[e.Boolean=5]="Boolean",e[e.User=6]="User",e[e.Channel=7]="Channel",e[e.Role=8]="Role",e[e.Mentionable=9]="Mentionable",e[e.Number=10]="Number",e[e.Attachment=11]="Attachment"}(e||(Kr.ApplicationCommandOptionType=e={}))),Kr;var e}(),e)}(zr)),zr}var Yr,Qr,Xr={};function Zr(){return Qr||(Qr=1,function(e){var t,n,r,i,o=Wr&&Wr.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=Wr&&Wr.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||o(t,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.EntryPointCommandHandlerType=e.InteractionContextType=e.ApplicationIntegrationType=e.ApplicationCommandType=void 0,s(Jr(),e),s(function(){return Yr||(Yr=1,Object.defineProperty(Xr,"__esModule",{value:!0}),Xr.APIApplicationCommandPermissionsConstant=Xr.ApplicationCommandPermissionType=void 0,function(e){e[e.Role=1]="Role",e[e.User=2]="User",e[e.Channel=3]="Channel"}(e||(Xr.ApplicationCommandPermissionType=e={})),Xr.APIApplicationCommandPermissionsConstant={Everyone:e=>String(e),AllChannels:e=>String(BigInt(e)-1n)}),Xr;var e}(),e),function(e){e[e.ChatInput=1]="ChatInput",e[e.User=2]="User",e[e.Message=3]="Message",e[e.PrimaryEntryPoint=4]="PrimaryEntryPoint"}(t||(e.ApplicationCommandType=t={})),function(e){e[e.GuildInstall=0]="GuildInstall",e[e.UserInstall=1]="UserInstall"}(n||(e.ApplicationIntegrationType=n={})),function(e){e[e.Guild=0]="Guild",e[e.BotDM=1]="BotDM",e[e.PrivateChannel=2]="PrivateChannel"}(r||(e.InteractionContextType=r={})),function(e){e[e.AppHandler=1]="AppHandler",e[e.DiscordLaunchActivity=2]="DiscordLaunchActivity"}(i||(e.EntryPointCommandHandlerType=i={}))}(Wr)),Wr}var ei,ti,ni={};function ri(){return ti||(ti=1,function(e){var t=Hr&&Hr.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Hr&&Hr.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(Zr(),e),n(function(){return ei||(ei=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.InteractionResponseType=ni.InteractionType=void 0,function(e){e[e.Ping=1]="Ping",e[e.ApplicationCommand=2]="ApplicationCommand",e[e.MessageComponent=3]="MessageComponent",e[e.ApplicationCommandAutocomplete=4]="ApplicationCommandAutocomplete",e[e.ModalSubmit=5]="ModalSubmit"}(e||(ni.InteractionType=e={})),function(e){e[e.Pong=1]="Pong",e[e.ChannelMessageWithSource=4]="ChannelMessageWithSource",e[e.DeferredChannelMessageWithSource=5]="DeferredChannelMessageWithSource",e[e.DeferredMessageUpdate=6]="DeferredMessageUpdate",e[e.UpdateMessage=7]="UpdateMessage",e[e.ApplicationCommandAutocompleteResult=8]="ApplicationCommandAutocompleteResult",e[e.Modal=9]="Modal",e[e.PremiumRequired=10]="PremiumRequired",e[e.LaunchActivity=12]="LaunchActivity"}(t||(ni.InteractionResponseType=t={}))),ni;var e,t}(),e)}(Hr)),Hr}var ii,oi={};var si,ai={};var li,ci={};var ui,di={};var hi,pi={};var mi,fi={};var gi,yi={};var bi,vi={};var Si,Ti={};var _i,Ei={};var wi,Ai,ki={};var Ci=(Ai||(Ai=1,function(e){var t=Cr&&Cr.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=Cr&&Cr.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),n((Ar||(Ar=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PermissionFlagsBits=void 0,e.PermissionFlagsBits={CreateInstantInvite:1n,KickMembers:2n,BanMembers:4n,Administrator:8n,ManageChannels:16n,ManageGuild:32n,AddReactions:64n,ViewAuditLog:128n,PrioritySpeaker:256n,Stream:512n,ViewChannel:1024n,SendMessages:2048n,SendTTSMessages:4096n,ManageMessages:8192n,EmbedLinks:16384n,AttachFiles:32768n,ReadMessageHistory:65536n,MentionEveryone:1n<<17n,UseExternalEmojis:1n<<18n,ViewGuildInsights:1n<<19n,Connect:1n<<20n,Speak:1n<<21n,MuteMembers:1n<<22n,DeafenMembers:1n<<23n,MoveMembers:1n<<24n,UseVAD:1n<<25n,ChangeNickname:1n<<26n,ManageNicknames:1n<<27n,ManageRoles:1n<<28n,ManageWebhooks:1n<<29n,ManageEmojisAndStickers:1n<<30n,ManageGuildExpressions:1n<<30n,UseApplicationCommands:1n<<31n,RequestToSpeak:1n<<32n,ManageEvents:1n<<33n,ManageThreads:1n<<34n,CreatePublicThreads:1n<<35n,CreatePrivateThreads:1n<<36n,UseExternalStickers:1n<<37n,SendMessagesInThreads:1n<<38n,UseEmbeddedActivities:1n<<39n,ModerateMembers:1n<<40n,ViewCreatorMonetizationAnalytics:1n<<41n,UseSoundboard:1n<<42n,CreateGuildExpressions:1n<<43n,CreateEvents:1n<<44n,UseExternalSounds:1n<<45n,SendVoiceMessages:1n<<46n,SendPolls:1n<<49n,UseExternalApps:1n<<50n,PinMessages:1n<<51n},Object.freeze(e.PermissionFlagsBits)}(Ir)),Ir),e),n(function(){return Or||(Or=1,Object.defineProperty(Rr,"__esModule",{value:!0}),Rr.ApplicationWebhookEventStatus=Rr.ApplicationRoleConnectionMetadataType=Rr.ApplicationFlags=void 0,function(e){e[e.EmbeddedReleased=2]="EmbeddedReleased",e[e.ManagedEmoji=4]="ManagedEmoji",e[e.EmbeddedIAP=8]="EmbeddedIAP",e[e.GroupDMCreate=16]="GroupDMCreate",e[e.ApplicationAutoModerationRuleCreateBadge=64]="ApplicationAutoModerationRuleCreateBadge",e[e.RPCHasConnected=2048]="RPCHasConnected",e[e.GatewayPresence=4096]="GatewayPresence",e[e.GatewayPresenceLimited=8192]="GatewayPresenceLimited",e[e.GatewayGuildMembers=16384]="GatewayGuildMembers",e[e.GatewayGuildMembersLimited=32768]="GatewayGuildMembersLimited",e[e.VerificationPendingGuildLimit=65536]="VerificationPendingGuildLimit",e[e.Embedded=131072]="Embedded",e[e.GatewayMessageContent=262144]="GatewayMessageContent",e[e.GatewayMessageContentLimited=524288]="GatewayMessageContentLimited",e[e.EmbeddedFirstParty=1048576]="EmbeddedFirstParty",e[e.ApplicationCommandBadge=8388608]="ApplicationCommandBadge"}(e||(Rr.ApplicationFlags=e={})),function(e){e[e.IntegerLessThanOrEqual=1]="IntegerLessThanOrEqual",e[e.IntegerGreaterThanOrEqual=2]="IntegerGreaterThanOrEqual",e[e.IntegerEqual=3]="IntegerEqual",e[e.IntegerNotEqual=4]="IntegerNotEqual",e[e.DatetimeLessThanOrEqual=5]="DatetimeLessThanOrEqual",e[e.DatetimeGreaterThanOrEqual=6]="DatetimeGreaterThanOrEqual",e[e.BooleanEqual=7]="BooleanEqual",e[e.BooleanNotEqual=8]="BooleanNotEqual"}(t||(Rr.ApplicationRoleConnectionMetadataType=t={})),function(e){e[e.Disabled=1]="Disabled",e[e.Enabled=2]="Enabled",e[e.DisabledByDiscord=3]="DisabledByDiscord"}(n||(Rr.ApplicationWebhookEventStatus=n={}))),Rr;var e,t,n}(),e),n(function(){return Mr||(Mr=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.AuditLogOptionsType=Pr.AuditLogEvent=void 0,function(e){e[e.GuildUpdate=1]="GuildUpdate",e[e.ChannelCreate=10]="ChannelCreate",e[e.ChannelUpdate=11]="ChannelUpdate",e[e.ChannelDelete=12]="ChannelDelete",e[e.ChannelOverwriteCreate=13]="ChannelOverwriteCreate",e[e.ChannelOverwriteUpdate=14]="ChannelOverwriteUpdate",e[e.ChannelOverwriteDelete=15]="ChannelOverwriteDelete",e[e.MemberKick=20]="MemberKick",e[e.MemberPrune=21]="MemberPrune",e[e.MemberBanAdd=22]="MemberBanAdd",e[e.MemberBanRemove=23]="MemberBanRemove",e[e.MemberUpdate=24]="MemberUpdate",e[e.MemberRoleUpdate=25]="MemberRoleUpdate",e[e.MemberMove=26]="MemberMove",e[e.MemberDisconnect=27]="MemberDisconnect",e[e.BotAdd=28]="BotAdd",e[e.RoleCreate=30]="RoleCreate",e[e.RoleUpdate=31]="RoleUpdate",e[e.RoleDelete=32]="RoleDelete",e[e.InviteCreate=40]="InviteCreate",e[e.InviteUpdate=41]="InviteUpdate",e[e.InviteDelete=42]="InviteDelete",e[e.WebhookCreate=50]="WebhookCreate",e[e.WebhookUpdate=51]="WebhookUpdate",e[e.WebhookDelete=52]="WebhookDelete",e[e.EmojiCreate=60]="EmojiCreate",e[e.EmojiUpdate=61]="EmojiUpdate",e[e.EmojiDelete=62]="EmojiDelete",e[e.MessageDelete=72]="MessageDelete",e[e.MessageBulkDelete=73]="MessageBulkDelete",e[e.MessagePin=74]="MessagePin",e[e.MessageUnpin=75]="MessageUnpin",e[e.IntegrationCreate=80]="IntegrationCreate",e[e.IntegrationUpdate=81]="IntegrationUpdate",e[e.IntegrationDelete=82]="IntegrationDelete",e[e.StageInstanceCreate=83]="StageInstanceCreate",e[e.StageInstanceUpdate=84]="StageInstanceUpdate",e[e.StageInstanceDelete=85]="StageInstanceDelete",e[e.StickerCreate=90]="StickerCreate",e[e.StickerUpdate=91]="StickerUpdate",e[e.StickerDelete=92]="StickerDelete",e[e.GuildScheduledEventCreate=100]="GuildScheduledEventCreate",e[e.GuildScheduledEventUpdate=101]="GuildScheduledEventUpdate",e[e.GuildScheduledEventDelete=102]="GuildScheduledEventDelete",e[e.ThreadCreate=110]="ThreadCreate",e[e.ThreadUpdate=111]="ThreadUpdate",e[e.ThreadDelete=112]="ThreadDelete",e[e.ApplicationCommandPermissionUpdate=121]="ApplicationCommandPermissionUpdate",e[e.SoundboardSoundCreate=130]="SoundboardSoundCreate",e[e.SoundboardSoundUpdate=131]="SoundboardSoundUpdate",e[e.SoundboardSoundDelete=132]="SoundboardSoundDelete",e[e.AutoModerationRuleCreate=140]="AutoModerationRuleCreate",e[e.AutoModerationRuleUpdate=141]="AutoModerationRuleUpdate",e[e.AutoModerationRuleDelete=142]="AutoModerationRuleDelete",e[e.AutoModerationBlockMessage=143]="AutoModerationBlockMessage",e[e.AutoModerationFlagToChannel=144]="AutoModerationFlagToChannel",e[e.AutoModerationUserCommunicationDisabled=145]="AutoModerationUserCommunicationDisabled",e[e.AutoModerationQuarantineUser=146]="AutoModerationQuarantineUser",e[e.CreatorMonetizationRequestCreated=150]="CreatorMonetizationRequestCreated",e[e.CreatorMonetizationTermsAccepted=151]="CreatorMonetizationTermsAccepted",e[e.OnboardingPromptCreate=163]="OnboardingPromptCreate",e[e.OnboardingPromptUpdate=164]="OnboardingPromptUpdate",e[e.OnboardingPromptDelete=165]="OnboardingPromptDelete",e[e.OnboardingCreate=166]="OnboardingCreate",e[e.OnboardingUpdate=167]="OnboardingUpdate",e[e.HomeSettingsCreate=190]="HomeSettingsCreate",e[e.HomeSettingsUpdate=191]="HomeSettingsUpdate"}(e||(Pr.AuditLogEvent=e={})),function(e){e.Role="0",e.Member="1"}(t||(Pr.AuditLogOptionsType=t={}))),Pr;var e,t}(),e),n(function(){return Dr||(Dr=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.AutoModerationActionType=Nr.AutoModerationRuleEventType=Nr.AutoModerationRuleKeywordPresetType=Nr.AutoModerationRuleTriggerType=void 0,function(e){e[e.Keyword=1]="Keyword",e[e.Spam=3]="Spam",e[e.KeywordPreset=4]="KeywordPreset",e[e.MentionSpam=5]="MentionSpam",e[e.MemberProfile=6]="MemberProfile"}(e||(Nr.AutoModerationRuleTriggerType=e={})),function(e){e[e.Profanity=1]="Profanity",e[e.SexualContent=2]="SexualContent",e[e.Slurs=3]="Slurs"}(t||(Nr.AutoModerationRuleKeywordPresetType=t={})),function(e){e[e.MessageSend=1]="MessageSend",e[e.MemberUpdate=2]="MemberUpdate"}(n||(Nr.AutoModerationRuleEventType=n={})),function(e){e[e.BlockMessage=1]="BlockMessage",e[e.SendAlertMessage=2]="SendAlertMessage",e[e.Timeout=3]="Timeout",e[e.BlockMemberInteraction=4]="BlockMemberInteraction"}(r||(Nr.AutoModerationActionType=r={}))),Nr;var e,t,n,r}(),e),n(function(){return Ur||(Ur=1,Object.defineProperty(xr,"__esModule",{value:!0}),xr.ChannelFlags=xr.ThreadMemberFlags=xr.ThreadAutoArchiveDuration=xr.OverwriteType=xr.VideoQualityMode=xr.ChannelType=xr.ForumLayoutType=xr.SortOrderType=void 0,function(e){e[e.LatestActivity=0]="LatestActivity",e[e.CreationDate=1]="CreationDate"}(e||(xr.SortOrderType=e={})),function(e){e[e.NotSet=0]="NotSet",e[e.ListView=1]="ListView",e[e.GalleryView=2]="GalleryView"}(t||(xr.ForumLayoutType=t={})),function(e){e[e.GuildText=0]="GuildText",e[e.DM=1]="DM",e[e.GuildVoice=2]="GuildVoice",e[e.GroupDM=3]="GroupDM",e[e.GuildCategory=4]="GuildCategory",e[e.GuildAnnouncement=5]="GuildAnnouncement",e[e.AnnouncementThread=10]="AnnouncementThread",e[e.PublicThread=11]="PublicThread",e[e.PrivateThread=12]="PrivateThread",e[e.GuildStageVoice=13]="GuildStageVoice",e[e.GuildDirectory=14]="GuildDirectory",e[e.GuildForum=15]="GuildForum",e[e.GuildMedia=16]="GuildMedia",e[e.GuildNews=5]="GuildNews",e[e.GuildNewsThread=10]="GuildNewsThread",e[e.GuildPublicThread=11]="GuildPublicThread",e[e.GuildPrivateThread=12]="GuildPrivateThread"}(n||(xr.ChannelType=n={})),function(e){e[e.Auto=1]="Auto",e[e.Full=2]="Full"}(r||(xr.VideoQualityMode=r={})),function(e){e[e.Role=0]="Role",e[e.Member=1]="Member"}(i||(xr.OverwriteType=i={})),function(e){e[e.OneHour=60]="OneHour",e[e.OneDay=1440]="OneDay",e[e.ThreeDays=4320]="ThreeDays",e[e.OneWeek=10080]="OneWeek"}(o||(xr.ThreadAutoArchiveDuration=o={})),function(e){e[e.HasInteracted=1]="HasInteracted",e[e.AllMessages=2]="AllMessages",e[e.OnlyMentions=4]="OnlyMentions",e[e.NoMessages=8]="NoMessages"}(s||(xr.ThreadMemberFlags=s={})),function(e){e[e.GuildFeedRemoved=1]="GuildFeedRemoved",e[e.Pinned=2]="Pinned",e[e.ActiveChannelsRemoved=4]="ActiveChannelsRemoved",e[e.RequireTag=16]="RequireTag",e[e.IsSpam=32]="IsSpam",e[e.IsGuildResourceChannel=128]="IsGuildResourceChannel",e[e.ClydeAI=256]="ClydeAI",e[e.IsScheduledForDeletion=512]="IsScheduledForDeletion",e[e.HideMediaDownloadOptions=32768]="HideMediaDownloadOptions"}(a||(xr.ChannelFlags=a={}))),xr;var e,t,n,r,i,o,s,a}(),e),n(function(){return Lr||(Lr=1,Object.defineProperty(Br,"__esModule",{value:!0}),Br.ActivityFlags=Br.StatusDisplayType=Br.ActivityType=Br.ActivityPlatform=Br.PresenceUpdateStatus=void 0,function(e){e.Online="online",e.DoNotDisturb="dnd",e.Idle="idle",e.Invisible="invisible",e.Offline="offline"}(e||(Br.PresenceUpdateStatus=e={})),function(e){e.Desktop="desktop",e.Xbox="xbox",e.Samsung="samsung",e.IOS="ios",e.Android="android",e.Embedded="embedded",e.PS4="ps4",e.PS5="ps5"}(t||(Br.ActivityPlatform=t={})),function(e){e[e.Playing=0]="Playing",e[e.Streaming=1]="Streaming",e[e.Listening=2]="Listening",e[e.Watching=3]="Watching",e[e.Custom=4]="Custom",e[e.Competing=5]="Competing"}(n||(Br.ActivityType=n={})),function(e){e[e.Name=0]="Name",e[e.State=1]="State",e[e.Details=2]="Details"}(r||(Br.StatusDisplayType=r={})),function(e){e[e.Instance=1]="Instance",e[e.Join=2]="Join",e[e.Spectate=4]="Spectate",e[e.JoinRequest=8]="JoinRequest",e[e.Sync=16]="Sync",e[e.Play=32]="Play",e[e.PartyPrivacyFriends=64]="PartyPrivacyFriends",e[e.PartyPrivacyVoiceChannel=128]="PartyPrivacyVoiceChannel",e[e.Embedded=256]="Embedded"}(i||(Br.ActivityFlags=i={}))),Br;var e,t,n,r,i}(),e),n(function(){return Fr||(Fr=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.GuildOnboardingPromptType=Gr.GuildOnboardingMode=Gr.MembershipScreeningFieldType=Gr.GuildWidgetStyle=Gr.IntegrationExpireBehavior=Gr.GuildMemberFlags=Gr.GuildFeature=Gr.GuildSystemChannelFlags=Gr.GuildHubType=Gr.GuildPremiumTier=Gr.GuildVerificationLevel=Gr.GuildNSFWLevel=Gr.GuildMFALevel=Gr.GuildExplicitContentFilter=Gr.GuildDefaultMessageNotifications=void 0,function(e){e[e.AllMessages=0]="AllMessages",e[e.OnlyMentions=1]="OnlyMentions"}(e||(Gr.GuildDefaultMessageNotifications=e={})),function(e){e[e.Disabled=0]="Disabled",e[e.MembersWithoutRoles=1]="MembersWithoutRoles",e[e.AllMembers=2]="AllMembers"}(t||(Gr.GuildExplicitContentFilter=t={})),function(e){e[e.None=0]="None",e[e.Elevated=1]="Elevated"}(n||(Gr.GuildMFALevel=n={})),function(e){e[e.Default=0]="Default",e[e.Explicit=1]="Explicit",e[e.Safe=2]="Safe",e[e.AgeRestricted=3]="AgeRestricted"}(r||(Gr.GuildNSFWLevel=r={})),function(e){e[e.None=0]="None",e[e.Low=1]="Low",e[e.Medium=2]="Medium",e[e.High=3]="High",e[e.VeryHigh=4]="VeryHigh"}(i||(Gr.GuildVerificationLevel=i={})),function(e){e[e.None=0]="None",e[e.Tier1=1]="Tier1",e[e.Tier2=2]="Tier2",e[e.Tier3=3]="Tier3"}(o||(Gr.GuildPremiumTier=o={})),function(e){e[e.Default=0]="Default",e[e.HighSchool=1]="HighSchool",e[e.College=2]="College"}(s||(Gr.GuildHubType=s={})),function(e){e[e.SuppressJoinNotifications=1]="SuppressJoinNotifications",e[e.SuppressPremiumSubscriptions=2]="SuppressPremiumSubscriptions",e[e.SuppressGuildReminderNotifications=4]="SuppressGuildReminderNotifications",e[e.SuppressJoinNotificationReplies=8]="SuppressJoinNotificationReplies",e[e.SuppressRoleSubscriptionPurchaseNotifications=16]="SuppressRoleSubscriptionPurchaseNotifications",e[e.SuppressRoleSubscriptionPurchaseNotificationReplies=32]="SuppressRoleSubscriptionPurchaseNotificationReplies"}(a||(Gr.GuildSystemChannelFlags=a={})),function(e){e.AnimatedBanner="ANIMATED_BANNER",e.AnimatedIcon="ANIMATED_ICON",e.ApplicationCommandPermissionsV2="APPLICATION_COMMAND_PERMISSIONS_V2",e.AutoModeration="AUTO_MODERATION",e.Banner="BANNER",e.Community="COMMUNITY",e.CreatorMonetizableProvisional="CREATOR_MONETIZABLE_PROVISIONAL",e.CreatorStorePage="CREATOR_STORE_PAGE",e.DeveloperSupportServer="DEVELOPER_SUPPORT_SERVER",e.Discoverable="DISCOVERABLE",e.Featurable="FEATURABLE",e.HasDirectoryEntry="HAS_DIRECTORY_ENTRY",e.Hub="HUB",e.InvitesDisabled="INVITES_DISABLED",e.InviteSplash="INVITE_SPLASH",e.LinkedToHub="LINKED_TO_HUB",e.MemberVerificationGateEnabled="MEMBER_VERIFICATION_GATE_ENABLED",e.MoreSoundboard="MORE_SOUNDBOARD",e.MonetizationEnabled="MONETIZATION_ENABLED",e.MoreStickers="MORE_STICKERS",e.News="NEWS",e.Partnered="PARTNERED",e.PreviewEnabled="PREVIEW_ENABLED",e.PrivateThreads="PRIVATE_THREADS",e.RaidAlertsDisabled="RAID_ALERTS_DISABLED",e.RelayEnabled="RELAY_ENABLED",e.RoleIcons="ROLE_ICONS",e.RoleSubscriptionsAvailableForPurchase="ROLE_SUBSCRIPTIONS_AVAILABLE_FOR_PURCHASE",e.RoleSubscriptionsEnabled="ROLE_SUBSCRIPTIONS_ENABLED",e.Soundboard="SOUNDBOARD",e.TicketedEventsEnabled="TICKETED_EVENTS_ENABLED",e.VanityURL="VANITY_URL",e.Verified="VERIFIED",e.VIPRegions="VIP_REGIONS",e.WelcomeScreenEnabled="WELCOME_SCREEN_ENABLED",e.GuildTags="GUILD_TAGS",e.EnhancedRoleColors="ENHANCED_ROLE_COLORS",e.GuestsEnabled="GUESTS_ENABLED"}(l||(Gr.GuildFeature=l={})),function(e){e[e.DidRejoin=1]="DidRejoin",e[e.CompletedOnboarding=2]="CompletedOnboarding",e[e.BypassesVerification=4]="BypassesVerification",e[e.StartedOnboarding=8]="StartedOnboarding",e[e.IsGuest=16]="IsGuest",e[e.StartedHomeActions=32]="StartedHomeActions",e[e.CompletedHomeActions=64]="CompletedHomeActions",e[e.AutomodQuarantinedUsernameOrGuildNickname=128]="AutomodQuarantinedUsernameOrGuildNickname",e[e.AutomodQuarantinedBio=256]="AutomodQuarantinedBio",e[e.DmSettingsUpsellAcknowledged=512]="DmSettingsUpsellAcknowledged",e[e.AutoModQuarantinedGuildTag=1024]="AutoModQuarantinedGuildTag"}(c||(Gr.GuildMemberFlags=c={})),function(e){e[e.RemoveRole=0]="RemoveRole",e[e.Kick=1]="Kick"}(u||(Gr.IntegrationExpireBehavior=u={})),function(e){e.Shield="shield",e.Banner1="banner1",e.Banner2="banner2",e.Banner3="banner3",e.Banner4="banner4"}(d||(Gr.GuildWidgetStyle=d={})),function(e){e.Terms="TERMS"}(h||(Gr.MembershipScreeningFieldType=h={})),function(e){e[e.OnboardingDefault=0]="OnboardingDefault",e[e.OnboardingAdvanced=1]="OnboardingAdvanced"}(p||(Gr.GuildOnboardingMode=p={})),function(e){e[e.MultipleChoice=0]="MultipleChoice",e[e.Dropdown=1]="Dropdown"}(m||(Gr.GuildOnboardingPromptType=m={}))),Gr;var e,t,n,r,i,o,s,a,l,c,u,d,h,p,m}(),e),n(function(){return $r||($r=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.GuildScheduledEventPrivacyLevel=qr.GuildScheduledEventStatus=qr.GuildScheduledEventEntityType=qr.GuildScheduledEventRecurrenceRuleMonth=qr.GuildScheduledEventRecurrenceRuleWeekday=qr.GuildScheduledEventRecurrenceRuleFrequency=void 0,function(e){e[e.Yearly=0]="Yearly",e[e.Monthly=1]="Monthly",e[e.Weekly=2]="Weekly",e[e.Daily=3]="Daily"}(e||(qr.GuildScheduledEventRecurrenceRuleFrequency=e={})),function(e){e[e.Monday=0]="Monday",e[e.Tuesday=1]="Tuesday",e[e.Wednesday=2]="Wednesday",e[e.Thursday=3]="Thursday",e[e.Friday=4]="Friday",e[e.Saturday=5]="Saturday",e[e.Sunday=6]="Sunday"}(t||(qr.GuildScheduledEventRecurrenceRuleWeekday=t={})),function(e){e[e.January=1]="January",e[e.February=2]="February",e[e.March=3]="March",e[e.April=4]="April",e[e.May=5]="May",e[e.June=6]="June",e[e.July=7]="July",e[e.August=8]="August",e[e.September=9]="September",e[e.October=10]="October",e[e.November=11]="November",e[e.December=12]="December"}(n||(qr.GuildScheduledEventRecurrenceRuleMonth=n={})),function(e){e[e.StageInstance=1]="StageInstance",e[e.Voice=2]="Voice",e[e.External=3]="External"}(r||(qr.GuildScheduledEventEntityType=r={})),function(e){e[e.Scheduled=1]="Scheduled",e[e.Active=2]="Active",e[e.Completed=3]="Completed",e[e.Canceled=4]="Canceled"}(i||(qr.GuildScheduledEventStatus=i={})),function(e){e[e.GuildOnly=2]="GuildOnly"}(o||(qr.GuildScheduledEventPrivacyLevel=o={}))),qr;var e,t,n,r,i,o}(),e),n(ri(),e),n(function(){return ii||(ii=1,Object.defineProperty(oi,"__esModule",{value:!0}),oi.InviteTargetType=oi.InviteType=oi.InviteFlags=void 0,function(e){e[e.IsGuestInvite=1]="IsGuestInvite"}(e||(oi.InviteFlags=e={})),function(e){e[e.Guild=0]="Guild",e[e.GroupDM=1]="GroupDM",e[e.Friend=2]="Friend"}(t||(oi.InviteType=t={})),function(e){e[e.Stream=1]="Stream",e[e.EmbeddedApplication=2]="EmbeddedApplication"}(n||(oi.InviteTargetType=n={}))),oi;var e,t,n}(),e),n(function(){return si||(si=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.SeparatorSpacingSize=ai.UnfurledMediaItemLoadingState=ai.SelectMenuDefaultValueType=ai.TextInputStyle=ai.ButtonStyle=ai.ComponentType=ai.AllowedMentionsTypes=ai.AttachmentFlags=ai.EmbedType=ai.MessageFlags=ai.MessageReferenceType=ai.MessageActivityType=ai.MessageType=void 0,function(e){e[e.Default=0]="Default",e[e.RecipientAdd=1]="RecipientAdd",e[e.RecipientRemove=2]="RecipientRemove",e[e.Call=3]="Call",e[e.ChannelNameChange=4]="ChannelNameChange",e[e.ChannelIconChange=5]="ChannelIconChange",e[e.ChannelPinnedMessage=6]="ChannelPinnedMessage",e[e.UserJoin=7]="UserJoin",e[e.GuildBoost=8]="GuildBoost",e[e.GuildBoostTier1=9]="GuildBoostTier1",e[e.GuildBoostTier2=10]="GuildBoostTier2",e[e.GuildBoostTier3=11]="GuildBoostTier3",e[e.ChannelFollowAdd=12]="ChannelFollowAdd",e[e.GuildDiscoveryDisqualified=14]="GuildDiscoveryDisqualified",e[e.GuildDiscoveryRequalified=15]="GuildDiscoveryRequalified",e[e.GuildDiscoveryGracePeriodInitialWarning=16]="GuildDiscoveryGracePeriodInitialWarning",e[e.GuildDiscoveryGracePeriodFinalWarning=17]="GuildDiscoveryGracePeriodFinalWarning",e[e.ThreadCreated=18]="ThreadCreated",e[e.Reply=19]="Reply",e[e.ChatInputCommand=20]="ChatInputCommand",e[e.ThreadStarterMessage=21]="ThreadStarterMessage",e[e.GuildInviteReminder=22]="GuildInviteReminder",e[e.ContextMenuCommand=23]="ContextMenuCommand",e[e.AutoModerationAction=24]="AutoModerationAction",e[e.RoleSubscriptionPurchase=25]="RoleSubscriptionPurchase",e[e.InteractionPremiumUpsell=26]="InteractionPremiumUpsell",e[e.StageStart=27]="StageStart",e[e.StageEnd=28]="StageEnd",e[e.StageSpeaker=29]="StageSpeaker",e[e.StageRaiseHand=30]="StageRaiseHand",e[e.StageTopic=31]="StageTopic",e[e.GuildApplicationPremiumSubscription=32]="GuildApplicationPremiumSubscription",e[e.GuildIncidentAlertModeEnabled=36]="GuildIncidentAlertModeEnabled",e[e.GuildIncidentAlertModeDisabled=37]="GuildIncidentAlertModeDisabled",e[e.GuildIncidentReportRaid=38]="GuildIncidentReportRaid",e[e.GuildIncidentReportFalseAlarm=39]="GuildIncidentReportFalseAlarm",e[e.PurchaseNotification=44]="PurchaseNotification",e[e.PollResult=46]="PollResult"}(e||(ai.MessageType=e={})),function(e){e[e.Join=1]="Join",e[e.Spectate=2]="Spectate",e[e.Listen=3]="Listen",e[e.JoinRequest=5]="JoinRequest"}(t||(ai.MessageActivityType=t={})),function(e){e[e.Default=0]="Default",e[e.Forward=1]="Forward"}(n||(ai.MessageReferenceType=n={})),function(e){e[e.Crossposted=1]="Crossposted",e[e.IsCrosspost=2]="IsCrosspost",e[e.SuppressEmbeds=4]="SuppressEmbeds",e[e.SourceMessageDeleted=8]="SourceMessageDeleted",e[e.Urgent=16]="Urgent",e[e.HasThread=32]="HasThread",e[e.Ephemeral=64]="Ephemeral",e[e.Loading=128]="Loading",e[e.FailedToMentionSomeRolesInThread=256]="FailedToMentionSomeRolesInThread",e[e.ShouldShowLinkNotDiscordWarning=1024]="ShouldShowLinkNotDiscordWarning",e[e.SuppressNotifications=4096]="SuppressNotifications",e[e.IsVoiceMessage=8192]="IsVoiceMessage",e[e.HasSnapshot=16384]="HasSnapshot",e[e.IsComponentsV2=32768]="IsComponentsV2"}(r||(ai.MessageFlags=r={})),function(e){e.Rich="rich",e.Image="image",e.Video="video",e.GIFV="gifv",e.Article="article",e.Link="link",e.AutoModerationMessage="auto_moderation_message",e.PollResult="poll_result"}(i||(ai.EmbedType=i={})),function(e){e[e.IsRemix=4]="IsRemix"}(o||(ai.AttachmentFlags=o={})),function(e){e.Everyone="everyone",e.Role="roles",e.User="users"}(s||(ai.AllowedMentionsTypes=s={})),function(e){e[e.ActionRow=1]="ActionRow",e[e.Button=2]="Button",e[e.StringSelect=3]="StringSelect",e[e.TextInput=4]="TextInput",e[e.UserSelect=5]="UserSelect",e[e.RoleSelect=6]="RoleSelect",e[e.MentionableSelect=7]="MentionableSelect",e[e.ChannelSelect=8]="ChannelSelect",e[e.Section=9]="Section",e[e.TextDisplay=10]="TextDisplay",e[e.Thumbnail=11]="Thumbnail",e[e.MediaGallery=12]="MediaGallery",e[e.File=13]="File",e[e.Separator=14]="Separator",e[e.ContentInventoryEntry=16]="ContentInventoryEntry",e[e.Container=17]="Container",e[e.Label=18]="Label",e[e.FileUpload=19]="FileUpload",e[e.SelectMenu=3]="SelectMenu"}(a||(ai.ComponentType=a={})),function(e){e[e.Primary=1]="Primary",e[e.Secondary=2]="Secondary",e[e.Success=3]="Success",e[e.Danger=4]="Danger",e[e.Link=5]="Link",e[e.Premium=6]="Premium"}(l||(ai.ButtonStyle=l={})),function(e){e[e.Short=1]="Short",e[e.Paragraph=2]="Paragraph"}(c||(ai.TextInputStyle=c={})),function(e){e.Channel="channel",e.Role="role",e.User="user"}(u||(ai.SelectMenuDefaultValueType=u={})),function(e){e[e.Unknown=0]="Unknown",e[e.Loading=1]="Loading",e[e.LoadedSuccess=2]="LoadedSuccess",e[e.LoadedNotFound=3]="LoadedNotFound"}(d||(ai.UnfurledMediaItemLoadingState=d={})),function(e){e[e.Small=1]="Small",e[e.Large=2]="Large"}(h||(ai.SeparatorSpacingSize=h={}))),ai;var e,t,n,r,i,o,s,a,l,c,u,d,h}(),e),n(function(){return li||(li=1,Object.defineProperty(ci,"__esModule",{value:!0}),ci.SubscriptionStatus=ci.SKUType=ci.SKUFlags=ci.EntitlementType=void 0,function(e){e[e.Purchase=1]="Purchase",e[e.PremiumSubscription=2]="PremiumSubscription",e[e.DeveloperGift=3]="DeveloperGift",e[e.TestModePurchase=4]="TestModePurchase",e[e.FreePurchase=5]="FreePurchase",e[e.UserGift=6]="UserGift",e[e.PremiumPurchase=7]="PremiumPurchase",e[e.ApplicationSubscription=8]="ApplicationSubscription"}(e||(ci.EntitlementType=e={})),function(e){e[e.Available=4]="Available",e[e.GuildSubscription=128]="GuildSubscription",e[e.UserSubscription=256]="UserSubscription"}(t||(ci.SKUFlags=t={})),function(e){e[e.Durable=2]="Durable",e[e.Consumable=3]="Consumable",e[e.Subscription=5]="Subscription",e[e.SubscriptionGroup=6]="SubscriptionGroup"}(n||(ci.SKUType=n={})),function(e){e[e.Active=0]="Active",e[e.Ending=1]="Ending",e[e.Inactive=2]="Inactive"}(r||(ci.SubscriptionStatus=r={}))),ci;var e,t,n,r}(),e),n(function(){return ui||(ui=1,Object.defineProperty(di,"__esModule",{value:!0}),di.OAuth2Scopes=void 0,function(e){e.Bot="bot",e.Connections="connections",e.DMChannelsRead="dm_channels.read",e.Email="email",e.Identify="identify",e.Guilds="guilds",e.GuildsJoin="guilds.join",e.GuildsMembersRead="guilds.members.read",e.GroupDMJoins="gdm.join",e.MessagesRead="messages.read",e.RoleConnectionsWrite="role_connections.write",e.RPC="rpc",e.RPCActivitiesWrite="rpc.activities.write",e.RPCVoiceRead="rpc.voice.read",e.RPCVoiceWrite="rpc.voice.write",e.RPCNotificationsRead="rpc.notifications.read",e.WebhookIncoming="webhook.incoming",e.Voice="voice",e.ApplicationsBuildsUpload="applications.builds.upload",e.ApplicationsBuildsRead="applications.builds.read",e.ApplicationsStoreUpdate="applications.store.update",e.ApplicationsEntitlements="applications.entitlements",e.RelationshipsRead="relationships.read",e.ActivitiesRead="activities.read",e.ActivitiesWrite="activities.write",e.ApplicationsCommands="applications.commands",e.ApplicationsCommandsUpdate="applications.commands.update",e.ApplicationCommandsPermissionsUpdate="applications.commands.permissions.update"}(e||(di.OAuth2Scopes=e={}))),di;var e}(),e),n(function(){return hi||(hi=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.RoleFlags=void 0,function(e){e[e.InPrompt=1]="InPrompt"}(e||(pi.RoleFlags=e={}))),pi;var e}(),e),n(function(){return mi||(mi=1,Object.defineProperty(fi,"__esModule",{value:!0}),fi.PollLayoutType=void 0,function(e){e[e.Default=1]="Default"}(e||(fi.PollLayoutType=e={}))),fi;var e}(),e),n(function(){return gi||(gi=1,Object.defineProperty(yi,"__esModule",{value:!0}),yi.StageInstancePrivacyLevel=void 0,function(e){e[e.Public=1]="Public",e[e.GuildOnly=2]="GuildOnly"}(e||(yi.StageInstancePrivacyLevel=e={}))),yi;var e}(),e),n(function(){return bi||(bi=1,Object.defineProperty(vi,"__esModule",{value:!0}),vi.StickerFormatType=vi.StickerType=void 0,function(e){e[e.Standard=1]="Standard",e[e.Guild=2]="Guild"}(e||(vi.StickerType=e={})),function(e){e[e.PNG=1]="PNG",e[e.APNG=2]="APNG",e[e.Lottie=3]="Lottie",e[e.GIF=4]="GIF"}(t||(vi.StickerFormatType=t={}))),vi;var e,t}(),e),n(function(){return Si||(Si=1,Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.TeamMemberRole=Ti.TeamMemberMembershipState=void 0,function(e){e[e.Invited=1]="Invited",e[e.Accepted=2]="Accepted"}(e||(Ti.TeamMemberMembershipState=e={})),function(e){e.Admin="admin",e.Developer="developer",e.ReadOnly="read_only"}(t||(Ti.TeamMemberRole=t={}))),Ti;var e,t}(),e),n(function(){return _i||(_i=1,Object.defineProperty(Ei,"__esModule",{value:!0}),Ei.NameplatePalette=Ei.ConnectionVisibility=Ei.ConnectionService=Ei.UserPremiumType=Ei.UserFlags=void 0,function(e){e[e.Staff=1]="Staff",e[e.Partner=2]="Partner",e[e.Hypesquad=4]="Hypesquad",e[e.BugHunterLevel1=8]="BugHunterLevel1",e[e.MFASMS=16]="MFASMS",e[e.PremiumPromoDismissed=32]="PremiumPromoDismissed",e[e.HypeSquadOnlineHouse1=64]="HypeSquadOnlineHouse1",e[e.HypeSquadOnlineHouse2=128]="HypeSquadOnlineHouse2",e[e.HypeSquadOnlineHouse3=256]="HypeSquadOnlineHouse3",e[e.PremiumEarlySupporter=512]="PremiumEarlySupporter",e[e.TeamPseudoUser=1024]="TeamPseudoUser",e[e.HasUnreadUrgentMessages=8192]="HasUnreadUrgentMessages",e[e.BugHunterLevel2=16384]="BugHunterLevel2",e[e.VerifiedBot=65536]="VerifiedBot",e[e.VerifiedDeveloper=131072]="VerifiedDeveloper",e[e.CertifiedModerator=262144]="CertifiedModerator",e[e.BotHTTPInteractions=524288]="BotHTTPInteractions",e[e.Spammer=1048576]="Spammer",e[e.DisablePremium=2097152]="DisablePremium",e[e.ActiveDeveloper=4194304]="ActiveDeveloper",e[e.Quarantined=17592186044416]="Quarantined",e[e.Collaborator=0x4000000000000]="Collaborator",e[e.RestrictedCollaborator=0x8000000000000]="RestrictedCollaborator"}(e||(Ei.UserFlags=e={})),function(e){e[e.None=0]="None",e[e.NitroClassic=1]="NitroClassic",e[e.Nitro=2]="Nitro",e[e.NitroBasic=3]="NitroBasic"}(t||(Ei.UserPremiumType=t={})),function(e){e.AmazonMusic="amazon-music",e.BattleNet="battlenet",e.Bluesky="bluesky",e.BungieNet="bungie",e.Crunchyroll="crunchyroll",e.Domain="domain",e.eBay="ebay",e.EpicGames="epicgames",e.Facebook="facebook",e.GitHub="github",e.Instagram="instagram",e.LeagueOfLegends="leagueoflegends",e.Mastodon="mastodon",e.PayPal="paypal",e.PlayStationNetwork="playstation",e.Reddit="reddit",e.RiotGames="riotgames",e.Roblox="roblox",e.Spotify="spotify",e.Skype="skype",e.Steam="steam",e.TikTok="tiktok",e.Twitch="twitch",e.X="twitter",e.Twitter="twitter",e.Xbox="xbox",e.YouTube="youtube"}(n||(Ei.ConnectionService=n={})),function(e){e[e.None=0]="None",e[e.Everyone=1]="Everyone"}(r||(Ei.ConnectionVisibility=r={})),function(e){e.Berry="berry",e.BubbleGum="bubble_gum",e.Clover="clover",e.Cobalt="cobalt",e.Crimson="crimson",e.Forest="forest",e.Lemon="lemon",e.Sky="sky",e.Teal="teal",e.Violet="violet",e.White="white"}(i||(Ei.NameplatePalette=i={}))),Ei;var e,t,n,r,i}(),e),n(function(){return wi||(wi=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.WebhookType=ki.ApplicationWebhookEventType=ki.ApplicationWebhookType=void 0,function(e){e[e.Ping=0]="Ping",e[e.Event=1]="Event"}(e||(ki.ApplicationWebhookType=e={})),function(e){e.ApplicationAuthorized="APPLICATION_AUTHORIZED",e.ApplicationDeauthorized="APPLICATION_DEAUTHORIZED",e.EntitlementCreate="ENTITLEMENT_CREATE",e.QuestUserEnrollment="QUEST_USER_ENROLLMENT"}(t||(ki.ApplicationWebhookEventType=t={})),function(e){e[e.Incoming=1]="Incoming",e[e.ChannelFollower=2]="ChannelFollower",e[e.Application=3]="Application"}(n||(ki.WebhookType=n={}))),ki;var e,t,n}(),e)}(Cr)),Cr),Ii=Ae(Ci);const Oi=Ii.APIApplicationCommandPermissionsConstant,Ri=Ii.ActivityFlags,Mi=Ii.ActivityPlatform,Pi=Ii.ActivityType,Di=Ii.AllowedMentionsTypes,Ni=Ii.ApplicationCommandOptionType,Ui=Ii.ApplicationCommandPermissionType,xi=Ii.ApplicationCommandType,Li=Ii.ApplicationFlags,Bi=Ii.ApplicationIntegrationType,Fi=Ii.ApplicationRoleConnectionMetadataType,Gi=Ii.ApplicationWebhookEventStatus,$i=Ii.ApplicationWebhookEventType,qi=Ii.ApplicationWebhookType,ji=Ii.AttachmentFlags,Vi=Ii.AuditLogEvent,Hi=Ii.AuditLogOptionsType,Wi=Ii.AutoModerationActionType,zi=Ii.AutoModerationRuleEventType,Ki=Ii.AutoModerationRuleKeywordPresetType,Ji=Ii.AutoModerationRuleTriggerType,Yi=Ii.ButtonStyle,Qi=Ii.ChannelFlags,Xi=Ii.ChannelType,Zi=Ii.ComponentType,eo=Ii.ConnectionService,to=Ii.ConnectionVisibility,no=Ii.EmbedType,ro=Ii.EntitlementType,io=Ii.EntryPointCommandHandlerType,oo=Ii.ForumLayoutType,so=Ii.GuildDefaultMessageNotifications,ao=Ii.GuildExplicitContentFilter,lo=Ii.GuildFeature,co=Ii.GuildHubType,uo=Ii.GuildMFALevel,ho=Ii.GuildMemberFlags,po=Ii.GuildNSFWLevel,mo=Ii.GuildOnboardingMode,fo=Ii.GuildOnboardingPromptType,go=Ii.GuildPremiumTier,yo=Ii.GuildScheduledEventEntityType,bo=Ii.GuildScheduledEventPrivacyLevel,vo=Ii.GuildScheduledEventRecurrenceRuleFrequency,So=Ii.GuildScheduledEventRecurrenceRuleMonth,To=Ii.GuildScheduledEventRecurrenceRuleWeekday,_o=Ii.GuildScheduledEventStatus,Eo=Ii.GuildSystemChannelFlags,wo=Ii.GuildVerificationLevel,Ao=Ii.GuildWidgetStyle,ko=Ii.IntegrationExpireBehavior,Co=Ii.InteractionContextType,Io=Ii.InteractionResponseType,Oo=Ii.InteractionType,Ro=Ii.InviteFlags,Mo=Ii.InviteTargetType,Po=Ii.InviteType,Do=Ii.MembershipScreeningFieldType,No=Ii.MessageActivityType,Uo=Ii.MessageFlags,xo=Ii.MessageReferenceType,Lo=Ii.MessageType,Bo=Ii.NameplatePalette,Fo=Ii.OAuth2Scopes,Go=Ii.OverwriteType,$o=Ii.PermissionFlagsBits,qo=Ii.PollLayoutType,jo=Ii.PresenceUpdateStatus,Vo=Ii.RoleFlags,Ho=Ii.SKUFlags,Wo=Ii.SKUType,zo=Ii.SelectMenuDefaultValueType,Ko=Ii.SeparatorSpacingSize,Jo=Ii.SortOrderType,Yo=Ii.StageInstancePrivacyLevel,Qo=Ii.StatusDisplayType,Xo=Ii.StickerFormatType,Zo=Ii.StickerType,es=Ii.SubscriptionStatus,ts=Ii.TeamMemberMembershipState,ns=Ii.TeamMemberRole,rs=Ii.TextInputStyle,is=Ii.ThreadAutoArchiveDuration,os=Ii.ThreadMemberFlags,ss=Ii.UnfurledMediaItemLoadingState,as=Ii.UserFlags,ls=Ii.UserPremiumType,cs=Ii.VideoQualityMode,us=Ii.WebhookType;var ds,hs=ke(Object.freeze({__proto__:null,APIApplicationCommandPermissionsConstant:Oi,ActivityFlags:Ri,ActivityPlatform:Mi,ActivityType:Pi,AllowedMentionsTypes:Di,ApplicationCommandOptionType:Ni,ApplicationCommandPermissionType:Ui,ApplicationCommandType:xi,ApplicationFlags:Li,ApplicationIntegrationType:Bi,ApplicationRoleConnectionMetadataType:Fi,ApplicationWebhookEventStatus:Gi,ApplicationWebhookEventType:$i,ApplicationWebhookType:qi,AttachmentFlags:ji,AuditLogEvent:Vi,AuditLogOptionsType:Hi,AutoModerationActionType:Wi,AutoModerationRuleEventType:zi,AutoModerationRuleKeywordPresetType:Ki,AutoModerationRuleTriggerType:Ji,ButtonStyle:Yi,ChannelFlags:Qi,ChannelType:Xi,ComponentType:Zi,ConnectionService:eo,ConnectionVisibility:to,EmbedType:no,EntitlementType:ro,EntryPointCommandHandlerType:io,ForumLayoutType:oo,GuildDefaultMessageNotifications:so,GuildExplicitContentFilter:ao,GuildFeature:lo,GuildHubType:co,GuildMFALevel:uo,GuildMemberFlags:ho,GuildNSFWLevel:po,GuildOnboardingMode:mo,GuildOnboardingPromptType:fo,GuildPremiumTier:go,GuildScheduledEventEntityType:yo,GuildScheduledEventPrivacyLevel:bo,GuildScheduledEventRecurrenceRuleFrequency:vo,GuildScheduledEventRecurrenceRuleMonth:So,GuildScheduledEventRecurrenceRuleWeekday:To,GuildScheduledEventStatus:_o,GuildSystemChannelFlags:Eo,GuildVerificationLevel:wo,GuildWidgetStyle:Ao,IntegrationExpireBehavior:ko,InteractionContextType:Co,InteractionResponseType:Io,InteractionType:Oo,InviteFlags:Ro,InviteTargetType:Mo,InviteType:Po,MembershipScreeningFieldType:Do,MessageActivityType:No,MessageFlags:Uo,MessageReferenceType:xo,MessageType:Lo,NameplatePalette:Bo,OAuth2Scopes:Fo,OverwriteType:Go,PermissionFlagsBits:$o,PollLayoutType:qo,PresenceUpdateStatus:jo,RoleFlags:Vo,SKUFlags:Ho,SKUType:Wo,SelectMenuDefaultValueType:zo,SeparatorSpacingSize:Ko,SortOrderType:Jo,StageInstancePrivacyLevel:Yo,StatusDisplayType:Qo,StickerFormatType:Xo,StickerType:Zo,SubscriptionStatus:es,TeamMemberMembershipState:ts,TeamMemberRole:ns,TextInputStyle:rs,ThreadAutoArchiveDuration:is,ThreadMemberFlags:os,UnfurledMediaItemLoadingState:ss,UserFlags:as,UserPremiumType:ls,VideoQualityMode:cs,WebhookType:us,default:Ii})),ps={},ms={};function fs(){if(ds)return ms;ds=1,Object.defineProperty(ms,"__esModule",{value:!0}),ms.urlSafeCharacters=void 0;const e=/^[\d%A-Za-z-_]+$/g;return ms.urlSafeCharacters={test(t){const n=e.test(t);return e.lastIndex=0,n}},ms}var gs,ys={};var bs,vs={};var Ss,Ts,_s={};var Es=(Ts||(Ts=1,function(e){var t=ps&&ps.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=ps&&ps.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.OAuth2Routes=e.RouteBases=e.CDNRoutes=e.ImageFormat=e.StickerPackApplicationId=e.Routes=e.APIVersion=void 0;const r=fs();n(function(){return gs||(gs=1,Object.defineProperty(ys,"__esModule",{value:!0}),ys.Locale=ys.RESTJSONErrorCodes=void 0,function(e){e[e.GeneralError=0]="GeneralError",e[e.UnknownAccount=10001]="UnknownAccount",e[e.UnknownApplication=10002]="UnknownApplication",e[e.UnknownChannel=10003]="UnknownChannel",e[e.UnknownGuild=10004]="UnknownGuild",e[e.UnknownIntegration=10005]="UnknownIntegration",e[e.UnknownInvite=10006]="UnknownInvite",e[e.UnknownMember=10007]="UnknownMember",e[e.UnknownMessage=10008]="UnknownMessage",e[e.UnknownPermissionOverwrite=10009]="UnknownPermissionOverwrite",e[e.UnknownProvider=10010]="UnknownProvider",e[e.UnknownRole=10011]="UnknownRole",e[e.UnknownToken=10012]="UnknownToken",e[e.UnknownUser=10013]="UnknownUser",e[e.UnknownEmoji=10014]="UnknownEmoji",e[e.UnknownWebhook=10015]="UnknownWebhook",e[e.UnknownWebhookService=10016]="UnknownWebhookService",e[e.UnknownSession=10020]="UnknownSession",e[e.UnknownAsset=10021]="UnknownAsset",e[e.UnknownBan=10026]="UnknownBan",e[e.UnknownSKU=10027]="UnknownSKU",e[e.UnknownStoreListing=10028]="UnknownStoreListing",e[e.UnknownEntitlement=10029]="UnknownEntitlement",e[e.UnknownBuild=10030]="UnknownBuild",e[e.UnknownLobby=10031]="UnknownLobby",e[e.UnknownBranch=10032]="UnknownBranch",e[e.UnknownStoreDirectoryLayout=10033]="UnknownStoreDirectoryLayout",e[e.UnknownRedistributable=10036]="UnknownRedistributable",e[e.UnknownGiftCode=10038]="UnknownGiftCode",e[e.UnknownStream=10049]="UnknownStream",e[e.UnknownPremiumServerSubscribeCooldown=10050]="UnknownPremiumServerSubscribeCooldown",e[e.UnknownGuildTemplate=10057]="UnknownGuildTemplate",e[e.UnknownDiscoverableServerCategory=10059]="UnknownDiscoverableServerCategory",e[e.UnknownSticker=10060]="UnknownSticker",e[e.UnknownStickerPack=10061]="UnknownStickerPack",e[e.UnknownInteraction=10062]="UnknownInteraction",e[e.UnknownApplicationCommand=10063]="UnknownApplicationCommand",e[e.UnknownVoiceState=10065]="UnknownVoiceState",e[e.UnknownApplicationCommandPermissions=10066]="UnknownApplicationCommandPermissions",e[e.UnknownStageInstance=10067]="UnknownStageInstance",e[e.UnknownGuildMemberVerificationForm=10068]="UnknownGuildMemberVerificationForm",e[e.UnknownGuildWelcomeScreen=10069]="UnknownGuildWelcomeScreen",e[e.UnknownGuildScheduledEvent=10070]="UnknownGuildScheduledEvent",e[e.UnknownGuildScheduledEventUser=10071]="UnknownGuildScheduledEventUser",e[e.UnknownTag=10087]="UnknownTag",e[e.UnknownSound=10097]="UnknownSound",e[e.BotsCannotUseThisEndpoint=20001]="BotsCannotUseThisEndpoint",e[e.OnlyBotsCanUseThisEndpoint=20002]="OnlyBotsCanUseThisEndpoint",e[e.ExplicitContentCannotBeSentToTheDesiredRecipient=20009]="ExplicitContentCannotBeSentToTheDesiredRecipient",e[e.NotAuthorizedToPerformThisActionOnThisApplication=20012]="NotAuthorizedToPerformThisActionOnThisApplication",e[e.ActionCannotBePerformedDueToSlowmodeRateLimit=20016]="ActionCannotBePerformedDueToSlowmodeRateLimit",e[e.TheMazeIsntMeantForYou=20017]="TheMazeIsntMeantForYou",e[e.OnlyTheOwnerOfThisAccountCanPerformThisAction=20018]="OnlyTheOwnerOfThisAccountCanPerformThisAction",e[e.AnnouncementEditLimitExceeded=20022]="AnnouncementEditLimitExceeded",e[e.UnderMinimumAge=20024]="UnderMinimumAge",e[e.ChannelSendRateLimit=20028]="ChannelSendRateLimit",e[e.ServerSendRateLimit=20029]="ServerSendRateLimit",e[e.StageTopicServerNameServerDescriptionOrChannelNamesContainDisallowedWords=20031]="StageTopicServerNameServerDescriptionOrChannelNamesContainDisallowedWords",e[e.GuildPremiumSubscriptionLevelTooLow=20035]="GuildPremiumSubscriptionLevelTooLow",e[e.MaximumNumberOfGuildsReached=30001]="MaximumNumberOfGuildsReached",e[e.MaximumNumberOfFriendsReached=30002]="MaximumNumberOfFriendsReached",e[e.MaximumNumberOfPinsReachedForTheChannel=30003]="MaximumNumberOfPinsReachedForTheChannel",e[e.MaximumNumberOfRecipientsReached=30004]="MaximumNumberOfRecipientsReached",e[e.MaximumNumberOfGuildRolesReached=30005]="MaximumNumberOfGuildRolesReached",e[e.MaximumNumberOfWebhooksReached=30007]="MaximumNumberOfWebhooksReached",e[e.MaximumNumberOfEmojisReached=30008]="MaximumNumberOfEmojisReached",e[e.MaximumNumberOfReactionsReached=30010]="MaximumNumberOfReactionsReached",e[e.MaximumNumberOfGroupDMsReached=30011]="MaximumNumberOfGroupDMsReached",e[e.MaximumNumberOfGuildChannelsReached=30013]="MaximumNumberOfGuildChannelsReached",e[e.MaximumNumberOfAttachmentsInAMessageReached=30015]="MaximumNumberOfAttachmentsInAMessageReached",e[e.MaximumNumberOfInvitesReached=30016]="MaximumNumberOfInvitesReached",e[e.MaximumNumberOfAnimatedEmojisReached=30018]="MaximumNumberOfAnimatedEmojisReached",e[e.MaximumNumberOfServerMembersReached=30019]="MaximumNumberOfServerMembersReached",e[e.MaximumNumberOfServerCategoriesReached=30030]="MaximumNumberOfServerCategoriesReached",e[e.GuildAlreadyHasTemplate=30031]="GuildAlreadyHasTemplate",e[e.MaximumNumberOfApplicationCommandsReached=30032]="MaximumNumberOfApplicationCommandsReached",e[e.MaximumThreadParticipantsReached=30033]="MaximumThreadParticipantsReached",e[e.MaximumDailyApplicationCommandCreatesReached=30034]="MaximumDailyApplicationCommandCreatesReached",e[e.MaximumNumberOfNonGuildMemberBansHasBeenExceeded=30035]="MaximumNumberOfNonGuildMemberBansHasBeenExceeded",e[e.MaximumNumberOfBanFetchesHasBeenReached=30037]="MaximumNumberOfBanFetchesHasBeenReached",e[e.MaximumNumberOfUncompletedGuildScheduledEventsReached=30038]="MaximumNumberOfUncompletedGuildScheduledEventsReached",e[e.MaximumNumberOfStickersReached=30039]="MaximumNumberOfStickersReached",e[e.MaximumNumberOfPruneRequestsHasBeenReached=30040]="MaximumNumberOfPruneRequestsHasBeenReached",e[e.MaximumNumberOfGuildWidgetSettingsUpdatesHasBeenReached=30042]="MaximumNumberOfGuildWidgetSettingsUpdatesHasBeenReached",e[e.MaximumNumberOfSoundboardSoundsReached=30045]="MaximumNumberOfSoundboardSoundsReached",e[e.MaximumNumberOfEditsToMessagesOlderThanOneHourReached=30046]="MaximumNumberOfEditsToMessagesOlderThanOneHourReached",e[e.MaximumNumberOfPinnedThreadsInForumHasBeenReached=30047]="MaximumNumberOfPinnedThreadsInForumHasBeenReached",e[e.MaximumNumberOfTagsInForumHasBeenReached=30048]="MaximumNumberOfTagsInForumHasBeenReached",e[e.BitrateIsTooHighForChannelOfThisType=30052]="BitrateIsTooHighForChannelOfThisType",e[e.MaximumNumberOfPremiumEmojisReached=30056]="MaximumNumberOfPremiumEmojisReached",e[e.MaximumNumberOfWebhooksPerGuildReached=30058]="MaximumNumberOfWebhooksPerGuildReached",e[e.MaximumNumberOfChannelPermissionOverwritesReached=30060]="MaximumNumberOfChannelPermissionOverwritesReached",e[e.TheChannelsForThisGuildAreTooLarge=30061]="TheChannelsForThisGuildAreTooLarge",e[e.Unauthorized=40001]="Unauthorized",e[e.VerifyYourAccount=40002]="VerifyYourAccount",e[e.OpeningDirectMessagesTooFast=40003]="OpeningDirectMessagesTooFast",e[e.SendMessagesHasBeenTemporarilyDisabled=40004]="SendMessagesHasBeenTemporarilyDisabled",e[e.RequestEntityTooLarge=40005]="RequestEntityTooLarge",e[e.FeatureTemporarilyDisabledServerSide=40006]="FeatureTemporarilyDisabledServerSide",e[e.UserBannedFromThisGuild=40007]="UserBannedFromThisGuild",e[e.ConnectionHasBeenRevoked=40012]="ConnectionHasBeenRevoked",e[e.OnlyConsumableSKUsCanBeConsumed=40018]="OnlyConsumableSKUsCanBeConsumed",e[e.YouCanOnlyDeleteSandboxEntitlements=40019]="YouCanOnlyDeleteSandboxEntitlements",e[e.TargetUserIsNotConnectedToVoice=40032]="TargetUserIsNotConnectedToVoice",e[e.ThisMessageWasAlreadyCrossposted=40033]="ThisMessageWasAlreadyCrossposted",e[e.ApplicationCommandWithThatNameAlreadyExists=40041]="ApplicationCommandWithThatNameAlreadyExists",e[e.ApplicationInteractionFailedToSend=40043]="ApplicationInteractionFailedToSend",e[e.CannotSendAMessageInAForumChannel=40058]="CannotSendAMessageInAForumChannel",e[e.InteractionHasAlreadyBeenAcknowledged=40060]="InteractionHasAlreadyBeenAcknowledged",e[e.TagNamesMustBeUnique=40061]="TagNamesMustBeUnique",e[e.ServiceResourceIsBeingRateLimited=40062]="ServiceResourceIsBeingRateLimited",e[e.ThereAreNoTagsAvailableThatCanBeSetByNonModerators=40066]="ThereAreNoTagsAvailableThatCanBeSetByNonModerators",e[e.TagRequiredToCreateAForumPostInThisChannel=40067]="TagRequiredToCreateAForumPostInThisChannel",e[e.AnEntitlementHasAlreadyBeenGrantedForThisResource=40074]="AnEntitlementHasAlreadyBeenGrantedForThisResource",e[e.ThisInteractionHasHitTheMaximumNumberOfFollowUpMessages=40094]="ThisInteractionHasHitTheMaximumNumberOfFollowUpMessages",e[e.CloudflareIsBlockingYourRequest=40333]="CloudflareIsBlockingYourRequest",e[e.MissingAccess=50001]="MissingAccess",e[e.InvalidAccountType=50002]="InvalidAccountType",e[e.CannotExecuteActionOnDMChannel=50003]="CannotExecuteActionOnDMChannel",e[e.GuildWidgetDisabled=50004]="GuildWidgetDisabled",e[e.CannotEditMessageAuthoredByAnotherUser=50005]="CannotEditMessageAuthoredByAnotherUser",e[e.CannotSendAnEmptyMessage=50006]="CannotSendAnEmptyMessage",e[e.CannotSendMessagesToThisUser=50007]="CannotSendMessagesToThisUser",e[e.CannotSendMessagesInNonTextChannel=50008]="CannotSendMessagesInNonTextChannel",e[e.ChannelVerificationLevelTooHighForYouToGainAccess=50009]="ChannelVerificationLevelTooHighForYouToGainAccess",e[e.OAuth2ApplicationDoesNotHaveBot=50010]="OAuth2ApplicationDoesNotHaveBot",e[e.OAuth2ApplicationLimitReached=50011]="OAuth2ApplicationLimitReached",e[e.InvalidOAuth2State=50012]="InvalidOAuth2State",e[e.MissingPermissions=50013]="MissingPermissions",e[e.InvalidToken=50014]="InvalidToken",e[e.NoteWasTooLong=50015]="NoteWasTooLong",e[e.ProvidedTooFewOrTooManyMessagesToDelete=50016]="ProvidedTooFewOrTooManyMessagesToDelete",e[e.InvalidMFALevel=50017]="InvalidMFALevel",e[e.MessageCanOnlyBePinnedInTheChannelItWasSentIn=50019]="MessageCanOnlyBePinnedInTheChannelItWasSentIn",e[e.InviteCodeInvalidOrTaken=50020]="InviteCodeInvalidOrTaken",e[e.CannotExecuteActionOnSystemMessage=50021]="CannotExecuteActionOnSystemMessage",e[e.CannotExecuteActionOnThisChannelType=50024]="CannotExecuteActionOnThisChannelType",e[e.InvalidOAuth2AccessToken=50025]="InvalidOAuth2AccessToken",e[e.MissingRequiredOAuth2Scope=50026]="MissingRequiredOAuth2Scope",e[e.InvalidWebhookToken=50027]="InvalidWebhookToken",e[e.InvalidRole=50028]="InvalidRole",e[e.InvalidRecipients=50033]="InvalidRecipients",e[e.OneOfTheMessagesProvidedWasTooOldForBulkDelete=50034]="OneOfTheMessagesProvidedWasTooOldForBulkDelete",e[e.InvalidFormBodyOrContentType=50035]="InvalidFormBodyOrContentType",e[e.InviteAcceptedToGuildWithoutTheBotBeingIn=50036]="InviteAcceptedToGuildWithoutTheBotBeingIn",e[e.InvalidActivityAction=50039]="InvalidActivityAction",e[e.InvalidAPIVersion=50041]="InvalidAPIVersion",e[e.FileUploadedExceedsMaximumSize=50045]="FileUploadedExceedsMaximumSize",e[e.InvalidFileUploaded=50046]="InvalidFileUploaded",e[e.CannotSelfRedeemThisGift=50054]="CannotSelfRedeemThisGift",e[e.InvalidGuild=50055]="InvalidGuild",e[e.InvalidSKU=50057]="InvalidSKU",e[e.InvalidRequestOrigin=50067]="InvalidRequestOrigin",e[e.InvalidMessageType=50068]="InvalidMessageType",e[e.PaymentSourceRequiredToRedeemGift=50070]="PaymentSourceRequiredToRedeemGift",e[e.CannotModifyASystemWebhook=50073]="CannotModifyASystemWebhook",e[e.CannotDeleteChannelRequiredForCommunityGuilds=50074]="CannotDeleteChannelRequiredForCommunityGuilds",e[e.CannotEditStickersWithinMessage=50080]="CannotEditStickersWithinMessage",e[e.InvalidStickerSent=50081]="InvalidStickerSent",e[e.InvalidActionOnArchivedThread=50083]="InvalidActionOnArchivedThread",e[e.InvalidThreadNotificationSettings=50084]="InvalidThreadNotificationSettings",e[e.ParameterEarlierThanCreation=50085]="ParameterEarlierThanCreation",e[e.CommunityServerChannelsMustBeTextChannels=50086]="CommunityServerChannelsMustBeTextChannels",e[e.TheEntityTypeOfTheEventIsDifferentFromTheEntityYouAreTryingToStartTheEventFor=50091]="TheEntityTypeOfTheEventIsDifferentFromTheEntityYouAreTryingToStartTheEventFor",e[e.ServerNotAvailableInYourLocation=50095]="ServerNotAvailableInYourLocation",e[e.ServerNeedsMonetizationEnabledToPerformThisAction=50097]="ServerNeedsMonetizationEnabledToPerformThisAction",e[e.ServerNeedsMoreBoostsToPerformThisAction=50101]="ServerNeedsMoreBoostsToPerformThisAction",e[e.RequestBodyContainsInvalidJSON=50109]="RequestBodyContainsInvalidJSON",e[e.ProvidedFileIsInvalid=50110]="ProvidedFileIsInvalid",e[e.ProvidedFileTypeIsInvalid=50123]="ProvidedFileTypeIsInvalid",e[e.ProvidedFileDurationExceedsMaximumLength=50124]="ProvidedFileDurationExceedsMaximumLength",e[e.OwnerCannotBePendingMember=50131]="OwnerCannotBePendingMember",e[e.OwnershipCannotBeMovedToABotUser=50132]="OwnershipCannotBeMovedToABotUser",e[e.FailedToResizeAssetBelowTheMinimumSize=50138]="FailedToResizeAssetBelowTheMinimumSize",e[e.CannotMixSubscriptionAndNonSubscriptionRolesForAnEmoji=50144]="CannotMixSubscriptionAndNonSubscriptionRolesForAnEmoji",e[e.CannotConvertBetweenPremiumEmojiAndNormalEmoji=50145]="CannotConvertBetweenPremiumEmojiAndNormalEmoji",e[e.UploadedFileNotFound=50146]="UploadedFileNotFound",e[e.SpecifiedEmojiIsInvalid=50151]="SpecifiedEmojiIsInvalid",e[e.VoiceMessagesDoNotSupportAdditionalContent=50159]="VoiceMessagesDoNotSupportAdditionalContent",e[e.VoiceMessagesMustHaveASingleAudioAttachment=50160]="VoiceMessagesMustHaveASingleAudioAttachment",e[e.VoiceMessagesMustHaveSupportingMetadata=50161]="VoiceMessagesMustHaveSupportingMetadata",e[e.VoiceMessagesCannotBeEdited=50162]="VoiceMessagesCannotBeEdited",e[e.CannotDeleteGuildSubscriptionIntegration=50163]="CannotDeleteGuildSubscriptionIntegration",e[e.YouCannotSendVoiceMessagesInThisChannel=50173]="YouCannotSendVoiceMessagesInThisChannel",e[e.TheUserAccountMustFirstBeVerified=50178]="TheUserAccountMustFirstBeVerified",e[e.ProvidedFileDoesNotHaveAValidDuration=50192]="ProvidedFileDoesNotHaveAValidDuration",e[e.YouDoNotHavePermissionToSendThisSticker=50600]="YouDoNotHavePermissionToSendThisSticker",e[e.TwoFactorAuthenticationIsRequired=60003]="TwoFactorAuthenticationIsRequired",e[e.NoUsersWithDiscordTagExist=80004]="NoUsersWithDiscordTagExist",e[e.ReactionWasBlocked=90001]="ReactionWasBlocked",e[e.UserCannotUseBurstReactions=90002]="UserCannotUseBurstReactions",e[e.ApplicationNotYetAvailable=110001]="ApplicationNotYetAvailable",e[e.APIResourceOverloaded=13e4]="APIResourceOverloaded",e[e.TheStageIsAlreadyOpen=150006]="TheStageIsAlreadyOpen",e[e.CannotReplyWithoutPermissionToReadMessageHistory=160002]="CannotReplyWithoutPermissionToReadMessageHistory",e[e.ThreadAlreadyCreatedForMessage=160004]="ThreadAlreadyCreatedForMessage",e[e.ThreadLocked=160005]="ThreadLocked",e[e.MaximumActiveThreads=160006]="MaximumActiveThreads",e[e.MaximumActiveAnnouncementThreads=160007]="MaximumActiveAnnouncementThreads",e[e.InvalidJSONForUploadedLottieFile=170001]="InvalidJSONForUploadedLottieFile",e[e.UploadedLottiesCannotContainRasterizedImages=170002]="UploadedLottiesCannotContainRasterizedImages",e[e.StickerMaximumFramerateExceeded=170003]="StickerMaximumFramerateExceeded",e[e.StickerFrameCountExceedsMaximumOf1000Frames=170004]="StickerFrameCountExceedsMaximumOf1000Frames",e[e.LottieAnimationMaximumDimensionsExceeded=170005]="LottieAnimationMaximumDimensionsExceeded",e[e.StickerFramerateIsTooSmallOrTooLarge=170006]="StickerFramerateIsTooSmallOrTooLarge",e[e.StickerAnimationDurationExceedsMaximumOf5Seconds=170007]="StickerAnimationDurationExceedsMaximumOf5Seconds",e[e.CannotUpdateAFinishedEvent=18e4]="CannotUpdateAFinishedEvent",e[e.FailedToCreateStageNeededForStageEvent=180002]="FailedToCreateStageNeededForStageEvent",e[e.MessageWasBlockedByAutomaticModeration=2e5]="MessageWasBlockedByAutomaticModeration",e[e.TitleWasBlockedByAutomaticModeration=200001]="TitleWasBlockedByAutomaticModeration",e[e.WebhooksPostedToForumChannelsMustHaveAThreadNameOrThreadId=220001]="WebhooksPostedToForumChannelsMustHaveAThreadNameOrThreadId",e[e.WebhooksPostedToForumChannelsCannotHaveBothAThreadNameAndThreadId=220002]="WebhooksPostedToForumChannelsCannotHaveBothAThreadNameAndThreadId",e[e.WebhooksCanOnlyCreateThreadsInForumChannels=220003]="WebhooksCanOnlyCreateThreadsInForumChannels",e[e.WebhookServicesCannotBeUsedInForumChannels=220004]="WebhookServicesCannotBeUsedInForumChannels",e[e.MessageBlockedByHarmfulLinksFilter=24e4]="MessageBlockedByHarmfulLinksFilter",e[e.CannotEnableOnboardingRequirementsAreNotMet=35e4]="CannotEnableOnboardingRequirementsAreNotMet",e[e.CannotUpdateOnboardingWhileBelowRequirements=350001]="CannotUpdateOnboardingWhileBelowRequirements",e[e.AccessToFileUploadsHasBeenLimitedForThisGuild=400001]="AccessToFileUploadsHasBeenLimitedForThisGuild",e[e.FailedToBanUsers=5e5]="FailedToBanUsers",e[e.PollVotingBlocked=52e4]="PollVotingBlocked",e[e.PollExpired=520001]="PollExpired",e[e.InvalidChannelTypeForPollCreation=520002]="InvalidChannelTypeForPollCreation",e[e.CannotEditAPollMessage=520003]="CannotEditAPollMessage",e[e.CannotUseAnEmojiIncludedWithThePoll=520004]="CannotUseAnEmojiIncludedWithThePoll",e[e.CannotExpireANonPollMessage=520006]="CannotExpireANonPollMessage"}(e||(ys.RESTJSONErrorCodes=e={})),function(e){e.Indonesian="id",e.EnglishUS="en-US",e.EnglishGB="en-GB",e.Bulgarian="bg",e.ChineseCN="zh-CN",e.ChineseTW="zh-TW",e.Croatian="hr",e.Czech="cs",e.Danish="da",e.Dutch="nl",e.Finnish="fi",e.French="fr",e.German="de",e.Greek="el",e.Hindi="hi",e.Hungarian="hu",e.Italian="it",e.Japanese="ja",e.Korean="ko",e.Lithuanian="lt",e.Norwegian="no",e.Polish="pl",e.PortugueseBR="pt-BR",e.Romanian="ro",e.Russian="ru",e.SpanishES="es-ES",e.SpanishLATAM="es-419",e.Swedish="sv-SE",e.Thai="th",e.Turkish="tr",e.Ukrainian="uk",e.Vietnamese="vi"}(t||(ys.Locale=t={}))),ys;var e,t}(),e),n(function(){return bs||(bs=1,Object.defineProperty(vs,"__esModule",{value:!0}),vs.ReactionType=void 0,function(e){e[e.Normal=0]="Normal",e[e.Super=1]="Super"}(e||(vs.ReactionType=e={}))),vs;var e}(),e),n(function(){return Ss||(Ss=1,Object.defineProperty(_s,"__esModule",{value:!0}),_s.EntitlementOwnerType=void 0,function(e){e[e.Guild=1]="Guild",e[e.User=2]="User"}(e||(_s.EntitlementOwnerType=e={}))),_s;var e}(),e),e.APIVersion="10",e.Routes={applicationRoleConnectionMetadata:e=>`/applications/${e}/role-connections/metadata`,guildAutoModerationRules:e=>`/guilds/${e}/auto-moderation/rules`,guildAutoModerationRule:(e,t)=>`/guilds/${e}/auto-moderation/rules/${t}`,guildAuditLog:e=>`/guilds/${e}/audit-logs`,channel:e=>`/channels/${e}`,channelMessages:e=>`/channels/${e}/messages`,channelMessage:(e,t)=>`/channels/${e}/messages/${t}`,channelMessageCrosspost:(e,t)=>`/channels/${e}/messages/${t}/crosspost`,channelMessageOwnReaction:(e,t,n)=>`/channels/${e}/messages/${t}/reactions/${n}/@me`,channelMessageUserReaction:(e,t,n,r)=>`/channels/${e}/messages/${t}/reactions/${n}/${r}`,channelMessageReaction:(e,t,n)=>`/channels/${e}/messages/${t}/reactions/${n}`,channelMessageAllReactions:(e,t)=>`/channels/${e}/messages/${t}/reactions`,channelBulkDelete:e=>`/channels/${e}/messages/bulk-delete`,channelPermission:(e,t)=>`/channels/${e}/permissions/${t}`,channelInvites:e=>`/channels/${e}/invites`,channelFollowers:e=>`/channels/${e}/followers`,channelTyping:e=>`/channels/${e}/typing`,channelMessagesPins:e=>`/channels/${e}/messages/pins`,channelMessagesPin:(e,t)=>`/channels/${e}/messages/pins/${t}`,channelPins:e=>`/channels/${e}/pins`,channelPin:(e,t)=>`/channels/${e}/pins/${t}`,channelRecipient:(e,t)=>`/channels/${e}/recipients/${t}`,guildEmojis:e=>`/guilds/${e}/emojis`,guildEmoji:(e,t)=>`/guilds/${e}/emojis/${t}`,guilds:()=>"/guilds",guild:e=>`/guilds/${e}`,guildPreview:e=>`/guilds/${e}/preview`,guildChannels:e=>`/guilds/${e}/channels`,guildMember:(e,t="@me")=>`/guilds/${e}/members/${t}`,guildMembers:e=>`/guilds/${e}/members`,guildMembersSearch:e=>`/guilds/${e}/members/search`,guildCurrentMemberNickname:e=>`/guilds/${e}/members/@me/nick`,guildMemberRole:(e,t,n)=>`/guilds/${e}/members/${t}/roles/${n}`,guildMFA:e=>`/guilds/${e}/mfa`,guildBans:e=>`/guilds/${e}/bans`,guildBan:(e,t)=>`/guilds/${e}/bans/${t}`,guildRoles:e=>`/guilds/${e}/roles`,guildRole:(e,t)=>`/guilds/${e}/roles/${t}`,guildPrune:e=>`/guilds/${e}/prune`,guildVoiceRegions:e=>`/guilds/${e}/regions`,guildInvites:e=>`/guilds/${e}/invites`,guildIntegrations:e=>`/guilds/${e}/integrations`,guildIntegration:(e,t)=>`/guilds/${e}/integrations/${t}`,guildWidgetSettings:e=>`/guilds/${e}/widget`,guildWidgetJSON:e=>`/guilds/${e}/widget.json`,guildVanityUrl:e=>`/guilds/${e}/vanity-url`,guildWidgetImage:e=>`/guilds/${e}/widget.png`,invite:e=>`/invites/${e}`,template:e=>`/guilds/templates/${e}`,guildTemplates:e=>`/guilds/${e}/templates`,guildTemplate:(e,t)=>`/guilds/${e}/templates/${t}`,pollAnswerVoters:(e,t,n)=>`/channels/${e}/polls/${t}/answers/${n}`,expirePoll:(e,t)=>`/channels/${e}/polls/${t}/expire`,threads(e,t){const n=["","channels",e];return t&&n.push("messages",t),n.push("threads"),n.join("/")},guildActiveThreads:e=>`/guilds/${e}/threads/active`,channelThreads:(e,t)=>`/channels/${e}/threads/archived/${t}`,channelJoinedArchivedThreads:e=>`/channels/${e}/users/@me/threads/archived/private`,threadMembers(e,t){const n=["","channels",e,"thread-members"];return t&&n.push(t),n.join("/")},user:(e="@me")=>`/users/${e}`,userApplicationRoleConnection:e=>`/users/@me/applications/${e}/role-connection`,userGuilds:()=>"/users/@me/guilds",userGuildMember:e=>`/users/@me/guilds/${e}/member`,userGuild:e=>`/users/@me/guilds/${e}`,userChannels:()=>"/users/@me/channels",userConnections:()=>"/users/@me/connections",voiceRegions:()=>"/voice/regions",channelWebhooks:e=>`/channels/${e}/webhooks`,guildWebhooks:e=>`/guilds/${e}/webhooks`,webhook(e,t){const n=["","webhooks",e];return t&&n.push(t),n.join("/")},webhookMessage:(e,t,n="@original")=>`/webhooks/${e}/${t}/messages/${n}`,webhookPlatform:(e,t,n)=>`/webhooks/${e}/${t}/${n}`,gateway:()=>"/gateway",gatewayBot:()=>"/gateway/bot",oauth2CurrentApplication:()=>"/oauth2/applications/@me",oauth2CurrentAuthorization:()=>"/oauth2/@me",oauth2Authorization:()=>"/oauth2/authorize",oauth2TokenExchange:()=>"/oauth2/token",oauth2TokenRevocation:()=>"/oauth2/token/revoke",applicationCommands:e=>`/applications/${e}/commands`,applicationCommand:(e,t)=>`/applications/${e}/commands/${t}`,applicationGuildCommands:(e,t)=>`/applications/${e}/guilds/${t}/commands`,applicationGuildCommand:(e,t,n)=>`/applications/${e}/guilds/${t}/commands/${n}`,interactionCallback:(e,t)=>`/interactions/${e}/${t}/callback`,guildMemberVerification:e=>`/guilds/${e}/member-verification`,guildVoiceState:(e,t="@me")=>`/guilds/${e}/voice-states/${t}`,guildApplicationCommandsPermissions:(e,t)=>`/applications/${e}/guilds/${t}/commands/permissions`,applicationCommandPermissions:(e,t,n)=>`/applications/${e}/guilds/${t}/commands/${n}/permissions`,guildWelcomeScreen:e=>`/guilds/${e}/welcome-screen`,stageInstances:()=>"/stage-instances",stageInstance:e=>`/stage-instances/${e}`,sticker:e=>`/stickers/${e}`,stickerPacks:()=>"/sticker-packs",stickerPack:e=>`/sticker-packs/${e}`,nitroStickerPacks:()=>"/sticker-packs",guildStickers:e=>`/guilds/${e}/stickers`,guildSticker:(e,t)=>`/guilds/${e}/stickers/${t}`,guildScheduledEvents:e=>`/guilds/${e}/scheduled-events`,guildScheduledEvent:(e,t)=>`/guilds/${e}/scheduled-events/${t}`,guildScheduledEventUsers:(e,t)=>`/guilds/${e}/scheduled-events/${t}/users`,guildOnboarding:e=>`/guilds/${e}/onboarding`,guildIncidentActions:e=>`/guilds/${e}/incident-actions`,currentApplication:()=>"/applications/@me",entitlements:e=>`/applications/${e}/entitlements`,entitlement:(e,t)=>`/applications/${e}/entitlements/${t}`,skus:e=>`/applications/${e}/skus`,guildBulkBan:e=>`/guilds/${e}/bulk-ban`,consumeEntitlement:(e,t)=>`/applications/${e}/entitlements/${t}/consume`,applicationEmojis:e=>`/applications/${e}/emojis`,applicationEmoji:(e,t)=>`/applications/${e}/emojis/${t}`,skuSubscriptions:e=>`/skus/${e}/subscriptions`,skuSubscription:(e,t)=>`/skus/${e}/subscriptions/${t}`,sendSoundboardSound:e=>`/channels/${e}/send-soundboard-sound`,soundboardDefaultSounds:()=>"/soundboard-default-sounds",guildSoundboardSounds:e=>`/guilds/${e}/soundboard-sounds`,guildSoundboardSound:(e,t)=>`/guilds/${e}/soundboard-sounds/${t}`};for(const[t,n]of Object.entries(e.Routes))e.Routes[t]=(...e)=>{const t=e.map(e=>e?r.urlSafeCharacters.test(String(e))?e:encodeURIComponent(e):e);return n.call(null,...t)};var i;Object.freeze(e.Routes),e.StickerPackApplicationId="710982414301790216",function(e){e.JPEG="jpeg",e.PNG="png",e.WebP="webp",e.GIF="gif",e.Lottie="json"}(i||(e.ImageFormat=i={})),e.CDNRoutes={emoji:(e,t)=>`/emojis/${e}.${t}`,guildIcon:(e,t,n)=>`/icons/${e}/${t}.${n}`,guildSplash:(e,t,n)=>`/splashes/${e}/${t}.${n}`,guildDiscoverySplash:(e,t,n)=>`/discovery-splashes/${e}/${t}.${n}`,guildBanner:(e,t,n)=>`/banners/${e}/${t}.${n}`,userBanner:(e,t,n)=>`/banners/${e}/${t}.${n}`,defaultUserAvatar:e=>`/embed/avatars/${e}.png`,userAvatar:(e,t,n)=>`/avatars/${e}/${t}.${n}`,guildMemberAvatar:(e,t,n,r)=>`/guilds/${e}/users/${t}/avatars/${n}.${r}`,userAvatarDecoration:(e,t)=>`/avatar-decorations/${e}/${t}.png`,avatarDecoration:e=>`/avatar-decoration-presets/${e}.png`,applicationIcon:(e,t,n)=>`/app-icons/${e}/${t}.${n}`,applicationCover:(e,t,n)=>`/app-icons/${e}/${t}.${n}`,applicationAsset:(e,t,n)=>`/app-assets/${e}/${t}.${n}`,achievementIcon:(e,t,n,r)=>`/app-assets/${e}/achievements/${t}/icons/${n}.${r}`,stickerPackBanner:(t,n)=>`/app-assets/${e.StickerPackApplicationId}/store/${t}.${n}`,storePageAsset:(e,t,n=i.PNG)=>`/app-assets/${e}/store/${t}.${n}`,teamIcon:(e,t,n)=>`/team-icons/${e}/${t}.${n}`,sticker:(e,t)=>`/stickers/${e}.${t}`,roleIcon:(e,t,n)=>`/role-icons/${e}/${t}.${n}`,guildScheduledEventCover:(e,t,n)=>`/guild-events/${e}/${t}.${n}`,guildMemberBanner:(e,t,n,r)=>`/guilds/${e}/users/${t}/banners/${n}.${r}`,soundboardSound:e=>`/soundboard-sounds/${e}`,guildTagBadge:(e,t,n)=>`/guild-tag-badges/${e}/${t}.${n}`};for(const[t,n]of Object.entries(e.CDNRoutes))e.CDNRoutes[t]=(...e)=>{const t=e.map(e=>e?r.urlSafeCharacters.test(String(e))?e:encodeURIComponent(e):e);return n.call(null,...t)};Object.freeze(e.CDNRoutes),e.RouteBases={api:`https://discord.com/api/v${e.APIVersion}`,cdn:"https://cdn.discordapp.com",media:"https://media.discordapp.net",invite:"https://discord.gg",template:"https://discord.new",gift:"https://discord.gift",scheduledEvent:"https://discord.com/events"},Object.freeze(e.RouteBases),e.OAuth2Routes={authorizationURL:`${e.RouteBases.api}${e.Routes.oauth2Authorization()}`,tokenURL:`${e.RouteBases.api}${e.Routes.oauth2TokenExchange()}`,tokenRevocationURL:`${e.RouteBases.api}${e.Routes.oauth2TokenRevocation()}`},Object.freeze(e.OAuth2Routes)}(ps)),ps),ws=Ae(Es);const As=ws.APIVersion,ks=ws.CDNRoutes,Cs=ws.EntitlementOwnerType,Is=ws.ImageFormat,Os=ws.Locale,Rs=ws.OAuth2Routes,Ms=ws.RESTJSONErrorCodes,Ps=ws.ReactionType,Ds=ws.RouteBases,Ns=ws.Routes,Us=ws.StickerPackApplicationId;var xs,Ls,Bs=ke(Object.freeze({__proto__:null,APIVersion:As,CDNRoutes:ks,EntitlementOwnerType:Cs,ImageFormat:Is,Locale:Os,OAuth2Routes:Rs,RESTJSONErrorCodes:Ms,ReactionType:Ps,RouteBases:Ds,Routes:Ns,StickerPackApplicationId:Us,default:ws})),Fs={},Gs={};var $s=(Ls||(Ls=1,function(e){var t,n,r=Fs&&Fs.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=Fs&&Fs.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.RPCEvents=e.RPCCommands=e.RPCVersion=void 0,i(function(){return xs||(xs=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.RPCCloseEventCodes=Gs.RPCErrorCodes=Gs.RelationshipType=Gs.VoiceConnectionStates=Gs.RPCVoiceShortcutKeyComboKeyType=Gs.RPCVoiceSettingsModeType=Gs.RPCDeviceType=void 0,function(e){e.AudioInput="audioinput",e.AudioOutput="audiooutput",e.VideoInput="videoinput"}(e||(Gs.RPCDeviceType=e={})),function(e){e.PushToTalk="PUSH_TO_TALK",e.VoiceActivity="VOICE_ACTIVITY"}(t||(Gs.RPCVoiceSettingsModeType=t={})),function(e){e[e.KeyboardKey=0]="KeyboardKey",e[e.MouseButton=1]="MouseButton",e[e.KeyboardModifierKey=2]="KeyboardModifierKey",e[e.GamepadButton=3]="GamepadButton"}(n||(Gs.RPCVoiceShortcutKeyComboKeyType=n={})),function(e){e.Disconnected="DISCONNECTED",e.AwaitingEndpoint="AWAITING_ENDPOINT",e.Authenticating="AUTHENTICATING",e.Connecting="CONNECTING",e.Connected="CONNECTED",e.VoiceDisconnected="VOICE_DISCONNECTED",e.VoiceConnecting="VOICE_CONNECTING",e.VoiceConnected="VOICE_CONNECTED",e.NoRoute="NO_ROUTE",e.IceChecking="ICE_CHECKING"}(r||(Gs.VoiceConnectionStates=r={})),function(e){e[e.None=0]="None",e[e.Friend=1]="Friend",e[e.Blocked=2]="Blocked",e[e.PendingIncoming=3]="PendingIncoming",e[e.PendingOutgoing=4]="PendingOutgoing",e[e.Implicit=5]="Implicit"}(i||(Gs.RelationshipType=i={})),function(e){e[e.UnknownError=1e3]="UnknownError",e[e.ServiceUnavailable=1001]="ServiceUnavailable",e[e.TransactionAborted=1002]="TransactionAborted",e[e.InvalidPayload=4e3]="InvalidPayload",e[e.InvalidCommand=4002]="InvalidCommand",e[e.InvalidGuild=4003]="InvalidGuild",e[e.InvalidEvent=4004]="InvalidEvent",e[e.InvalidChannel=4005]="InvalidChannel",e[e.InvalidPermissions=4006]="InvalidPermissions",e[e.InvalidClientId=4007]="InvalidClientId",e[e.InvalidOrigin=4008]="InvalidOrigin",e[e.InvalidToken=4009]="InvalidToken",e[e.InvalidUser=4010]="InvalidUser",e[e.InvalidInvite=4011]="InvalidInvite",e[e.InvalidActivityJoinRequest=4012]="InvalidActivityJoinRequest",e[e.InvalidEntitlement=4013]="InvalidEntitlement",e[e.InvalidGiftCode=4014]="InvalidGiftCode",e[e.OAuth2Error=5e3]="OAuth2Error",e[e.SelectChannelTimedOut=5001]="SelectChannelTimedOut",e[e.GetGuildTimedOut=5002]="GetGuildTimedOut",e[e.SelectVoiceForceRequired=5003]="SelectVoiceForceRequired",e[e.CaptureShortcutAlreadyListening=5004]="CaptureShortcutAlreadyListening",e[e.InvalidActivitySecret=5005]="InvalidActivitySecret",e[e.NoEligibleActivity=5006]="NoEligibleActivity",e[e.PurchaseCanceled=5007]="PurchaseCanceled",e[e.PurchaseError=5008]="PurchaseError",e[e.UnauthorizedForAchievement=5009]="UnauthorizedForAchievement",e[e.RateLimited=5010]="RateLimited"}(o||(Gs.RPCErrorCodes=o={})),function(e){e[e.CloseNormal=1e3]="CloseNormal",e[e.CloseUnsupported=1003]="CloseUnsupported",e[e.CloseAbnormal=1006]="CloseAbnormal",e[e.InvalidClientId=4e3]="InvalidClientId",e[e.InvalidOrigin=4001]="InvalidOrigin",e[e.RateLimited=4002]="RateLimited",e[e.TokenRevoked=4003]="TokenRevoked",e[e.InvalidVersion=4004]="InvalidVersion",e[e.InvalidEncoding=4005]="InvalidEncoding"}(s||(Gs.RPCCloseEventCodes=s={}))),Gs;var e,t,n,r,i,o,s}(),e),e.RPCVersion="1",function(e){e.AcceptActivityInvite="ACCEPT_ACTIVITY_INVITE",e.ActivityInviteUser="ACTIVITY_INVITE_USER",e.Authenticate="AUTHENTICATE",e.Authorize="AUTHORIZE",e.BraintreePopupBridgeCallback="BRAINTREE_POPUP_BRIDGE_CALLBACK",e.BrowserHandoff="BROWSER_HANDOFF",e.CloseActivityJoinRequest="CLOSE_ACTIVITY_JOIN_REQUEST",e.ConnectionsCallback="CONNECTIONS_CALLBACK",e.CreateChannelInvite="CREATE_CHANNEL_INVITE",e.DeepLink="DEEP_LINK",e.Dispatch="DISPATCH",e.GetApplicationTicket="GET_APPLICATION_TICKET",e.GetChannel="GET_CHANNEL",e.GetChannels="GET_CHANNELS",e.GetEntitlementTicket="GET_ENTITLEMENT_TICKET",e.GetEntitlements="GET_ENTITLEMENTS",e.GetGuild="GET_GUILD",e.GetGuilds="GET_GUILDS",e.GetImage="GET_IMAGE",e.GetNetworkingConfig="GET_NETWORKING_CONFIG",e.GetRelationships="GET_RELATIONSHIPS",e.GetSelectedVoiceChannel="GET_SELECTED_VOICE_CHANNEL",e.GetSkus="GET_SKUS",e.GetUser="GET_USER",e.GetVoiceSettings="GET_VOICE_SETTINGS",e.GiftCodeBrowser="GIFT_CODE_BROWSER",e.GuildTemplateBrowser="GUILD_TEMPLATE_BROWSER",e.InviteBrowser="INVITE_BROWSER",e.NetworkingCreateToken="NETWORKING_CREATE_TOKEN",e.NetworkingPeerMetrics="NETWORKING_PEER_METRICS",e.NetworkingSystemMetrics="NETWORKING_SYSTEM_METRICS",e.OpenOverlayActivityInvite="OPEN_OVERLAY_ACTIVITY_INVITE",e.OpenOverlayGuildInvite="OPEN_OVERLAY_GUILD_INVITE",e.OpenOverlayVoiceSettings="OPEN_OVERLAY_VOICE_SETTINGS",e.Overlay="OVERLAY",e.SelectTextChannel="SELECT_TEXT_CHANNEL",e.SelectVoiceChannel="SELECT_VOICE_CHANNEL",e.SendActivityJoinInvite="SEND_ACTIVITY_JOIN_INVITE",e.SetActivity="SET_ACTIVITY",e.SetCertifiedDevices="SET_CERTIFIED_DEVICES",e.SetOverlayLocked="SET_OVERLAY_LOCKED",e.SetUserVoiceSettings="SET_USER_VOICE_SETTINGS",e.SetUserVoiceSettings2="SET_USER_VOICE_SETTINGS_2",e.SetVoiceSettings="SET_VOICE_SETTINGS",e.SetVoiceSettings2="SET_VOICE_SETTINGS_2",e.StartPurchase="START_PURCHASE",e.Subscribe="SUBSCRIBE",e.Unsubscribe="UNSUBSCRIBE",e.ValidateApplication="VALIDATE_APPLICATION"}(t||(e.RPCCommands=t={})),function(e){e.ActivityInvite="ACTIVITY_INVITE",e.ActivityJoin="ACTIVITY_JOIN",e.ActivityJoinRequest="ACTIVITY_JOIN_REQUEST",e.ActivitySpectate="ACTIVITY_SPECTATE",e.ChannelCreate="CHANNEL_CREATE",e.CurrentUserUpdate="CURRENT_USER_UPDATE",e.EntitlementCreate="ENTITLEMENT_CREATE",e.EntitlementDelete="ENTITLEMENT_DELETE",e.Error="ERROR",e.GameJoin="GAME_JOIN",e.GameSpectate="GAME_SPECTATE",e.GuildCreate="GUILD_CREATE",e.GuildStatus="GUILD_STATUS",e.MessageCreate="MESSAGE_CREATE",e.MessageDelete="MESSAGE_DELETE",e.MessageUpdate="MESSAGE_UPDATE",e.NotificationCreate="NOTIFICATION_CREATE",e.Overlay="OVERLAY",e.OverlayUpdate="OVERLAY_UPDATE",e.Ready="READY",e.RelationshipUpdate="RELATIONSHIP_UPDATE",e.SpeakingStart="SPEAKING_START",e.SpeakingStop="SPEAKING_STOP",e.VoiceChannelSelect="VOICE_CHANNEL_SELECT",e.VoiceConnectionStatus="VOICE_CONNECTION_STATUS",e.VoiceSettingsUpdate="VOICE_SETTINGS_UPDATE",e.VoiceSettingsUpdate2="VOICE_SETTINGS_UPDATE_2",e.VoiceStateCreate="VOICE_STATE_CREATE",e.VoiceStateDelete="VOICE_STATE_DELETE",e.VoiceStateUpdate="VOICE_STATE_UPDATE"}(n||(e.RPCEvents=n={}))}(Fs)),Fs),qs=Ae($s);const js=qs.RPCCloseEventCodes,Vs=qs.RPCCommands,Hs=qs.RPCDeviceType,Ws=qs.RPCErrorCodes,zs=qs.RPCEvents,Ks=qs.RPCVersion,Js=qs.RPCVoiceSettingsModeType,Ys=qs.RPCVoiceShortcutKeyComboKeyType,Qs=qs.RelationshipType,Xs=qs.VoiceConnectionStates;var Zs,ea=ke(Object.freeze({__proto__:null,RPCCloseEventCodes:js,RPCCommands:Vs,RPCDeviceType:Hs,RPCErrorCodes:Ws,RPCEvents:zs,RPCVersion:Ks,RPCVoiceSettingsModeType:Js,RPCVoiceShortcutKeyComboKeyType:Ys,RelationshipType:Qs,VoiceConnectionStates:Xs,default:qs})),ta={};var na=function(){if(Zs)return ta;Zs=1,Object.defineProperty(ta,"__esModule",{value:!0}),ta.isDMInteraction=t,ta.isGuildInteraction=n,ta.isApplicationCommandDMInteraction=function(e){return t(e)},ta.isApplicationCommandGuildInteraction=function(e){return n(e)},ta.isMessageComponentDMInteraction=function(e){return t(e)},ta.isMessageComponentGuildInteraction=function(e){return n(e)},ta.isLinkButton=function(t){return t.style===e.ButtonStyle.Link},ta.isInteractionButton=function(t){return![e.ButtonStyle.Link,e.ButtonStyle.Premium].includes(t.style)},ta.isMessageComponentInteraction=function(t){return t.type===e.InteractionType.MessageComponent},ta.isMessageComponentButtonInteraction=function(t){return t.data.component_type===e.ComponentType.Button},ta.isMessageComponentSelectMenuInteraction=function(t){return[e.ComponentType.StringSelect,e.ComponentType.UserSelect,e.ComponentType.RoleSelect,e.ComponentType.MentionableSelect,e.ComponentType.ChannelSelect].includes(t.data.component_type)},ta.isChatInputApplicationCommandInteraction=function(t){return t.data.type===e.ApplicationCommandType.ChatInput},ta.isContextMenuApplicationCommandInteraction=function(t){return t.data.type===e.ApplicationCommandType.Message||t.data.type===e.ApplicationCommandType.User};const e=hs;function t(e){return Reflect.has(e,"user")}function n(e){return Reflect.has(e,"guild_id")}return ta}(),ra=Ae(na);const ia=ra.isApplicationCommandDMInteraction,oa=ra.isApplicationCommandGuildInteraction,sa=ra.isChatInputApplicationCommandInteraction,aa=ra.isContextMenuApplicationCommandInteraction,la=ra.isDMInteraction,ca=ra.isGuildInteraction,ua=ra.isInteractionButton,da=ra.isLinkButton,ha=ra.isMessageComponentButtonInteraction,pa=ra.isMessageComponentDMInteraction,ma=ra.isMessageComponentGuildInteraction,fa=ra.isMessageComponentInteraction,ga=ra.isMessageComponentSelectMenuInteraction;var ya,ba=ke(Object.freeze({__proto__:null,default:ra,isApplicationCommandDMInteraction:ia,isApplicationCommandGuildInteraction:oa,isChatInputApplicationCommandInteraction:sa,isContextMenuApplicationCommandInteraction:aa,isDMInteraction:la,isGuildInteraction:ca,isInteractionButton:ua,isLinkButton:da,isMessageComponentButtonInteraction:ha,isMessageComponentDMInteraction:pa,isMessageComponentGuildInteraction:ma,isMessageComponentInteraction:fa,isMessageComponentSelectMenuInteraction:ga}));var va=(ya||(ya=1,function(e){var t=cr&&cr.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=cr&&cr.__exportStar||function(e,n){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(n,r)||t(n,e,r)};Object.defineProperty(e,"__esModule",{value:!0}),e.Utils=void 0,n(Sr,e),n(kr,e),n(hs,e),n(Bs,e),n(ea,e),n(fs(),e),e.Utils=ba}(cr)),cr),Sa=Ae(va);Sa.APIApplicationCommandPermissionsConstant,Sa.APIVersion,Sa.ActivityFlags,Sa.ActivityPlatform,Sa.ActivityType,Sa.AllowedMentionsTypes,Sa.ApplicationCommandOptionType,Sa.ApplicationCommandPermissionType,Sa.ApplicationCommandType,Sa.ApplicationFlags,Sa.ApplicationIntegrationType,Sa.ApplicationRoleConnectionMetadataType,Sa.ApplicationWebhookEventStatus,Sa.ApplicationWebhookEventType,Sa.ApplicationWebhookType,Sa.AttachmentFlags,Sa.AuditLogEvent,Sa.AuditLogOptionsType,Sa.AutoModerationActionType,Sa.AutoModerationRuleEventType,Sa.AutoModerationRuleKeywordPresetType,Sa.AutoModerationRuleTriggerType,Sa.ButtonStyle,Sa.CDNRoutes,Sa.ChannelFlags,Sa.ChannelType,Sa.ComponentType,Sa.ConnectionService,Sa.ConnectionVisibility,Sa.EmbedType,Sa.EntitlementOwnerType,Sa.EntitlementType,Sa.EntryPointCommandHandlerType,Sa.FormattingPatterns,Sa.ForumLayoutType,Sa.GatewayCloseCodes,Sa.GatewayDispatchEvents,Sa.GatewayIntentBits;const Ta=Sa.GatewayOpcodes;Sa.GatewayVersion,Sa.GuildDefaultMessageNotifications,Sa.GuildExplicitContentFilter,Sa.GuildFeature,Sa.GuildHubType,Sa.GuildMFALevel,Sa.GuildMemberFlags,Sa.GuildNSFWLevel,Sa.GuildOnboardingMode,Sa.GuildOnboardingPromptType,Sa.GuildPremiumTier,Sa.GuildScheduledEventEntityType,Sa.GuildScheduledEventPrivacyLevel,Sa.GuildScheduledEventRecurrenceRuleFrequency,Sa.GuildScheduledEventRecurrenceRuleMonth,Sa.GuildScheduledEventRecurrenceRuleWeekday,Sa.GuildScheduledEventStatus,Sa.GuildSystemChannelFlags,Sa.GuildVerificationLevel,Sa.GuildWidgetStyle,Sa.ImageFormat,Sa.IntegrationExpireBehavior,Sa.InteractionContextType,Sa.InteractionResponseType,Sa.InteractionType,Sa.InviteFlags,Sa.InviteTargetType,Sa.InviteType,Sa.Locale,Sa.MembershipScreeningFieldType,Sa.MessageActivityType,Sa.MessageFlags,Sa.MessageReferenceType,Sa.MessageType,Sa.NameplatePalette,Sa.OAuth2Routes,Sa.OAuth2Scopes,Sa.OverwriteType,Sa.PermissionFlagsBits,Sa.PollLayoutType,Sa.PresenceUpdateStatus,Sa.RESTJSONErrorCodes,Sa.RPCCloseEventCodes,Sa.RPCCommands,Sa.RPCDeviceType,Sa.RPCErrorCodes,Sa.RPCEvents,Sa.RPCVersion,Sa.RPCVoiceSettingsModeType,Sa.RPCVoiceShortcutKeyComboKeyType,Sa.ReactionType,Sa.RelationshipType,Sa.RoleFlags,Sa.RouteBases,Sa.Routes,Sa.SKUFlags,Sa.SKUType,Sa.SelectMenuDefaultValueType,Sa.SeparatorSpacingSize,Sa.SortOrderType,Sa.StageInstancePrivacyLevel,Sa.StatusDisplayType,Sa.StickerFormatType,Sa.StickerPackApplicationId,Sa.StickerType,Sa.SubscriptionStatus,Sa.TeamMemberMembershipState,Sa.TeamMemberRole,Sa.TextInputStyle,Sa.ThreadAutoArchiveDuration,Sa.ThreadMemberFlags,Sa.UnfurledMediaItemLoadingState,Sa.UserFlags,Sa.UserPremiumType,Sa.Utils,Sa.VideoQualityMode,Sa.VoiceChannelEffectSendAnimationType,Sa.VoiceConnectionStates,Sa.WebhookType,Sa.urlSafeCharacters;var _a,Ea={};var wa=function(){return _a||(_a=1,Object.defineProperty(Ea,"__esModule",{value:!0}),Ea.VoiceSpeakingFlags=Ea.VoiceEncryptionMode=Ea.VoiceCloseCodes=Ea.VoiceOpcodes=Ea.VoiceGatewayVersion=void 0,Ea.VoiceGatewayVersion="8",function(e){e[e.Identify=0]="Identify",e[e.SelectProtocol=1]="SelectProtocol",e[e.Ready=2]="Ready",e[e.Heartbeat=3]="Heartbeat",e[e.SessionDescription=4]="SessionDescription",e[e.Speaking=5]="Speaking",e[e.HeartbeatAck=6]="HeartbeatAck",e[e.Resume=7]="Resume",e[e.Hello=8]="Hello",e[e.Resumed=9]="Resumed",e[e.ClientsConnect=11]="ClientsConnect",e[e.ClientDisconnect=13]="ClientDisconnect",e[e.DavePrepareTransition=21]="DavePrepareTransition",e[e.DaveExecuteTransition=22]="DaveExecuteTransition",e[e.DaveTransitionReady=23]="DaveTransitionReady",e[e.DavePrepareEpoch=24]="DavePrepareEpoch",e[e.DaveMlsExternalSender=25]="DaveMlsExternalSender",e[e.DaveMlsKeyPackage=26]="DaveMlsKeyPackage",e[e.DaveMlsProposals=27]="DaveMlsProposals",e[e.DaveMlsCommitWelcome=28]="DaveMlsCommitWelcome",e[e.DaveMlsAnnounceCommitTransition=29]="DaveMlsAnnounceCommitTransition",e[e.DaveMlsWelcome=30]="DaveMlsWelcome",e[e.DaveMlsInvalidCommitWelcome=31]="DaveMlsInvalidCommitWelcome"}(e||(Ea.VoiceOpcodes=e={})),function(e){e[e.UnknownOpcode=4001]="UnknownOpcode",e[e.FailedToDecode=4002]="FailedToDecode",e[e.NotAuthenticated=4003]="NotAuthenticated",e[e.AuthenticationFailed=4004]="AuthenticationFailed",e[e.AlreadyAuthenticated=4005]="AlreadyAuthenticated",e[e.SessionNoLongerValid=4006]="SessionNoLongerValid",e[e.SessionTimeout=4009]="SessionTimeout",e[e.ServerNotFound=4011]="ServerNotFound",e[e.UnknownProtocol=4012]="UnknownProtocol",e[e.Disconnected=4014]="Disconnected",e[e.VoiceServerCrashed=4015]="VoiceServerCrashed",e[e.UnknownEncryptionMode=4016]="UnknownEncryptionMode",e[e.BadRequest=4020]="BadRequest",e[e.RateLimited=4021]="RateLimited",e[e.CallTerminated=4022]="CallTerminated"}(t||(Ea.VoiceCloseCodes=t={})),function(e){e.AeadAes256GcmRtpSize="aead_aes256_gcm_rtpsize",e.AeadXChaCha20Poly1305RtpSize="aead_xchacha20_poly1305_rtpsize",e.XSalsa20Poly1305LiteRtpSize="xsalsa20_poly1305_lite_rtpsize",e.AeadAes256Gcm="aead_aes256_gcm",e.XSalsa20Poly1305="xsalsa20_poly1305",e.XSalsa20Poly1305Suffix="xsalsa20_poly1305_suffix",e.XSalsa20Poly1305Lite="xsalsa20_poly1305_lite"}(n||(Ea.VoiceEncryptionMode=n={})),function(e){e[e.Microphone=1]="Microphone",e[e.Soundshare=2]="Soundshare",e[e.Priority=4]="Priority"}(r||(Ea.VoiceSpeakingFlags=r={}))),Ea;var e,t,n,r}(),Aa=Ae(wa);Aa.VoiceCloseCodes;const ka=Aa.VoiceEncryptionMode;Aa.VoiceGatewayVersion;const Ca=Aa.VoiceOpcodes;Aa.VoiceSpeakingFlags;var Ia,Oa,Ra,Ma,Pa,Da,Na,Ua={exports:{}};function xa(){if(Oa)return Ia;Oa=1;const e=["nodebuffer","arraybuffer","fragments"],t="undefined"!=typeof Blob;return t&&e.push("blob"),Ia={BINARY_TYPES:e,EMPTY_BUFFER:Buffer.alloc(0),GUID:"258EAFA5-E914-47DA-95CA-C5AB0DC85B11",hasBlob:t,kForOnEventAttribute:Symbol("kIsForOnEventAttribute"),kListener:Symbol("kListener"),kStatusCode:Symbol("status-code"),kWebSocket:Symbol("websocket"),NOOP:()=>{}}}function La(){if(Ra)return Ua.exports;Ra=1;const{EMPTY_BUFFER:e}=xa(),t=Buffer[Symbol.species];function n(e,t,n,r,i){for(let o=0;o<i;o++)n[r+o]=e[o]^t[3&o]}function r(e,t){for(let n=0;n<e.length;n++)e[n]^=t[3&n]}if(Ua.exports={concat:function(n,r){if(0===n.length)return e;if(1===n.length)return n[0];const i=Buffer.allocUnsafe(r);let o=0;for(let e=0;e<n.length;e++){const t=n[e];i.set(t,o),o+=t.length}return o<r?new t(i.buffer,i.byteOffset,o):i},mask:n,toArrayBuffer:function(e){return e.length===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.length)},toBuffer:function e(n){if(e.readOnly=!0,Buffer.isBuffer(n))return n;let r;return n instanceof ArrayBuffer?r=new t(n):ArrayBuffer.isView(n)?r=new t(n.buffer,n.byteOffset,n.byteLength):(r=Buffer.from(n),e.readOnly=!1),r},unmask:r},!process.env.WS_NO_BUFFER_UTIL)try{const e=require("bufferutil");Ua.exports.mask=function(t,r,i,o,s){s<48?n(t,r,i,o,s):e.mask(t,r,i,o,s)},Ua.exports.unmask=function(t,n){t.length<32?r(t,n):e.unmask(t,n)}}catch(e){}return Ua.exports}function Ba(){if(Na)return Da;Na=1;const e=b,t=La(),n=function(){if(Pa)return Ma;Pa=1;const e=Symbol("kDone"),t=Symbol("kRun");return Ma=class{constructor(n){this[e]=()=>{this.pending--,this[t]()},this.concurrency=n||1/0,this.jobs=[],this.pending=0}add(e){this.jobs.push(e),this[t]()}[t](){if(this.pending!==this.concurrency&&this.jobs.length){const t=this.jobs.shift();this.pending++,t(this[e])}}}}(),{kStatusCode:r}=xa(),i=Buffer[Symbol.species],o=Buffer.from([0,0,255,255]),s=Symbol("permessage-deflate"),a=Symbol("total-length"),l=Symbol("callback"),c=Symbol("buffers"),u=Symbol("error");let d;function h(e){this[c].push(e),this[a]+=e.length}function p(e){this[a]+=e.length,this[s]._maxPayload<1||this[a]<=this[s]._maxPayload?this[c].push(e):(this[u]=new RangeError("Max payload size exceeded"),this[u].code="WS_ERR_UNSUPPORTED_MESSAGE_LENGTH",this[u][r]=1009,this.removeListener("data",p),this.reset())}function m(e){this[s]._inflate=null,this[u]?this[l](this[u]):(e[r]=1007,this[l](e))}return Da=class{constructor(e,t,r){if(this._maxPayload=0|r,this._options=e||{},this._threshold=void 0!==this._options.threshold?this._options.threshold:1024,this._isServer=!!t,this._deflate=null,this._inflate=null,this.params=null,!d){const e=void 0!==this._options.concurrencyLimit?this._options.concurrencyLimit:10;d=new n(e)}}static get extensionName(){return"permessage-deflate"}offer(){const e={};return this._options.serverNoContextTakeover&&(e.server_no_context_takeover=!0),this._options.clientNoContextTakeover&&(e.client_no_context_takeover=!0),this._options.serverMaxWindowBits&&(e.server_max_window_bits=this._options.serverMaxWindowBits),this._options.clientMaxWindowBits?e.client_max_window_bits=this._options.clientMaxWindowBits:null==this._options.clientMaxWindowBits&&(e.client_max_window_bits=!0),e}accept(e){return e=this.normalizeParams(e),this.params=this._isServer?this.acceptAsServer(e):this.acceptAsClient(e),this.params}cleanup(){if(this._inflate&&(this._inflate.close(),this._inflate=null),this._deflate){const e=this._deflate[l];this._deflate.close(),this._deflate=null,e&&e(new Error("The deflate stream was closed while data was being processed"))}}acceptAsServer(e){const t=this._options,n=e.find(e=>!(!1===t.serverNoContextTakeover&&e.server_no_context_takeover||e.server_max_window_bits&&(!1===t.serverMaxWindowBits||"number"==typeof t.serverMaxWindowBits&&t.serverMaxWindowBits>e.server_max_window_bits)||"number"==typeof t.clientMaxWindowBits&&!e.client_max_window_bits));if(!n)throw new Error("None of the extension offers can be accepted");return t.serverNoContextTakeover&&(n.server_no_context_takeover=!0),t.clientNoContextTakeover&&(n.client_no_context_takeover=!0),"number"==typeof t.serverMaxWindowBits&&(n.server_max_window_bits=t.serverMaxWindowBits),"number"==typeof t.clientMaxWindowBits?n.client_max_window_bits=t.clientMaxWindowBits:!0!==n.client_max_window_bits&&!1!==t.clientMaxWindowBits||delete n.client_max_window_bits,n}acceptAsClient(e){const t=e[0];if(!1===this._options.clientNoContextTakeover&&t.client_no_context_takeover)throw new Error('Unexpected parameter "client_no_context_takeover"');if(t.client_max_window_bits){if(!1===this._options.clientMaxWindowBits||"number"==typeof this._options.clientMaxWindowBits&&t.client_max_window_bits>this._options.clientMaxWindowBits)throw new Error('Unexpected or invalid parameter "client_max_window_bits"')}else"number"==typeof this._options.clientMaxWindowBits&&(t.client_max_window_bits=this._options.clientMaxWindowBits);return t}normalizeParams(e){return e.forEach(e=>{Object.keys(e).forEach(t=>{let n=e[t];if(n.length>1)throw new Error(`Parameter "${t}" must have only a single value`);if(n=n[0],"client_max_window_bits"===t){if(!0!==n){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else if(!this._isServer)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}else if("server_max_window_bits"===t){const e=+n;if(!Number.isInteger(e)||e<8||e>15)throw new TypeError(`Invalid value for parameter "${t}": ${n}`);n=e}else{if("client_no_context_takeover"!==t&&"server_no_context_takeover"!==t)throw new Error(`Unknown parameter "${t}"`);if(!0!==n)throw new TypeError(`Invalid value for parameter "${t}": ${n}`)}e[t]=n})}),e}decompress(e,t,n){d.add(r=>{this._decompress(e,t,(e,t)=>{r(),n(e,t)})})}compress(e,t,n){d.add(r=>{this._compress(e,t,(e,t)=>{r(),n(e,t)})})}_decompress(n,r,i){const d=this._isServer?"client":"server";if(!this._inflate){const t=`${d}_max_window_bits`,n="number"!=typeof this.params[t]?e.Z_DEFAULT_WINDOWBITS:this.params[t];this._inflate=e.createInflateRaw({...this._options.zlibInflateOptions,windowBits:n}),this._inflate[s]=this,this._inflate[a]=0,this._inflate[c]=[],this._inflate.on("error",m),this._inflate.on("data",p)}this._inflate[l]=i,this._inflate.write(n),r&&this._inflate.write(o),this._inflate.flush(()=>{const e=this._inflate[u];if(e)return this._inflate.close(),this._inflate=null,void i(e);const n=t.concat(this._inflate[c],this._inflate[a]);this._inflate._readableState.endEmitted?(this._inflate.close(),this._inflate=null):(this._inflate[a]=0,this._inflate[c]=[],r&&this.params[`${d}_no_context_takeover`]&&this._inflate.reset()),i(null,n)})}_compress(n,r,o){const s=this._isServer?"server":"client";if(!this._deflate){const t=`${s}_max_window_bits`,n="number"!=typeof this.params[t]?e.Z_DEFAULT_WINDOWBITS:this.params[t];this._deflate=e.createDeflateRaw({...this._options.zlibDeflateOptions,windowBits:n}),this._deflate[a]=0,this._deflate[c]=[],this._deflate.on("data",h)}this._deflate[l]=o,this._deflate.write(n),this._deflate.flush(e.Z_SYNC_FLUSH,()=>{if(!this._deflate)return;let e=t.concat(this._deflate[c],this._deflate[a]);r&&(e=new i(e.buffer,e.byteOffset,e.length-4)),this._deflate[l]=null,this._deflate[a]=0,this._deflate[c]=[],r&&this.params[`${s}_no_context_takeover`]&&this._deflate.reset(),o(null,e)})}}}var Fa,Ga,$a,qa,ja,Va,Ha,Wa,za,Ka,Ja,Ya,Qa,Xa={exports:{}};function Za(){if(Fa)return Xa.exports;Fa=1;const{isUtf8:e}=i,{hasBlob:t}=xa();function n(e){const t=e.length;let n=0;for(;n<t;)if(128&e[n])if(192==(224&e[n])){if(n+1===t||128!=(192&e[n+1])||192==(254&e[n]))return!1;n+=2}else if(224==(240&e[n])){if(n+2>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||224===e[n]&&128==(224&e[n+1])||237===e[n]&&160==(224&e[n+1]))return!1;n+=3}else{if(240!=(248&e[n]))return!1;if(n+3>=t||128!=(192&e[n+1])||128!=(192&e[n+2])||128!=(192&e[n+3])||240===e[n]&&128==(240&e[n+1])||244===e[n]&&e[n+1]>143||e[n]>244)return!1;n+=4}else n++;return!0}if(Xa.exports={isBlob:function(e){return t&&"object"==typeof e&&"function"==typeof e.arrayBuffer&&"string"==typeof e.type&&"function"==typeof e.stream&&("Blob"===e[Symbol.toStringTag]||"File"===e[Symbol.toStringTag])},isValidStatusCode:function(e){return e>=1e3&&e<=1014&&1004!==e&&1005!==e&&1006!==e||e>=3e3&&e<=4999},isValidUTF8:n,tokenChars:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,1,1,1,1,0,0,1,1,0,1,1,0,1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0,1,0,1,0]},e)Xa.exports.isValidUTF8=function(t){return t.length<24?n(t):e(t)};else if(!process.env.WS_NO_UTF_8_VALIDATE)try{const e=require("utf-8-validate");Xa.exports.isValidUTF8=function(t){return t.length<32?n(t):e(t)}}catch(e){}return Xa.exports}function el(){if($a)return Ga;$a=1;const{Writable:e}=m,t=Ba(),{BINARY_TYPES:n,EMPTY_BUFFER:r,kStatusCode:i,kWebSocket:o}=xa(),{concat:s,toArrayBuffer:a,unmask:l}=La(),{isValidStatusCode:c,isValidUTF8:u}=Za(),d=Buffer[Symbol.species];return Ga=class extends e{constructor(e={}){super(),this._allowSynchronousEvents=void 0===e.allowSynchronousEvents||e.allowSynchronousEvents,this._binaryType=e.binaryType||n[0],this._extensions=e.extensions||{},this._isServer=!!e.isServer,this._maxPayload=0|e.maxPayload,this._skipUTF8Validation=!!e.skipUTF8Validation,this[o]=void 0,this._bufferedBytes=0,this._buffers=[],this._compressed=!1,this._payloadLength=0,this._mask=void 0,this._fragmented=0,this._masked=!1,this._fin=!1,this._opcode=0,this._totalPayloadLength=0,this._messageLength=0,this._fragments=[],this._errored=!1,this._loop=!1,this._state=0}_write(e,t,n){if(8===this._opcode&&0==this._state)return n();this._bufferedBytes+=e.length,this._buffers.push(e),this.startLoop(n)}consume(e){if(this._bufferedBytes-=e,e===this._buffers[0].length)return this._buffers.shift();if(e<this._buffers[0].length){const t=this._buffers[0];return this._buffers[0]=new d(t.buffer,t.byteOffset+e,t.length-e),new d(t.buffer,t.byteOffset,e)}const t=Buffer.allocUnsafe(e);do{const n=this._buffers[0],r=t.length-e;e>=n.length?t.set(this._buffers.shift(),r):(t.set(new Uint8Array(n.buffer,n.byteOffset,e),r),this._buffers[0]=new d(n.buffer,n.byteOffset+e,n.length-e)),e-=n.length}while(e>0);return t}startLoop(e){this._loop=!0;do{switch(this._state){case 0:this.getInfo(e);break;case 1:this.getPayloadLength16(e);break;case 2:this.getPayloadLength64(e);break;case 3:this.getMask();break;case 4:this.getData(e);break;case 5:case 6:return void(this._loop=!1)}}while(this._loop);this._errored||e()}getInfo(e){if(this._bufferedBytes<2)return void(this._loop=!1);const n=this.consume(2);if(48&n[0]){return void e(this.createError(RangeError,"RSV2 and RSV3 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_2_3"))}const r=!(64&~n[0]);if(r&&!this._extensions[t.extensionName]){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(this._fin=!(128&~n[0]),this._opcode=15&n[0],this._payloadLength=127&n[1],0===this._opcode){if(r){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(!this._fragmented){return void e(this.createError(RangeError,"invalid opcode 0",!0,1002,"WS_ERR_INVALID_OPCODE"))}this._opcode=this._fragmented}else if(1===this._opcode||2===this._opcode){if(this._fragmented){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}this._compressed=r}else{if(!(this._opcode>7&&this._opcode<11)){return void e(this.createError(RangeError,`invalid opcode ${this._opcode}`,!0,1002,"WS_ERR_INVALID_OPCODE"))}if(!this._fin){return void e(this.createError(RangeError,"FIN must be set",!0,1002,"WS_ERR_EXPECTED_FIN"))}if(r){return void e(this.createError(RangeError,"RSV1 must be clear",!0,1002,"WS_ERR_UNEXPECTED_RSV_1"))}if(this._payloadLength>125||8===this._opcode&&1===this._payloadLength){return void e(this.createError(RangeError,`invalid payload length ${this._payloadLength}`,!0,1002,"WS_ERR_INVALID_CONTROL_PAYLOAD_LENGTH"))}}if(this._fin||this._fragmented||(this._fragmented=this._opcode),this._masked=!(128&~n[1]),this._isServer){if(!this._masked){return void e(this.createError(RangeError,"MASK must be set",!0,1002,"WS_ERR_EXPECTED_MASK"))}}else if(this._masked){return void e(this.createError(RangeError,"MASK must be clear",!0,1002,"WS_ERR_UNEXPECTED_MASK"))}126===this._payloadLength?this._state=1:127===this._payloadLength?this._state=2:this.haveLength(e)}getPayloadLength16(e){this._bufferedBytes<2?this._loop=!1:(this._payloadLength=this.consume(2).readUInt16BE(0),this.haveLength(e))}getPayloadLength64(e){if(this._bufferedBytes<8)return void(this._loop=!1);const t=this.consume(8),n=t.readUInt32BE(0);if(n>Math.pow(2,21)-1){return void e(this.createError(RangeError,"Unsupported WebSocket frame: payload length > 2^53 - 1",!1,1009,"WS_ERR_UNSUPPORTED_DATA_PAYLOAD_LENGTH"))}this._payloadLength=n*Math.pow(2,32)+t.readUInt32BE(4),this.haveLength(e)}haveLength(e){if(this._payloadLength&&this._opcode<8&&(this._totalPayloadLength+=this._payloadLength,this._totalPayloadLength>this._maxPayload&&this._maxPayload>0)){return void e(this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH"))}this._masked?this._state=3:this._state=4}getMask(){this._bufferedBytes<4?this._loop=!1:(this._mask=this.consume(4),this._state=4)}getData(e){let t=r;if(this._payloadLength){if(this._bufferedBytes<this._payloadLength)return void(this._loop=!1);t=this.consume(this._payloadLength),this._masked&&0!==(this._mask[0]|this._mask[1]|this._mask[2]|this._mask[3])&&l(t,this._mask)}if(this._opcode>7)this.controlMessage(t,e);else{if(this._compressed)return this._state=5,void this.decompress(t,e);t.length&&(this._messageLength=this._totalPayloadLength,this._fragments.push(t)),this.dataMessage(e)}}decompress(e,n){this._extensions[t.extensionName].decompress(e,this._fin,(e,t)=>{if(e)return n(e);if(t.length){if(this._messageLength+=t.length,this._messageLength>this._maxPayload&&this._maxPayload>0){const e=this.createError(RangeError,"Max payload size exceeded",!1,1009,"WS_ERR_UNSUPPORTED_MESSAGE_LENGTH");return void n(e)}this._fragments.push(t)}this.dataMessage(n),0===this._state&&this.startLoop(n)})}dataMessage(e){if(!this._fin)return void(this._state=0);const t=this._messageLength,n=this._fragments;if(this._totalPayloadLength=0,this._messageLength=0,this._fragmented=0,this._fragments=[],2===this._opcode){let r;r="nodebuffer"===this._binaryType?s(n,t):"arraybuffer"===this._binaryType?a(s(n,t)):"blob"===this._binaryType?new Blob(n):n,this._allowSynchronousEvents?(this.emit("message",r,!0),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",r,!0),this._state=0,this.startLoop(e)}))}else{const r=s(n,t);if(!this._skipUTF8Validation&&!u(r)){const t=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void e(t)}5===this._state||this._allowSynchronousEvents?(this.emit("message",r,!1),this._state=0):(this._state=6,setImmediate(()=>{this.emit("message",r,!1),this._state=0,this.startLoop(e)}))}}controlMessage(e,t){if(8!==this._opcode)this._allowSynchronousEvents?(this.emit(9===this._opcode?"ping":"pong",e),this._state=0):(this._state=6,setImmediate(()=>{this.emit(9===this._opcode?"ping":"pong",e),this._state=0,this.startLoop(t)}));else{if(0===e.length)this._loop=!1,this.emit("conclude",1005,r),this.end();else{const n=e.readUInt16BE(0);if(!c(n)){const e=this.createError(RangeError,`invalid status code ${n}`,!0,1002,"WS_ERR_INVALID_CLOSE_CODE");return void t(e)}const r=new d(e.buffer,e.byteOffset+2,e.length-2);if(!this._skipUTF8Validation&&!u(r)){const e=this.createError(Error,"invalid UTF-8 sequence",!0,1007,"WS_ERR_INVALID_UTF8");return void t(e)}this._loop=!1,this.emit("conclude",n,r),this.end()}this._state=0}}createError(e,t,n,r,o){this._loop=!1,this._errored=!0;const s=new e(n?`Invalid WebSocket frame: ${t}`:t);return Error.captureStackTrace(s,this.createError),s.code=o,s[i]=r,s}},Ga}function tl(){if(ja)return qa;ja=1;const{Duplex:e}=m,{randomFillSync:t}=s,n=Ba(),{EMPTY_BUFFER:r,kWebSocket:i,NOOP:o}=xa(),{isBlob:a,isValidStatusCode:l}=Za(),{mask:c,toBuffer:u}=La(),d=Symbol("kByteLength"),h=Buffer.alloc(4),p=8192;let f,g=p;class y{constructor(e,t,n){this._extensions=t||{},n&&(this._generateMask=n,this._maskBuffer=Buffer.alloc(4)),this._socket=e,this._firstFragment=!0,this._compress=!1,this._bufferedBytes=0,this._queue=[],this._state=0,this.onerror=o,this[i]=void 0}static frame(e,n){let r,i,o=!1,s=2,a=!1;n.mask&&(r=n.maskBuffer||h,n.generateMask?n.generateMask(r):(g===p&&(void 0===f&&(f=Buffer.alloc(p)),t(f,0,p),g=0),r[0]=f[g++],r[1]=f[g++],r[2]=f[g++],r[3]=f[g++]),a=0===(r[0]|r[1]|r[2]|r[3]),s=6),"string"==typeof e?i=n.mask&&!a||void 0===n[d]?(e=Buffer.from(e)).length:n[d]:(i=e.length,o=n.mask&&n.readOnly&&!a);let l=i;i>=65536?(s+=8,l=127):i>125&&(s+=2,l=126);const u=Buffer.allocUnsafe(o?i+s:s);return u[0]=n.fin?128|n.opcode:n.opcode,n.rsv1&&(u[0]|=64),u[1]=l,126===l?u.writeUInt16BE(i,2):127===l&&(u[2]=u[3]=0,u.writeUIntBE(i,4,6)),n.mask?(u[1]|=128,u[s-4]=r[0],u[s-3]=r[1],u[s-2]=r[2],u[s-1]=r[3],a?[u,e]:o?(c(e,r,u,s,i),[u]):(c(e,r,e,0,i),[u,e])):[u,e]}close(e,t,n,i){let o;if(void 0===e)o=r;else{if("number"!=typeof e||!l(e))throw new TypeError("First argument must be a valid error code number");if(void 0!==t&&t.length){const n=Buffer.byteLength(t);if(n>123)throw new RangeError("The message must not be greater than 123 bytes");o=Buffer.allocUnsafe(2+n),o.writeUInt16BE(e,0),"string"==typeof t?o.write(t,2):o.set(t,2)}else o=Buffer.allocUnsafe(2),o.writeUInt16BE(e,0)}const s={[d]:o.length,fin:!0,generateMask:this._generateMask,mask:n,maskBuffer:this._maskBuffer,opcode:8,readOnly:!1,rsv1:!1};0!==this._state?this.enqueue([this.dispatch,o,!1,s,i]):this.sendFrame(y.frame(o,s),i)}ping(e,t,n){let r,i;if("string"==typeof e?(r=Buffer.byteLength(e),i=!1):a(e)?(r=e.size,i=!1):(r=(e=u(e)).length,i=u.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[d]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:9,readOnly:i,rsv1:!1};a(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):0!==this._state?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(y.frame(e,o),n)}pong(e,t,n){let r,i;if("string"==typeof e?(r=Buffer.byteLength(e),i=!1):a(e)?(r=e.size,i=!1):(r=(e=u(e)).length,i=u.readOnly),r>125)throw new RangeError("The data size must not be greater than 125 bytes");const o={[d]:r,fin:!0,generateMask:this._generateMask,mask:t,maskBuffer:this._maskBuffer,opcode:10,readOnly:i,rsv1:!1};a(e)?0!==this._state?this.enqueue([this.getBlobData,e,!1,o,n]):this.getBlobData(e,!1,o,n):0!==this._state?this.enqueue([this.dispatch,e,!1,o,n]):this.sendFrame(y.frame(e,o),n)}send(e,t,r){const i=this._extensions[n.extensionName];let o,s,l=t.binary?2:1,c=t.compress;"string"==typeof e?(o=Buffer.byteLength(e),s=!1):a(e)?(o=e.size,s=!1):(o=(e=u(e)).length,s=u.readOnly),this._firstFragment?(this._firstFragment=!1,c&&i&&i.params[i._isServer?"server_no_context_takeover":"client_no_context_takeover"]&&(c=o>=i._threshold),this._compress=c):(c=!1,l=0),t.fin&&(this._firstFragment=!0);const h={[d]:o,fin:t.fin,generateMask:this._generateMask,mask:t.mask,maskBuffer:this._maskBuffer,opcode:l,readOnly:s,rsv1:c};a(e)?0!==this._state?this.enqueue([this.getBlobData,e,this._compress,h,r]):this.getBlobData(e,this._compress,h,r):0!==this._state?this.enqueue([this.dispatch,e,this._compress,h,r]):this.dispatch(e,this._compress,h,r)}getBlobData(e,t,n,r){this._bufferedBytes+=n[d],this._state=2,e.arrayBuffer().then(e=>{if(this._socket.destroyed){const e=new Error("The socket was closed while the blob was being read");return void process.nextTick(b,this,e,r)}this._bufferedBytes-=n[d];const i=u(e);t?this.dispatch(i,t,n,r):(this._state=0,this.sendFrame(y.frame(i,n),r),this.dequeue())}).catch(e=>{process.nextTick(v,this,e,r)})}dispatch(e,t,r,i){if(!t)return void this.sendFrame(y.frame(e,r),i);const o=this._extensions[n.extensionName];this._bufferedBytes+=r[d],this._state=1,o.compress(e,r.fin,(e,t)=>{if(this._socket.destroyed){return void b(this,new Error("The socket was closed while data was being compressed"),i)}this._bufferedBytes-=r[d],this._state=0,r.readOnly=!1,this.sendFrame(y.frame(t,r),i),this.dequeue()})}dequeue(){for(;0===this._state&&this._queue.length;){const e=this._queue.shift();this._bufferedBytes-=e[3][d],Reflect.apply(e[0],this,e.slice(1))}}enqueue(e){this._bufferedBytes+=e[3][d],this._queue.push(e)}sendFrame(e,t){2===e.length?(this._socket.cork(),this._socket.write(e[0]),this._socket.write(e[1],t),this._socket.uncork()):this._socket.write(e[0],t)}}function b(e,t,n){"function"==typeof n&&n(t);for(let n=0;n<e._queue.length;n++){const r=e._queue[n],i=r[r.length-1];"function"==typeof i&&i(t)}}function v(e,t,n){b(e,t,n),e.onerror(t)}return qa=y}function nl(){if(za)return Wa;za=1;const{tokenChars:e}=Za();function t(e,t,n){void 0===e[t]?e[t]=[n]:e[t].push(n)}return Wa={format:function(e){return Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>[t].concat(Object.keys(e).map(t=>{let n=e[t];return Array.isArray(n)||(n=[n]),n.map(e=>!0===e?t:`${t}=${e}`).join("; ")})).join("; ")).join(", ")}).join(", ")},parse:function(n){const r=Object.create(null);let i,o,s=Object.create(null),a=!1,l=!1,c=!1,u=-1,d=-1,h=-1,p=0;for(;p<n.length;p++)if(d=n.charCodeAt(p),void 0===i)if(-1===h&&1===e[d])-1===u&&(u=p);else if(0===p||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);const e=n.slice(u,h);44===d?(t(r,e,s),s=Object.create(null)):i=e,u=h=-1}}else-1===h&&-1!==u&&(h=p);else if(void 0===o)if(-1===h&&1===e[d])-1===u&&(u=p);else if(32===d||9===d)-1===h&&-1!==u&&(h=p);else if(59===d||44===d){if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p),t(s,n.slice(u,h),!0),44===d&&(t(r,i,s),s=Object.create(null),i=void 0),u=h=-1}else{if(61!==d||-1===u||-1!==h)throw new SyntaxError(`Unexpected character at index ${p}`);o=n.slice(u,p),u=h=-1}else if(l){if(1!==e[d])throw new SyntaxError(`Unexpected character at index ${p}`);-1===u?u=p:a||(a=!0),l=!1}else if(c)if(1===e[d])-1===u&&(u=p);else if(34===d&&-1!==u)c=!1,h=p;else{if(92!==d)throw new SyntaxError(`Unexpected character at index ${p}`);l=!0}else if(34===d&&61===n.charCodeAt(p-1))c=!0;else if(-1===h&&1===e[d])-1===u&&(u=p);else if(-1===u||32!==d&&9!==d){if(59!==d&&44!==d)throw new SyntaxError(`Unexpected character at index ${p}`);{if(-1===u)throw new SyntaxError(`Unexpected character at index ${p}`);-1===h&&(h=p);let e=n.slice(u,h);a&&(e=e.replace(/\\/g,""),a=!1),t(s,o,e),44===d&&(t(r,i,s),s=Object.create(null),i=void 0),o=void 0,u=h=-1}}else-1===h&&(h=p);if(-1===u||c||32===d||9===d)throw new SyntaxError("Unexpected end of input");-1===h&&(h=p);const m=n.slice(u,h);return void 0===i?t(r,m,s):(void 0===o?t(s,m,!0):t(s,o,a?m.replace(/\\/g,""):m),t(r,i,s)),r}},Wa}function rl(){if(Ja)return Ka;Ja=1;const e=t,n=d,r=h,i=c,o=p,{randomBytes:a,createHash:l}=s,{Duplex:u,Readable:f}=m,{URL:g}=y,b=Ba(),v=el(),S=tl(),{isBlob:T}=Za(),{BINARY_TYPES:_,EMPTY_BUFFER:E,GUID:w,kForOnEventAttribute:A,kListener:k,kStatusCode:C,kWebSocket:I,NOOP:O}=xa(),{EventTarget:{addEventListener:R,removeEventListener:M}}=function(){if(Ha)return Va;Ha=1;const{kForOnEventAttribute:e,kListener:t}=xa(),n=Symbol("kCode"),r=Symbol("kData"),i=Symbol("kError"),o=Symbol("kMessage"),s=Symbol("kReason"),a=Symbol("kTarget"),l=Symbol("kType"),c=Symbol("kWasClean");class u{constructor(e){this[a]=null,this[l]=e}get target(){return this[a]}get type(){return this[l]}}Object.defineProperty(u.prototype,"target",{enumerable:!0}),Object.defineProperty(u.prototype,"type",{enumerable:!0});class d extends u{constructor(e,t={}){super(e),this[n]=void 0===t.code?0:t.code,this[s]=void 0===t.reason?"":t.reason,this[c]=void 0!==t.wasClean&&t.wasClean}get code(){return this[n]}get reason(){return this[s]}get wasClean(){return this[c]}}Object.defineProperty(d.prototype,"code",{enumerable:!0}),Object.defineProperty(d.prototype,"reason",{enumerable:!0}),Object.defineProperty(d.prototype,"wasClean",{enumerable:!0});class h extends u{constructor(e,t={}){super(e),this[i]=void 0===t.error?null:t.error,this[o]=void 0===t.message?"":t.message}get error(){return this[i]}get message(){return this[o]}}Object.defineProperty(h.prototype,"error",{enumerable:!0}),Object.defineProperty(h.prototype,"message",{enumerable:!0});class p extends u{constructor(e,t={}){super(e),this[r]=void 0===t.data?null:t.data}get data(){return this[r]}}Object.defineProperty(p.prototype,"data",{enumerable:!0});const m={addEventListener(n,r,i={}){for(const o of this.listeners(n))if(!i[e]&&o[t]===r&&!o[e])return;let o;if("message"===n)o=function(e,t){const n=new p("message",{data:t?e:e.toString()});n[a]=this,f(r,this,n)};else if("close"===n)o=function(e,t){const n=new d("close",{code:e,reason:t.toString(),wasClean:this._closeFrameReceived&&this._closeFrameSent});n[a]=this,f(r,this,n)};else if("error"===n)o=function(e){const t=new h("error",{error:e,message:e.message});t[a]=this,f(r,this,t)};else{if("open"!==n)return;o=function(){const e=new u("open");e[a]=this,f(r,this,e)}}o[e]=!!i[e],o[t]=r,i.once?this.once(n,o):this.on(n,o)},removeEventListener(n,r){for(const i of this.listeners(n))if(i[t]===r&&!i[e]){this.removeListener(n,i);break}}};function f(e,t,n){"object"==typeof e&&e.handleEvent?e.handleEvent.call(e,n):e.call(t,n)}return Va={CloseEvent:d,ErrorEvent:h,Event:u,EventTarget:m,MessageEvent:p}}(),{format:P,parse:D}=nl(),{toBuffer:N}=La(),U=Symbol("kAborted"),x=[8,13],L=["CONNECTING","OPEN","CLOSING","CLOSED"],B=/^[!#$%&'*+\-.0-9A-Z^_`|a-z~]+$/;class F extends e{constructor(e,t,n){super(),this._binaryType=_[0],this._closeCode=1006,this._closeFrameReceived=!1,this._closeFrameSent=!1,this._closeMessage=E,this._closeTimer=null,this._errorEmitted=!1,this._extensions={},this._paused=!1,this._protocol="",this._readyState=F.CONNECTING,this._receiver=null,this._sender=null,this._socket=null,null!==e?(this._bufferedAmount=0,this._isServer=!1,this._redirects=0,void 0===t?t=[]:Array.isArray(t)||("object"==typeof t&&null!==t?(n=t,t=[]):t=[t]),G(this,e,t,n)):(this._autoPong=n.autoPong,this._isServer=!0)}get binaryType(){return this._binaryType}set binaryType(e){_.includes(e)&&(this._binaryType=e,this._receiver&&(this._receiver._binaryType=e))}get bufferedAmount(){return this._socket?this._socket._writableState.length+this._sender._bufferedBytes:this._bufferedAmount}get extensions(){return Object.keys(this._extensions).join()}get isPaused(){return this._paused}get onclose(){return null}get onerror(){return null}get onopen(){return null}get onmessage(){return null}get protocol(){return this._protocol}get readyState(){return this._readyState}get url(){return this._url}setSocket(e,t,n){const r=new v({allowSynchronousEvents:n.allowSynchronousEvents,binaryType:this.binaryType,extensions:this._extensions,isServer:this._isServer,maxPayload:n.maxPayload,skipUTF8Validation:n.skipUTF8Validation}),i=new S(e,this._extensions,n.generateMask);this._receiver=r,this._sender=i,this._socket=e,r[I]=this,i[I]=this,e[I]=this,r.on("conclude",W),r.on("drain",z),r.on("error",K),r.on("message",Y),r.on("ping",Q),r.on("pong",X),i.onerror=ee,e.setTimeout&&e.setTimeout(0),e.setNoDelay&&e.setNoDelay(),t.length>0&&e.unshift(t),e.on("close",ne),e.on("data",re),e.on("end",ie),e.on("error",oe),this._readyState=F.OPEN,this.emit("open")}emitClose(){if(!this._socket)return this._readyState=F.CLOSED,void this.emit("close",this._closeCode,this._closeMessage);this._extensions[b.extensionName]&&this._extensions[b.extensionName].cleanup(),this._receiver.removeAllListeners(),this._readyState=F.CLOSED,this.emit("close",this._closeCode,this._closeMessage)}close(e,t){if(this.readyState!==F.CLOSED){if(this.readyState===F.CONNECTING){const e="WebSocket was closed before the connection was established";return void V(this,this._req,e)}this.readyState!==F.CLOSING?(this._readyState=F.CLOSING,this._sender.close(e,t,!this._isServer,e=>{e||(this._closeFrameSent=!0,(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end())}),te(this)):this._closeFrameSent&&(this._closeFrameReceived||this._receiver._writableState.errorEmitted)&&this._socket.end()}}pause(){this.readyState!==F.CONNECTING&&this.readyState!==F.CLOSED&&(this._paused=!0,this._socket.pause())}ping(e,t,n){if(this.readyState===F.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===F.OPEN?(void 0===t&&(t=!this._isServer),this._sender.ping(e||E,t,n)):H(this,e,n)}pong(e,t,n){if(this.readyState===F.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");"function"==typeof e?(n=e,e=t=void 0):"function"==typeof t&&(n=t,t=void 0),"number"==typeof e&&(e=e.toString()),this.readyState===F.OPEN?(void 0===t&&(t=!this._isServer),this._sender.pong(e||E,t,n)):H(this,e,n)}resume(){this.readyState!==F.CONNECTING&&this.readyState!==F.CLOSED&&(this._paused=!1,this._receiver._writableState.needDrain||this._socket.resume())}send(e,t,n){if(this.readyState===F.CONNECTING)throw new Error("WebSocket is not open: readyState 0 (CONNECTING)");if("function"==typeof t&&(n=t,t={}),"number"==typeof e&&(e=e.toString()),this.readyState!==F.OPEN)return void H(this,e,n);const r={binary:"string"!=typeof e,mask:!this._isServer,compress:!0,fin:!0,...t};this._extensions[b.extensionName]||(r.compress=!1),this._sender.send(e||E,r,n)}terminate(){if(this.readyState!==F.CLOSED){if(this.readyState===F.CONNECTING){const e="WebSocket was closed before the connection was established";return void V(this,this._req,e)}this._socket&&(this._readyState=F.CLOSING,this._socket.destroy())}}}function G(e,t,i,o){const s={allowSynchronousEvents:!0,autoPong:!0,protocolVersion:x[1],maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!0,followRedirects:!1,maxRedirects:10,...o,socketPath:void 0,hostname:void 0,protocol:void 0,timeout:void 0,method:"GET",host:void 0,path:void 0,port:void 0};if(e._autoPong=s.autoPong,!x.includes(s.protocolVersion))throw new RangeError(`Unsupported protocol version: ${s.protocolVersion} (supported versions: ${x.join(", ")})`);let c;if(t instanceof g)c=t;else try{c=new g(t)}catch(e){throw new SyntaxError(`Invalid URL: ${t}`)}"http:"===c.protocol?c.protocol="ws:":"https:"===c.protocol&&(c.protocol="wss:"),e._url=c.href;const u="wss:"===c.protocol,d="ws+unix:"===c.protocol;let h;if("ws:"===c.protocol||u||d?d&&!c.pathname?h="The URL's pathname is empty":c.hash&&(h="The URL contains a fragment identifier"):h='The URL\'s protocol must be one of "ws:", "wss:", "http:", "https:", or "ws+unix:"',h){const t=new SyntaxError(h);if(0===e._redirects)throw t;return void $(e,t)}const p=u?443:80,m=a(16).toString("base64"),f=u?n.request:r.request,y=new Set;let v,S;if(s.createConnection=s.createConnection||(u?j:q),s.defaultPort=s.defaultPort||p,s.port=c.port||p,s.host=c.hostname.startsWith("[")?c.hostname.slice(1,-1):c.hostname,s.headers={...s.headers,"Sec-WebSocket-Version":s.protocolVersion,"Sec-WebSocket-Key":m,Connection:"Upgrade",Upgrade:"websocket"},s.path=c.pathname+c.search,s.timeout=s.handshakeTimeout,s.perMessageDeflate&&(v=new b(!0!==s.perMessageDeflate?s.perMessageDeflate:{},!1,s.maxPayload),s.headers["Sec-WebSocket-Extensions"]=P({[b.extensionName]:v.offer()})),i.length){for(const e of i){if("string"!=typeof e||!B.test(e)||y.has(e))throw new SyntaxError("An invalid or duplicated subprotocol was specified");y.add(e)}s.headers["Sec-WebSocket-Protocol"]=i.join(",")}if(s.origin&&(s.protocolVersion<13?s.headers["Sec-WebSocket-Origin"]=s.origin:s.headers.Origin=s.origin),(c.username||c.password)&&(s.auth=`${c.username}:${c.password}`),d){const e=s.path.split(":");s.socketPath=e[0],s.path=e[1]}if(s.followRedirects){if(0===e._redirects){e._originalIpc=d,e._originalSecure=u,e._originalHostOrSocketPath=d?s.socketPath:c.host;const t=o&&o.headers;if(o={...o,headers:{}},t)for(const[e,n]of Object.entries(t))o.headers[e.toLowerCase()]=n}else if(0===e.listenerCount("redirect")){const t=d?!!e._originalIpc&&s.socketPath===e._originalHostOrSocketPath:!e._originalIpc&&c.host===e._originalHostOrSocketPath;(!t||e._originalSecure&&!u)&&(delete s.headers.authorization,delete s.headers.cookie,t||delete s.headers.host,s.auth=void 0)}s.auth&&!o.headers.authorization&&(o.headers.authorization="Basic "+Buffer.from(s.auth).toString("base64")),S=e._req=f(s),e._redirects&&e.emit("redirect",e.url,S)}else S=e._req=f(s);s.timeout&&S.on("timeout",()=>{V(e,S,"Opening handshake has timed out")}),S.on("error",t=>{null===S||S[U]||(S=e._req=null,$(e,t))}),S.on("response",n=>{const r=n.headers.location,a=n.statusCode;if(r&&s.followRedirects&&a>=300&&a<400){if(++e._redirects>s.maxRedirects)return void V(e,S,"Maximum redirects exceeded");let n;S.abort();try{n=new g(r,t)}catch(t){const n=new SyntaxError(`Invalid URL: ${r}`);return void $(e,n)}G(e,n,i,o)}else e.emit("unexpected-response",S,n)||V(e,S,`Unexpected server response: ${n.statusCode}`)}),S.on("upgrade",(t,n,r)=>{if(e.emit("upgrade",t),e.readyState!==F.CONNECTING)return;S=e._req=null;const i=t.headers.upgrade;if(void 0===i||"websocket"!==i.toLowerCase())return void V(e,n,"Invalid Upgrade header");const o=l("sha1").update(m+w).digest("base64");if(t.headers["sec-websocket-accept"]!==o)return void V(e,n,"Invalid Sec-WebSocket-Accept header");const a=t.headers["sec-websocket-protocol"];let c;if(void 0!==a?y.size?y.has(a)||(c="Server sent an invalid subprotocol"):c="Server sent a subprotocol but none was requested":y.size&&(c="Server sent no subprotocol"),c)return void V(e,n,c);a&&(e._protocol=a);const u=t.headers["sec-websocket-extensions"];if(void 0!==u){if(!v){return void V(e,n,"Server sent a Sec-WebSocket-Extensions header but no extension was requested")}let t;try{t=D(u)}catch(t){return void V(e,n,"Invalid Sec-WebSocket-Extensions header")}const r=Object.keys(t);if(1!==r.length||r[0]!==b.extensionName){return void V(e,n,"Server indicated an extension that was not requested")}try{v.accept(t[b.extensionName])}catch(t){return void V(e,n,"Invalid Sec-WebSocket-Extensions header")}e._extensions[b.extensionName]=v}e.setSocket(n,r,{allowSynchronousEvents:s.allowSynchronousEvents,generateMask:s.generateMask,maxPayload:s.maxPayload,skipUTF8Validation:s.skipUTF8Validation})}),s.finishRequest?s.finishRequest(S,e):S.end()}function $(e,t){e._readyState=F.CLOSING,e._errorEmitted=!0,e.emit("error",t),e.emitClose()}function q(e){return e.path=e.socketPath,i.connect(e)}function j(e){return e.path=void 0,e.servername||""===e.servername||(e.servername=i.isIP(e.host)?"":e.host),o.connect(e)}function V(e,t,n){e._readyState=F.CLOSING;const r=new Error(n);Error.captureStackTrace(r,V),t.setHeader?(t[U]=!0,t.abort(),t.socket&&!t.socket.destroyed&&t.socket.destroy(),process.nextTick($,e,r)):(t.destroy(r),t.once("error",e.emit.bind(e,"error")),t.once("close",e.emitClose.bind(e)))}function H(e,t,n){if(t){const n=T(t)?t.size:N(t).length;e._socket?e._sender._bufferedBytes+=n:e._bufferedAmount+=n}if(n){const t=new Error(`WebSocket is not open: readyState ${e.readyState} (${L[e.readyState]})`);process.nextTick(n,t)}}function W(e,t){const n=this[I];n._closeFrameReceived=!0,n._closeMessage=t,n._closeCode=e,void 0!==n._socket[I]&&(n._socket.removeListener("data",re),process.nextTick(Z,n._socket),1005===e?n.close():n.close(e,t))}function z(){const e=this[I];e.isPaused||e._socket.resume()}function K(e){const t=this[I];void 0!==t._socket[I]&&(t._socket.removeListener("data",re),process.nextTick(Z,t._socket),t.close(e[C])),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e))}function J(){this[I].emitClose()}function Y(e,t){this[I].emit("message",e,t)}function Q(e){const t=this[I];t._autoPong&&t.pong(e,!this._isServer,O),t.emit("ping",e)}function X(e){this[I].emit("pong",e)}function Z(e){e.resume()}function ee(e){const t=this[I];t.readyState!==F.CLOSED&&(t.readyState===F.OPEN&&(t._readyState=F.CLOSING,te(t)),this._socket.end(),t._errorEmitted||(t._errorEmitted=!0,t.emit("error",e)))}function te(e){e._closeTimer=setTimeout(e._socket.destroy.bind(e._socket),3e4)}function ne(){const e=this[I];let t;this.removeListener("close",ne),this.removeListener("data",re),this.removeListener("end",ie),e._readyState=F.CLOSING,this._readableState.endEmitted||e._closeFrameReceived||e._receiver._writableState.errorEmitted||null===(t=e._socket.read())||e._receiver.write(t),e._receiver.end(),this[I]=void 0,clearTimeout(e._closeTimer),e._receiver._writableState.finished||e._receiver._writableState.errorEmitted?e.emitClose():(e._receiver.on("error",J),e._receiver.on("finish",J))}function re(e){this[I]._receiver.write(e)||this.pause()}function ie(){const e=this[I];e._readyState=F.CLOSING,e._receiver.end(),this.end()}function oe(){const e=this[I];this.removeListener("error",oe),this.on("error",O),e&&(e._readyState=F.CLOSING,this.destroy())}return Object.defineProperty(F,"CONNECTING",{enumerable:!0,value:L.indexOf("CONNECTING")}),Object.defineProperty(F.prototype,"CONNECTING",{enumerable:!0,value:L.indexOf("CONNECTING")}),Object.defineProperty(F,"OPEN",{enumerable:!0,value:L.indexOf("OPEN")}),Object.defineProperty(F.prototype,"OPEN",{enumerable:!0,value:L.indexOf("OPEN")}),Object.defineProperty(F,"CLOSING",{enumerable:!0,value:L.indexOf("CLOSING")}),Object.defineProperty(F.prototype,"CLOSING",{enumerable:!0,value:L.indexOf("CLOSING")}),Object.defineProperty(F,"CLOSED",{enumerable:!0,value:L.indexOf("CLOSED")}),Object.defineProperty(F.prototype,"CLOSED",{enumerable:!0,value:L.indexOf("CLOSED")}),["binaryType","bufferedAmount","extensions","isPaused","protocol","readyState","url"].forEach(e=>{Object.defineProperty(F.prototype,e,{enumerable:!0})}),["open","error","close","message"].forEach(e=>{Object.defineProperty(F.prototype,`on${e}`,{enumerable:!0,get(){for(const t of this.listeners(e))if(t[A])return t[k];return null},set(t){for(const t of this.listeners(e))if(t[A]){this.removeListener(e,t);break}"function"==typeof t&&this.addEventListener(e,t,{[A]:!0})}})}),F.prototype.addEventListener=R,F.prototype.removeEventListener=M,Ka=F}!function(){if(Qa)return Ya;Qa=1,rl();const{Duplex:e}=m;function t(e){e.emit("close")}function n(){!this.destroyed&&this._writableState.finished&&this.destroy()}function r(e){this.removeListener("error",r),this.destroy(),0===this.listenerCount("error")&&this.emit("error",e)}Ya=function(i,o){let s=!0;const a=new e({...o,autoDestroy:!1,emitClose:!1,objectMode:!1,writableObjectMode:!1});return i.on("message",function(e,t){const n=!t&&a._readableState.objectMode?e.toString():e;a.push(n)||i.pause()}),i.once("error",function(e){a.destroyed||(s=!1,a.destroy(e))}),i.once("close",function(){a.destroyed||a.push(null)}),a._destroy=function(e,n){if(i.readyState===i.CLOSED)return n(e),void process.nextTick(t,a);let r=!1;i.once("error",function(e){r=!0,n(e)}),i.once("close",function(){r||n(e),process.nextTick(t,a)}),s&&i.terminate()},a._final=function(e){i.readyState!==i.CONNECTING?null!==i._socket&&(i._socket._writableState.finished?(e(),a._readableState.endEmitted&&a.destroy()):(i._socket.once("finish",function(){e()}),i.close())):i.once("open",function(){a._final(e)})},a._read=function(){i.isPaused&&i.resume()},a._write=function(e,t,n){i.readyState!==i.CONNECTING?i.send(e,n):i.once("open",function(){a._write(e,t,n)})},a.on("end",n),a.on("error",r),a}}(),el(),tl();var il,ol,sl,al,ll=Ae(rl());function cl(){if(ol)return il;ol=1;const{tokenChars:e}=Za();return il={parse:function(t){const n=new Set;let r=-1,i=-1,o=0;for(;o<t.length;o++){const s=t.charCodeAt(o);if(-1===i&&1===e[s])-1===r&&(r=o);else if(0===o||32!==s&&9!==s){if(44!==s)throw new SyntaxError(`Unexpected character at index ${o}`);{if(-1===r)throw new SyntaxError(`Unexpected character at index ${o}`);-1===i&&(i=o);const e=t.slice(r,i);if(n.has(e))throw new SyntaxError(`The "${e}" subprotocol is duplicated`);n.add(e),r=i=-1}}else-1===i&&-1!==r&&(i=o)}if(-1===r||-1!==i)throw new SyntaxError("Unexpected end of input");const s=t.slice(r,o);if(n.has(s))throw new SyntaxError(`The "${s}" subprotocol is duplicated`);return n.add(s),n}}}function ul(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}!function(){if(al)return sl;al=1;const e=t,n=h,{Duplex:r}=m,{createHash:i}=s,o=nl(),a=Ba(),l=cl(),c=rl(),{GUID:u,kWebSocket:d}=xa(),p=/^[+/0-9A-Za-z]{22}==$/;function f(e){e._state=2,e.emit("close")}function g(){this.destroy()}function y(e,t,r,i){r=r||n.STATUS_CODES[t],i={Connection:"close","Content-Type":"text/html","Content-Length":Buffer.byteLength(r),...i},e.once("finish",e.destroy),e.end(`HTTP/1.1 ${t} ${n.STATUS_CODES[t]}\r\n`+Object.keys(i).map(e=>`${e}: ${i[e]}`).join("\r\n")+"\r\n\r\n"+r)}function b(e,t,n,r,i,o){if(e.listenerCount("wsClientError")){const r=new Error(i);Error.captureStackTrace(r,b),e.emit("wsClientError",r,n,t)}else y(n,r,i,o)}sl=class extends e{constructor(e,t){if(super(),null==(e={allowSynchronousEvents:!0,autoPong:!0,maxPayload:104857600,skipUTF8Validation:!1,perMessageDeflate:!1,handleProtocols:null,clientTracking:!0,verifyClient:null,noServer:!1,backlog:null,server:null,host:null,path:null,port:null,WebSocket:c,...e}).port&&!e.server&&!e.noServer||null!=e.port&&(e.server||e.noServer)||e.server&&e.noServer)throw new TypeError('One and only one of the "port", "server", or "noServer" options must be specified');if(null!=e.port?(this._server=n.createServer((e,t)=>{const r=n.STATUS_CODES[426];t.writeHead(426,{"Content-Length":r.length,"Content-Type":"text/plain"}),t.end(r)}),this._server.listen(e.port,e.host,e.backlog,t)):e.server&&(this._server=e.server),this._server){const e=this.emit.bind(this,"connection");this._removeListeners=function(e,t){for(const n of Object.keys(t))e.on(n,t[n]);return function(){for(const n of Object.keys(t))e.removeListener(n,t[n])}}(this._server,{listening:this.emit.bind(this,"listening"),error:this.emit.bind(this,"error"),upgrade:(t,n,r)=>{this.handleUpgrade(t,n,r,e)}})}!0===e.perMessageDeflate&&(e.perMessageDeflate={}),e.clientTracking&&(this.clients=new Set,this._shouldEmitClose=!1),this.options=e,this._state=0}address(){if(this.options.noServer)throw new Error('The server is operating in "noServer" mode');return this._server?this._server.address():null}close(e){if(2===this._state)return e&&this.once("close",()=>{e(new Error("The server is not running"))}),void process.nextTick(f,this);if(e&&this.once("close",e),1!==this._state)if(this._state=1,this.options.noServer||this.options.server)this._server&&(this._removeListeners(),this._removeListeners=this._server=null),this.clients&&this.clients.size?this._shouldEmitClose=!0:process.nextTick(f,this);else{const e=this._server;this._removeListeners(),this._removeListeners=this._server=null,e.close(()=>{f(this)})}}shouldHandle(e){if(this.options.path){const t=e.url.indexOf("?");if((-1!==t?e.url.slice(0,t):e.url)!==this.options.path)return!1}return!0}handleUpgrade(e,t,n,r){t.on("error",g);const i=e.headers["sec-websocket-key"],s=e.headers.upgrade,c=+e.headers["sec-websocket-version"];if("GET"!==e.method){return void b(this,e,t,405,"Invalid HTTP method")}if(void 0===s||"websocket"!==s.toLowerCase()){return void b(this,e,t,400,"Invalid Upgrade header")}if(void 0===i||!p.test(i)){return void b(this,e,t,400,"Missing or invalid Sec-WebSocket-Key header")}if(13!==c&&8!==c){return void b(this,e,t,400,"Missing or invalid Sec-WebSocket-Version header",{"Sec-WebSocket-Version":"13, 8"})}if(!this.shouldHandle(e))return void y(t,400);const u=e.headers["sec-websocket-protocol"];let d=new Set;if(void 0!==u)try{d=l.parse(u)}catch(n){return void b(this,e,t,400,"Invalid Sec-WebSocket-Protocol header")}const h=e.headers["sec-websocket-extensions"],m={};if(this.options.perMessageDeflate&&void 0!==h){const n=new a(this.options.perMessageDeflate,!0,this.options.maxPayload);try{const e=o.parse(h);e[a.extensionName]&&(n.accept(e[a.extensionName]),m[a.extensionName]=n)}catch(n){return void b(this,e,t,400,"Invalid or unacceptable Sec-WebSocket-Extensions header")}}if(this.options.verifyClient){const o={origin:e.headers[""+(8===c?"sec-websocket-origin":"origin")],secure:!(!e.socket.authorized&&!e.socket.encrypted),req:e};if(2===this.options.verifyClient.length)return void this.options.verifyClient(o,(o,s,a,l)=>{if(!o)return y(t,s||401,a,l);this.completeUpgrade(m,i,d,e,t,n,r)});if(!this.options.verifyClient(o))return y(t,401)}this.completeUpgrade(m,i,d,e,t,n,r)}completeUpgrade(e,t,n,r,s,l,c){if(!s.readable||!s.writable)return s.destroy();if(s[d])throw new Error("server.handleUpgrade() was called more than once with the same socket, possibly due to a misconfiguration");if(this._state>0)return y(s,503);const h=["HTTP/1.1 101 Switching Protocols","Upgrade: websocket","Connection: Upgrade",`Sec-WebSocket-Accept: ${i("sha1").update(t+u).digest("base64")}`],p=new this.options.WebSocket(null,void 0,this.options);if(n.size){const e=this.options.handleProtocols?this.options.handleProtocols(n,r):n.values().next().value;e&&(h.push(`Sec-WebSocket-Protocol: ${e}`),p._protocol=e)}if(e[a.extensionName]){const t=e[a.extensionName].params,n=o.format({[a.extensionName]:[t]});h.push(`Sec-WebSocket-Extensions: ${n}`),p._extensions=e}this.emit("headers",h,r),s.write(h.concat("\r\n").join("\r\n")),s.removeListener("error",g),p.setSocket(s,l,{allowSynchronousEvents:this.options.allowSynchronousEvents,maxPayload:this.options.maxPayload,skipUTF8Validation:this.options.skipUTF8Validation}),this.clients&&(this.clients.add(p),p.on("close",()=>{this.clients.delete(p),this._shouldEmitClose&&!this.clients.size&&process.nextTick(f,this)})),c(p,r)}}}();var dl,hl,pl,ml,fl,gl,yl,bl,vl,Sl,Tl,_l,El,wl,Al,kl,Cl,Il,Ol,Rl,Ml,Pl,Dl,Nl={};function Ul(){return dl||(dl=1,Nl.require=function(e){const t=[];for(const[n,r]of e)try{const e=r(ul(n));return e.name=n,e}catch(e){t.push(e)}throw new Error(t.join("\n"))}),Nl}function xl(){if(pl)return hl;pl=1;const{Transform:e}=m,t=Ul(),n=4002,r=4012,i=4014;let o={};const s=e=>e.charCodeAt(0),a=Buffer.from([..."OpusHead"].map(s)),l=Buffer.from([..."OpusTags"].map(s));class c extends e{constructor(e={}){if(!function(e=!1){return o.Encoder&&!e||(o=t.require([["@discordjs/opus",e=>({Encoder:e.OpusEncoder})],["node-opus",e=>({Encoder:e.OpusEncoder})],["opusscript",e=>({Encoder:e})]])),o}().Encoder)throw Error("Could not find an Opus module! Please install @discordjs/opus, node-opus, or opusscript.");super(Object.assign({readableObjectMode:!0},e)),"opusscript"===o.name&&(e.application=o.Encoder.Application[e.application]),this.encoder=new o.Encoder(e.rate,e.channels,e.application),this._options=e,this._required=this._options.frameSize*this._options.channels*2}_encode(e){return this.encoder.encode(e,this._options.frameSize)}_decode(e){return this.encoder.decode(e,"opusscript"===o.name?null:this._options.frameSize)}static get type(){return o.name}setBitrate(e){(this.encoder.applyEncoderCTL||this.encoder.encoderCTL).apply(this.encoder,[n,Math.min(128e3,Math.max(16e3,e))])}setFEC(e){(this.encoder.applyEncoderCTL||this.encoder.encoderCTL).apply(this.encoder,[r,e?1:0])}setPLP(e){(this.encoder.applyEncoderCTL||this.encoder.encoderCTL).apply(this.encoder,[i,Math.min(100,Math.max(0,100*e))])}_final(e){this._cleanup(),e()}_destroy(e,t){return this._cleanup(),t?t(e):void 0}_cleanup(){"opusscript"===o.name&&this.encoder&&this.encoder.delete(),this.encoder=null}}return hl={Decoder:class extends c{_transform(e,t,n){const r=e.slice(0,8);if(e.length>=8&&r.equals(a))return this.emit("format",{channels:this._options.channels,sampleRate:this._options.rate,bitDepth:16,float:!1,signed:!0,version:e.readUInt8(8),preSkip:e.readUInt16LE(10),gain:e.readUInt16LE(16)}),n();if(e.length>=8&&r.equals(l))return this.emit("tags",e),n();try{this.push(this._decode(e))}catch(e){return n(e)}return n()}},Encoder:class extends c{constructor(e){super(e),this._buffer=Buffer.alloc(0)}_transform(e,t,n){this._buffer=Buffer.concat([this._buffer,e]);let r=0;for(;this._buffer.length>=this._required*(r+1);){const e=this._encode(this._buffer.slice(r*this._required,(r+1)*this._required));this.push(e),r++}return r>0&&(this._buffer=this._buffer.slice(r*this._required)),n()}_destroy(e,t){super._destroy(e,t),this._buffer=null}}}}function Ll(){if(fl)return ml;fl=1;const{Transform:e}=m,t=e=>e.charCodeAt(0),n=Buffer.from([..."OggS"].map(t)),r=Buffer.from([..."OpusHead"].map(t)),i=Buffer.from([..."OpusTags"].map(t));return ml=class extends e{constructor(e={}){super(Object.assign({readableObjectMode:!0},e)),this._remainder=null,this._head=null,this._bitstream=null}_transform(e,t,n){this._remainder&&(e=Buffer.concat([this._remainder,e]),this._remainder=null);try{for(;e;){const t=this._readPage(e);if(!t)break;e=t}}catch(e){return void n(e)}this._remainder=e,n()}_readPage(e){if(e.length<26)return!1;if(!e.slice(0,4).equals(n))throw Error(`capture_pattern is not ${n}`);if(0!==e.readUInt8(4))throw Error("stream_structure_version is not 0");if(e.length<27)return!1;const t=e.readUInt8(26);if(e.length<27+t)return!1;const o=e.slice(27,27+t),s=e.readUInt32BE(14);let a=[],l=0;for(let e=0;e<t;){let t=0,n=255;for(;255===n;){if(e>=o.length)return!1;n=o.readUInt8(e),e++,t+=n}a.push(t),l+=t}if(e.length<27+t+l)return!1;let c=27+t;for(const t of a){const n=e.slice(c,c+t),o=n.slice(0,8);this._head?o.equals(i)?this.emit("tags",n):this._bitstream===s&&this.push(n):o.equals(r)?(this.emit("head",n),this._head=n,this._bitstream=s):this.emit("unknownSegment",n),c+=t}return e.slice(c)}_destroy(e,t){return this._cleanup(),t?t(e):void 0}_final(e){this._cleanup(),e()}_cleanup(){this._remainder=null,this._head=null,this._bitstream=null}},ml}function Bl(){if(yl)return gl;yl=1;const{Transform:e}=m;class t extends e{constructor(e={}){super(Object.assign({readableObjectMode:!0},e)),this._remainder=null,this._length=0,this._count=0,this._skipUntil=null,this._track=null,this._incompleteTrack={},this._ebmlFound=!1}_transform(e,t,r){this._length+=e.length,this._remainder&&(e=Buffer.concat([this._remainder,e]),this._remainder=null);let i,o=0;if(this._skipUntil&&this._length>this._skipUntil)o=this._skipUntil-this._count,this._skipUntil=null;else if(this._skipUntil)return this._count+=e.length,void r();for(;i!==n;){try{i=this._readTag(e,o)}catch(e){return void r(e)}if(i===n)break;if(i._skipUntil){this._skipUntil=i._skipUntil;break}if(!i.offset)break;o=i.offset}this._count+=o,this._remainder=e.slice(o),r()}_readEBMLId(e,t){const r=i(e,t);return r===n?n:{id:e.slice(t,t+r),offset:t+r}}_readTagDataSize(e,t){const r=i(e,t);if(r===n)return n;return{offset:t+r,dataLength:function(e,t,r){const o=i(e,t);if(r>e.length||o===n)return n;let s=(1<<8-o)-1,a=e[t]&s;for(let n=t+1;n<r;n++)a=(a<<8)+e[n];return a}(e,t,t+r),sizeLength:r}}_readTag(e,t){const i=this._readEBMLId(e,t);if(i===n)return n;const o=i.id.toString("hex");if(!this._ebmlFound){if("1a45dfa3"!==o)throw Error("Did not find the EBML tag at the start of the stream");this._ebmlFound=!0}t=i.offset;const s=this._readTagDataSize(e,t);if(s===n)return n;const{dataLength:a}=s;if(t=s.offset,void 0===r[o])return e.length>t+a?{offset:t+a}:{offset:t,_skipUntil:this._count+t+a};if(r[o])return{offset:t};if(t+a>e.length)return n;const l=e.slice(t,t+a);if(this._track||("ae"===o&&(this._incompleteTrack={}),"d7"===o&&(this._incompleteTrack.number=l[0]),"83"===o&&(this._incompleteTrack.type=l[0]),2===this._incompleteTrack.type&&void 0!==this._incompleteTrack.number&&(this._track=this._incompleteTrack)),"63a2"===o)this._checkHead(l),this.emit("head",l);else if("a3"===o){if(!this._track)throw Error("No audio track in this webm!");(15&l[0])===this._track.number&&this.push(l.slice(4))}return{offset:t+a}}_destroy(e,t){return this._cleanup(),t?t(e):void 0}_final(e){this._cleanup(),e()}_cleanup(){this._remainder=null,this._incompleteTrack={}}}const n=t.TOO_SHORT=Symbol("TOO_SHORT"),r=t.TAGS={"1a45dfa3":!0,18538067:!0,"1f43b675":!0,"1654ae6b":!0,ae:!0,d7:!1,83:!1,a3:!1,"63a2":!1};function i(e,t){if(t<0||t>e.length-1)return n;let r=0;for(;r<8&&!(1<<7-r&e[t]);r++);return r++,t+r>e.length?n:r}return gl=t}function Fl(){if(vl)return bl;vl=1;const e=Bl(),t=Buffer.from([..."OpusHead"].map(e=>e.charCodeAt(0)));return bl=class extends e{_checkHead(e){if(!e.slice(0,8).equals(t))throw Error("Audio codec is not Opus!")}}}function Gl(){if(El)return _l;El=1;const e=Bl(),t=Buffer.from([..."vorbis"].map(e=>e.charCodeAt(0)));return _l=class extends e{_checkHead(e){if(2!==e.readUInt8(0)||!e.slice(4,10).equals(t))throw Error("Audio codec is not Vorbis!");this.push(e.slice(3,3+e.readUInt8(1))),this.push(e.slice(3+e.readUInt8(1),3+e.readUInt8(1)+e.readUInt8(2))),this.push(e.slice(3+e.readUInt8(1)+e.readUInt8(2)))}}}function $l(){if(Cl)return kl;Cl=1;const e=T,{Duplex:t}=m;let n={command:null,output:null};const r=/version (.+) Copyright/im;Object.defineProperty(n,"version",{get:()=>r.exec(n.output)[1],enumerable:!0});class i extends t{constructor(e={}){super(),this.process=i.create({shell:!1,...e});const n={readable:this._reader,data:this._reader,end:this._reader,unpipe:this._reader,finish:this._writer,drain:this._writer};this._readableState=this._reader._readableState,this._writableState=this._writer._writableState,this._copy(["write","end"],this._writer),this._copy(["read","setEncoding","pipe","unpipe"],this._reader);for(const e of["on","once","removeListener","removeListeners","listeners"])this[e]=(r,i)=>n[r]?n[r][e](r,i):t.prototype[e].call(this,r,i);const r=e=>this.emit("error",e);this._reader.on("error",r),this._writer.on("error",r)}get _reader(){return this.process.stdout}get _writer(){return this.process.stdin}_copy(e,t){for(const n of e)this[n]=t[n].bind(t)}_destroy(e,t){return this._cleanup(),t?t(e):void 0}_final(e){this._cleanup(),e()}_cleanup(){this.process&&(this.once("error",()=>{}),this.process.kill("SIGKILL"),this.process=null)}static getInfo(t=!1){if(n.command&&!t)return n;const r=[()=>{const e=_;return e.path||e},"ffmpeg","avconv","./ffmpeg","./avconv"];for(let t of r)try{"function"==typeof t&&(t=t());const r=e.spawnSync(t,["-h"],{windowsHide:!0});if(r.error)throw r.error;return Object.assign(n,{command:t,output:Buffer.concat(r.output.filter(Boolean)).toString()}),n}catch(e){}throw new Error("FFmpeg/avconv not found!")}static create({args:t=[],shell:n=!1}={}){return t.includes("-i")||t.unshift("-i","-"),e.spawn(i.getInfo().command,t.concat(["pipe:1"]),{windowsHide:!0,shell:n})}}return kl=i}function ql(){if(Ol)return Il;Ol=1;const{Transform:e}=m;return Il=class extends e{constructor(e={}){switch(super(e),e.type){case"s16le":this._readInt=(e,t)=>e.readInt16LE(t),this._writeInt=(e,t,n)=>e.writeInt16LE(t,n),this._bits=16;break;case"s16be":this._readInt=(e,t)=>e.readInt16BE(t),this._writeInt=(e,t,n)=>e.writeInt16BE(t,n),this._bits=16;break;case"s32le":this._readInt=(e,t)=>e.readInt32LE(t),this._writeInt=(e,t,n)=>e.writeInt32LE(t,n),this._bits=32;break;case"s32be":this._readInt=(e,t)=>e.readInt32BE(t),this._writeInt=(e,t,n)=>e.writeInt32BE(t,n),this._bits=32;break;default:throw new Error("VolumeTransformer type should be one of s16le, s16be, s32le, s32be")}this._bytes=this._bits/8,this._extremum=Math.pow(2,this._bits-1),this.volume=void 0===e.volume?1:e.volume,this._chunk=Buffer.alloc(0)}_readInt(e,t){return t}_writeInt(e,t,n){return n}_transform(e,t,n){if(1===this.volume)return this.push(e),n();const{_bytes:r,_extremum:i}=this;if((e=this._chunk=Buffer.concat([this._chunk,e])).length<r)return n();const o=Math.floor(e.length/r)*r;for(let t=0;t<o;t+=r){const n=Math.min(i-1,Math.max(-i,Math.floor(this.volume*this._readInt(e,t))));this._writeInt(e,n,t)}return this._chunk=e.slice(o),this.push(e.slice(0,o)),n()}_destroy(e,t){super._destroy(e,t),this._chunk=null}setVolume(e){this.volume=e}setVolumeDecibels(e){this.setVolume(Math.pow(10,e/20))}setVolumeLogarithmic(e){this.setVolume(Math.pow(e,1.660964))}get volumeDecibels(){return 20*Math.log10(this.volume)}get volumeLogarithmic(){return Math.pow(this.volume,1/1.660964)}}}var jl=Ae(Dl?Pl:(Dl=1,Pl={opus:Tl?Sl:(Tl=1,Sl={...xl(),OggDemuxer:Ll(),WebmDemuxer:Fl()}),vorbis:Al?wl:(Al=1,wl={WebmDemuxer:Gl()}),...Ml?Rl:(Ml=1,Rl={FFmpeg:$l(),VolumeTransformer:ql()})}));const Vl=e(import.meta.url);var Hl=Object.defineProperty,Wl=(e,t)=>Hl(e,"name",{value:t,configurable:!0}),zl=(e=>void 0!==Vl?Vl:"undefined"!=typeof Proxy?new Proxy(e,{get:(e,t)=>(void 0!==Vl?Vl:e)[t]}):e)(function(e){if(void 0!==Vl)return Vl.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});function Kl(e){return{op:Ta.VoiceStateUpdate,d:{guild_id:e.guildId,channel_id:e.channelId,self_deaf:e.selfDeaf,self_mute:e.selfMute}}}Wl(Kl,"createJoinVoiceChannelPayload");var Jl=new Map;function Yl(e){const t=Jl.get(e);if(t)return t;const n=new Map;return Jl.set(e,n),n}function Ql(e="default"){return Jl.get(e)}function Xl(e,t="default"){return Ql(t)?.get(e)}function Zl(e){return Ql(e.joinConfig.group)?.delete(e.joinConfig.guildId)}function ec(e){return Yl(e.joinConfig.group).set(e.joinConfig.guildId,e)}Jl.set("default",new Map),Wl(Yl,"getOrCreateGroup"),Wl(function(){return Jl},"getGroups"),Wl(Ql,"getVoiceConnections"),Wl(Xl,"getVoiceConnection"),Wl(Zl,"untrackVoiceConnection"),Wl(ec,"trackVoiceConnection");var tc,nc=-1,rc=[];function ic(){if(-1===nc)return;nc+=20;const e=rc.filter(e=>e.checkPlayable());for(const t of e)t._stepDispatch();oc(e)}function oc(e){const t=e.shift();t?(t._stepPrepare(),setImmediate(()=>oc(e))):-1!==nc&&(tc=setTimeout(()=>ic(),nc-Date.now()))}function sc(e){return rc.includes(e)}function ac(e){return sc(e)||(rc.push(e),1===rc.length&&(nc=Date.now(),setImmediate(()=>ic()))),e}function lc(e){const t=rc.indexOf(e);-1!==t&&(rc.splice(t,1),0===rc.length&&(nc=-1,void 0!==tc&&clearTimeout(tc)))}Wl(ic,"audioCycleStep"),Wl(oc,"prepareNextAudioFrame"),Wl(sc,"hasAudioPlayer"),Wl(ac,"addAudioPlayer"),Wl(lc,"deleteAudioPlayer");var cc={"sodium-native":Wl(e=>({crypto_aead_xchacha20poly1305_ietf_decrypt:Wl((t,n,r,i)=>{const s=o.alloc(t.length-e.crypto_aead_xchacha20poly1305_ietf_ABYTES);return e.crypto_aead_xchacha20poly1305_ietf_decrypt(s,null,t,n,r,i),s},"crypto_aead_xchacha20poly1305_ietf_decrypt"),crypto_aead_xchacha20poly1305_ietf_encrypt:Wl((t,n,r,i)=>{const s=o.alloc(t.length+e.crypto_aead_xchacha20poly1305_ietf_ABYTES);return e.crypto_aead_xchacha20poly1305_ietf_encrypt(s,t,n,null,r,i),s},"crypto_aead_xchacha20poly1305_ietf_encrypt")}),"sodium-native"),sodium:Wl(e=>({crypto_aead_xchacha20poly1305_ietf_decrypt:Wl((t,n,r,i)=>e.api.crypto_aead_xchacha20poly1305_ietf_decrypt(t,n,null,r,i),"crypto_aead_xchacha20poly1305_ietf_decrypt"),crypto_aead_xchacha20poly1305_ietf_encrypt:Wl((t,n,r,i)=>e.api.crypto_aead_xchacha20poly1305_ietf_encrypt(t,n,null,r,i),"crypto_aead_xchacha20poly1305_ietf_encrypt")}),"sodium"),"libsodium-wrappers":Wl(e=>({crypto_aead_xchacha20poly1305_ietf_decrypt:Wl((t,n,r,i)=>e.crypto_aead_xchacha20poly1305_ietf_decrypt(null,t,n,r,i),"crypto_aead_xchacha20poly1305_ietf_decrypt"),crypto_aead_xchacha20poly1305_ietf_encrypt:Wl((t,n,r,i)=>e.crypto_aead_xchacha20poly1305_ietf_encrypt(t,n,null,r,i),"crypto_aead_xchacha20poly1305_ietf_encrypt")}),"libsodium-wrappers"),"@stablelib/xchacha20poly1305":Wl(e=>({crypto_aead_xchacha20poly1305_ietf_decrypt:(t,n,r,i)=>new e.XChaCha20Poly1305(i).open(r,t,n),crypto_aead_xchacha20poly1305_ietf_encrypt:(t,n,r,i)=>new e.XChaCha20Poly1305(i).seal(r,t,n)}),"@stablelib/xchacha20poly1305"),"@noble/ciphers/chacha":Wl(e=>({crypto_aead_xchacha20poly1305_ietf_decrypt:(t,n,r,i)=>e.xchacha20poly1305(i,r,n).decrypt(t),crypto_aead_xchacha20poly1305_ietf_encrypt:(t,n,r,i)=>e.xchacha20poly1305(i,r,n).encrypt(t)}),"@noble/ciphers/chacha")},uc=Wl(()=>{throw new Error("Cannot play audio as no valid encryption package is installed.\n- Install one of:\n  - sodium\n  - libsodium-wrappers\n  - @stablelib/xchacha20poly1305\n  - @noble/ciphers.\n- Use the generateDependencyReport() function for more information.\n")},"fallbackError"),dc={crypto_aead_xchacha20poly1305_ietf_encrypt:uc,crypto_aead_xchacha20poly1305_ietf_decrypt:uc};new Promise(async e=>{for(const e of Object.keys(cc))try{const t=await import(e);"libsodium-wrappers"===e&&t.ready&&await t.ready,Object.assign(dc,cc[e](t));break}catch{}e()});var hc=Wl(()=>{},"noop"),pc=class extends Error{static{Wl(this,"AudioPlayerError")}resource;constructor(e,t){super(e.message),this.resource=t,this.name=e.name,this.stack=e.stack}},mc=class{static{Wl(this,"PlayerSubscription")}connection;player;constructor(e,t){this.connection=e,this.player=t}unsubscribe(){this.connection.onSubscriptionRemoved(this),this.player.unsubscribe(this)}},fc=o.from([248,255,254]);function gc(e){return JSON.stringify({...e,resource:Reflect.has(e,"resource"),stepTimeout:Reflect.has(e,"stepTimeout")})}Wl(gc,"stringifyState");var yc=class extends n{static{Wl(this,"AudioPlayer")}_state;subscribers=[];behaviors;debug;constructor(e={}){super(),this._state={status:"idle"},this.behaviors={noSubscriber:"pause",maxMissedFrames:5,...e.behaviors},this.debug=!1===e.debug?null:e=>this.emit("debug",e)}get playable(){return this.subscribers.filter(({connection:e})=>"ready"===e.state.status).map(({connection:e})=>e)}subscribe(e){const t=this.subscribers.find(t=>t.connection===e);if(!t){const t=new mc(e,this);return this.subscribers.push(t),setImmediate(()=>this.emit("subscribe",t)),t}return t}unsubscribe(e){const t=this.subscribers.indexOf(e),n=-1!==t;return n&&(this.subscribers.splice(t,1),e.connection.setSpeaking(!1),this.emit("unsubscribe",e)),n}get state(){return this._state}set state(e){const t=this._state,n=Reflect.get(e,"resource");"idle"!==t.status&&t.resource!==n&&(t.resource.playStream.on("error",hc),t.resource.playStream.off("error",t.onStreamError),t.resource.audioPlayer=void 0,t.resource.playStream.destroy(),t.resource.playStream.read()),"buffering"!==t.status||"buffering"===e.status&&e.resource===t.resource||(t.resource.playStream.off("end",t.onFailureCallback),t.resource.playStream.off("close",t.onFailureCallback),t.resource.playStream.off("finish",t.onFailureCallback),t.resource.playStream.off("readable",t.onReadableCallback)),"idle"===e.status&&(this._signalStopSpeaking(),lc(this)),n&&ac(this);const r="idle"!==t.status&&"playing"===e.status&&t.resource!==e.resource;this._state=e,this.emit("stateChange",t,this._state),(t.status!==e.status||r)&&this.emit(e.status,t,this._state),this.debug?.(`state change:\nfrom ${gc(t)}\nto ${gc(e)}`)}play(e){if(e.ended)throw new Error("Cannot play a resource that has already ended.");if(e.audioPlayer){if(e.audioPlayer===this)return;throw new Error("Resource is already being played by another audio player.")}e.audioPlayer=this;const t=Wl(t=>{"idle"!==this.state.status&&this.emit("error",new pc(t,this.state.resource)),"idle"!==this.state.status&&this.state.resource===e&&(this.state={status:"idle"})},"onStreamError");if(e.playStream.once("error",t),e.started)this.state={status:"playing",missedFrames:0,playbackDuration:0,resource:e,onStreamError:t};else{const n=Wl(()=>{"buffering"===this.state.status&&this.state.resource===e&&(this.state={status:"playing",missedFrames:0,playbackDuration:0,resource:e,onStreamError:t})},"onReadableCallback"),r=Wl(()=>{"buffering"===this.state.status&&this.state.resource===e&&(this.state={status:"idle"})},"onFailureCallback");e.playStream.once("readable",n),e.playStream.once("end",r),e.playStream.once("close",r),e.playStream.once("finish",r),this.state={status:"buffering",resource:e,onReadableCallback:n,onFailureCallback:r,onStreamError:t}}}pause(e=!0){return"playing"===this.state.status&&(this.state={...this.state,status:"paused",silencePacketsRemaining:e?5:0},!0)}unpause(){return"paused"===this.state.status&&(this.state={...this.state,status:"playing",missedFrames:0},!0)}stop(e=!1){return"idle"!==this.state.status&&(e||0===this.state.resource.silencePaddingFrames?this.state={status:"idle"}:-1===this.state.resource.silenceRemaining&&(this.state.resource.silenceRemaining=this.state.resource.silencePaddingFrames),!0)}checkPlayable(){const e=this._state;return"idle"!==e.status&&"buffering"!==e.status&&(!!e.resource.readable||(this.state={status:"idle"},!1))}_stepDispatch(){const e=this._state;if("idle"!==e.status&&"buffering"!==e.status)for(const e of this.playable)e.dispatchAudio()}_stepPrepare(){const e=this._state;if("idle"===e.status||"buffering"===e.status)return;const t=this.playable;if("autopaused"===e.status&&t.length>0&&(this.state={...e,status:"playing",missedFrames:0}),"paused"===e.status||"autopaused"===e.status)return void(e.silencePacketsRemaining>0&&(e.silencePacketsRemaining--,this._preparePacket(fc,t,e),0===e.silencePacketsRemaining&&this._signalStopSpeaking()));if(0===t.length){if("pause"===this.behaviors.noSubscriber)return void(this.state={...e,status:"autopaused",silencePacketsRemaining:5});"stop"===this.behaviors.noSubscriber&&this.stop(!0)}const n=e.resource.read();"playing"===e.status&&(n?(this._preparePacket(n,t,e),e.missedFrames=0):(this._preparePacket(fc,t,e),e.missedFrames++,e.missedFrames>=this.behaviors.maxMissedFrames&&this.stop()))}_signalStopSpeaking(){for(const{connection:e}of this.subscribers)e.setSpeaking(!1)}_preparePacket(e,t,n){n.playbackDuration+=20;for(const n of t)n.prepareAudioPacket(e)}};function bc(e){return new yc(e)}Wl(bc,"createAudioPlayer");var vc=null;function Sc(){return vc?.DAVE_PROTOCOL_VERSION}new Promise(async e=>{try{const e=await import("@snazzah/davey");vc=e}catch{}e()}),Wl(Sc,"getMaxProtocolVersion");var Tc=class extends n{static{Wl(this,"DAVESession")}channelId;userId;protocolVersion;lastTransitionId;pendingTransition;downgraded=!1;consecutiveFailures=0;failureTolerance;reinitializing=!1;session;constructor(e,t,n,r){if(null===vc)throw new Error("Cannot utilize the DAVE protocol as the @snazzah/davey package has not been installed.\n- Use the generateDependencyReport() function for more information.\n");super(),this.protocolVersion=e,this.userId=t,this.channelId=n,this.failureTolerance=r.decryptionFailureTolerance??36}get voicePrivacyCode(){return 0!==this.protocolVersion&&this.session?.voicePrivacyCode?this.session.voicePrivacyCode:null}async getVerificationCode(e){if(!this.session)throw new Error("Session not available");return this.session.getVerificationCode(e)}reinit(){this.protocolVersion>0?(this.session?(this.session.reinit(this.protocolVersion,this.userId,this.channelId),this.emit("debug",`Session reinitialized for protocol version ${this.protocolVersion}`)):(this.session=new vc.DAVESession(this.protocolVersion,this.userId,this.channelId),this.emit("debug",`Session initialized for protocol version ${this.protocolVersion}`)),this.emit("keyPackage",this.session.getSerializedKeyPackage())):this.session&&(this.session.reset(),this.session.setPassthroughMode(!0,10),this.emit("debug","Session reset"))}setExternalSender(e){if(!this.session)throw new Error("No session available");this.session.setExternalSender(e),this.emit("debug","Set MLS external sender")}prepareTransition(e){return this.emit("debug",`Preparing for transition (${e.transition_id}, v${e.protocol_version})`),this.pendingTransition=e,0!==e.transition_id?(0===e.protocol_version&&this.session?.setPassthroughMode(!0,24),!0):(this.executeTransition(e.transition_id),!1)}executeTransition(e){if(this.emit("debug",`Executing transition (${e})`),!this.pendingTransition)return void this.emit("debug",`Received execute transition, but we don't have a pending transition for ${e}`);let t=!1;if(e===this.pendingTransition.transition_id){const n=this.protocolVersion;this.protocolVersion=this.pendingTransition.protocol_version,n!==this.protocolVersion&&0===this.protocolVersion?(this.downgraded=!0,this.emit("debug","Session downgraded")):e>0&&this.downgraded&&(this.downgraded=!1,this.session?.setPassthroughMode(!0,10),this.emit("debug","Session upgraded")),t=!0,this.reinitializing=!1,this.lastTransitionId=e,this.emit("debug",`Transition executed (v${n} -> v${this.protocolVersion}, id: ${e})`)}else this.emit("debug",`Received execute transition for an unexpected transition id (expected: ${this.pendingTransition.transition_id}, actual: ${e})`);return this.pendingTransition=void 0,t}prepareEpoch(e){this.emit("debug",`Preparing for epoch (${e.epoch})`),1===e.epoch&&(this.protocolVersion=e.protocol_version,this.reinit())}recoverFromInvalidTransition(e){this.reinitializing||(this.emit("debug",`Invalidating transition ${e}`),this.reinitializing=!0,this.consecutiveFailures=0,this.emit("invalidateTransition",e),this.reinit())}processProposals(e,t){if(!this.session)throw new Error("No session available");const n=e.readUInt8(0),{commit:r,welcome:i}=this.session.processProposals(n,e.subarray(1),Array.from(t));if(this.emit("debug","MLS proposals processed"),r)return i?o.concat([r,i]):r}processCommit(e){if(!this.session)throw new Error("No session available");const t=e.readUInt16BE(0);try{return this.session.processCommit(e.subarray(2)),0===t?(this.reinitializing=!1,this.lastTransitionId=t):this.pendingTransition={transition_id:t,protocol_version:this.protocolVersion},this.emit("debug",`MLS commit processed (transition id: ${t})`),{transitionId:t,success:!0}}catch(e){return this.emit("debug",`MLS commit errored from transition ${t}: ${e}`),this.recoverFromInvalidTransition(t),{transitionId:t,success:!1}}}processWelcome(e){if(!this.session)throw new Error("No session available");const t=e.readUInt16BE(0);try{return this.session.processWelcome(e.subarray(2)),0===t?(this.reinitializing=!1,this.lastTransitionId=t):this.pendingTransition={transition_id:t,protocol_version:this.protocolVersion},this.emit("debug",`MLS welcome processed (transition id: ${t})`),{transitionId:t,success:!0}}catch(e){return this.emit("debug",`MLS welcome errored from transition ${t}: ${e}`),this.recoverFromInvalidTransition(t),{transitionId:t,success:!1}}}encrypt(e){return 0===this.protocolVersion||!this.session?.ready||e.equals(fc)?e:this.session.encryptOpus(e)}decrypt(e,t){const n=this.session?.ready&&(0!==this.protocolVersion||this.session?.canPassthrough(t));if(e.equals(fc)||!n||!this.session)return e;try{const n=this.session.decrypt(t,vc.MediaType.AUDIO,e);return this.consecutiveFailures=0,n}catch(e){if(this.reinitializing||this.pendingTransition)this.reinitializing?this.emit("debug","Failed to decrypt a packet (reinitializing session)"):this.pendingTransition&&this.emit("debug",`Failed to decrypt a packet (pending transition ${this.pendingTransition.transition_id} to v${this.pendingTransition.protocol_version})`);else if(this.consecutiveFailures++,this.emit("debug",`Failed to decrypt a packet (${this.consecutiveFailures} consecutive fails)`),this.consecutiveFailures>this.failureTolerance){if(!this.lastTransitionId)throw e;this.recoverFromInvalidTransition(this.lastTransitionId)}}return null}destroy(){try{this.session?.reset()}catch{}}};function _c(e){const t=o.from(e),n=t.slice(8,t.indexOf(0,8)).toString("utf8");if(!u(n))throw new Error("Malformed IP address");return{ip:n,port:t.readUInt16BE(t.length-2)}}Wl(_c,"parseLocalPacket");var Ec=class extends n{static{Wl(this,"VoiceUDPSocket")}socket;remote;keepAliveCounter=0;keepAliveBuffer;keepAliveInterval;ping;constructor(e){super(),this.socket=l("udp4"),this.socket.on("error",e=>this.emit("error",e)),this.socket.on("message",e=>this.onMessage(e)),this.socket.on("close",()=>this.emit("close")),this.remote=e,this.keepAliveBuffer=o.alloc(8),this.keepAliveInterval=setInterval(()=>this.keepAlive(),5e3),setImmediate(()=>this.keepAlive())}onMessage(e){this.emit("message",e)}keepAlive(){this.keepAliveBuffer.writeUInt32LE(this.keepAliveCounter,0),this.send(this.keepAliveBuffer),this.keepAliveCounter++,this.keepAliveCounter>4294967295&&(this.keepAliveCounter=0)}send(e){this.socket.send(e,this.remote.port,this.remote.ip)}destroy(){try{this.socket.close()}catch{}clearInterval(this.keepAliveInterval)}async performIPDiscovery(e){return new Promise((t,n)=>{const r=Wl(e=>{try{if(2!==e.readUInt16BE(0))return;const n=_c(e);this.socket.off("message",r),t(n)}catch{}},"listener");this.socket.on("message",r),this.socket.once("close",()=>n(new Error("Cannot perform IP discovery - socket closed")));const i=o.alloc(74);i.writeUInt16BE(1,0),i.writeUInt16BE(70,2),i.writeUInt32BE(e,4),this.send(i)})}},wc=class extends n{static{Wl(this,"VoiceWebSocket")}heartbeatInterval;lastHeartbeatAck;lastHeartbeatSend;missedHeartbeats=0;ping;sequence=-1;debug;ws;constructor(e,t){super(),this.ws=new ll(e),this.ws.onmessage=e=>this.onMessage(e),this.ws.onopen=e=>this.emit("open",e),this.ws.onerror=e=>this.emit("error",e instanceof Error?e:e.error),this.ws.onclose=e=>this.emit("close",e),this.lastHeartbeatAck=0,this.lastHeartbeatSend=0,this.debug=t?e=>this.emit("debug",e):null}destroy(){try{this.debug?.("destroyed"),this.setHeartbeatInterval(-1),this.ws.close(1e3)}catch(e){const t=e;this.emit("error",t)}}onMessage(e){if(e.data instanceof o||e.data instanceof ArrayBuffer){const t=e.data instanceof ArrayBuffer?o.from(e.data):e.data,n=t.readUInt16BE(0),r=t.readUInt8(2),i=t.subarray(3);return this.sequence=n,this.debug?.(`<< [bin] opcode ${r}, seq ${n}, ${i.byteLength} bytes`),void this.emit("binary",{op:r,seq:n,payload:i})}if("string"!=typeof e.data)return;let t;this.debug?.(`<< ${e.data}`);try{t=JSON.parse(e.data)}catch(e){const t=e;return void this.emit("error",t)}t.seq&&(this.sequence=t.seq),t.op===Ca.HeartbeatAck&&(this.lastHeartbeatAck=Date.now(),this.missedHeartbeats=0,this.ping=this.lastHeartbeatAck-this.lastHeartbeatSend),this.emit("packet",t)}sendPacket(e){try{const t=JSON.stringify(e);this.debug?.(`>> ${t}`),this.ws.send(t)}catch(e){const t=e;this.emit("error",t)}}sendBinaryMessage(e,t){try{const n=o.concat([new Uint8Array([e]),t]);this.debug?.(`>> [bin] opcode ${e}, ${t.byteLength} bytes`),this.ws.send(n)}catch(e){const t=e;this.emit("error",t)}}sendHeartbeat(){this.lastHeartbeatSend=Date.now(),this.missedHeartbeats++;const e=this.lastHeartbeatSend;this.sendPacket({op:Ca.Heartbeat,d:{t:e,seq_ack:this.sequence}})}setHeartbeatInterval(e){void 0!==this.heartbeatInterval&&clearInterval(this.heartbeatInterval),e>0&&(this.heartbeatInterval=setInterval(()=>{0!==this.lastHeartbeatSend&&this.missedHeartbeats>=3&&(this.ws.close(),this.setHeartbeatInterval(-1)),this.sendHeartbeat()},e))}},Ac=[ka.AeadXChaCha20Poly1305RtpSize];s.getCiphers().includes("aes-256-gcm")&&Ac.unshift(ka.AeadAes256GcmRtpSize);var kc=o.alloc(24);function Cc(e){return JSON.stringify({...e,ws:Reflect.has(e,"ws"),udp:Reflect.has(e,"udp")})}function Ic(e){const t=e.find(e=>Ac.includes(e));if(!t)throw new Error(`No compatible encryption modes. Available include: ${e.join(", ")}`);return t}function Oc(e){return Math.floor(Math.random()*2**e)}Wl(Cc,"stringifyState"),Wl(Ic,"chooseEncryptionMode"),Wl(Oc,"randomNBit");var Rc=class extends n{static{Wl(this,"Networking")}_state;debug;options;constructor(e,t){super(),this.onWsOpen=this.onWsOpen.bind(this),this.onChildError=this.onChildError.bind(this),this.onWsPacket=this.onWsPacket.bind(this),this.onWsBinary=this.onWsBinary.bind(this),this.onWsClose=this.onWsClose.bind(this),this.onWsDebug=this.onWsDebug.bind(this),this.onUdpDebug=this.onUdpDebug.bind(this),this.onUdpClose=this.onUdpClose.bind(this),this.onDaveDebug=this.onDaveDebug.bind(this),this.onDaveKeyPackage=this.onDaveKeyPackage.bind(this),this.onDaveInvalidateTransition=this.onDaveInvalidateTransition.bind(this),this.debug=t?.debug?e=>this.emit("debug",e):null,this._state={code:0,ws:this.createWebSocket(e.endpoint),connectionOptions:e},this.options=t}destroy(){this.state={code:6}}get state(){return this._state}set state(e){const t=Reflect.get(this._state,"ws"),n=Reflect.get(e,"ws");t&&t!==n&&(t.off("debug",this.onWsDebug),t.on("error",hc),t.off("error",this.onChildError),t.off("open",this.onWsOpen),t.off("packet",this.onWsPacket),t.off("binary",this.onWsBinary),t.off("close",this.onWsClose),t.destroy());const r=Reflect.get(this._state,"udp"),i=Reflect.get(e,"udp");r&&r!==i&&(r.on("error",hc),r.off("error",this.onChildError),r.off("close",this.onUdpClose),r.off("debug",this.onUdpDebug),r.destroy());const o=Reflect.get(this._state,"dave"),s=Reflect.get(e,"dave");o&&o!==s&&(o.off("error",this.onChildError),o.off("debug",this.onDaveDebug),o.off("keyPackage",this.onDaveKeyPackage),o.off("invalidateTransition",this.onDaveInvalidateTransition),o.destroy());const a=this._state;this._state=e,this.emit("stateChange",a,e),this.debug?.(`state change:\nfrom ${Cc(a)}\nto ${Cc(e)}`)}createWebSocket(e,t){const n=new wc(`wss://${e}?v=8`,Boolean(this.debug));return void 0!==t&&(n.sequence=t),n.on("error",this.onChildError),n.once("open",this.onWsOpen),n.on("packet",this.onWsPacket),n.on("binary",this.onWsBinary),n.once("close",this.onWsClose),n.on("debug",this.onWsDebug),n}createDaveSession(e){if(null===Sc()||!1===this.options.daveEncryption||3!==this.state.code&&4!==this.state.code&&5!==this.state.code)return;const t=new Tc(e,this.state.connectionOptions.userId,this.state.connectionOptions.channelId,{decryptionFailureTolerance:this.options.decryptionFailureTolerance});return t.on("error",this.onChildError),t.on("debug",this.onDaveDebug),t.on("keyPackage",this.onDaveKeyPackage),t.on("invalidateTransition",this.onDaveInvalidateTransition),t.reinit(),t}onChildError(e){this.emit("error",e)}onWsOpen(){0===this.state.code?(this.state.ws.sendPacket({op:Ca.Identify,d:{server_id:this.state.connectionOptions.serverId,user_id:this.state.connectionOptions.userId,session_id:this.state.connectionOptions.sessionId,token:this.state.connectionOptions.token,max_dave_protocol_version:!1===this.options.daveEncryption?0:Sc()??0}}),this.state={...this.state,code:1}):5===this.state.code&&this.state.ws.sendPacket({op:Ca.Resume,d:{server_id:this.state.connectionOptions.serverId,session_id:this.state.connectionOptions.sessionId,token:this.state.connectionOptions.token,seq_ack:this.state.ws.sequence}})}onWsClose({code:e}){if((4015===e||e<4e3)&&4===this.state.code){const e=this.state.ws.sequence;this.state={...this.state,code:5,ws:this.createWebSocket(this.state.connectionOptions.endpoint,e)}}else 6!==this.state.code&&(this.destroy(),this.emit("close",e))}onUdpClose(){if(4===this.state.code){const e=this.state.ws.sequence;this.state={...this.state,code:5,ws:this.createWebSocket(this.state.connectionOptions.endpoint,e)}}}onWsPacket(e){if(e.op===Ca.Hello&&6!==this.state.code)this.state.ws.setHeartbeatInterval(e.d.heartbeat_interval);else if(e.op===Ca.Ready&&1===this.state.code){const{ip:t,port:n,ssrc:r,modes:i}=e.d,o=new Ec({ip:t,port:n});o.on("error",this.onChildError),o.on("debug",this.onUdpDebug),o.once("close",this.onUdpClose),o.performIPDiscovery(r).then(e=>{2===this.state.code&&(this.state.ws.sendPacket({op:Ca.SelectProtocol,d:{protocol:"udp",data:{address:e.ip,port:e.port,mode:Ic(i)}}}),this.state={...this.state,code:3})}).catch(e=>this.emit("error",e)),this.state={...this.state,code:2,udp:o,connectionData:{ssrc:r,connectedClients:new Set}}}else if(e.op===Ca.SessionDescription&&3===this.state.code){const{mode:t,secret_key:n,dave_protocol_version:r}=e.d;this.state={...this.state,code:4,dave:this.createDaveSession(r),connectionData:{...this.state.connectionData,encryptionMode:t,secretKey:new Uint8Array(n),sequence:Oc(16),timestamp:Oc(32),nonce:0,nonceBuffer:"aead_aes256_gcm_rtpsize"===t?o.alloc(12):o.alloc(24),speaking:!1,packetsPlayed:0}}}else if(e.op===Ca.Resumed&&5===this.state.code)this.state={...this.state,code:4},this.state.connectionData.speaking=!1;else if(e.op!==Ca.ClientsConnect&&e.op!==Ca.ClientDisconnect||4!==this.state.code&&2!==this.state.code&&3!==this.state.code&&5!==this.state.code){if((4===this.state.code||5===this.state.code)&&this.state.dave)if(e.op===Ca.DavePrepareTransition){this.state.dave.prepareTransition(e.d)&&this.state.ws.sendPacket({op:Ca.DaveTransitionReady,d:{transition_id:e.d.transition_id}}),0===e.d.transition_id&&this.emit("transitioned",0)}else if(e.op===Ca.DaveExecuteTransition){this.state.dave.executeTransition(e.d.transition_id)&&this.emit("transitioned",e.d.transition_id)}else e.op===Ca.DavePrepareEpoch&&this.state.dave.prepareEpoch(e.d)}else{const{connectionData:t}=this.state;if(e.op===Ca.ClientsConnect)for(const n of e.d.user_ids)t.connectedClients.add(n);else t.connectedClients.delete(e.d.user_id)}}onWsBinary(e){if(4===this.state.code&&this.state.dave)if(e.op===Ca.DaveMlsExternalSender)this.state.dave.setExternalSender(e.payload);else if(e.op===Ca.DaveMlsProposals){const t=this.state.dave.processProposals(e.payload,this.state.connectionData.connectedClients);t&&this.state.ws.sendBinaryMessage(Ca.DaveMlsCommitWelcome,t)}else if(e.op===Ca.DaveMlsAnnounceCommitTransition){const{transitionId:t,success:n}=this.state.dave.processCommit(e.payload);n&&(0===t?this.emit("transitioned",t):this.state.ws.sendPacket({op:Ca.DaveTransitionReady,d:{transition_id:t}}))}else if(e.op===Ca.DaveMlsWelcome){const{transitionId:t,success:n}=this.state.dave.processWelcome(e.payload);n&&(0===t?this.emit("transitioned",t):this.state.ws.sendPacket({op:Ca.DaveTransitionReady,d:{transition_id:t}}))}}onDaveKeyPackage(e){3!==this.state.code&&4!==this.state.code||this.state.ws.sendBinaryMessage(Ca.DaveMlsKeyPackage,e)}onDaveInvalidateTransition(e){3!==this.state.code&&4!==this.state.code||this.state.ws.sendPacket({op:Ca.DaveMlsInvalidCommitWelcome,d:{transition_id:e}})}onWsDebug(e){this.debug?.(`[WS] ${e}`)}onUdpDebug(e){this.debug?.(`[UDP] ${e}`)}onDaveDebug(e){this.debug?.(`[DAVE] ${e}`)}prepareAudioPacket(e){const t=this.state;if(4===t.code)return t.preparedPacket=this.createAudioPacket(e,t.connectionData,t.dave),t.preparedPacket}dispatchAudio(){const e=this.state;return 4===e.code&&(void 0!==e.preparedPacket&&(this.playAudioPacket(e.preparedPacket),e.preparedPacket=void 0,!0))}playAudioPacket(e){const t=this.state;if(4!==t.code)return;const{connectionData:n}=t;n.packetsPlayed++,n.sequence++,n.timestamp+=960,n.sequence>=65536&&(n.sequence=0),n.timestamp>=2**32&&(n.timestamp=0),this.setSpeaking(!0),t.udp.send(e)}setSpeaking(e){const t=this.state;4===t.code&&t.connectionData.speaking!==e&&(t.connectionData.speaking=e,t.ws.sendPacket({op:Ca.Speaking,d:{speaking:e?1:0,delay:0,ssrc:t.connectionData.ssrc}}))}createAudioPacket(e,t,n){const r=o.alloc(12);r[0]=128,r[1]=120;const{sequence:i,timestamp:s,ssrc:a}=t;return r.writeUIntBE(i,2,2),r.writeUIntBE(s,4,4),r.writeUIntBE(a,8,4),r.copy(kc,0,0,12),o.concat([r,...this.encryptOpusPacket(e,t,r,n)])}encryptOpusPacket(e,t,n,r){const{secretKey:i,encryptionMode:a}=t,l=r?.encrypt(e)??e;t.nonce++,t.nonce>4294967295&&(t.nonce=0),t.nonceBuffer.writeUInt32BE(t.nonce,0);const c=t.nonceBuffer.subarray(0,4);let u;switch(a){case"aead_aes256_gcm_rtpsize":{const e=s.createCipheriv("aes-256-gcm",i,t.nonceBuffer);return e.setAAD(n),u=o.concat([e.update(l),e.final(),e.getAuthTag()]),[u,c]}case"aead_xchacha20_poly1305_rtpsize":return u=dc.crypto_aead_xchacha20poly1305_ietf_encrypt(l,n,t.nonceBuffer,i),[u,c];default:throw new RangeError(`Unsupported encryption method: ${a}`)}}};function Mc(){return{end:{behavior:0}}}Wl(Mc,"createDefaultAudioReceiveStreamOptions");var Pc=class extends f{static{Wl(this,"AudioReceiveStream")}end;endTimeout;constructor(e){const{end:t,...n}=e;super({...n,objectMode:!0}),this.end=t}push(e){return!e||2!==this.end.behavior&&(1!==this.end.behavior||0===e.compare(fc)&&void 0!==this.endTimeout)||this.renewEndTimeout(this.end),null===e&&S(()=>this.destroy()),super.push(e)}renewEndTimeout(e){this.endTimeout&&clearTimeout(this.endTimeout),this.endTimeout=setTimeout(()=>this.push(null),e.duration)}_read(){}},Dc=class extends n{static{Wl(this,"SSRCMap")}map;constructor(){super(),this.map=new Map}update(e){const t=this.map.get(e.audioSSRC),n={...this.map.get(e.audioSSRC),...e};this.map.set(e.audioSSRC,n),t||this.emit("create",n),this.emit("update",t,n)}get(e){if("number"==typeof e)return this.map.get(e);for(const t of this.map.values())if(t.userId===e)return t}delete(e){if("number"==typeof e){const t=this.map.get(e);return t&&(this.map.delete(e),this.emit("delete",t)),t}for(const[t,n]of this.map.entries())if(n.userId===e)return this.map.delete(t),this.emit("delete",n),n}},Nc=class e extends n{static{Wl(this,"SpeakingMap")}static DELAY=100;users;speakingTimeouts;constructor(){super(),this.users=new Map,this.speakingTimeouts=new Map}onPacket(e){const t=this.speakingTimeouts.get(e);t?clearTimeout(t):(this.users.set(e,Date.now()),this.emit("start",e)),this.startTimeout(e)}startTimeout(t){this.speakingTimeouts.set(t,setTimeout(()=>{this.emit("end",t),this.speakingTimeouts.delete(t),this.users.delete(t)},e.DELAY))}},Uc=o.from([190,222]),xc=class{static{Wl(this,"VoiceReceiver")}voiceConnection;ssrcMap;subscriptions;connectionData;speaking;constructor(e){this.voiceConnection=e,this.ssrcMap=new Dc,this.speaking=new Nc,this.subscriptions=new Map,this.connectionData={},this.onWsPacket=this.onWsPacket.bind(this),this.onUdpMessage=this.onUdpMessage.bind(this)}onWsPacket(e){e.op===Ca.ClientDisconnect?this.ssrcMap.delete(e.d.user_id):e.op===Ca.Speaking&&this.ssrcMap.update({userId:e.d.user_id,audioSSRC:e.d.ssrc})}decrypt(e,t,n,r){e.copy(n,0,e.length-4);let i=12;e.readUint8()>>4&1&&(i+=4);const a=e.subarray(0,i),l=e.subarray(i,e.length-16-4),c=e.subarray(e.length-16-4,e.length-4);switch(t){case"aead_aes256_gcm_rtpsize":{const e=s.createDecipheriv("aes-256-gcm",r,n);return e.setAAD(a),e.setAuthTag(c),o.concat([e.update(l),e.final()])}case"aead_xchacha20_poly1305_rtpsize":return o.from(dc.crypto_aead_xchacha20poly1305_ietf_decrypt(o.concat([l,c]),a,n,r));default:throw new RangeError(`Unsupported decryption method: ${t}`)}}parsePacket(e,t,n,r,i){let o=this.decrypt(e,t,n,r);if(!o)throw new Error("Failed to parse packet");if(0===e.subarray(12,14).compare(Uc)){const t=e.subarray(14).readUInt16BE();o=o.subarray(4*t)}if("ready"===this.voiceConnection.state.status&&(4===this.voiceConnection.state.networking.state.code||5===this.voiceConnection.state.networking.state.code)){const e=this.voiceConnection.state.networking.state.dave;e&&(o=e.decrypt(o,i))}return o}onUdpMessage(e){if(e.length<=8)return;const t=e.readUInt32BE(8),n=this.ssrcMap.get(t);if(!n)return;this.speaking.onPacket(n.userId);const r=this.subscriptions.get(n.userId);if(r&&this.connectionData.encryptionMode&&this.connectionData.nonceBuffer&&this.connectionData.secretKey)try{const t=this.parsePacket(e,this.connectionData.encryptionMode,this.connectionData.nonceBuffer,this.connectionData.secretKey,n.userId);t&&r.push(t)}catch(e){r.destroy(e)}}subscribe(e,t){const n=this.subscriptions.get(e);if(n)return n;const r=new Pc({end:{behavior:0},...t});return r.once("close",()=>this.subscriptions.delete(e)),this.subscriptions.set(e,r),r}},Lc=class extends n{static{Wl(this,"VoiceConnection")}rejoinAttempts;_state;joinConfig;packets;receiver;debug;options;constructor(e,t){super(),this.debug=t.debug?e=>this.emit("debug",e):null,this.rejoinAttempts=0,this.receiver=new xc(this),this.onNetworkingClose=this.onNetworkingClose.bind(this),this.onNetworkingStateChange=this.onNetworkingStateChange.bind(this),this.onNetworkingError=this.onNetworkingError.bind(this),this.onNetworkingDebug=this.onNetworkingDebug.bind(this),this.onNetworkingTransitioned=this.onNetworkingTransitioned.bind(this);const n=t.adapterCreator({onVoiceServerUpdate:Wl(e=>this.addServerPacket(e),"onVoiceServerUpdate"),onVoiceStateUpdate:Wl(e=>this.addStatePacket(e),"onVoiceStateUpdate"),destroy:Wl(()=>this.destroy(!1),"destroy")});this._state={status:"signalling",adapter:n},this.packets={server:void 0,state:void 0},this.joinConfig=e,this.options=t}get state(){return this._state}set state(e){const t=this._state,n=Reflect.get(t,"networking"),r=Reflect.get(e,"networking"),i=Reflect.get(t,"subscription"),o=Reflect.get(e,"subscription");if(n!==r&&(n&&(n.on("error",hc),n.off("debug",this.onNetworkingDebug),n.off("error",this.onNetworkingError),n.off("close",this.onNetworkingClose),n.off("stateChange",this.onNetworkingStateChange),n.off("transitioned",this.onNetworkingTransitioned),n.destroy()),r&&this.updateReceiveBindings(r.state,n?.state)),"ready"===e.status)this.rejoinAttempts=0;else if("destroyed"===e.status)for(const e of this.receiver.subscriptions.values())e.destroyed||e.destroy();"destroyed"!==t.status&&"destroyed"===e.status&&t.adapter.destroy(),this._state=e,i&&i!==o&&i.unsubscribe(),this.emit("stateChange",t,e),t.status!==e.status&&this.emit(e.status,t,e)}addServerPacket(e){this.packets.server=e,e.endpoint?this.configureNetworking():"destroyed"!==this.state.status&&(this.state={...this.state,status:"disconnected",reason:2})}addStatePacket(e){this.packets.state=e,void 0!==e.self_deaf&&(this.joinConfig.selfDeaf=e.self_deaf),void 0!==e.self_mute&&(this.joinConfig.selfMute=e.self_mute),e.channel_id&&(this.joinConfig.channelId=e.channel_id)}updateReceiveBindings(e,t){const n=Reflect.get(t??{},"ws"),r=Reflect.get(e,"ws"),i=Reflect.get(t??{},"udp"),o=Reflect.get(e,"udp");n!==r&&(n?.off("packet",this.receiver.onWsPacket),r?.on("packet",this.receiver.onWsPacket)),i!==o&&(i?.off("message",this.receiver.onUdpMessage),o?.on("message",this.receiver.onUdpMessage)),this.receiver.connectionData=Reflect.get(e,"connectionData")??{}}configureNetworking(){const{server:e,state:t}=this.packets;if(!e||!t||"destroyed"===this.state.status||!e.endpoint)return;const n=new Rc({endpoint:e.endpoint,serverId:e.guild_id,token:e.token,sessionId:t.session_id,userId:t.user_id,channelId:t.channel_id},{debug:Boolean(this.debug),daveEncryption:this.options.daveEncryption??!0,decryptionFailureTolerance:this.options.decryptionFailureTolerance});n.once("close",this.onNetworkingClose),n.on("stateChange",this.onNetworkingStateChange),n.on("error",this.onNetworkingError),n.on("debug",this.onNetworkingDebug),n.on("transitioned",this.onNetworkingTransitioned),this.state={...this.state,status:"connecting",networking:n}}onNetworkingClose(e){"destroyed"!==this.state.status&&(4014===e?this.state={...this.state,status:"disconnected",reason:0,closeCode:e}:(this.state={...this.state,status:"signalling"},this.rejoinAttempts++,this.state.adapter.sendPayload(Kl(this.joinConfig))||(this.state={...this.state,status:"disconnected",reason:1})))}onNetworkingStateChange(e,t){this.updateReceiveBindings(t,e),e.code!==t.code&&("connecting"!==this.state.status&&"ready"!==this.state.status||(4===t.code?this.state={...this.state,status:"ready"}:6!==t.code&&(this.state={...this.state,status:"connecting"})))}onNetworkingError(e){this.emit("error",e)}onNetworkingDebug(e){this.debug?.(`[NW] ${e}`)}onNetworkingTransitioned(e){this.emit("transitioned",e)}prepareAudioPacket(e){const t=this.state;if("ready"===t.status)return t.networking.prepareAudioPacket(e)}dispatchAudio(){const e=this.state;if("ready"===e.status)return e.networking.dispatchAudio()}playOpusPacket(e){const t=this.state;if("ready"===t.status)return t.networking.prepareAudioPacket(e),t.networking.dispatchAudio()}destroy(e=!0){if("destroyed"===this.state.status)throw new Error("Cannot destroy VoiceConnection - it has already been destroyed");Xl(this.joinConfig.guildId,this.joinConfig.group)===this&&Zl(this),e&&this.state.adapter.sendPayload(Kl({...this.joinConfig,channelId:null})),this.state={status:"destroyed"}}disconnect(){return"destroyed"!==this.state.status&&"signalling"!==this.state.status&&(this.joinConfig.channelId=null,this.state.adapter.sendPayload(Kl(this.joinConfig))?(this.state={adapter:this.state.adapter,reason:3,status:"disconnected"},!0):(this.state={adapter:this.state.adapter,subscription:this.state.subscription,status:"disconnected",reason:1},!1))}rejoin(e){if("destroyed"===this.state.status)return!1;const t="ready"!==this.state.status;return t&&this.rejoinAttempts++,Object.assign(this.joinConfig,e),this.state.adapter.sendPayload(Kl(this.joinConfig))?(t&&(this.state={...this.state,status:"signalling"}),!0):(this.state={adapter:this.state.adapter,subscription:this.state.subscription,status:"disconnected",reason:1},!1)}setSpeaking(e){return"ready"===this.state.status&&this.state.networking.setSpeaking(e)}subscribe(e){if("destroyed"===this.state.status)return;const t=e.subscribe(this);return this.state={...this.state,subscription:t},t}get ping(){return"ready"===this.state.status&&4===this.state.networking.state.code?{ws:this.state.networking.state.ws.ping,udp:this.state.networking.state.udp.ping}:{ws:void 0,udp:void 0}}get voicePrivacyCode(){if("ready"===this.state.status&&4===this.state.networking.state.code)return this.state.networking.state.dave?.voicePrivacyCode??void 0}async getVerificationCode(e){if("ready"===this.state.status&&4===this.state.networking.state.code&&this.state.networking.state.dave)return this.state.networking.state.dave.getVerificationCode(e);throw new Error("Session not available")}onSubscriptionRemoved(e){"destroyed"!==this.state.status&&this.state.subscription===e&&(this.state={...this.state,subscription:void 0})}};function Bc(e,t){const n=Kl(e),r=Xl(e.guildId,e.group);if(r&&"destroyed"!==r.state.status)return"disconnected"===r.state.status?r.rejoin({channelId:e.channelId,selfDeaf:e.selfDeaf,selfMute:e.selfMute}):r.state.adapter.sendPayload(n)||(r.state={...r.state,status:"disconnected",reason:1}),r;const i=new Lc(e,t);return ec(i),"destroyed"===i.state.status||i.state.adapter.sendPayload(n)||(i.state={...i.state,status:"disconnected",reason:1}),i}function Fc(e){return Bc({selfDeaf:!0,selfMute:!1,group:"default",...e},{adapterCreator:e.adapterCreator,debug:e.debug,daveEncryption:e.daveEncryption,decryptionFailureTolerance:e.decryptionFailureTolerance})}Wl(Bc,"createVoiceConnection"),Wl(Fc,"joinVoiceChannel");var Gc=["-analyzeduration","0","-loglevel","0","-f","s16le","-ar","48000","-ac","2"],$c=["-analyzeduration","0","-loglevel","0","-acodec","libopus","-f","opus","-ar","48000","-ac","2"],qc=(e=>(e.Arbitrary="arbitrary",e.OggOpus="ogg/opus",e.Opus="opus",e.Raw="raw",e.WebmOpus="webm/opus",e))(qc||{}),jc=class{static{Wl(this,"Node")}edges=[];type;constructor(e){this.type=e}addEdge(e){this.edges.push({...e,from:this})}},Vc=null;function Hc(e){const t=(Vc??=zc()).get(e);if(!t)throw new Error(`Node type '${e}' does not exist!`);return t}function Wc(){try{return jl.FFmpeg.getInfo().output.includes("--enable-libopus")}catch{}return!1}function zc(){const e=new Map;for(const t of Object.values(qc))e.set(t,new jc(t));e.get("raw").addEdge({type:"opus encoder",to:e.get("opus"),cost:1.5,transformer:Wl(()=>new jl.opus.Encoder({rate:48e3,channels:2,frameSize:960}),"transformer")}),e.get("opus").addEdge({type:"opus decoder",to:e.get("raw"),cost:1.5,transformer:Wl(()=>new jl.opus.Decoder({rate:48e3,channels:2,frameSize:960}),"transformer")}),e.get("ogg/opus").addEdge({type:"ogg/opus demuxer",to:e.get("opus"),cost:1,transformer:Wl(()=>new jl.opus.OggDemuxer,"transformer")}),e.get("webm/opus").addEdge({type:"webm/opus demuxer",to:e.get("opus"),cost:1,transformer:Wl(()=>new jl.opus.WebmDemuxer,"transformer")});const t={type:"ffmpeg pcm",to:e.get("raw"),cost:2,transformer:Wl(e=>new jl.FFmpeg({args:["-i","string"==typeof e?e:"-",...Gc]}),"transformer")};if(e.get("arbitrary").addEdge(t),e.get("ogg/opus").addEdge(t),e.get("webm/opus").addEdge(t),e.get("raw").addEdge({type:"volume transformer",to:e.get("raw"),cost:.5,transformer:Wl(()=>new jl.VolumeTransformer({type:"s16le"}),"transformer")}),Wc()){const t={type:"ffmpeg ogg",to:e.get("ogg/opus"),cost:2,transformer:Wl(e=>new jl.FFmpeg({args:["-i","string"==typeof e?e:"-",...$c]}),"transformer")};e.get("arbitrary").addEdge(t),e.get("ogg/opus").addEdge(t),e.get("webm/opus").addEdge(t)}return e}function Kc(e,t,n=Hc("opus"),r=[],i=5){if(e===n&&t(r))return{cost:0};if(0===i)return{cost:Number.POSITIVE_INFINITY};let o;for(const s of e.edges){if(o&&s.cost>o.cost)continue;const e=Kc(s.to,t,n,[...r,s],i-1),a=s.cost+e.cost;(!o||a<o.cost)&&(o={cost:a,edge:s,next:e})}return o??{cost:Number.POSITIVE_INFINITY}}function Jc(e){const t=[];let n=e;for(;n?.edge;)t.push(n.edge),n=n.next;return t}function Yc(e,t){return Jc(Kc(Hc(e),t))}Wl(Hc,"getNode"),Wl(Wc,"canEnableFFmpegOptimizations"),Wl(zc,"initializeNodes"),Wl(Kc,"findPath"),Wl(Jc,"constructPipeline"),Wl(Yc,"findPipeline");var Qc=class{static{Wl(this,"AudioResource")}playStream;edges;metadata;volume;encoder;audioPlayer;playbackDuration=0;started=!1;silencePaddingFrames;silenceRemaining=-1;constructor(e,t,n,r){this.edges=e,this.playStream=t.length>1?g(t,hc):t[0],this.metadata=n,this.silencePaddingFrames=r;for(const e of t)e instanceof jl.VolumeTransformer?this.volume=e:e instanceof jl.opus.Encoder&&(this.encoder=e);this.playStream.once("readable",()=>this.started=!0)}get readable(){if(0===this.silenceRemaining)return!1;const e=this.playStream.readable;return e||(-1===this.silenceRemaining&&(this.silenceRemaining=this.silencePaddingFrames),0!==this.silenceRemaining)}get ended(){return this.playStream.readableEnded||this.playStream.destroyed||0===this.silenceRemaining}read(){if(0===this.silenceRemaining)return null;if(this.silenceRemaining>0)return this.silenceRemaining--,fc;const e=this.playStream.read();return e&&(this.playbackDuration+=20),e}},Xc=Wl(e=>e.some(e=>"volume transformer"===e.type),"VOLUME_CONSTRAINT"),Zc=Wl(()=>!0,"NO_CONSTRAINT");function eu(e){return e instanceof jl.opus.Encoder?{streamType:"opus",hasVolume:!1}:e instanceof jl.opus.Decoder?{streamType:"raw",hasVolume:!1}:e instanceof jl.VolumeTransformer?{streamType:"raw",hasVolume:!0}:e instanceof jl.opus.OggDemuxer||e instanceof jl.opus.WebmDemuxer?{streamType:"opus",hasVolume:!1}:{streamType:"arbitrary",hasVolume:!1}}function tu(e,t={}){let n=t.inputType,r=Boolean(t.inlineVolume);if("string"==typeof e)n="arbitrary";else if(void 0===n){const t=eu(e);n=t.streamType,r=r&&!t.hasVolume}const i=Yc(n,r?Xc:Zc);if(0===i.length){if("string"==typeof e)throw new Error(`Invalid pipeline constructed for string resource '${e}'`);return new Qc([],[e],t.metadata??null,t.silencePaddingFrames??5)}const o=i.map(t=>t.transformer(e));return"string"!=typeof e&&o.unshift(e),new Qc(i,o,t.metadata??null,t.silencePaddingFrames??5)}function nu(e,t,n){if(0===n)return;const r=E(e,"./package.json");try{const e=zl(r);if(e.name!==t)throw new Error("package.json does not match");return e}catch{return nu(E(e,".."),t,n-1)}}function ru(e){try{if("@discordjs/voice"===e)return"0.19.0";const t=nu(w(zl.resolve(e)),e,3);return t?.version??"not found"}catch{return"not found"}}function iu(e){const t=new AbortController,n=setTimeout(()=>t.abort(),e);return t.signal.addEventListener("abort",()=>clearTimeout(n)),[t,t.signal]}function ou(e){const t=e.readUInt8(9),n=e.readUInt32LE(12);return 2===t&&48e3===n}Wl(eu,"inferStreamType"),Wl(tu,"createAudioResource"),Wl(nu,"findPackageJSON"),Wl(ru,"version"),Wl(function(){const e=[],t=Wl(t=>e.push(`- ${t}: ${ru(t)}`),"addVersion");e.push("Core Dependencies"),t("@discordjs/voice"),t("prism-media"),e.push(""),e.push("Opus Libraries"),t("@discordjs/opus"),t("opusscript"),e.push(""),e.push("Encryption Libraries"),e.push("- native crypto support for aes-256-gcm: "+(a().includes("aes-256-gcm")?"yes":"no")),t("sodium-native"),t("sodium"),t("libsodium-wrappers"),t("@stablelib/xchacha20poly1305"),t("@noble/ciphers"),e.push(""),e.push("DAVE Libraries"),t("@snazzah/davey"),e.push(""),e.push("FFmpeg");try{const t=jl.FFmpeg.getInfo();e.push(`- version: ${t.version}`),e.push("- libopus: "+(t.output.includes("--enable-libopus")?"yes":"no"))}catch{e.push("- not found")}return["-".repeat(50),...e,"-".repeat(50)].join("\n")},"generateDependencyReport"),Wl(iu,"abortAfter"),Wl(async function(e,t,n){if(e.state.status!==t){const[i,o]="number"==typeof n?iu(n):[void 0,n];try{await r(e,t,{signal:o})}finally{i?.abort()}}return e},"entersState"),Wl(ou,"validateDiscordOpusHead"),Wl(async function(e,t=1024,n=ou){return new Promise((r,i)=>{if(e.readableObjectMode)return void i(new Error("Cannot probe a readable stream in object mode"));if(e.readableEnded)return void i(new Error("Cannot probe a stream that has ended"));let s,a=o.alloc(0);const l=Wl(t=>{e.off("data",p),e.off("close",h),e.off("end",h),e.pause(),s=t,e.readableEnded?r({stream:f.from(a),type:t}):(a.length>0&&e.push(a),r({stream:e,type:t}))},"finish"),c=Wl(e=>t=>{n(t)&&l(e)},"foundHead"),u=new jl.opus.WebmDemuxer;u.once("error",hc),u.on("head",c("webm/opus"));const d=new jl.opus.OggDemuxer;d.once("error",hc),d.on("head",c("ogg/opus"));const h=Wl(()=>{s||l("arbitrary")},"onClose"),p=Wl(n=>{a=o.concat([a,n]),u.write(n),d.write(n),a.length>=t&&(e.off("data",p),e.pause(),v.nextTick(h))},"onData");e.once("error",i),e.on("data",p),e.once("close",h),e.once("end",h)})},"demuxProbe");const su="346962599771897859",au="351854934368583681",lu="346962600212561920",cu="671628531717111808",uu="346963530836344832",du="644722296929648641",hu="325981722082672661",pu="391408369891672064",mu="309427494778306560",fu=[mu,"324993843005227008"],gu=["Admins","Trusted Servant","Mods","Help"],yu="ADMINISTRATOR",bu=async function({app:e,router:t,Discord:n,wikiTools:r,client:i,guildCheckin:o,_:s,getLocalizedSetting:a,fs:l,settings:c,discordTTS:u}){const{PUPPET_AUTHOR:d=mu,ADMIN_PERMISSION:h=yu,ADMIN_IDS:p=fu,ADMIN_ROLES:m=gu,enabledCommandGroups:f=["*"],disabledCommandGroups:g=[]}=c,y=f.includes("*"),b=await Promise.all([["socialInfo",()=>(({ADMIN_ROLES:e,client:t})=>({users:{re:/!users\b/iv,action(t){const{guild:n}=t,r=n?.members.cache.filter(e=>"offline"!==e.presence?.status).size,i=n?.members.cache.filter(t=>!!t.roles.cache.some(t=>e.includes(t.name))&&"offline"!==t.presence?.status);t.channel.send(`There ${1===r?"is":"are"} currently ${r} user${1===r?"":"s"} online, including ${i?.size} admin/mod/helper(s).`),console.log(`Users command issued by ${t.author.username}.`)}},seen:{re:/!seen\b/iv,async action(e){const n=e.content.split(" ").filter(e=>!(e.includes("391405681795923968")||e.includes("847456996738334730")||"!seen"===e)).join(" "),r=[],i=t.users.cache.find(e=>e.username===n);if(!i)return void r.push(`I haven't seen ${n} lately.`);const o=await e.guild.members.fetch(i),{channel:s}=e,a=(await s.messages.fetch({limit:100})).filter(e=>e.author.id===i.id).first();if(a){const e="dnd"===o.presence?.status?"busy":o.presence?.status,t=new Date(a.createdAt),i=new Date,l=i>t?Number(i)-Number(t):0;r.push(`${n} is now ${e}, and was last seen in ${s} ${or(l/1e3)} ago.`)}else{const e="dnd"===o.presence?.status?"busy":o.presence?.status;r.push(`${n} is now ${e}; I haven't seen them lately.`)}e.channel.send(r.join("\n")),console.log(`Seen command issued by ${e.author.username}.`)}}}))({ADMIN_ROLES:m,client:i})],["bahaiWritings",()=>(async({fs:e,settings:t,client:n,Discord:r})=>{const i=await sr({fs:e,settings:t});return{readBook:{re:/\bread (?<refName>\S.+) (?<index>[\-.\d]+)\b/iv,action:async e=>await i.readBook(e,n.user.avatarURL(),r)},showList:{re:/\bread list$/iv,action:async e=>await i.showList(e)},readRandom:{re:/\bread random$/iv,action:async e=>await i.readRandom(e,n.user.avatarURL(),r)},read:{re:/!read\b/iv,helpInfo:{name:"!read [list | random | *‹text›* *‹chapter›*]",value:"Reads from the Bahá'í Writings. Displays an excerpt from given *chapter* of *text*. Available texts are displayed using `!read list`; `!read random` displays a random passage from available texts."},action:e=>i.reader(e)}}})({fs:l,settings:c,client:i,Discord:n})],["bahaiWikis",()=>ar({wikiTools:r,client:i,_:s})],["admin",()=>(({ADMIN_IDS:e,ADMIN_PERMISSION:t,PUPPET_AUTHOR:n,discordTTS:r,guildCheckin:i,_:o})=>({speak:{re:/!speak/iv,async action(t){if(!e.includes(t.author.id))return;const n=t.content.split(" ").slice(2).join(" "),i=t.member?.voice.channel;if(!i)return void console.log("Message member not in a voice channel with `channel`");const s=Fc({channelId:i.id,guildId:i.guild.id,adapterCreator:i.guild.voiceAdapterCreator}),a=bc();a.play(tu(r.getVoiceStream(n))),s.subscribe(a),console.log(o("speakingBegun"))}},puppet:{re:/!puppet (?:\S.+) \| (?:\S.+)/iv,action(t){e.includes(t.author.id)&&(function({content:e,guild:t,author:n,channel:r},i){if(n.id===i.authorID){const n=/!puppet (?<userChannel>\S.+) \| (?<msg>\S.+)/iv,i=e.match(n);if(i){const{userChannel:e,msg:n}=i.groups,o=t?.channels.cache.find(t=>t.name===e);o&&o.isTextBased()?o.send(n):r.send(`Channel ${e} does not exist!`)}}}(t,{authorID:n}),console.log(`Puppet command issued by ${t.author.username}.`))}},echo:{re:/!echo\b/iv,action(t){e.includes(t.author.id)&&(t.channel.send(`Here's what you said, ${t.author.username}: \`\`${t.content}\`\``),console.log(`Echo command issued by ${t.author.username}.`))}},checkin:{re:/!checkin\b/iv,async action(t){if(e.includes(t.author.id)){console.log(`Checkin command issued by ${t.author.username}.`);try{return await i()}catch(e){console.error("Error checking in",e)}}}}}))({ADMIN_IDS:p,ADMIN_PERMISSION:h,PUPPET_AUTHOR:d,guildCheckin:o,_:s,discordTTS:u})],["bahaiInfo",()=>(({client:e,Discord:t})=>({info:{re:/!info/iv,action(n){const r=new t.EmbedBuilder;r.setAuthor({name:"BahaiBot",iconURL:e.user?.avatarURL()??void 0}),r.setDescription("Bahá'í Bot for Discord\n"),r.addFields([{name:"Support Server",value:"[Invite link](https://discord.gg/NE6dJaw)",inline:!1}]),n.channel.send({embeds:[r]})}},badi:{re:/\bbad[íi]\b/iv,action(t){const n=e.emojis.cache.find(e=>"9star"===e.name);t.channel.send(`OK ${t.author.username}, here you go. https://bahaipedia.org/Badí‘${n?` ${n.toString()}`:""}`)}}}))({client:i,Discord:n})],["bahaiSalutations",()=>(({client:e})=>{const t=t=>{const n=e.emojis.cache.find(e=>"9star"===e.name);return n&&t.react(n),n};return{abha:{re:/\b(?:all[aá]h['’´\-]?[uo]?['’´\-]?abh[aá]|abh[aá])/iv,action(e){const n=t(e);e.channel.send(`Alláh-u-Abhá, ${e.author.username}! ${n?n.toString():""}`)},notMentioned:{check:e=>Boolean(e.mentions.members?.first()),action(e){t(e)}}},nawruz:{re:/\b(?:(?:happy|joyous)\s?n[ao]w[\- ]?ro?[uú]z|n[ao]w[\- ]?ro?[uú]z\s?(?:m[uo]b[aá]r[aá]k))\b/iv,action(n){const r=t(n),i=e.emojis.cache.find(e=>"sabzi"===e.name);n.channel.send(`Happy Naw-Rúz! ${r?r.toString():""}${i?i.toString():""}`)}},ridvan:{re:/\b(?:(?:happy|joyous)\s?r[ie][ḍdz][vw][aá]n|r[ie][ḍdz][vw][aá]n\s?(?:m[uo]b[aá]r[aá]k))\b/iv,action(e){const n=t(e);e.channel.send(`Happy Ridván! ${n?n.toString():""}`)}}}})({client:i})],["salutations",()=>({sup:{re:/\b(?:su+p|wh[au]+[sz]+[au]+p|(?:(?:what|wut)['’´]?s (?:up|new|good|gud|cookin[g'’´])))\b/iv,action(e){const t=["Not much","Not too much","Not a lot","Not very much"],n=t[Math.floor(Math.random()*t.length)],r=["Just glad to be here.","Just happy to be here.","Same as usual.","Same old, same old.","Just like usual.","Just waiting to be of service.","Just waiting to be of service to somebody.","Just waiting to be of service to someone.","Just waiting for questions to answer.","Just waiting for questions I can help answer."],i=r[Math.floor(Math.random()*r.length)];e.channel.send(`${n}, ${e.author.username}. ${i}`)}},morning:{re:/\bgood morning\b/iv,action(e){e.channel.send(`Good morning ${e.author.username}! :coffee:`)}},afternoon:{re:/\bgood afternoon\b/iv,action(e){e.channel.send(`Good afternoon ${e.author.username}!`)}},evening:{re:/\bgood evening\b/iv,action(e){e.channel.send(`Good evening ${e.author.username}!`)}},hello:{re:/\b(?:h[uea]llo|hi|hi there|howdy|yo|heya|sal[aá]{1,2}m)\b/iv,action(e){e.channel.send(`Hello ${e.author.username}!`)}},welcome:{re:/^(?:everyone|everybody)?\W*(?:please|pleez|pls|plz)?\W*(?:\W*welcome|.*>+\W*welcome\b|.*\bwb\b)/iv,action(e){e.channel.send(`Thanks, ${e.author.username}! :wave:`)},notMentioned:{check:e=>Boolean(e.mentions.members?.first()),action(e){e.react("👋")}}}})],["lightHearted",()=>({coffee:{re:/\u{2615}/u,action(e){e.channel.send(":coffee:")},notMentioned:{action(e){e.react("☕")}}},tea:{re:/\u{1F375}/u,action(e){e.channel.send(":tea:")},notMentioned:{action(e){e.react("🍵")}}},popcorn:{re:/\u{1F37F}/u,action(e){e.channel.send(":popcorn:")},notMentioned:{action(e){e.react("🍿")}}},unladen:{re:/\bunladen\sswallow\b/iv,action(e){e.channel.send("What do you mean, an African, or European swallow?")}},bruh:{re:/\bbruh\b/iv,action(e){e.channel.send("Bruh.")}},goodbot:{re:/\bgood\s?bot\b/iv,action(e){e.react("😊"),e.channel.send("Thanks!")}},badbot:{re:/\bbad\s?bot\b/iv,action(e){e.react("☹️"),e.channel.send("Sorry.")}},repeating:{re:/\brepeating yourself\b/iv,action(e){const t=["Oops, sorry...","Oops, sorry!","Sorry!","Oops!","Sorry...","Sorry... :sweat_smile:","Oops, sorry... :sweat_smile:"],n=t[Math.floor(Math.random()*t.length)],r=["I tend to do that, don't I?","I guess I tend to do that, don't I?","I suppose I tend to do that, don't I?","I'm just a chatbot, after all.","I am a chatbot, after all.","I *am* a chatbot, after all.","That does happen a lot, doesn't it."],i=r[Math.floor(Math.random()*r.length)];e.channel.send(`${n} ${i}`)}},santacat:{re:/\b(?:my|santa['’´]?s)\scat\b/iv,action(e){const t=["Not telling.","That's a secret to everybody.","Didn't somebody make a meme out of it?","Which one? This one? :cat2:","Wouldn't you like to know.","Who do you think I am? Schrödinger?"],n=t[Math.floor(Math.random()*t.length)];e.channel.send(n)}},ping:{re:/\bping\b/iv,action(e){e.channel.send("Pong :ping_pong:")}}})]].map(async([e,t])=>!y&&!f.includes(e)||g.includes(e)?null:await t())),v=b.reduce((e,t)=>e={...e,...t},{});return(({commands:e})=>{const t={re:/!help\b/iv,helpInfo:{name:"!help",value:"Displays help text."},action(e){e.channel.send({content:`Here are the instructions you need, ${e.author.username}.`,embeds:[{color:8359053,description:"I can respond to well-formed questions about basic Baha'i topics. As well, the following commands can help me process your requests. Make sure to mention me when trying to use them, like this: `@BahaiBot !help`",fields:n}]})}};e.help=t;const n=Object.values(e).map(({helpInfo:e})=>e).filter(Boolean)})({commands:v}),v.default=(({app:e,router:t,client:n,Discord:r,_:i,settings:o})=>({re:/[\s\S]*/u,async action(s){const a=s.content.trimStart().replaceAll(/<@!?(?<snowflake>\d+)>/gv,(e,t,r,i,{snowflake:o})=>{if(o===n.user?.id)return"";const{username:s}=n.users.resolve(o);return s}),l=s.author.id,c={session:e.projectAgentSessionPath(o.PROJECT_ID,l),queryInput:{text:{text:a,languageCode:i.resolvedLocale}}};await async function(){try{const[o]=await e.detectIntent(c);return await t(o,s,n,r,i),o}catch(e){throw s.channel.send(`<@${s.author.id}>, I couldn't process your question at the moment.`),e}}()}}))({app:e,router:t,client:i,Discord:n,_:s,settings:c}),v},vu=(e,t,n,r,i)=>{console.log(i("routerResponse"),e);const o=e.queryResult?.fulfillmentMessages?.[0]?.text?.text?.[0];t.channel.send(o)},Su={debugCheckin:["Hi","Hi","Hi there","Hello","Hello","Hello there","Hey","What's up","What's new"],fyiCheckin:{general:["Hi, everyone.","Hi, everybody.","Hi, everyone.","Hi there, everyone!","Hello, everyone.","Hello there, everyone.","Alláh-u-Abhá!","Alláh’u’abhá, everyone.","Alláh-u-Abhá, everyone.","What's cooking, everybody?","Hey all, what's cooking?","What's up, everyone?","What's good, everyone?","Hey everyone, what's new?","Hey everybody, what's up?","Hey, what's up everyone?","Hi everybody, what's up?"],ircBridge:["Hello IRC.","Hi, everybody.","Hi, everyone.","Hi there, everyone!","Hello, everyone.","Hello there, everyone.","Alláh-u-Abhá!","Alláh-u-Abhá, IRC.","Alláh-u-Abhá, everyone.","What's cooking, everybody?","Hey all, what's cooking?","What's up, everyone?","What's good, everyone?","Hey everyone, what's new?","Hey everybody, what's up?","Hey, what's up everyone?","Hi everybody, what's up?"]},guildMemberAdd:["Hi","Hi","Hi there","Hello","Hello","Hello there","Hey","What's up","What's new"]},Tu={guildMemberAdd:e=>["Happy to have you with us!","Pleased to have you with us!","Great to have you with us!","It's great to have you with us!","It's a pleasure to have you with us!","Pleased to have you with us! :smile:","It's a pleasure to have you with us! :smile:","Happy to have you with us! :smile:","Great to have you with us! :smile:",`Happy to have you with us! ${e}`,"Glad you could join us! :smile:",`Glad you could join us! ${e}`,"Happy to have you with us today!","Pleased to have you with us today!","Great to have you with us today!","It's great to have you with us today!","It's a pleasure to have you with us today!","Pleased to have you with us today! :smile:","It's a pleasure to have you with us today! :smile:","Happy to have you with us today! :smile:","Great to have you with us today! :smile:",`Happy to have you with us today! ${e}`,"Glad you could join us today! :smile:",`Glad you could join us today! ${e}`]},_u=Date.now();const Eu="en-US",wu=[Eu],Au=async({checkins:e=!1,locales:t=("undefined"==typeof navigator?[Eu]:[...navigator.languages.filter(e=>wu.includes(e)),Eu]),fetch:n=globalThis.fetch,i18n:r=globalThis.intlDom?.i18n,striptags:i=globalThis.striptags,client:o,Discord:s,discordTTS:a,dialogflow:l,fs:c,getSettings:u,getPath:d=e=>e,commandInterval:h=2e3,rateLimiter:p=new ir.RateLimiter(1,h),exitNoThrow:m=!1})=>{const f=o||new s.Client({intents:[s.GatewayIntentBits.Guilds,s.GatewayIntentBits.GuildMessages,s.GatewayIntentBits.MessageContent]}),g=JSON.parse(await c.readFile(d("settings.json"),"utf8")),y="function"==typeof u?u:e=>e.development,b=y(g),v=new l.SessionsClient({keyFilename:d(b.PROJECT_JSON)}),{token:S,disableNotMentioned:T=!1,welcomeChannel:_="welcome",awesomeEmoji:E="awesome",helpTeam:w=du,rulesChannel:A=au}=b,k=await r({localesBasePath:"src",locales:t}),C=(e,{defaultValue:t}={})=>b?.locales?.[k.resolvedLocale][e]||t||k(e),I=function({fetch:e,striptags:t,_:n}){return{async bpGetToday(){const r=Date.now(),i={action:"parse",page:`Bahaipedia:Today_in_History/${new Intl.DateTimeFormat(n.resolvedLocale,{month:"long",day:"numeric"}).format(r).toString()}`,prop:"text",format:"json"},o=`https://bahaipedia.org/api.php?${new URLSearchParams({...i,origin:"*"})}`;try{const n=(await(await e(o)).json()).parse.text["*"].split("</center>\n");return t(n.length>1?n[1]:n[0])}catch(e){return console.error("Error retrieving JSON for today URL",o,e),""}},async wikiGetRandom(t,n,r){const i=`https://${n}/api.php`,o={action:"query",indexpageids:"1",prop:"bahai.media"===n?"imageinfo":"",iiprop:"bahai.media"===n?"url":"",generator:"random",grnnamespace:"bahai.media"===n?"6":"0",grnlimit:String(t),format:"json"},s=`${i}?${new URLSearchParams({...o,origin:"*"})}`;try{const t=await(await e(s)).json(),i=t.query.pages[t.query.pageids[0]].title;return{title:i,url:`https://${n}/${r?"wiki/":""}${encodeURIComponent(i)}`,img:"bahai.media"===n?t.query.pages[t.query.pageids[0]].imageinfo[0].url:""}}catch(e){return console.error("Error retrieving random wiki URL",s,e),""}},async wikiGetURL(t,n,r,i=!1){const o=`https://${r}/api.php`,s={action:"query",list:"search",generator:"search",prop:"bahai.media"===r?"imageinfo":"",iiprop:"bahai.media"===r?"url":"",srsearch:t,srnamespace:"bahai.media"===r?"6":"0",srlimit:String(n),srprop:"snippet",gsrsearch:t,gsrnamespace:"bahai.media"===r?"6":"0",gsrlimit:String(n),format:"json"},a=`${o}?${new URLSearchParams({...s,origin:"*"})}`;try{const t=await(await e(a)).json();if(0!==t.query.searchinfo.totalhits){const e=t.query.search[0].title;return{title:e,url:`https://${r}/${i?"wiki/":""}${encodeURIComponent(e)}`,snippet:t.query.search[0].snippet,img:"bahai.media"===r?t.query.pages[t.query.search[0].pageid].imageinfo[0].url:""}}return!1}catch(e){return void console.error("Error retrieving wiki search URL",a,e)}}}}({fetch:n,striptags:i,_:k}),O=function({client:e,fs:t,wikiTools:n,settings:r,getLocalizedSetting:i,_:o}){const{bstarEmoji:s="bstar",checkinGuilds:a=[{guildID:hu,guildName:i("labServerName"),guildChannels:[{id:pu,greetings:i("debugCheckin",{defaultValue:Su.debugCheckin}),reportUptime:!0}]},{guildID:su,guildName:i("serverName"),guildChannels:[{id:lu,greetings:i("fyiCheckin-general",{defaultValue:Su.fyiCheckin.general})},{id:cu,greetings:i("fyiCheckin-ircBridge",{defaultValue:Su.fyiCheckin.ircBridge})},{id:uu,bpToday:!0}]}]}=r;return async function(r=Date.now()){let i;for(const{guildID:t,guildName:n,guildChannels:r}of a){const s=e.guilds.cache.get(t);if(s&&(console.log(o("checkingIn",{guildName:n})),i=r.map(e=>{const{id:t,greetings:r}=e,i="bpToday"in e&&e.bpToday,o="reportUptime"in e&&e.reportUptime;return{guildName:n,bpToday:i,greetings:r,reportUptime:o,channel:s.channels.cache.get(t)}}).filter(({channel:e})=>e),!i.length))return}if(!i)return;const l={list:[i.map(({channel:e})=>{const t=e?.name;return`#${t}`})]},c="greet.guild.txt";try{const e=await t.stat(c),n=(r-new Date(e.mtime).getTime())/1e3;console.log(o("lastGreeting",{relativeTime:or(Math.floor(n)),channels:l}))}catch(e){console.log(o("firstGreet",{channels:l}))}let u;i.some(({bpToday:e})=>e)&&(u=await n.bpGetToday());for(const{channel:t,bpToday:n,greetings:a,guildName:l,reportUptime:c}of i){if(console.log(o("channelFound",{guildName:l,channelName:t?.name})),a){const e=a[Math.floor(Math.random()*a.length)];if(c){const n=new Date,i=r-_u;t?.send(o("uptimeGreet",{greet:e,now:n.toString(),uptime:or(Math.floor(i/1e3))}))}else t?.send(e)}if(!n||!u)continue;const i=e.emojis.cache.find(e=>e.name===s);console.log(o("postingTodayInHistory")),t?.send({content:o("hereIsQueryResult"),embeds:[{color:3447003,description:o("todayInHistoryResult",{today:{date:[Date.now(),{month:"long",day:"numeric"}]},bstar:i?.toString()??"",todayInHistoryResult:u})}]})}try{await t.writeFile(c,r.toString()),console.log(o("greetingSent",{channels:l}))}catch(e){console.error(o("errorWritingGuild",{guildFileName:c}),e)}}}({client:f,fs:c,wikiTools:I,settings:b,getLocalizedSetting:C,_:k}),R=await bu({app:v,router:vu,Discord:s,wikiTools:I,client:f,guildCheckin:O,_:k,getLocalizedSetting:C,fs:c,settings:b,discordTTS:a});return f.on("clientReady",()=>{console.log(k("BahaiBotOnline")),e&&(f.user?.setPresence({activities:[{name:"@BahaiBot !help",type:0}]}),function(e,t=1e3,{exitNoThrow:n=!1}={}){let r,i=Date.now()+t;r=setTimeout(function o(){const s=Date.now()-i;if(s>t){if(n)return;throw new Error(`Unexpected condition: ${s} time drift exceeding interval ${t}`)}const a=e(t)||0;i+=t+a,r=setTimeout(o,Math.max(0,t-s)+a)},t)}(e=>{const t=new Date;if(12===t.getUTCHours()){if(t.getUTCMinutes()<15)return 24e5-e;O()}return 0},3e6,{exitNoThrow:m}))}),f.on("messageCreate",async e=>{const t=e;if(f.user&&t.mentions.has(f.user)){if((e=>p.take(e.author.id))(t))return;for(const e of Object.values(R))if(e.re.test(t.content)){try{await e.action(t)}catch(e){console.error(k("errorExecuting")),console.error(t.content,e)}f.emit("bahaibot:command-finished");break}f.emit("bahaibot:command-finished")}else if(!T){const e=Object.values(R).filter(e=>e.notMentioned);for(const{re:n,notMentioned:r}of e)if(n.test(t.content)&&(!r?.check||r.check(t))){await(r?.action(t)),f.emit("bahaibot:command-finished");break}f.emit("bahaibot:command-finished")}}),f.on("guildMemberAdd",e=>{const t=e.guild.channels.cache.find(e=>e.name===_);if(!t||!t.isTextBased())return;const n=f.emojis.cache.find(e=>e.name===E),r=C("greet-guildMemberAdd",{defaultValue:Su.guildMemberAdd}),i=r[Math.floor(Math.random()*r.length)],o=C("happies",{defaultValue:Tu}),s=n?o.guildMemberAdd(n.toString()):o.guildMemberAdd(":smile:"),a=s[Math.floor(Math.random()*s.length)];t.send(k("guildMemberAddWelcome",{userID:`<@!${e.user.id}>`,greet:i,happy:a,serverName:C("serverName"),helpTeam:`<@&${w}>`,rulesChannel:e.guild.channels.cache.get(A)?.toString()??""}))}),f.login(S),{client:f,botCommands:R,guildCheckin:O,system:g,getSettings:y}},{hash:ku,search:Cu}=location,Iu=ku.slice(1),Ou=[new URLSearchParams(Iu).get("locales")||new URLSearchParams(Cu).get("locales")||"en_US"],Ru=Boolean(new URLSearchParams(Iu).get("checkins")||new URLSearchParams(Cu).get("checkins")),Mu=e=>`${location.href.replace(/\/$/v,"")}/${e}`,Pu={readFile:async e=>await(await fetch("object"==typeof e&&"href"in e&&e.href?e.href:e)).text(),writeFile(e,t){localStorage.setItem(`bahaibot-${e}`,String(t||Date.now()))},stat:e=>Promise.resolve({mtime:new Date(Number(localStorage.getItem(`bahaibot-${e}`)))}),unlink(e){localStorage.removeItem(e)}};function Du(e){return Au({checkins:Ru,locales:Ou,getPath:Mu,fs:Pu,fetch:fetch,i18n:we,striptags:e=>Gn(e).result,...e})}export{Du as default};
//# sourceMappingURL=integratedClientServerBot.esm.min.js.map
